"
","<p>In Python, how do you get the last element of a list?</p>","
"
"
",<p><code>some_list[-1]</code> is the shortest and most Pythonic.</p>,"
","<p>In fact, you can do much more with this syntax. The <code>some_list[-n]</code> syntax gets the nth-to-last element. So <code>some_list[-1]</code> gets the last element, <code>some_list[-2]</code> gets the second to last, etc, all the way down to <code>some_list[-len(some_list)]</code>, which gives you the first element.</p>","
",<p>You can also set list elements in this way. For instance:</p>,"
","<pre><code>&gt;&gt;&gt; some_list = [1, 2, 3]
&gt;&gt;&gt; some_list[-1] = 5 # Set the last element
&gt;&gt;&gt; some_list[-2] = 3 # Set the second to last element
&gt;&gt;&gt; some_list
[1, 3, 5]
</code></pre>","
","<p>Note that getting a list item by index will raise an <a href=""https://docs.python.org/3/library/exceptions.html#IndexError"" rel=""noreferrer""><code>IndexError</code></a> if the expected item doesn't exist. This means that <code>some_list[-1]</code> will raise an exception if <code>some_list</code> is empty, because an empty list can't have a last element.</p>","
"
"
","<p>If your <code>str()</code> or <code>list()</code> objects might end up being empty as so: <code>astr = ''</code> or <code>alist = []</code>, then you might want to use <code>alist[-1:]</code> instead of <code>alist[-1]</code> for object ""sameness"".</p>","
",<p>The significance of this is:</p>,"
","<pre><code>alist = []
alist[-1]   # will generate an IndexError exception whereas 
alist[-1:]  # will return an empty list
astr = ''
astr[-1]    # will generate an IndexError exception whereas
astr[-1:]   # will return an empty str
</code></pre>","
","<p>Where the distinction being made is that returning an empty list object or empty str object is more ""last element""-like then an exception object.</p>","
"
"
",<p>You can also do:</p>,"
","<pre><code>last_elem = alist.pop()
</code></pre>","
",<p>It depends on what you want to do with your list because the <code>pop()</code> method will delete the last element.</p>,"
"
"
",<p>The simplest way to display last element in python is</p>,"
","<pre><code>&gt;&gt;&gt; list[-1:] # returns indexed value
    [3]
&gt;&gt;&gt; list[-1]  # returns value
    3
</code></pre>","
",<p>there are many other method to achieve such a goal but these are short and sweet to use.</p>,"
"
"
","<blockquote>
<h2>In Python, how do you get the last element of a list?</h2>
</blockquote>","
","<p>To just get the last element, </p>","
","<ul>
<li>without modifying the list, and </li>
<li>assuming you know the list <em>has</em> a last element (i.e. it is nonempty) </li>
</ul>","
",<p>pass <code>-1</code> to the subscript notation:</p>,"
","<pre><code>&gt;&gt;&gt; a_list = ['zero', 'one', 'two', 'three']
&gt;&gt;&gt; a_list[-1]
'three'
</code></pre>","
",<h2>Explanation</h2>,"
",<p>Indexes and slices can take negative integers as arguments.</p>,"
","<p>I have modified an example <a href=""https://docs.python.org/3/tutorial/introduction.html"" rel=""noreferrer"">from the documentation</a> to indicate which item in a sequence each index references, in this case, in the string <code>""Python""</code>, <code>-1</code> references the last element, the character, <code>'n'</code>:</p>","
","<pre><code> +---+---+---+---+---+---+
 | P | y | t | h | o | n |
 +---+---+---+---+---+---+
   0   1   2   3   4   5 
  -6  -5  -4  -3  -2  -1

&gt;&gt;&gt; p = 'Python'
&gt;&gt;&gt; p[-1]
'n'
</code></pre>","
",<h2>Assignment via iterable unpacking</h2>,"
","<p>This method may unnecessarily materialize a second list for the purposes of just getting the last element, but for the sake of completeness (and since it supports any iterable - not just lists):</p>","
","<pre><code>&gt;&gt;&gt; *head, last = a_list
&gt;&gt;&gt; last
'three'
</code></pre>","
","<p>The variable name, head is bound to the unnecessary newly created list:</p>","
","<pre><code>&gt;&gt;&gt; head
['zero', 'one', 'two']
</code></pre>","
","<p>If you intend to do nothing with that list, this would be more apropos:</p>","
","<pre><code>*_, last = a_list
</code></pre>","
","<p>Or, really, if you know it's a list (or at least accepts subscript notation):</p>","
","<pre><code>last = a_list[-1]
</code></pre>","
",<h2>In a function</h2>,"
",<p>A commenter said:</p>,"
","<blockquote>
<p>I wish Python had a function for first() and last() like Lisp does... it would get rid of a lot of unnecessary lambda functions.</p>
</blockquote>","
",<p>These would be quite simple to define:</p>,"
","<pre><code>def last(a_list):
    return a_list[-1]

def first(a_list):
    return a_list[0]
</code></pre>","
",<p>Or use <code>operator.itemgetter</code>:</p>,"
","<pre><code>&gt;&gt;&gt; import operator
&gt;&gt;&gt; last = operator.itemgetter(-1)
&gt;&gt;&gt; first = operator.itemgetter(0)
</code></pre>","
",<p>In either case:</p>,"
","<pre><code>&gt;&gt;&gt; last(a_list)
'three'
&gt;&gt;&gt; first(a_list)
'zero'
</code></pre>","
",<h2>Special cases</h2>,"
","<p>If you're doing something more complicated, you may find it more performant to get the last element in slightly different ways.</p>","
","<p>If you're new to programming, you should avoid this section, because it couples otherwise semantically different parts of algorithms together. If you change your algorithm in one place, it may have an unintended impact on another line of code. </p>","
","<p>I try to provide caveats and conditions as completely as I can, but I may have missed something. Please comment if you think I'm leaving a caveat out.</p>","
",<h3>Slicing</h3>,"
",<p>A slice of a list returns a new list - so we can slice from -1 to the end if we are going to want the element in a new list:</p>,"
","<pre><code>&gt;&gt;&gt; a_slice = a_list[-1:]
&gt;&gt;&gt; a_slice
['three']
</code></pre>","
",<p>This has the upside of not failing if the list is empty:</p>,"
","<pre><code>&gt;&gt;&gt; empty_list = []
&gt;&gt;&gt; tail = empty_list[-1:]
&gt;&gt;&gt; if tail:
...     do_something(tail)
</code></pre>","
",<p>Whereas attempting to access by index raises an <code>IndexError</code> which would need to be handled:</p>,"
","<pre><code>&gt;&gt;&gt; empty_list[-1]
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
IndexError: list index out of range
</code></pre>","
","<p>But again, slicing for this purpose should only be done if you need:</p>","
","<ul>
<li>a new list created</li>
<li>and the new list to be empty if the prior list was empty.</li>
</ul>","
",<h3><code>for</code> loops</h3>,"
","<p>As a feature of Python, there is no inner scoping in a <code>for</code> loop.</p>","
","<p>If you're performing a complete iteration over the list already, the last element will still be referenced by the variable name assigned in the loop:</p>","
","<pre><code>&gt;&gt;&gt; def do_something(arg): pass
&gt;&gt;&gt; for item in a_list:
...     do_something(item)
...     
&gt;&gt;&gt; item
'three'
</code></pre>","
","<p>This is not semantically the last thing in the list. This is semantically the last thing that the name, <code>item</code>, was bound to.</p>","
","<pre><code>&gt;&gt;&gt; def do_something(arg): raise Exception
&gt;&gt;&gt; for item in a_list:
...     do_something(item)
...
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 2, in &lt;module&gt;
  File ""&lt;stdin&gt;"", line 1, in do_something
Exception
&gt;&gt;&gt; item
'zero'
</code></pre>","
",<p>Thus this should only be used to get the last element if you </p>,"
","<ul>
<li>are already looping, and </li>
<li>you know the loop will finish (not break or exit due to errors), otherwise it will point to the last element referenced by the loop.</li>
</ul>","
",<h3>Getting and removing it</h3>,"
",<p>We can also mutate our original list by removing and returning the last element:</p>,"
","<pre><code>&gt;&gt;&gt; a_list.pop(-1)
'three'
&gt;&gt;&gt; a_list
['zero', 'one', 'two']
</code></pre>","
",<p>But now the original list is modified. </p>,"
","<p>(<code>-1</code> is actually the default argument, so <code>list.pop</code> can be used without an index argument):</p>","
","<pre><code>&gt;&gt;&gt; a_list.pop()
'two'
</code></pre>","
",<p>Only do this if</p>,"
","<ul>
<li>you know the list has elements in it, or are prepared to handle the exception if it is empty, and</li>
<li>you do intend to remove the last element from the list, treating it like a stack. </li>
</ul>","
","<p>These are valid use-cases, but not very common.</p>","
",<h3>Saving the rest of the reverse for later:</h3>,"
","<p>I don't know why you'd do it, but for completeness, since <code>reversed</code> returns an <strong><em>iterator</em></strong> (which supports the iterator protocol) you can pass its result to <code>next</code>:</p>","
","<pre><code>&gt;&gt;&gt; next(reversed([1,2,3]))
3
</code></pre>","
",<p>So it's like doing the reverse of this:</p>,"
","<pre><code>&gt;&gt;&gt; next(iter([1,2,3]))
1
</code></pre>","
","<p>But I can't think of a good reason to do this, unless you'll need the rest of the reverse iterator later, which would probably look more like this:</p>","
","<pre><code>reverse_iterator = reversed([1,2,3])
last_element = next(reverse_iterator)

use_later = list(reverse_iterator)
</code></pre>","
",<p>and now:</p>,"
","<pre><code>&gt;&gt;&gt; use_later
[2, 1]
&gt;&gt;&gt; last_element
3
</code></pre>","
"
"
","<p>To prevent <code>IndexError: list index out of range</code>, use this syntax:</p>","
","<pre><code>mylist = [1, 2, 3, 4]

# With None as default value:
value = mylist and mylist[-1]

# With specified default value (option 1):
value = mylist and mylist[-1] or 'default'

# With specified default value (option 2):
value = mylist[-1] if mylist else 'default'
</code></pre>","
"
"
","<p><code>lst[-1]</code> is the best approach, but with general iterables, consider <a href=""https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.last"" rel=""noreferrer""><code>more_itertools.last</code></a>:</p>","
",<p><strong>Code</strong></p>,"
","<pre><code>import more_itertools as mit


mit.last([0, 1, 2, 3])
# 3

mit.last(iter([1, 2, 3]))
# 3

mit.last([], ""some default"")
# 'some default'
</code></pre>","
"
"
",<p>Another method:</p>,"
","<pre><code>some_list.reverse() 
some_list[0]
</code></pre>","
"
"
","<p><code>list[-1]</code> will retrieve the last element of the list without changing the list.
<code>list.pop()</code> will retrieve the last element of the list, but it will mutate/change the original list. Usually, mutating the original list is not recommended.</p>","
","<p>Alternatively, if, for some reason, you're looking for something less pythonic, you could use <code>list[len(list)-1]</code>, assuming the list is not empty.</p>","
"
"
","<p>You can also use the code below, if you do not want to get IndexError when the list is empty.</p>","
","<pre><code>next(reversed(some_list), None)
</code></pre>","
"
"
",<p>Here is the solution for your query.</p>,"
","<pre><code>a=[""first"",""second from last"",""last""] # A sample list
print(a[0]) #prints the first item in the list because the index of the list always starts from 0.
print(a[-1]) #prints the last item in the list.
print(a[-2]) #prints the last second item in the list.
</code></pre>","
",<p>Output:</p>,"
","<pre><code>&gt;&gt;&gt; first
&gt;&gt;&gt; last
&gt;&gt;&gt; second from last
</code></pre>","
"
"
","<p>Ok, but what about common in almost every language way <code>items[len(items) - 1]</code>? This is IMO the easiest way to get last element, because it does not require anything <em>pythonic</em> knowledge.</p>","
"
"
",<h1>Pythonic Way</h1>,"
","<p>So lets consider that we have a list <code>a = [1,2,3,4]</code>, in Python List can be manipulated to give us part of it or a element of it, using the following command one can easily get the last element.</p>","
","<pre><code>print(a[-1])
</code></pre>","
"
"
",<p>Strange that nobody posted this yet:</p>,"
","<pre><code>&gt;&gt;&gt; l = [1, 2, 3]
&gt;&gt;&gt; *x, last_elem = l
&gt;&gt;&gt; last_elem
3
&gt;&gt;&gt; 
</code></pre>","
",<p>Just unpack.</p>,"
"
"
",<p>Accessing the last element from the list in Python:</p>,"
",<p><strong>1: Access the last element with negative indexing -1</strong></p>,"
","<pre><code>&gt;&gt; data = ['s','t','a','c','k','o','v','e','r','f','l','o','w']
&gt;&gt; data[-1]
'w'
</code></pre>","
",<p><strong>2. Access the last element with pop() method</strong></p>,"
","<pre><code>&gt;&gt; data = ['s','t','a','c','k','o','v','e','r','f','l','o','w']
&gt;&gt; data.pop()
'w'
</code></pre>","
","<p>However, pop method will remove the last element from the list.</p>","
"
"
","<p>To avoid ""IndexError: list index out of range"", you can use this piece of code.</p>","
","<pre><code>list_values = [12, 112, 443]

def getLastElement(lst):
    if len(lst) == 0:
        return 0
    else:
        return lst[-1]

print(getLastElement(list_values))
</code></pre>","
"
"
",<p>You will just need to take the and put [-1] index. For example:</p>,"
","<pre><code>list=[0,1,2]
last_index=list[-1]
print(last_index)
</code></pre>","
",<p>You will get 2 as the output.</p>,"
"
"
","<p>If you do <code>my_list[-1]</code> this returns the last element of the list. Negative sequence indexes represent positions from the end of the array. Negative indexing means beginning from the end, -1 refers to the last item, -2 refers to the second-last item, etc.</p>","
"
"
",<p>Couldn't find any answer mentioning this. So adding.</p>,"
",<p>You could try <code>some_list[~0]</code> also.</p>,"
",<p>That's the <strong>tilde</strong> symbol</p>,"
"
"
",<p>You could use it with <code>next</code> and <code>iter</code> with <code>[::-1]</code>:</p>,"
","<pre><code>&gt;&gt;&gt; a = [1, 2, 3]
&gt;&gt;&gt; next(iter(a[::-1]))
3
&gt;&gt;&gt; 
</code></pre>","
"
"
",<p>You can also use the length to get the last element:</p>,"
","<pre><code>last_elem = arr[len(arr) - 1]
</code></pre>","
","<p>If the list is empty, you'll get an <code>IndexError</code> exception, but you also get that with <code>arr[-1]</code>.</p>","
"
"
",<p>I have a JSON file that is a mess that I want to prettyprint. What's the easiest way to do this in Python?</p>,"
","<p>I know PrettyPrint takes an ""object"", which I think can be a file, but I don't know how to pass a file in. Just using the filename doesn't work.</p>","
"
"
","<p>The <a href=""https://docs.python.org/3/library/json.html"" rel=""noreferrer""><code>json</code> module</a> already implements some basic pretty printing in the <a href=""https://docs.python.org/3/library/json.html#json.dump"" rel=""noreferrer""><code>dump</code></a> and <a href=""https://docs.python.org/3/library/json.html#json.dumps"" rel=""noreferrer""><code>dumps</code></a> functions, with the <code>indent</code> parameter that specifies how many spaces to indent by:</p>","
","<pre><code>&gt;&gt;&gt; import json
&gt;&gt;&gt;
&gt;&gt;&gt; your_json = '[""foo"", {""bar"":[""baz"", null, 1.0, 2]}]'
&gt;&gt;&gt; parsed = json.loads(your_json)
&gt;&gt;&gt; print(json.dumps(parsed, indent=4, sort_keys=True))
[
    ""foo"", 
    {
        ""bar"": [
            ""baz"", 
            null, 
            1.0, 
            2
        ]
    }
]
</code></pre>","
","<p>To parse a file, use <a href=""https://docs.python.org/3/library/json.html#json.load"" rel=""noreferrer""><code>json.load()</code></a>:</p>","
","<pre><code>with open('filename.txt', 'r') as handle:
    parsed = json.load(handle)
</code></pre>","
"
"
",<p>You can do this on the command line:</p>,"
","<pre><code>python3 -m json.tool some.json
</code></pre>","
","<p>(as already mentioned in the commentaries to the question, thanks to @Kai Petzke for the python3 suggestion).</p>","
","<p>Actually python is not my favourite tool as far as json processing on the command line is concerned. For simple pretty printing is ok, but if you want to manipulate the json it can become overcomplicated. You'd soon need to write a separate script-file, you could end up with maps whose keys are u""some-key"" (python unicode), which makes selecting fields more difficult and doesn't really go in the direction of pretty-printing.</p>","
","<p>You can also use <a href=""https://stedolan.github.io/jq/"" rel=""noreferrer"">jq</a>:</p>","
","<pre><code>jq . some.json
</code></pre>","
",<p>and you get colors as a bonus (and way easier extendability).</p>,"
","<p>Addendum: There is some confusion in the comments about using jq to process large JSON files on the one hand, and having a very large jq program on the other.  For pretty-printing a file consisting of a single large JSON entity, the practical limitation is RAM.  For pretty-printing a 2GB file consisting of a single array of real-world data, the ""maximum resident set size"" required for pretty-printing was 5GB (whether using jq 1.5 or 1.6). Note also that jq can be used from within python after <code>pip install jq</code>.</p>","
"
"
","<p>You could use the built-in module <a href=""https://docs.python.org/3/library/pprint.html#pprint.pprint"" rel=""noreferrer"">pprint (https://docs.python.org/3.9/library/pprint.html)</a>.</p>","
",<p>How you can read the file with json data and print it out.</p>,"
","<pre><code>import json
import pprint

json_data = None
with open('file_name.txt', 'r') as f:
    data = f.read()
    json_data = json.loads(data)

print(json_data)
{""firstName"": ""John"", ""lastName"": ""Smith"", ""isAlive"": ""true"", ""age"": 27, ""address"": {""streetAddress"": ""21 2nd Street"", ""city"": ""New York"", ""state"": ""NY"", ""postalCode"": ""10021-3100""}, 'children': []}

pprint.pprint(json_data)
{'address': {'city': 'New York',
             'postalCode': '10021-3100',
             'state': 'NY',
             'streetAddress': '21 2nd Street'},
 'age': 27,
 'children': [],
 'firstName': 'John',
 'isAlive': True,
 'lastName': 'Smith'}
</code></pre>","
","<p>The output is not a valid json, because pprint use single quotes and json specification require double quotes.</p>","
","<p>If you want to rewrite the pretty print formated json to a file, you have to use <a href=""https://docs.python.org/3.9/library/pprint.html"" rel=""noreferrer"">pprint.pformat</a>.</p>","
","<pre><code>pretty_print_json = pprint.pformat(json_data).replace(""'"", '""')

with open('file_name.json', 'w') as f:
    f.write(pretty_print_json)
</code></pre>","
"
"
",<h1>Pygmentize + Python json.tool = Pretty Print with Syntax Highlighting</h1>,"
","<p>Pygmentize is a killer tool. <a href=""https://stackoverflow.com/a/27501509/2670370"">See this.</a></p>","
",<p>I combine python json.tool with pygmentize</p>,"
","<pre><code>echo '{""foo"": ""bar""}' | python -m json.tool | pygmentize -l json
</code></pre>","
",<p>See the link above for pygmentize installation instruction.</p>,"
",<p>A demo of this is in the image below:</p>,"
","<p><a href=""https://i.stack.imgur.com/bpTen.png"" rel=""noreferrer""><img alt=""demo"" src=""https://i.stack.imgur.com/bpTen.png""/></a></p>","
"
"
",<p>Use this function and don't sweat having to remember if your JSON is a <code>str</code> or <code>dict</code> again - just look at the pretty print:</p>,"
","<pre><code>import json

def pp_json(json_thing, sort=True, indents=4):
    if type(json_thing) is str:
        print(json.dumps(json.loads(json_thing), sort_keys=sort, indent=indents))
    else:
        print(json.dumps(json_thing, sort_keys=sort, indent=indents))
    return None

pp_json(your_json_string_or_dict)
</code></pre>","
"
"
","<p>Use pprint: <a href=""https://docs.python.org/3.6/library/pprint.html"" rel=""noreferrer"">https://docs.python.org/3.6/library/pprint.html</a></p>","
","<pre class=""lang-py prettyprint-override""><code>import pprint
pprint.pprint(json)
</code></pre>","
",<p><code>print()</code> compared to <code>pprint.pprint()</code></p>,"
","<pre class=""lang-py prettyprint-override""><code>print(json)
{'feed': {'title': 'W3Schools Home Page', 'title_detail': {'type': 'text/plain', 'language': None, 'base': '', 'value': 'W3Schools Home Page'}, 'links': [{'rel': 'alternate', 'type': 'text/html', 'href': 'https://www.w3schools.com'}], 'link': 'https://www.w3schools.com', 'subtitle': 'Free web building tutorials', 'subtitle_detail': {'type': 'text/html', 'language': None, 'base': '', 'value': 'Free web building tutorials'}}, 'entries': [], 'bozo': 0, 'encoding': 'utf-8', 'version': 'rss20', 'namespaces': {}}

pprint.pprint(json)
{'bozo': 0,
 'encoding': 'utf-8',
 'entries': [],
 'feed': {'link': 'https://www.w3schools.com',
          'links': [{'href': 'https://www.w3schools.com',
                     'rel': 'alternate',
                     'type': 'text/html'}],
          'subtitle': 'Free web building tutorials',
          'subtitle_detail': {'base': '',
                              'language': None,
                              'type': 'text/html',
                              'value': 'Free web building tutorials'},
          'title': 'W3Schools Home Page',
          'title_detail': {'base': '',
                           'language': None,
                           'type': 'text/plain',
                           'value': 'W3Schools Home Page'}},
 'namespaces': {},
 'version': 'rss20'}
</code></pre>","
"
"
",<p>To be able to pretty print from the command line and be able to have control over the indentation etc. you can set up an alias similar to this:</p>,"
","<pre><code>alias jsonpp=""python -c 'import sys, json; print json.dumps(json.load(sys.stdin), sort_keys=True, indent=2)'""
</code></pre>","
",<p>And then use the alias in one of these ways:</p>,"
","<pre><code>cat myfile.json | jsonpp
jsonpp &lt; myfile.json
</code></pre>","
"
"
","<p>Here's a simple example of pretty printing JSON to the console in a nice way in Python, without requiring the JSON to be on your computer as a local file: </p>","
","<pre><code>import pprint
import json 
from urllib.request import urlopen # (Only used to get this example)

# Getting a JSON example for this example 
r = urlopen(""https://mdn.github.io/fetch-examples/fetch-json/products.json"")
text = r.read() 

# To print it
pprint.pprint(json.loads(text))
</code></pre>","
"
"
","<pre><code>def saveJson(date,fileToSave):
    with open(fileToSave, 'w+') as fileToSave:
        json.dump(date, fileToSave, ensure_ascii=True, indent=4, sort_keys=True)
</code></pre>","
",<p>It works to display or save it to a file.</p>,"
"
"
","<p>You could try <a href=""https://github.com/clarketm/pprintjson"" rel=""noreferrer""><strong>pprintjson</strong></a>.</p>","
",<hr/>,"
",<h3>Installation</h3>,"
","<pre class=""lang-sh prettyprint-override""><code>$ pip3 install pprintjson
</code></pre>","
",<h3>Usage</h3>,"
",<p>Pretty print JSON from a file using the pprintjson CLI.</p>,"
","<pre class=""lang-sh prettyprint-override""><code>$ pprintjson ""./path/to/file.json""
</code></pre>","
",<p>Pretty print JSON from a stdin using the pprintjson CLI.</p>,"
","<pre class=""lang-sh prettyprint-override""><code>$ echo '{ ""a"": 1, ""b"": ""string"", ""c"": true }' | pprintjson
</code></pre>","
",<p>Pretty print JSON from a string using the pprintjson CLI.</p>,"
","<pre class=""lang-sh prettyprint-override""><code>$ pprintjson -c '{ ""a"": 1, ""b"": ""string"", ""c"": true }'
</code></pre>","
",<p>Pretty print JSON from a string with an indent of 1.</p>,"
","<pre class=""lang-sh prettyprint-override""><code>$ pprintjson -c '{ ""a"": 1, ""b"": ""string"", ""c"": true }' -i 1
</code></pre>","
",<p>Pretty print JSON from a string and save output to a file output.json.</p>,"
","<pre class=""lang-sh prettyprint-override""><code>$ pprintjson -c '{ ""a"": 1, ""b"": ""string"", ""c"": true }' -o ./output.json
</code></pre>","
",<h3>Output</h3>,"
","<p><a href=""https://i.stack.imgur.com/vsdBU.png"" rel=""noreferrer""><img alt=""enter image description here"" src=""https://i.stack.imgur.com/vsdBU.png""/></a></p>","
"
"
","<p>I think that's better to parse the json before, to avoid errors:</p>","
","<pre><code>def format_response(response):
    try:
        parsed = json.loads(response.text)
    except JSONDecodeError:
        return response.text
    return json.dumps(parsed, ensure_ascii=True, indent=4)
</code></pre>","
"
"
","<p>I had a similar requirement to dump the contents of json file for logging, something quick and easy:</p>","
","<pre><code>print(json.dumps(json.load(open(os.path.join('&lt;myPath&gt;', '&lt;myjson&gt;'), ""r"")), indent = 4 ))
</code></pre>","
",<p>if you use it often then put it in a function:</p>,"
","<pre><code>def pp_json_file(path, file):
    print(json.dumps(json.load(open(os.path.join(path, file), ""r"")), indent = 4))
</code></pre>","
"
"
",<p>Hopefully this helps someone else.</p>,"
","<p>In the case when there is a error that something is not json serializable the answers above will not work. If you only want to save it so that is human readable then you need to recursively call string on all the non dictionary elements of your dictionary. If you want to load it later then save it as a pickle file then load it (e.g. <code>torch.save(obj, f)</code> works fine).</p>","
",<p>This is what worked for me:</p>,"
","<pre><code>#%%

def _to_json_dict_with_strings(dictionary):
    """"""
    Convert dict to dict with leafs only being strings. So it recursively makes keys to strings
    if they are not dictionaries.

    Use case:
        - saving dictionary of tensors (convert the tensors to strins!)
        - saving arguments from script (e.g. argparse) for it to be pretty

    e.g.

    """"""
    if type(dictionary) != dict:
        return str(dictionary)
    d = {k: _to_json_dict_with_strings(v) for k, v in dictionary.items()}
    return d

def to_json(dic):
    import types
    import argparse

    if type(dic) is dict:
        dic = dict(dic)
    else:
        dic = dic.__dict__
    return _to_json_dict_with_strings(dic)

def save_to_json_pretty(dic, path, mode='w', indent=4, sort_keys=True):
    import json

    with open(path, mode) as f:
        json.dump(to_json(dic), f, indent=indent, sort_keys=sort_keys)

def my_pprint(dic):
    """"""

    @param dic:
    @return:

    Note: this is not the same as pprint.
    """"""
    import json

    # make all keys strings recursively with their naitve str function
    dic = to_json(dic)
    # pretty print
    pretty_dic = json.dumps(dic, indent=4, sort_keys=True)
    print(pretty_dic)
    # print(json.dumps(dic, indent=4, sort_keys=True))
    # return pretty_dic

import torch
# import json  # results in non serializabe errors for torch.Tensors
from pprint import pprint

dic = {'x': torch.randn(1, 3), 'rec': {'y': torch.randn(1, 3)}}

my_pprint(dic)
pprint(dic)
</code></pre>","
",<p>output:</p>,"
","<pre><code>{
    ""rec"": {
        ""y"": ""tensor([[-0.3137,  0.3138,  1.2894]])""
    },
    ""x"": ""tensor([[-1.5909,  0.0516, -1.5445]])""
}
{'rec': {'y': tensor([[-0.3137,  0.3138,  1.2894]])},
 'x': tensor([[-1.5909,  0.0516, -1.5445]])}
</code></pre>","
",<p>I don't know why returning the string then printing it doesn't work but it seems you have to put the dumps directly in the print statement. Note <code>pprint</code> as it has been suggested already works too. Note not all objects can be converted to a dict with <code>dict(dic)</code> which is why some of my code has checks on this condition.</p>,"
",<p>Context:</p>,"
",<p>I wanted to save pytorch strings but I kept getting the error:</p>,"
","<pre><code>TypeError: tensor is not JSON serializable
</code></pre>","
","<p>so I coded the above. Note that yes, in pytorch you use <code>torch.save</code> but pickle files aren't readable. Check this related post: <a href=""https://discuss.pytorch.org/t/typeerror-tensor-is-not-json-serializable/36065/3"" rel=""nofollow noreferrer"">https://discuss.pytorch.org/t/typeerror-tensor-is-not-json-serializable/36065/3</a></p>","
","<hr>
<p>PPrint also has indent arguments but I didn't like how it looks:</p>
<pre><code>    pprint(stats, indent=4, sort_dicts=True)
</code></pre>
<p>output:</p>
<pre><code>{   'cca': {   'all': {'avg': tensor(0.5132), 'std': tensor(0.1532)},
               'avg': tensor([0.5993, 0.5571, 0.4910, 0.4053]),
               'rep': {'avg': tensor(0.5491), 'std': tensor(0.0743)},
               'std': tensor([0.0316, 0.0368, 0.0910, 0.2490])},
    'cka': {   'all': {'avg': tensor(0.7885), 'std': tensor(0.3449)},
               'avg': tensor([1.0000, 0.9840, 0.9442, 0.2260]),
               'rep': {'avg': tensor(0.9761), 'std': tensor(0.0468)},
               'std': tensor([5.9043e-07, 2.9688e-02, 6.3634e-02, 2.1686e-01])},
    'cosine': {   'all': {'avg': tensor(0.5931), 'std': tensor(0.7158)},
                  'avg': tensor([ 0.9825,  0.9001,  0.7909, -0.3012]),
                  'rep': {'avg': tensor(0.8912), 'std': tensor(0.1571)},
                  'std': tensor([0.0371, 0.1232, 0.1976, 0.9536])},
    'nes': {   'all': {'avg': tensor(0.6771), 'std': tensor(0.2891)},
               'avg': tensor([0.9326, 0.8038, 0.6852, 0.2867]),
               'rep': {'avg': tensor(0.8072), 'std': tensor(0.1596)},
               'std': tensor([0.0695, 0.1266, 0.1578, 0.2339])},
    'nes_output': {   'all': {'avg': None, 'std': None},
                      'avg': tensor(0.2975),
                      'rep': {'avg': None, 'std': None},
                      'std': tensor(0.0945)},
    'query_loss': {   'all': {'avg': None, 'std': None},
                      'avg': tensor(12.3746),
                      'rep': {'avg': None, 'std': None},
                      'std': tensor(13.7910)}}
</code></pre>
<p>compare to:</p>
<pre><code>{
    ""cca"": {
        ""all"": {
            ""avg"": ""tensor(0.5144)"",
            ""std"": ""tensor(0.1553)""
        },
        ""avg"": ""tensor([0.6023, 0.5612, 0.4874, 0.4066])"",
        ""rep"": {
            ""avg"": ""tensor(0.5503)"",
            ""std"": ""tensor(0.0796)""
        },
        ""std"": ""tensor([0.0285, 0.0367, 0.1004, 0.2493])""
    },
    ""cka"": {
        ""all"": {
            ""avg"": ""tensor(0.7888)"",
            ""std"": ""tensor(0.3444)""
        },
        ""avg"": ""tensor([1.0000, 0.9840, 0.9439, 0.2271])"",
        ""rep"": {
            ""avg"": ""tensor(0.9760)"",
            ""std"": ""tensor(0.0468)""
        },
        ""std"": ""tensor([5.7627e-07, 2.9689e-02, 6.3541e-02, 2.1684e-01])""
    },
    ""cosine"": {
        ""all"": {
            ""avg"": ""tensor(0.5945)"",
            ""std"": ""tensor(0.7146)""
        },
        ""avg"": ""tensor([ 0.9825,  0.9001,  0.7907, -0.2953])"",
        ""rep"": {
            ""avg"": ""tensor(0.8911)"",
            ""std"": ""tensor(0.1571)""
        },
        ""std"": ""tensor([0.0371, 0.1231, 0.1975, 0.9554])""
    },
    ""nes"": {
        ""all"": {
            ""avg"": ""tensor(0.6773)"",
            ""std"": ""tensor(0.2886)""
        },
        ""avg"": ""tensor([0.9326, 0.8037, 0.6849, 0.2881])"",
        ""rep"": {
            ""avg"": ""tensor(0.8070)"",
            ""std"": ""tensor(0.1595)""
        },
        ""std"": ""tensor([0.0695, 0.1265, 0.1576, 0.2341])""
    },
    ""nes_output"": {
        ""all"": {
            ""avg"": ""None"",
            ""std"": ""None""
        },
        ""avg"": ""tensor(0.2976)"",
        ""rep"": {
            ""avg"": ""None"",
            ""std"": ""None""
        },
        ""std"": ""tensor(0.0945)""
    },
    ""query_loss"": {
        ""all"": {
            ""avg"": ""None"",
            ""std"": ""None""
        },
        ""avg"": ""tensor(12.3616)"",
        ""rep"": {
            ""avg"": ""None"",
            ""std"": ""None""
        },
        ""std"": ""tensor(13.7976)""
    }
}
</code></pre>
</hr>"
"
","<p>It's far from perfect, but it does the job.</p>","
","<pre><code>data = data.replace(',""',',\n""')
</code></pre>","
","<p>you can improve it, add indenting and so on, but if you just want to be able to read a cleaner json, this is the way to go.</p>","
"
"
","<p>I'm used to doing <code>print &gt;&gt;f, ""hi there""</code></p>","
","<p>However, it seems that <code>print &gt;&gt;</code> is getting deprecated. What is the recommended way to do the line above?</p>","
","<p><b>Update</b>:
Regarding all those answers with <code>""\n""</code>...is this universal or Unix-specific? IE, should I be doing <code>""\r\n""</code> on Windows?</p>","
"
"
",<p>This should be as simple as:</p>,"
","<pre><code>with open('somefile.txt', 'a') as the_file:
    the_file.write('Hello\n')
</code></pre>","
",<p>From The Documentation:</p>,"
","<blockquote>
<p>Do not use <code>os.linesep</code> as a line terminator when writing files opened in text mode (the default); use a single <code>'\n'</code> instead, on all platforms.</p>
</blockquote>","
",<p>Some useful reading:</p>,"
","<ul>
<li><a href=""http://docs.python.org/reference/compound_stmts.html#the-with-statement"" rel=""noreferrer"">The <code>with</code> statement</a></li>
<li><a href=""http://docs.python.org/library/functions.html?highlight=open#open"" rel=""noreferrer""><code>open()</code></a>
<ul>
<li><code>'a'</code> is for append, or use</li>
<li><code>'w'</code> to write with truncation</li>
</ul>
</li>
<li><a href=""http://docs.python.org/library/os.html"" rel=""noreferrer""><code>os</code></a> (particularly <a href=""http://docs.python.org/library/os.html?highlight=os.linesep#os.linesep"" rel=""noreferrer""><code>os.linesep</code></a>)</li>
</ul>","
"
"
",<p>You should use the <code>print()</code> function which is available since Python 2.6+</p>,"
","<pre><code>from __future__ import print_function  # Only needed for Python 2
print(""hi there"", file=f)
</code></pre>","
","<p>For Python 3 you don't need the <code>import</code>, since the  <code>print()</code> function is the default.</p>","
",<p>The alternative would be to use:</p>,"
","<pre><code>f = open('myfile', 'w')
f.write('hi there\n')  # python will convert \n to os.linesep
f.close()  # you can omit in most cases as the destructor will call it
</code></pre>","
","<p>Quoting from <a href=""https://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files"">Python documentation</a> regarding newlines:</p>","
","<blockquote>
<p>On output, if newline is None, any <code>'\n'</code> characters written are translated to the system default line separator, <code>os.linesep</code>. If newline is <code>''</code>, no translation takes place. If newline is any of the other legal values, any <code>'\n'</code> characters written are translated to the given string.</p>
</blockquote>","
"
"
","<p>The <a href=""http://docs.python.org/tutorial/inputoutput.html"" rel=""noreferrer"">python docs</a> recommend this way:</p>","
","<pre><code>with open('file_to_write', 'w') as f:
    f.write('file contents\n')
</code></pre>","
",<p>So this is the way I usually do it :)</p>,"
","<p>Statement from <a href=""http://docs.python.org/tutorial/inputoutput.html"" rel=""noreferrer"">docs.python.org</a>:</p>","
","<blockquote>
<p>It is good practice to use the <strong>'with'</strong> keyword when dealing with file
  objects. This has the advantage that the file is properly closed after
  its suite finishes, even if an exception is raised on the way. It is
  also much shorter than writing equivalent try-finally blocks.</p>
</blockquote>","
"
"
",<p><strong>Regarding os.linesep:</strong></p>,"
",<p>Here is an exact unedited Python 2.7.1 interpreter session on Windows:</p>,"
","<pre><code>Python 2.7.1 (r271:86832, Nov 27 2010, 18:30:46) [MSC v.1500 32 bit (Intel)] on
win32
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.linesep
'\r\n'
&gt;&gt;&gt; f = open('myfile','w')
&gt;&gt;&gt; f.write('hi there\n')
&gt;&gt;&gt; f.write('hi there' + os.linesep) # same result as previous line ?????????
&gt;&gt;&gt; f.close()
&gt;&gt;&gt; open('myfile', 'rb').read()
'hi there\r\nhi there\r\r\n'
&gt;&gt;&gt;
</code></pre>","
",<p><strong>On Windows:</strong></p>,"
","<p>As expected, os.linesep does <strong>NOT</strong> produce the same outcome as <code>'\n'</code>. There is no way that it could produce the same outcome. <code>'hi there' + os.linesep</code> is equivalent to <code>'hi there\r\n'</code>, which is <strong>NOT</strong> equivalent to <code>'hi there\n'</code>.</p>","
",<p><strong>It's this simple: use <code>\n</code> which will be translated automatically to os.linesep.</strong> And it's been that simple ever since the first port of Python to Windows.</p>,"
","<p>There is no point in using os.linesep on non-Windows systems, and it produces wrong results on Windows.</p>","
",<p><strong>DO NOT USE os.linesep!</strong></p>,"
"
"
","<p>I do not think there is a ""correct"" way.</p>","
",<p>I would use:</p>,"
","<pre><code>with open ('myfile', 'a') as f: f.write ('hi there\n')
</code></pre>","
","<p>In memoriam <a href=""http://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it"" rel=""noreferrer"">Tim Toady</a>.</p>","
"
"
","<p>In Python 3 it is a function, but in Python 2 you can add this to the top of the source file:</p>","
","<pre><code>from __future__ import print_function
</code></pre>","
",<p>Then you do </p>,"
","<pre><code>print(""hi there"", file=f)
</code></pre>","
"
"
","<p>If you are writing a lot of data and speed is a concern you should probably go with <code>f.write(...)</code>. I did a quick speed comparison and it was considerably faster than <code>print(..., file=f)</code> when performing a large number of writes.</p>","
","<pre><code>import time    

start = start = time.time()
with open(""test.txt"", 'w') as f:
    for i in range(10000000):
        # print('This is a speed test', file=f)
        # f.write('This is a speed test\n')
end = time.time()
print(end - start)
</code></pre>","
","<p>On average <code>write</code> finished in 2.45s on my machine, whereas <code>print</code> took about 4 times as long (9.76s). That being said, in most real-world scenarios this will not be an issue.</p>","
","<p>If you choose to go with <code>print(..., file=f)</code> you will probably find that you'll want to suppress the newline from time to time, or replace it with something else. This can be done by setting the optional <code>end</code> parameter, e.g.;</p>","
","<pre><code>with open(""test"", 'w') as f:
    print('Foo1,', file=f, end='')
    print('Foo2,', file=f, end='')
    print('Foo3', file=f)
</code></pre>","
",<p>Whichever way you choose I'd suggest using <code>with</code> since it makes the code much easier to read.</p>,"
","<p><strong>Update</strong>: This difference in performance is explained by the fact that <code>write</code> is highly buffered and returns before any writes to disk actually take place (see <a href=""https://stackoverflow.com/questions/3857052/why-is-printing-to-stdout-so-slow-can-it-be-sped-up"">this answer</a>), whereas <code>print</code> (probably) uses line buffering. A simple test for this would be to check performance for long writes as well, where the disadvantages (in terms of speed) for line buffering would be less pronounced.</p>","
","<pre><code>start = start = time.time()
long_line = 'This is a speed test' * 100
with open(""test.txt"", 'w') as f:
    for i in range(1000000):
        # print(long_line, file=f)
        # f.write(long_line + '\n')
end = time.time()

print(end - start, ""s"")
</code></pre>","
","<p>The performance difference now becomes much less pronounced, with an average time of 2.20s for <code>write</code> and 3.10s for <code>print</code>. If you need to concatenate a bunch of strings to get this loooong line performance will suffer, so use-cases where <code>print</code> would be more efficient are a bit rare.</p>","
"
"
","<p>Since 3.5 you can also use the <a href=""https://docs.python.org/3/library/pathlib.html#pathlib.Path.write_text"" rel=""noreferrer""><code>pathlib</code></a> for that purpose:</p>","
","<blockquote>
<p><code>Path.write_text(data, encoding=None, errors=None)</code></p>
<p>Open the file pointed to in text mode, write data to it, and close the file:</p>
</blockquote>","
","<pre><code>import pathlib

pathlib.Path('textfile.txt').write_text('content')
</code></pre>","
"
"
",<p>When you said Line it means some serialized characters which are ended to '\n' characters. Line should be last at some point so we should consider '\n' at the end of each line. Here is solution:</p>,"
","<pre><code>with open('YOURFILE.txt', 'a') as the_file:
    the_file.write(""Hello"")
</code></pre>","
","<p>in append mode after each write the cursor move to new line, if you want to use <code>w</code> mode you should add <code>\n</code> characters at the end of the <code>write()</code> function:</p>","
","<pre><code>the_file.write(""Hello\n"")
</code></pre>","
"
"
",<p>One can also use the <code>io</code> module as in:</p>,"
","<pre><code>import io
my_string = ""hi there""

with io.open(""output_file.txt"", mode='w', encoding='utf-8') as f:
    f.write(my_string)
</code></pre>","
"
"
","<p>If you want to avoid using <code>write()</code> or <code>writelines()</code> and joining the strings with a newline yourself, you can pass all of your lines to <code>print()</code>, and the newline delimiter and your file handle as keyword arguments. This snippet assumes your strings do not have trailing newlines.</p>","
","<pre class=""lang-py prettyprint-override""><code>print(line1, line2, sep=""\n"", file=f)
</code></pre>","
","<p>You don't need to put a special newline character is needed at the end, because <code>print()</code> does that for you.</p>","
","<p>If you have an arbitrary number of lines in a list, you can use list expansion to pass them all to <code>print()</code>.</p>","
","<pre class=""lang-py prettyprint-override""><code>lines = [""The Quick Brown Fox"", ""Lorem Ipsum""]
print(*lines, sep=""\n"", file=f)
</code></pre>","
","<p>It is OK to use <code>""\n""</code> as the separator on Windows, because <code>print()</code> will also automatically convert it to a Windows CRLF newline (<code>""\r\n""</code>).</p>","
"
"
","<p>If you want to insert items in a list with a format per line, a way to start could be:</p>","
","<pre><code>with open('somefile.txt', 'a') as the_file:
    for item in items:
        the_file.write(f""{item}\n"")
</code></pre>","
"
"
",<p>To write text in a file in the flask can be used:</p>,"
","<pre><code>filehandle = open(""text.txt"", ""w"")
filebuffer = [""hi"",""welcome"",""yes yes welcome""]
filehandle.writelines(filebuffer)
filehandle.close()
</code></pre>","
"
"
",<p>You can also try <code>filewriter</code></p>,"
",<p><code>pip install filewriter</code></p>,"
","<pre><code>from filewriter import Writer

Writer(filename='my_file', ext='txt') &lt;&lt; [""row 1 hi there"", ""row 2""]
</code></pre>","
",<p>Writes into <code>my_file.txt</code></p>,"
",<p>Takes an iterable or an object with <code>__str__</code> support. </p>,"
"
"
","<p>When I need to write new lines a lot, I define a lambda that uses a <code>print</code> function:</p>","
","<pre><code>out = open(file_name, 'w')
fwl = lambda *x, **y: print(*x, **y, file=out) # FileWriteLine
fwl('Hi')
</code></pre>","
",<p>This approach has the benefit that it can utilize all the features that are available with the <code>print</code> function.</p>,"
","<p><strong>Update:</strong> As is mentioned by <a href=""https://stackoverflow.com/users/7851470/georgy"">Georgy</a> in the comment section, it is possible to improve this idea further with the <code>partial</code> function: </p>","
","<pre><code>from functools import partial
fwl = partial(print, file=out)
</code></pre>","
","<p>IMHO, this is a more functional and less cryptic approach. </p>","
"
"
","<p>since others have answered how to do it, I'll answer how it happens line by line.</p>","
","<pre><code>with FileOpenerCM('file.txt') as fp: # is equal to ""with open('file.txt') as fp:""
      fp.write('dummy text')
</code></pre>","
","<p>this is a so-called <code>context manager</code>, anything that comes with a <code>with</code> block is a context manager. so let's see how this happens under the hood.</p>","
","<pre><code>class FileOpenerCM:
     def __init__(self, file, mode='w'):
         self.file = open(file, mode)
      
     def __enter__(self):
          return self.file
      
     def __exit__(self, exc_type, exc_value, exc_traceback):
         self.file.close()
</code></pre>","
",<p>the first method <code>__init__</code> is (as you all know) the initialization method of an object. whenever an object is created <code>obj.__init__</code> is definitely called. and that's the place where you put your all the init kinda code.</p>,"
","<p>the second method <code>__enter__</code> is a bit interesting. some of you might not have seen it because it is a specific method for context managers. what it returns is the value to be assigned to the variable after the <code>as</code> keyword. in our case, <code>fp</code>.</p>","
","<p>the last method is the method to run after an error is captured or if the code exits the with block. <code>exc_type</code>, <code>exc_value</code>, <code>exc_traceback</code> variables are the variables that hold the values of the errors that occurred inside with block. for example,</p>","
","<pre><code>exc_type: TypeError
exc_value: unsupported operand type(s) for +: 'int' and 'str
exc_traceback: &lt;traceback object at 0x6af8ee10bc4d&gt;
</code></pre>","
","<p>from the first two variables, you can get info enough info about the error. honestly, I don't know the use of the third variable, but for me, the first two are enough. if you want to do more research on context managers surely you can do it and note that writing classes are not the only way to write context managers. with <a href=""https://docs.python.org/3/library/contextlib.html"" rel=""nofollow noreferrer"">contextlib</a> you can write context managers through functions(actually generators) as well. it's totally up to you to have a look at it. you can surely try
generator functions with contextlib but as I see classes are much cleaner.</p>","
"
"
",<h2>Background</h2>,"
","<p>I just upgraded my Pandas from 0.11 to 0.13.0rc1. Now, the application is popping out many new warnings. One of them like this:</p>","
","<pre><code>E:\FinReporter\FM_EXT.py:449: SettingWithCopyWarning: A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_index,col_indexer] = value instead
  quote_df['TVol']   = quote_df['TVol']/TVOL_SCALE
</code></pre>","
",<p>I want to know what exactly it means?  Do I need to change something?</p>,"
",<p>How should I suspend the warning if I insist to use <code>quote_df['TVol']   = quote_df['TVol']/TVOL_SCALE</code>?</p>,"
",<h2>The function that gives errors</h2>,"
","<pre><code>def _decode_stock_quote(list_of_150_stk_str):
    """"""decode the webpage and return dataframe""""""

    from cStringIO import StringIO

    str_of_all = """".join(list_of_150_stk_str)

    quote_df = pd.read_csv(StringIO(str_of_all), sep=',', names=list('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg')) #dtype={'A': object, 'B': object, 'C': np.float64}
    quote_df.rename(columns={'A':'STK', 'B':'TOpen', 'C':'TPCLOSE', 'D':'TPrice', 'E':'THigh', 'F':'TLow', 'I':'TVol', 'J':'TAmt', 'e':'TDate', 'f':'TTime'}, inplace=True)
    quote_df = quote_df.ix[:,[0,3,2,1,4,5,8,9,30,31]]
    quote_df['TClose'] = quote_df['TPrice']
    quote_df['RT']     = 100 * (quote_df['TPrice']/quote_df['TPCLOSE'] - 1)
    quote_df['TVol']   = quote_df['TVol']/TVOL_SCALE
    quote_df['TAmt']   = quote_df['TAmt']/TAMT_SCALE
    quote_df['STK_ID'] = quote_df['STK'].str.slice(13,19)
    quote_df['STK_Name'] = quote_df['STK'].str.slice(21,30)#.decode('gb2312')
    quote_df['TDate']  = quote_df.TDate.map(lambda x: x[0:4]+x[5:7]+x[8:10])
    
    return quote_df
</code></pre>","
",<h2>More error messages</h2>,"
","<pre><code>E:\FinReporter\FM_EXT.py:449: SettingWithCopyWarning: A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_index,col_indexer] = value instead
  quote_df['TVol']   = quote_df['TVol']/TVOL_SCALE
E:\FinReporter\FM_EXT.py:450: SettingWithCopyWarning: A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_index,col_indexer] = value instead
  quote_df['TAmt']   = quote_df['TAmt']/TAMT_SCALE
E:\FinReporter\FM_EXT.py:453: SettingWithCopyWarning: A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_index,col_indexer] = value instead
  quote_df['TDate']  = quote_df.TDate.map(lambda x: x[0:4]+x[5:7]+x[8:10])
</code></pre>","
"
"
","<p>The <code>SettingWithCopyWarning</code> was created to flag potentially confusing ""chained"" assignments, such as the following, which does not always work as expected, particularly when the first selection returns a <em>copy</em>.  [see <a href=""https://github.com/pydata/pandas/pull/5390"" rel=""noreferrer"">GH5390</a> and <a href=""https://github.com/pydata/pandas/issues/5597"" rel=""noreferrer"">GH5597</a> for background discussion.]</p>","
","<pre><code>df[df['A'] &gt; 2]['B'] = new_val  # new_val not set in df
</code></pre>","
",<p>The warning offers a suggestion to rewrite as follows:</p>,"
","<pre><code>df.loc[df['A'] &gt; 2, 'B'] = new_val
</code></pre>","
","<p>However, this doesn't fit your usage, which is equivalent to:</p>","
","<pre><code>df = df[df['A'] &gt; 2]
df['B'] = new_val
</code></pre>","
","<p>While it's clear that you don't care about writes making it back to the original frame (since you are overwriting the reference to it), unfortunately this pattern cannot be differentiated from the first chained assignment example. Hence the (false positive) warning. The potential for false positives is addressed in the <a href=""https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy"" rel=""noreferrer"">docs on indexing</a>, if you'd like to read further.  You can safely disable this new warning with the following assignment.</p>","
","<pre><code>import pandas as pd
pd.options.mode.chained_assignment = None  # default='warn'
</code></pre>","
",<hr/>,"
",<h2>Other Resources</h2>,"
","<ul>
<li><a href=""https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html"" rel=""noreferrer"">pandas User Guide: Indexing and selecting data</a></li>
<li><a href=""https://jakevdp.github.io/PythonDataScienceHandbook/03.02-data-indexing-and-selection.html"" rel=""noreferrer"">Python Data Science Handbook: Data Indexing and Selection</a></li>
<li><a href=""https://realpython.com/pandas-settingwithcopywarning/"" rel=""noreferrer"">Real Python: SettingWithCopyWarning in Pandas: Views vs Copies</a></li>
<li><a href=""https://www.dataquest.io/blog/settingwithcopywarning/"" rel=""noreferrer"">Dataquest: SettingwithCopyWarning: How to Fix This Warning in Pandas</a></li>
<li><a href=""https://towardsdatascience.com/explaining-the-settingwithcopywarning-in-pandas-ebc19d799d25"" rel=""noreferrer"">Towards Data Science: Explaining the SettingWithCopyWarning in pandas</a></li>
</ul>","
"
"
","<blockquote>
<h3>How to deal with <code>SettingWithCopyWarning</code> in Pandas?</h3>
</blockquote>","
","<p>This post is meant for readers who,</p>","
","<ol>
<li>Would like to understand what this warning means</li>
<li>Would like to understand different ways of suppressing this warning</li>
<li>Would like to understand how to improve their code and follow good practices to avoid this warning in the future.</li>
</ol>","
",<p><strong>Setup</strong></p>,"
","<pre><code>np.random.seed(0)
df = pd.DataFrame(np.random.choice(10, (3, 5)), columns=list('ABCDE'))
df
   A  B  C  D  E
0  5  0  3  3  7
1  9  3  5  2  4
2  7  6  8  8  1
</code></pre>","
",<hr/>,"
",<h1>What is the <code>SettingWithCopyWarning</code>?</h1>,"
","<p>To know how to deal with this warning, it is important to understand what it means and why it is raised in the first place.</p>","
","<p>When filtering DataFrames, it is possible slice/index a frame to return either a <em>view</em>, or a <em>copy</em>, depending on the internal layout and various implementation details. A ""view"" is, as the term suggests, a view into the original data, so modifying the view may modify the original object. On the other hand, a ""copy"" is a replication of data from the original, and modifying the copy has no effect on the original.</p>","
","<p>As mentioned by other answers, the <code>SettingWithCopyWarning</code> was created to flag ""chained assignment"" operations. Consider <code>df</code> in the setup above. Suppose you would like to select all values in column ""B"" where values in column ""A"" is &gt; 5. Pandas allows you to do this in different ways, some more correct than others. For example,</p>","
","<pre><code>df[df.A &gt; 5]['B']
 
1    3
2    6
Name: B, dtype: int64
</code></pre>","
","<p>And,</p>","
","<pre><code>df.loc[df.A &gt; 5, 'B']

1    3
2    6
Name: B, dtype: int64
</code></pre>","
","<p>These return the same result, so if you are only reading these values, it makes no difference. So, what is the issue? The problem with chained assignment, is that it is generally difficult to predict whether a view or a copy is returned, <strong>so this largely becomes an issue when you are attempting to assign values back.</strong> To build on the earlier example, consider how this code is executed by the interpreter:</p>","
","<pre><code>df.loc[df.A &gt; 5, 'B'] = 4
# becomes
df.__setitem__((df.A &gt; 5, 'B'), 4)
</code></pre>","
","<p>With a single <code>__setitem__</code> call to <code>df</code>. OTOH, consider this code:</p>","
","<pre><code>df[df.A &gt; 5]['B'] = 4
# becomes
df.__getitem__(df.A &gt; 5).__setitem__('B', 4)
</code></pre>","
","<p>Now, depending on whether <code>__getitem__</code> returned a view or a copy, the <code>__setitem__</code> operation <strong>may not work</strong>.</p>","
","<p>In general, you should use <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.loc.html"" rel=""noreferrer""><code>loc</code></a> for label-based assignment, and <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iloc.html"" rel=""noreferrer""><code>iloc</code></a> for integer/positional based assignment, as the spec guarantees that they always operate on the original. Additionally, for setting a single cell, you should use <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.at.html"" rel=""noreferrer""><code>at</code></a> and <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iat.html"" rel=""noreferrer""><code>iat</code></a>.</p>","
","<p>More can be found in the <a href=""http://pandas.pydata.org/pandas-docs/stable/indexing.html#returning-a-view-versus-a-copy"" rel=""noreferrer"">documentation</a>.</p>","
","<blockquote>
<p><strong>Note</strong><br/>
All boolean indexing operations done with <code>loc</code> can also be done with <code>iloc</code>. The only difference is that <code>iloc</code> expects either
integers/positions for index or a numpy array of boolean values, and
integer/position indexes for the columns.</p>
<p>For example,</p>
<pre><code>df.loc[df.A &gt; 5, 'B'] = 4
</code></pre>
<p>Can be written nas</p>
<pre><code>df.iloc[(df.A &gt; 5).values, 1] = 4
</code></pre>
<p>And,</p>
<pre><code>df.loc[1, 'A'] = 100
</code></pre>
<p>Can be written as</p>
<pre><code>df.iloc[1, 0] = 100
</code></pre>
<p>And so on.</p>
</blockquote>","
",<hr/>,"
",<h1>Just tell me how to suppress the warning!</h1>,"
","<p>Consider a simple operation on the ""A"" column of <code>df</code>. Selecting ""A"" and dividing by 2 will raise the warning, but the operation will work.</p>","
","<pre><code>df2 = df[['A']]
df2['A'] /= 2
/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/IPython/__main__.py:1: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

df2
     A
0  2.5
1  4.5
2  3.5
</code></pre>","
",<p>There are a couple ways of directly silencing this warning:</p>,"
","<ol>
<li><p>(recommended) <strong>Use <code>loc</code> to slice subsets</strong>:</p>
<pre><code> df2 = df.loc[:, ['A']]
 df2['A'] /= 2     # Does not raise 
</code></pre>
</li>
<li><p><strong>Change <code>pd.options.mode.chained_assignment</code></strong><br/>
Can be set to <code>None</code>, <code>""warn""</code>, or <code>""raise""</code>. <code>""warn""</code> is the default. <code>None</code> will suppress the warning entirely, and <code>""raise""</code> will throw a <code>SettingWithCopyError</code>, preventing the operation from going through.</p>
<pre><code> pd.options.mode.chained_assignment = None
 df2['A'] /= 2
</code></pre>
</li>
<li><p><strong>Make a <code>deepcopy</code></strong></p>
<pre><code> df2 = df[['A']].copy(deep=True)
 df2['A'] /= 2
</code></pre>
</li>
</ol>","
","<p><a href=""https://stackoverflow.com/questions/20625582/how-to-deal-with-settingwithcopywarning-in-pandas#comment62589711_20625582"">@Peter Cotton</a> in the comments, came up with a nice way of non-intrusively changing the mode (modified from <a href=""https://gist.github.com/notbanker/2be3ed34539c86e22ffdd88fd95ad8bc"" rel=""noreferrer"">this gist</a>) using a context manager, to set the mode only as long as it is required, and the reset it back to the original state when finished.</p>","
","<blockquote>
<pre><code>class ChainedAssignent:
    def __init__(self, chained=None):
        acceptable = [None, 'warn', 'raise']
        assert chained in acceptable, ""chained must be in "" + str(acceptable)
        self.swcw = chained

    def __enter__(self):
        self.saved_swcw = pd.options.mode.chained_assignment
        pd.options.mode.chained_assignment = self.swcw
        return self

    def __exit__(self, *args):
        pd.options.mode.chained_assignment = self.saved_swcw
</code></pre>
</blockquote>","
",<p>The usage is as follows:</p>,"
","<pre><code># some code here
with ChainedAssignent():
    df2['A'] /= 2
# more code follows
</code></pre>","
","<p>Or, to raise the exception</p>","
","<pre><code>with ChainedAssignent(chained='raise'):
    df2['A'] /= 2

SettingWithCopyError: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead
</code></pre>","
",<hr/>,"
","<h1>The ""XY Problem"": What am I doing wrong?</h1>","
","<p>A lot of the time, users attempt to look for ways of suppressing this exception without fully understanding why it was raised in the first place. This is a good example of an <a href=""https://meta.stackexchange.com/q/66377"">XY problem</a>, where users attempt to solve a problem ""Y"" that is actually a symptom of a deeper rooted problem ""X"". Questions will be raised based on common problems that encounter this warning, and solutions will then be presented.</p>","
","<blockquote>
<p><strong>Question 1</strong><br/>
I have a DataFrame</p>
<pre><code>df
       A  B  C  D  E
    0  5  0  3  3  7
    1  9  3  5  2  4
    2  7  6  8  8  1
</code></pre>
<p>I want to assign values in col ""A"" &gt; 5 to 1000. My expected output is</p>
<pre><code>      A  B  C  D  E
0     5  0  3  3  7
1  1000  3  5  2  4
2  1000  6  8  8  1
</code></pre>
</blockquote>","
",<p>Wrong way to do this:</p>,"
","<pre><code>df.A[df.A &gt; 5] = 1000         # works, because df.A returns a view
df[df.A &gt; 5]['A'] = 1000      # does not work
df.loc[df.A &gt; 5]['A'] = 1000   # does not work
</code></pre>","
",<p>Right way using <code>loc</code>:</p>,"
","<pre><code>df.loc[df.A &gt; 5, 'A'] = 1000
</code></pre>","
",<br/>,"
","<blockquote>
<p><strong>Question 2<sup>1</sup></strong><br/>
I am trying to set the value in cell (1, 'D') to 12345. My expected output is</p>
<pre><code>   A  B  C      D  E
0  5  0  3      3  7
1  9  3  5  12345  4
2  7  6  8      8  1
</code></pre>
<p>I have tried different ways of accessing this cell, such as
<code>df['D'][1]</code>. What is the best way to do this?</p>
<p><sub>1. This question isn't specifically related to the warning, but
it is good to understand how to do this particular operation correctly
so as to avoid situations where the warning could potentially arise in
future.</sub></p>
</blockquote>","
",<p>You can use any of the following methods to do this.</p>,"
","<pre><code>df.loc[1, 'D'] = 12345
df.iloc[1, 3] = 12345
df.at[1, 'D'] = 12345
df.iat[1, 3] = 12345
</code></pre>","
",<br/>,"
","<blockquote>
<p><strong>Question 3</strong><br/>
I am trying to subset values based on some condition. I have a
DataFrame</p>
<pre><code>   A  B  C  D  E
1  9  3  5  2  4
2  7  6  8  8  1
</code></pre>
<p>I would like to assign values in ""D"" to 123 such that ""C"" == 5. I
tried</p>
<pre><code>df2.loc[df2.C == 5, 'D'] = 123
</code></pre>
<p>Which seems fine but I am <em>still</em> getting the
<code>SettingWithCopyWarning</code>! How do I fix this?</p>
</blockquote>","
","<p>This is actually probably because of code higher up in your pipeline. Did you create <code>df2</code> from something larger, like</p>","
","<pre><code>df2 = df[df.A &gt; 5]
</code></pre>","
","<p>? In this case, boolean indexing will return a view, so <code>df2</code> will reference the original. What you'd need to do is assign <code>df2</code> to a <em>copy</em>:</p>","
","<pre><code>df2 = df[df.A &gt; 5].copy()
# Or,
# df2 = df.loc[df.A &gt; 5, :]
</code></pre>","
",<br/>,"
","<blockquote>
<p><strong>Question 4</strong><br/>
I'm trying to drop column ""C"" in-place from</p>
</blockquote>","
","<blockquote>
<pre><code>   A  B  C  D  E
1  9  3  5  2  4
2  7  6  8  8  1
</code></pre>
<p>But using</p>
<pre><code>df2.drop('C', axis=1, inplace=True)
</code></pre>
<p>Throws <code>SettingWithCopyWarning</code>. Why is this happening?</p>
</blockquote>","
","<p>This is because <code>df2</code> must have been created as a view from some other slicing operation, such as</p>","
","<pre><code>df2 = df[df.A &gt; 5]
</code></pre>","
","<p>The solution here is to either make a <code>copy()</code> of <code>df</code>, or use <code>loc</code>, as before.</p>","
"
"
",<p>In general the point of the <code>SettingWithCopyWarning</code> is to show users (and especially new users) that they <em>may</em> be operating on a copy and not the original as they think. There <em>are</em> false positives (IOW if you know what you are doing it could be <em>ok</em>). One possibility is simply to turn off the (by default <em>warn</em>) warning as @Garrett suggest.</p>,"
",<p>Here is another option:</p>,"
","<pre><code>In [1]: df = DataFrame(np.random.randn(5, 2), columns=list('AB'))

In [2]: dfa = df.ix[:, [1, 0]]

In [3]: dfa.is_copy
Out[3]: True

In [4]: dfa['A'] /= 2
/usr/local/bin/ipython:1: SettingWithCopyWarning: A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_index,col_indexer] = value instead
  #!/usr/local/bin/python
</code></pre>","
","<p>You can set the <code>is_copy</code> flag to <code>False</code>, which will effectively turn off the check, <em>for that object</em>:</p>","
","<pre><code>In [5]: dfa.is_copy = False

In [6]: dfa['A'] /= 2
</code></pre>","
",<p>If you explicitly copy then no further warning will happen:</p>,"
","<pre><code>In [7]: dfa = df.ix[:, [1, 0]].copy()

In [8]: dfa['A'] /= 2
</code></pre>","
","<p>The code the OP is showing above, while legitimate, and probably something I do as well, is technically a case for this warning, and not a false positive. Another way to <em>not</em> have the warning would be to do the selection operation via <code>reindex</code>, e.g.</p>","
","<pre><code>quote_df = quote_df.reindex(columns=['STK', ...])
</code></pre>","
","<p>Or, </p>","
","<pre><code>quote_df = quote_df.reindex(['STK', ...], axis=1)  # v.0.21
</code></pre>","
"
"
",<h2>Pandas dataframe copy warning</h2>,"
",<p>When you go and do something like this:</p>,"
","<pre><code>quote_df = quote_df.ix[:,[0,3,2,1,4,5,8,9,30,31]]
</code></pre>","
","<p><code>pandas.ix</code> <em>in this case</em> returns a new, stand alone dataframe.</p>","
","<p>Any values you decide to change in this dataframe, will not change the original dataframe.</p>","
",<p>This is what pandas tries to warn you about.</p>,"
",<hr/>,"
",<h2>Why <code>.ix</code> is a bad idea</h2>,"
","<p>The <code>.ix</code> object tries to do more than one thing, and for anyone who has read anything about clean code, this is a strong smell.</p>","
",<p>Given this dataframe:</p>,"
","<pre><code>df = pd.DataFrame({""a"": [1,2,3,4], ""b"": [1,1,2,2]})
</code></pre>","
",<p>Two behaviors:</p>,"
","<pre><code>dfcopy = df.ix[:,[""a""]]
dfcopy.a.ix[0] = 2
</code></pre>","
",<p>Behavior one: <code>dfcopy</code> is now a stand alone dataframe. Changing it will not change <code>df</code></p>,"
","<pre><code>df.ix[0, ""a""] = 3
</code></pre>","
",<p>Behavior two: This changes the original dataframe.</p>,"
",<hr/>,"
",<h2>Use <code>.loc</code> instead</h2>,"
",<p>The pandas developers recognized that the <code>.ix</code> object was quite smelly[speculatively] and thus created two new objects which helps in the accession and assignment of data. (The other being <code>.iloc</code>)</p>,"
","<p><code>.loc</code> is faster, because it does not try to create a copy of the data.</p>","
","<p><code>.loc</code> is meant to modify your existing dataframe inplace, which is more memory efficient.</p>","
","<p><code>.loc</code> is predictable, it has one behavior.</p>","
",<hr/>,"
",<h2>The solution</h2>,"
","<p>What you are doing in your code example is loading a big file with lots of columns, then modifying it to be smaller.</p>","
",<p>The <code>pd.read_csv</code> function can help you out with a lot of this and also make the loading of the file a lot faster.</p>,"
",<p>So instead of doing this</p>,"
","<pre><code>quote_df = pd.read_csv(StringIO(str_of_all), sep=',', names=list('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg')) #dtype={'A': object, 'B': object, 'C': np.float64}
quote_df.rename(columns={'A':'STK', 'B':'TOpen', 'C':'TPCLOSE', 'D':'TPrice', 'E':'THigh', 'F':'TLow', 'I':'TVol', 'J':'TAmt', 'e':'TDate', 'f':'TTime'}, inplace=True)
quote_df = quote_df.ix[:,[0,3,2,1,4,5,8,9,30,31]]
</code></pre>","
",<p>Do this</p>,"
","<pre><code>columns = ['STK', 'TPrice', 'TPCLOSE', 'TOpen', 'THigh', 'TLow', 'TVol', 'TAmt', 'TDate', 'TTime']
df = pd.read_csv(StringIO(str_of_all), sep=',', usecols=[0,3,2,1,4,5,8,9,30,31])
df.columns = columns
</code></pre>","
","<p>This will only read the columns you are interested in, and name them properly. No need for using the evil <code>.ix</code> object to do magical stuff.</p>","
"
"
",<p>Here I answer the question directly. How to deal with it?</p>,"
","<p>Make a <code>.copy(deep=False)</code> after you slice. See <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.copy.html"" rel=""noreferrer"">pandas.DataFrame.copy</a>.</p>","
","<p>Wait, doesn't a slice return a copy? After all, this is what the warning message is attempting to say? Read the long answer:</p>","
","<pre><code>import pandas as pd
df = pd.DataFrame({'x':[1,2,3]})
</code></pre>","
",<p>This gives a warning:</p>,"
","<pre><code>df0 = df[df.x&gt;2]
df0['foo'] = 'bar'
</code></pre>","
",<p>This does not:</p>,"
","<pre><code>df1 = df[df.x&gt;2].copy(deep=False)
df1['foo'] = 'bar'
</code></pre>","
","<p>Both <code>df0</code> and <code>df1</code> are <code>DataFrame</code> objects, but something about them is different that enables pandas to print the warning. Let's find out what it is.</p>","
","<pre><code>import inspect
slice= df[df.x&gt;2]
slice_copy = df[df.x&gt;2].copy(deep=False)
inspect.getmembers(slice)
inspect.getmembers(slice_copy)
</code></pre>","
","<p>Using your diff tool of choice, you will see that beyond a couple of addresses, the only material difference is this:</p>","
","<pre><code>|          | slice   | slice_copy |
| _is_copy | weakref | None       |
</code></pre>","
",<p>The method that decides whether to warn is <code>DataFrame._check_setitem_copy</code> which checks <code>_is_copy</code>. So here you go. Make a <code>copy</code> so that your DataFrame is not <code>_is_copy</code>.</p>,"
","<p>The warning is suggesting to use <code>.loc</code>, but if you use <code>.loc</code> on a frame that <code>_is_copy</code>, you will still get the same warning. Misleading? Yes. Annoying? You bet. Helpful? Potentially, when chained assignment is used. But it cannot correctly detect chain assignment and prints the warning indiscriminately.</p>","
"
"
","<p>This topic is really confusing with Pandas. Luckily, it has a relatively simple solution.</p>","
",<p>The problem is that it is not always clear whether data filtering operations (e.g. loc) return a copy or a view of the DataFrame. Further use of such filtered DataFrame could therefore be confusing.</p>,"
",<p>The simple solution is (unless you need to work with very large sets of data):</p>,"
","<p>Whenever you need to update any values, always make sure that you explicitly copy the DataFrame before the assignment.</p>","
","<pre><code>df  # Some DataFrame
df = df.loc[:, 0:2]  # Some filtering (unsure whether a view or copy is returned)
df = df.copy()  # Ensuring a copy is made
df[df[""Name""] == ""John""] = ""Johny""  # Assignment can be done now (no warning)
</code></pre>","
"
"
",<p>I had been getting this issue with <code>.apply()</code> when assigning a new dataframe from a pre-existing dataframe on which i've used the <code>.query()</code> method. For instance:</p>,"
","<pre><code>prop_df = df.query('column == ""value""')
prop_df['new_column'] = prop_df.apply(function, axis=1)
</code></pre>","
",<p>Would return this error. The fix that seems to resolve the error in this case is by changing this to:</p>,"
","<pre><code>prop_df = df.copy(deep=True)
prop_df = prop_df.query('column == ""value""')
prop_df['new_column'] = prop_df.apply(function, axis=1)
</code></pre>","
","<p>However, this is NOT efficient especially when using large dataframes, due to having to make a new copy.</p>","
","<p>If you're using the <code>.apply()</code> method in generating a new column and its values, a fix that resolves the error and is more efficient is by adding <code>.reset_index(drop=True)</code>:</p>","
","<pre><code>prop_df = df.query('column == ""value""').reset_index(drop=True)
prop_df['new_column'] = prop_df.apply(function, axis=1)
</code></pre>","
"
"
","<p>To remove any doubt, my solution was to make a deep copy of the slice instead of a regular copy.
This may not be applicable depending on your context (Memory constraints / size of the slice, potential for performance degradation - especially if the copy occurs in a loop like it did for me, etc...)</p>","
","<p>To be clear, here is the warning I received:</p>","
","<pre><code>/opt/anaconda3/lib/python3.6/site-packages/ipykernel/__main__.py:54:
SettingWithCopyWarning: A value is trying to be set on a copy of a slice from a DataFrame
See the caveats in the documentation:
http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
</code></pre>","
",<h2>Illustration</h2>,"
","<p>I had doubts that the warning was thrown because of a column I was dropping on a copy of the slice. While not technically trying to set a value in the copy of the slice, that was still a modification of the copy of the slice.
Below are the (simplified) steps I have taken to confirm the suspicion, I hope it will help those of us who are trying to understand the warning.</p>","
",<h3>Example 1: dropping a column on the original affects the copy</h3>,"
",<p>We knew that already but this is a healthy reminder. This is <em>NOT</em> what the warning is about.</p>,"
","<pre><code>&gt;&gt; data1 = {'A': [111, 112, 113], 'B':[121, 122, 123]}
&gt;&gt; df1 = pd.DataFrame(data1)
&gt;&gt; df1

    A   B
0   111 121
1   112 122
2   113 123


&gt;&gt; df2 = df1
&gt;&gt; df2

A   B
0   111 121
1   112 122
2   113 123

# Dropping a column on df1 affects df2
&gt;&gt; df1.drop('A', axis=1, inplace=True)
&gt;&gt; df2
    B
0   121
1   122
2   123
</code></pre>","
",<p>It is possible to avoid changes made on df1 to affect df2. Note: you can avoid importing <code>copy.deepcopy</code> by doing <code>df.copy()</code> instead.</p>,"
","<pre><code>&gt;&gt; data1 = {'A': [111, 112, 113], 'B':[121, 122, 123]}
&gt;&gt; df1 = pd.DataFrame(data1)
&gt;&gt; df1

A   B
0   111 121
1   112 122
2   113 123

&gt;&gt; import copy
&gt;&gt; df2 = copy.deepcopy(df1)
&gt;&gt; df2
A   B
0   111 121
1   112 122
2   113 123

# Dropping a column on df1 does not affect df2
&gt;&gt; df1.drop('A', axis=1, inplace=True)
&gt;&gt; df2
    A   B
0   111 121
1   112 122
2   113 123
</code></pre>","
",<h3>Example 2: dropping a column on the copy may affect the original</h3>,"
",<p>This actually illustrates the warning.</p>,"
","<pre><code>&gt;&gt; data1 = {'A': [111, 112, 113], 'B':[121, 122, 123]}
&gt;&gt; df1 = pd.DataFrame(data1)
&gt;&gt; df1

    A   B
0   111 121
1   112 122
2   113 123

&gt;&gt; df2 = df1
&gt;&gt; df2

    A   B
0   111 121
1   112 122
2   113 123

# Dropping a column on df2 can affect df1
# No slice involved here, but I believe the principle remains the same?
# Let me know if not
&gt;&gt; df2.drop('A', axis=1, inplace=True)
&gt;&gt; df1

B
0   121
1   122
2   123
</code></pre>","
",<p>It is possible to avoid changes made on df2 to affect df1</p>,"
","<pre><code>&gt;&gt; data1 = {'A': [111, 112, 113], 'B':[121, 122, 123]}
&gt;&gt; df1 = pd.DataFrame(data1)
&gt;&gt; df1

    A   B
0   111 121
1   112 122
2   113 123

&gt;&gt; import copy
&gt;&gt; df2 = copy.deepcopy(df1)
&gt;&gt; df2

A   B
0   111 121
1   112 122
2   113 123

&gt;&gt; df2.drop('A', axis=1, inplace=True)
&gt;&gt; df1

A   B
0   111 121
1   112 122
2   113 123
</code></pre>","
",<p>Cheers!</p>,"
"
"
",<p>This should work:</p>,"
","<pre><code>quote_df.loc[:,'TVol'] = quote_df['TVol']/TVOL_SCALE
</code></pre>","
"
"
",<p>Some may want to simply suppress the warning:</p>,"
","<pre><code>class SupressSettingWithCopyWarning:
    def __enter__(self):
        pd.options.mode.chained_assignment = None

    def __exit__(self, *args):
        pd.options.mode.chained_assignment = 'warn'

with SupressSettingWithCopyWarning():
    #code that produces warning
</code></pre>","
"
"
",<p>For me worked:</p>,"
","<pre class=""lang-py prettyprint-override""><code>import pandas as pd
# ...
pd.set_option('mode.chained_assignment', None)
</code></pre>","
"
"
",<p><strong>Followup beginner question / remark</strong></p>,"
","<p>Maybe a clarification for other beginners like me (I come from R which seems to work a bit differently under the hood). The following harmless-looking and functional code kept producing the SettingWithCopy warning, and I couldn't figure out why. I had both read and understood the issued with ""chained indexing"", but my code doesn't contain any:</p>","
","<pre><code>def plot(pdb, df, title, **kw):
    df['target'] = (df['ogg'] + df['ugg']) / 2
    # ...
</code></pre>","
","<p>But then, later, much too late, I looked at where the plot() function is called:</p>","
","<pre><code>    df = data[data['anz_emw'] &gt; 0]
    pixbuf = plot(pdb, df, title)
</code></pre>","
","<p>So ""df"" isn't a data frame but an object that somehow remembers that it was created by indexing a data frame (so is that a view?) which would make the line in plot()</p>","
","<pre><code> df['target'] = ...
</code></pre>","
",<p>equivalent to</p>,"
","<pre><code> data[data['anz_emw'] &gt; 0]['target'] = ...
</code></pre>","
",<p>which is a chained indexing. Did I get that right?</p>,"
","<p>Anyway, </p>","
","<pre><code>def plot(pdb, df, title, **kw):
    df.loc[:,'target'] = (df['ogg'] + df['ugg']) / 2
</code></pre>","
",<p>fixed it.</p>,"
"
"
","<p>As this question is already fully explained and discussed in existing answers I will just provide a neat <code>pandas</code> approach to the context manager using <code>pandas.option_context</code> (links to <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.option_context.html"" rel=""noreferrer"">docs</a> and <a href=""https://pandas.pydata.org/pandas-docs/stable/user_guide/options.html"" rel=""noreferrer"">example</a>) - there is absolutely no need to create a custom class with all the dunder methods and other bells and whistles.</p>","
",<p>First the context manager code itself:</p>,"
","<pre><code>from contextlib import contextmanager

@contextmanager
def SuppressPandasWarning():
    with pd.option_context(""mode.chained_assignment"", None):
        yield
</code></pre>","
",<p>Then an example:</p>,"
","<pre><code>import pandas as pd
from string import ascii_letters

a = pd.DataFrame({""A"": list(ascii_letters[0:4]), ""B"": range(0,4)})

mask = a[""A""].isin([""c"", ""d""])
# Even shallow copy below is enough to not raise the warning, but why is a mystery to me.
b = a.loc[mask]  # .copy(deep=False)

# Raises the `SettingWithCopyWarning`
b[""B""] = b[""B""] * 2

# Does not!
with SuppressPandasWarning():
    b[""B""] = b[""B""] * 2
</code></pre>","
","<p>Worth noticing is that both approches do not modify <code>a</code>, which is a bit surprising to me, and even a shallow df copy with <code>.copy(deep=False)</code> would prevent this warning to be raised (as far as I understand shallow copy should at least modify <code>a</code> as well, but it doesn't. <code>pandas</code> magic.).</p>","
"
"
",<p>If you have assigned the slice to a variable and want to set using the variable as in the following:</p>,"
","<pre><code>df2 = df[df['A'] &gt; 2]
df2['B'] = value
</code></pre>","
","<p>And you do not want to use Jeffs solution because your condition computing <code>df2</code> is to long or for some other reason, then you can use the following:</p>","
","<pre><code>df.loc[df2.index.tolist(), 'B'] = value
</code></pre>","
","<p><code>df2.index.tolist()</code> returns the indices from all entries in df2, which will then be used to set column B in the original dataframe.</p>","
"
"
","<p>You could avoid the whole problem like this, I believe:</p>","
","<pre><code>return (
    pd.read_csv(StringIO(str_of_all), sep=',', names=list('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg')) #dtype={'A': object, 'B': object, 'C': np.float64}
    .rename(columns={'A':'STK', 'B':'TOpen', 'C':'TPCLOSE', 'D':'TPrice', 'E':'THigh', 'F':'TLow', 'I':'TVol', 'J':'TAmt', 'e':'TDate', 'f':'TTime'}, inplace=True)
    .ix[:,[0,3,2,1,4,5,8,9,30,31]]
    .assign(
        TClose=lambda df: df['TPrice'],
        RT=lambda df: 100 * (df['TPrice']/quote_df['TPCLOSE'] - 1),
        TVol=lambda df: df['TVol']/TVOL_SCALE,
        TAmt=lambda df: df['TAmt']/TAMT_SCALE,
        STK_ID=lambda df: df['STK'].str.slice(13,19),
        STK_Name=lambda df: df['STK'].str.slice(21,30)#.decode('gb2312'),
        TDate=lambda df: df.TDate.map(lambda x: x[0:4]+x[5:7]+x[8:10]),
    )
)
</code></pre>","
","<p>Using Assign. From the <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.assign.html"" rel=""nofollow noreferrer"">documentation</a>: Assign new columns to a DataFrame, returning a new object (a copy) with all the original columns in addition to the new ones. </p>","
","<p>See Tom Augspurger's article on method chaining in pandas: <a href=""https://tomaugspurger.github.io/method-chaining"" rel=""nofollow noreferrer"">https://tomaugspurger.github.io/method-chaining</a></p>","
"
"
",<p>For me this issue occured in a following &gt;simplified&lt; example. And I was also able to solve it (hopefully with a correct solution):</p>,"
",<p>old code with warning:</p>,"
","<pre><code>def update_old_dataframe(old_dataframe, new_dataframe):
    for new_index, new_row in new_dataframe.iterrorws():
        old_dataframe.loc[new_index] = update_row(old_dataframe.loc[new_index], new_row)

def update_row(old_row, new_row):
    for field in [list_of_columns]:
        # line with warning because of chain indexing old_dataframe[new_index][field]
        old_row[field] = new_row[field]  
    return old_row
</code></pre>","
",<p>This printed the warning for the line <code>old_row[field] = new_row[field]</code></p>,"
","<p>Since the rows in update_row method are actually type <code>Series</code>, I replaced the line with:</p>","
","<pre><code>old_row.at[field] = new_row.at[field]
</code></pre>","
","<p>i.e. <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.at.html"" rel=""nofollow noreferrer"">method</a> for accessing/lookups for a <code>Series</code>. Eventhough both works just fine and the result is same, this way I don't have to disable the warnings (=keep them for other chain indexing issues somewhere else).</p>","
",<p>I hope this may help someone.</p>,"
"
"
","<p>I was facing the same warning, while I executed this  part of my code:</p>","
","<pre><code>    def scaler(self, numericals):
        scaler = MinMaxScaler()
        self.data.loc[:, numericals[0]] = scaler.fit_transform(self.data.loc[:, numericals[0]])
        self.data.loc[:, numericals[1]] = scaler.fit_transform(self.data.loc[:, numericals[1]])
</code></pre>","
","<p>which <code>scaler</code> is a MinMaxScaler and <code>numericals[0]</code>  contains names of 3 of my numerical columns.
the  warning was removed as I changed the code to:</p>","
","<pre><code>    def scaler(self, numericals):
        scaler = MinMaxScaler()
        self.data.loc[:][numericals[0]] = scaler.fit_transform(self.data.loc[:][numericals[0]])
        self.data.loc[:][numericals[1]] = scaler.fit_transform(self.data.loc[:][numericals[1]])
</code></pre>","
","<p>So, Just change <code>[:, ~]</code> to <code>[:][~]</code></p>","
"
"
","<p>Just create a copy of your dataframe(s) using <code>.copy()</code> method before the warning appears, to remove all of your warnings. This happens because we do not want to make changes to the original quote_df. In other words, we do not want to play with the reference of the object of the quote_df which we have created for quote_df.</p>","
","<pre><code>quote_df = quote_df.copy()
</code></pre>","
"
"
","<p>this might apply to numpy only, which means you might need to import it,  but the data i used for my examples numpy was not essential with the calculations, but you can simply stop this settingwithcopy warning message, by using this 1 Line of Code below,</p>","
","<pre><code>np.warnings.filterwarnings('ignore')
</code></pre>","
"
"
","<p>In my case, I would create a new column based on the index but I got this warning as you:</p>","
","<pre><code>df_temp[""Quarter""] = df_temp.index.quarter
</code></pre>","
",<p>I use insert() instead of direct assignment and it works for me:</p>,"
","<pre><code>df_temp.insert(loc=0, column='Quarter', value=df_temp.index.quarter)
</code></pre>","
"
"
","<p>Today, I came across the <code>dict</code> method <code>get</code> which, given a key in the dictionary, returns the associated value.</p>","
","<p>For what purpose is this function useful? If I wanted to find a value associated with a key in a dictionary, I can just do <code>dict[key]</code>, and it returns the same thing:</p>","
","<pre><code>dictionary = {""Name"": ""Harry"", ""Age"": 17}
dictionary[""Name""]
dictionary.get(""Name"")
</code></pre>","
"
"
",<p>It allows you to provide a default value if the key is missing:</p>,"
","<pre><code>dictionary.get(""bogus"", default_value)
</code></pre>","
","<p>returns <code>default_value</code> (whatever you choose it to be), whereas</p>","
","<pre><code>dictionary[""bogus""]
</code></pre>","
",<p>would raise a <code>KeyError</code>.  </p>,"
","<p>If omitted, <code>default_value</code> is <code>None</code>, such that</p>","
","<pre><code>dictionary.get(""bogus"")  # &lt;-- No default specified -- defaults to None
</code></pre>","
",<p>returns <code>None</code> just like </p>,"
","<pre><code>dictionary.get(""bogus"", None)
</code></pre>","
",<p>would. </p>,"
"
"
","<blockquote>
<p><strong>What is the <code>dict.get()</code> method?</strong></p>
</blockquote>","
","<p>As already mentioned the <code>get</code> method contains an additional parameter which indicates the missing value. <a href=""https://docs.python.org/3/library/stdtypes.html#dict.get"" rel=""noreferrer"">From the documentation</a></p>","
","<blockquote>
<pre><code>get(key[, default])
</code></pre>
<p>Return the value for key if key is in the dictionary, else default. If default is not given, it defaults to None, so that this method never raises a <code>KeyError</code>.</p>
</blockquote>","
",<p>An example can be </p>,"
","<pre><code>&gt;&gt;&gt; d = {1:2,2:3}
&gt;&gt;&gt; d[1]
2
&gt;&gt;&gt; d.get(1)
2
&gt;&gt;&gt; d.get(3)
&gt;&gt;&gt; repr(d.get(3))
'None'
&gt;&gt;&gt; d.get(3,1)
1
</code></pre>","
","<blockquote>
<p><strong>Are there speed improvements anywhere?</strong></p>
</blockquote>","
","<p>As mentioned <a href=""https://wiki.python.org/moin/PythonSpeed/PerformanceTips"" rel=""noreferrer"">here</a>,</p>","
","<blockquote>
<p>It seems that all three approaches now exhibit similar performance (within about 10% of each other), more or less independent of the properties of the list of words.</p>
</blockquote>","
","<p>Earlier <code>get</code> was considerably slower, However now the speed is almost comparable along with the additional advantage of returning the default value. But to clear all our queries, we can test on a fairly large list (Note that the test includes looking up all the valid keys only)</p>","
","<pre><code>def getway(d):
    for i in range(100):
        s = d.get(i)

def lookup(d):
    for i in range(100):
        s = d[i]
</code></pre>","
","<p>Now timing these two functions using <a href=""https://docs.python.org/3/library/timeit.html"" rel=""noreferrer""><code>timeit</code></a></p>","
","<pre><code>&gt;&gt;&gt; import timeit
&gt;&gt;&gt; print(timeit.timeit(""getway({i:i for i in range(100)})"",""from __main__ import getway""))
20.2124660015
&gt;&gt;&gt; print(timeit.timeit(""lookup({i:i for i in range(100)})"",""from __main__ import lookup""))
16.16223979
</code></pre>","
","<p>As we can see the lookup is faster than the get as there is no function lookup. This can be seen through <a href=""https://docs.python.org/3/library/dis.html"" rel=""noreferrer""><code>dis</code></a></p>","
","<pre><code>&gt;&gt;&gt; def lookup(d,val):
...     return d[val]
... 
&gt;&gt;&gt; def getway(d,val):
...     return d.get(val)
... 
&gt;&gt;&gt; dis.dis(getway)
  2           0 LOAD_FAST                0 (d)
              3 LOAD_ATTR                0 (get)
              6 LOAD_FAST                1 (val)
              9 CALL_FUNCTION            1
             12 RETURN_VALUE        
&gt;&gt;&gt; dis.dis(lookup)
  2           0 LOAD_FAST                0 (d)
              3 LOAD_FAST                1 (val)
              6 BINARY_SUBSCR       
              7 RETURN_VALUE  
</code></pre>","
","<blockquote>
<p><strong>Where will it be useful?</strong></p>
</blockquote>","
",<p>It will be useful whenever you want to provide a default value whenever you are looking up a dictionary. This reduces</p>,"
","<pre><code> if key in dic:
      val = dic[key]
 else:
      val = def_val
</code></pre>","
","<p>To a single line, <code>val = dic.get(key,def_val)</code></p>","
","<blockquote>
<p><strong>Where will it be NOT useful?</strong></p>
</blockquote>","
",<p>Whenever you want to return a <code>KeyError</code> stating that the particular key is not available. Returning a default value also carries the risk that a particular default value may be a key too! </p>,"
","<blockquote>
<p><strong>Is it possible to have <code>get</code> like feature in <code>dict['key']</code>?</strong></p>
</blockquote>","
","<p>Yes! We need to implement the <a href=""https://docs.python.org/3/reference/datamodel.html#object.__missing__"" rel=""noreferrer""><code>__missing__</code></a> in a dict subclass.</p>","
",<p>A sample program can be</p>,"
","<pre><code>class MyDict(dict):
    def __missing__(self, key):
        return None
</code></pre>","
",<p>A small demonstration can be</p>,"
","<pre><code>&gt;&gt;&gt; my_d = MyDict({1:2,2:3})
&gt;&gt;&gt; my_d[1]
2
&gt;&gt;&gt; my_d[3]
&gt;&gt;&gt; repr(my_d[3])
'None'
</code></pre>","
"
"
","<p><code>get</code> takes a second optional value.  If the specified key does not exist in your dictionary, then this value will be returned.</p>","
","<pre><code>dictionary = {""Name"": ""Harry"", ""Age"": 17}
dictionary.get('Year', 'No available data')
&gt;&gt; 'No available data'
</code></pre>","
","<p>If you do not give the second parameter, <code>None</code> will be returned.</p>","
","<p>If you use indexing as in <code>dictionary['Year']</code>, nonexistent keys will raise <code>KeyError</code>.</p>","
"
"
","<p>I will give a practical example in scraping web data using python, a lot of the times you will get keys with no values, in those cases you will get errors if you use dictionary['key'], whereas dictionary.get('key', 'return_otherwise') has no problems.</p>","
","<p>Similarly, I would use ''.join(list) as opposed to list[0] if you try to capture a single value from a list.</p>","
",<p>hope it helps.</p>,"
",<p>[Edit] Here is a practical example:</p>,"
","<p>Say, you are calling an API, which returns a JOSN file you need to parse. The first JSON looks like following:</p>","
","<pre><code>{""bids"":{""id"":16210506,""submitdate"":""2011-10-16 15:53:25"",""submitdate_f"":""10\/16\/2011 at 21:53 CEST"",""submitdate_f2"":""p\u0159ed 2 lety"",""submitdate_ts"":1318794805,""users_id"":""2674360"",""project_id"":""1250499""}}
</code></pre>","
",<p>The second JOSN is like this:</p>,"
","<pre><code>{""bids"":{""id"":16210506,""submitdate"":""2011-10-16 15:53:25"",""submitdate_f"":""10\/16\/2011 at 21:53 CEST"",""submitdate_f2"":""p\u0159ed 2 lety"",""users_id"":""2674360"",""project_id"":""1250499""}}
</code></pre>","
","<p>Note that the second JSON is missing the ""submitdate_ts"" key, which is pretty normal in any data structure.</p>","
","<p>So when you try to access the value of that key in a loop, can you call it with the following:</p>","
","<pre><code>for item in API_call:
    submitdate_ts = item[""bids""][""submitdate_ts""]
</code></pre>","
","<p>You could, but it will give you a traceback error for the second JSON line, because the key simply doesn't exist.</p>","
","<p>The appropriate way of coding this, could be the following:</p>","
","<pre><code>for item in API_call:
    submitdate_ts = item.get(""bids"", {'x': None}).get(""submitdate_ts"")
</code></pre>","
",<p>{'x': None} is there to avoid the second level getting an error. Of course you can build in more fault tolerance into the code if you are doing scraping. Like first specifying a if condition</p>,"
"
"
",<p>A gotcha to be aware of when using <code>.get()</code>:</p>,"
","<p>If the dictionary contains the key used in the call to <code>.get()</code> and its value is <code>None</code>, the <code>.get()</code> method will return <code>None</code> even if a default value is supplied.</p>","
","<p>For example, the following returns <code>None</code>, not <code>'alt_value'</code> as may be expected:</p>","
","<pre><code>d = {'key': None}
assert None is d.get('key', 'alt_value')
</code></pre>","
","<p><code>.get()</code>'s second value is only returned if the key supplied is NOT in the dictionary, not if the return value of that call is <code>None</code>.</p>","
"
"
","<p>The purpose is that you can give a default value if the key is not found, which is very useful</p>","
","<pre><code>dictionary.get(""Name"",'harry')
</code></pre>","
"
"
","<blockquote>
<p>For what purpose is this function useful?</p>
</blockquote>","
",<p>One particular usage is counting with a dictionary. Let's assume you want to count the number of occurrences of each element in a given list. The common way to do so is to make a dictionary where keys are elements and values are the number of occurrences.</p>,"
","<pre><code>fruits = ['apple', 'banana', 'peach', 'apple', 'pear']
d = {}
for fruit in fruits:
    if fruit not in d:
        d[fruit] = 0
    d[fruit] += 1
</code></pre>","
","<p>Using the <code>.get()</code> method, you can make this code more compact and clear:</p>","
","<pre><code>for fruit in fruits:
    d[fruit] = d.get(fruit, 0) + 1
</code></pre>","
"
"
","<blockquote>
<p>Why dict.get(key) instead of dict[key]?</p>
</blockquote>","
",<h3>0. Summary</h3>,"
","<p>Comparing to <code>dict[key]</code>, <code>dict.get</code> provides a fallback value when looking up for a key.</p>","
",<h3>1. Definition</h3>,"
","<p>get(key[, default])   <a href=""https://docs.python.org/3/library/stdtypes.html#dict.get"" rel=""noreferrer"">4. Built-in Types  Python 3.6.4rc1 documentation</a> </p>","
","<p>Return the value for key if key is in the dictionary, else default. If default is not given, it defaults to None, so that this method never raises a KeyError.</p>","
","<pre><code>d = {""Name"": ""Harry"", ""Age"": 17}
In [4]: d['gender']
KeyError: 'gender'
In [5]: d.get('gender', 'Not specified, please add it')
Out[5]: 'Not specified, please add it'
</code></pre>","
",<h3>2. Problem it solves.</h3>,"
","<p>If without <code>default value</code>, you have to write cumbersome codes to handle such an exception.</p>","
","<pre><code>def get_harry_info(key):
    try:
        return ""{}"".format(d[key])
    except KeyError:
        return 'Not specified, please add it'
In [9]: get_harry_info('Name')
Out[9]: 'Harry'
In [10]: get_harry_info('Gender')
Out[10]: 'Not specified, please add it'
</code></pre>","
","<p>As a convenient solution, <code>dict.get</code> introduces an optional default value avoiding above unwiedly codes.</p>","
",<h3>3. Conclusion</h3>,"
",<p><code>dict.get</code> has an additional default value option to deal with exception if key is absent from the dictionary</p>,"
"
"
","<p>One difference, that can be an advantage, is that if we are looking for a key that doesn't exist we will get None, not like when we use the brackets notation, in which case we will get an error thrown:</p>","
","<pre><code>print(dictionary.get(""address"")) # None
print(dictionary[""address""]) # throws KeyError: 'address'
</code></pre>","
","<p>Last thing that is cool about the get method, is that it receives an additional optional argument for a default value, that is if we tried to get the score value of a student, but the student doesn't have a score key we can get a 0 instead.</p>","
",<p>So instead of doing this (or something similar):</p>,"
","<pre><code>score = None
try:
    score = dictionary[""score""]
except KeyError:
    score = 0
</code></pre>","
",<p>We can do this:</p>,"
","<pre><code>score = dictionary.get(""score"", 0)
# score = 0
</code></pre>","
"
"
","<p>One other use-case that I do not see mentioned is as the <code>key</code> argument for functions like <code>sorted</code>, <code>max</code> and <code>min</code>. The <code>get</code> method allows for keys to be returned based on their values.</p>","
","<pre><code>&gt;&gt;&gt; ages = {""Harry"": 17, ""Lucy"": 16, ""Charlie"": 18}
&gt;&gt;&gt; print(sorted(ages, key=ages.get))
['Lucy', 'Harry', 'Charlie']
&gt;&gt;&gt; print(max(ages, key=ages.get))
Charlie
&gt;&gt;&gt; print(min(ages, key=ages.get))
Lucy
</code></pre>","
","<p>Thanks to this <a href=""https://stackoverflow.com/a/3282904/8716401"">answer</a> to a different question for providing this use-case!</p>","
"
"
","<p>Other <a href=""https://stackoverflow.com/a/37968524/6243352"">answers</a> have clearly explained the difference between dict bracket keying and <code>.get</code> and <a href=""https://stackoverflow.com/a/57582439/6243352"">mentioned a <em>fairly</em> innocuous pitfall</a> when <code>None</code> or the default value is also a valid key.</p>","
","<p>Given this information, it may be tempting conclude that <code>.get</code> is somehow safer and better than bracket indexing and should always be used instead of bracket lookups, as argued in <a href=""https://medium.com/better-programming/stop-using-square-bracket-notation-to-get-a-dictionarys-value-in-python-c617f6ea15a3"" rel=""nofollow noreferrer""><em>Stop Using Square Bracket Notation to Get a Dictionary's Value in Python</em></a>, even in the common case when they expect the lookup to succeed (i.e. never raise a <code>KeyError</code>).</p>","
","<p>The author of the blog post argues that <code>.get</code> ""safeguards your code"":</p>","
","<blockquote>
<p>Notice how trying to reference a term that doesn't exist causes a <code>KeyError</code>. This can cause major headaches, especially when dealing with unpredictable business data.</p>
<p>While we could wrap our statement in a <code>try</code>/<code>except</code> or <code>if</code> statement, this much care for a dictionary term will quickly pile up.</p>
</blockquote>","
","<p>It's true that in the uncommon case for <a href=""https://en.wikipedia.org/wiki/Tony_Hoare#Apologies_and_retractions"" rel=""nofollow noreferrer"">null</a> (<code>None</code>)-coalescing or otherwise filling in a missing value to handle unpredictable dynamic data, a judiciously-deployed <code>.get</code> is a useful and Pythonic shorthand tool for ungainly <code>if key in dct:</code> and <code>try</code>/<code>except</code> blocks that only exist to set default values when the key might be missing as part of the behavioral specification for the program.</p>","
","<p>However, replacing <em>all</em> bracket dict lookups, including those that you assert must succeed, with <code>.get</code> is a different matter. This practice effectively downgrades a class of <a href=""https://en.wikipedia.org/wiki/Runtime_error_detection"" rel=""nofollow noreferrer"">runtime errors</a> that help reveal bugs into silent illegal state scenarios that tend to be harder to identify and debug.</p>","
","<p>A common mistake among programmers is to think exceptions <em>cause</em> headaches and attempt to suppress them, using techniques like wrapping code in <a href=""https://wiki.c2.com/?PokemonExceptionHandling"" rel=""nofollow noreferrer""><code>try</code> ... <code>except: pass</code> blocks</a>. They later realize the <em>real</em> headache is never seeing the breach of application logic at the point of failure and deploying a broken application. Better programming practice is to embrace assertions for all program invariants such as keys that must be in a dictionary.</p>","
","<p>The hierarchy of error safety is, broadly:</p>","
","<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Error category</th>
<th>Relative ease of debugging</th>
</tr>
</thead>
<tbody>
<tr>
<td>Compile-time error</td>
<td>Easy; go to the line and fix the problem</td>
</tr>
<tr>
<td>Runtime exception</td>
<td>Medium; control needs to flow to the error and it may be due to unanticipated edge cases or hard-to-reproduce state like a race condition between threads, but at least we get a clear error message and stack trace when it does happen.</td>
</tr>
<tr>
<td>Silent logical error</td>
<td>Difficult; we may not even know it exists, and when we do, tracking down state that caused it can be very challenging due to lack of locality and potential for multiple assertion breaches.</td>
</tr>
</tbody>
</table>
</div>","
","<p>When programming language designers talk about program safety, a major goal is to surface, not suppress, genuine errors by promoting runtime errors to compile-time errors and promote silent logical errors to either runtime exceptions or (ideally) compile-time errors.</p>","
","<p>Python, by design as an interpreted language, relies heavily on runtime exceptions instead of compiler errors. Missing methods or properties, illegal type operations like <code>1 + ""a""</code> and out of bounds or missing indices or keys raise by default.</p>","
","<p>Some languages like JS, Java, Rust and Go use the fallback behavior for their maps by default (and in many cases, don't provide a throw/raise alternative), but Python throws by default, along with other languages like C#. Perl/PHP issue an uninitialized value warning.</p>","
","<p>Indiscriminate application of <code>.get</code> to all dict accesses, even those that aren't expected to fail and have no fallback for dealing with <code>None</code> (or whatever default is used) running amok through the code, pretty much tosses away Python's runtime exception safety net for this class of errors, silencing or adding indirection to potential bugs.</p>","
","<p>Other supporting reasons to prefer bracket lookups (with the occasional, well-placed <code>.get</code> where a default is expected):</p>","
","<ul>
<li>Prefer writing standard, idiomatic code using the tools provided by the language. Python programmers usually (correctly) prefer brackets for the exception safety reasons given above and because it's the default behavior for Python dicts.</li>
<li>Always using <code>.get</code> forfeits intent by making cases when you expect to provide a default <code>None</code> value indistinguishable from a lookup you assert must succeed.</li>
<li>Testing increases in complexity in proportion to the new ""legal"" program paths permitted by <code>.get</code>. Effectively, each lookup is now a branch that can succeed or fail -- both cases must be tested to establish coverage, even if the default path is effectively unreachable by specification (ironically leading to additional <code>if val is not None:</code> or <code>try</code> for all future uses of the retrieved value; unnecessary and confusing for something that should never be <code>None</code> in the first place).</li>
<li><a href=""https://stackoverflow.com/questions/39582115/python-dictionary-lookup-performance-get-vs-in""><code>.get</code> is a bit slower</a>.</li>
<li><code>.get</code> is harder to type and uglier to read (compare Java's tacked-on-feel <code>ArrayList</code> syntax to native-feel C# <code>Lists</code> or C++ vector code). Minor.</li>
</ul>","
","<p>Some languages like C++ and Ruby offer alternate methods (<code>at</code> and <code>fetch</code>, respectively) to opt-in to throwing an error on a bad access, while C# offers opt-in fallback value <code>TryGetValue</code> similar to Python's <code>get</code>.</p>","
","<p>Since JS, Java, Ruby, Go and Rust bake the fallback approach of <code>.get</code> into all hash lookups by default, it can't be that bad, one might think. It's true that this isn't the largest issue facing language designers and there are plenty of use cases for the no-throw access version, so it's unsurprising that there's no consensus across languages.</p>","
","<p>But as I've argued, Python (along with C#) has done better than these languages by making the assert option the default. It's a loss of safety and expressivity to opt-out of using it to report contract violations at the point of failure by indiscriminately using <code>.get</code> across the board.</p>","
"
"
","<p>It allow you to provide a default value, instead of get an error when the value is not found. persuedocode like this :</p>","
","<pre><code>class dictionary():
    def get(self,key,default):
         if self[key] is not found : 
               return default
         else:
               return self[key]
</code></pre>","
"
"
",<p>Based on usage should use this <code>get</code> method.</p>,"
",<p><strong>Example1</strong></p>,"
","<pre><code>In [14]: user_dict = {'type': False}

In [15]: user_dict.get('type', '')

Out[15]: False

In [16]: user_dict.get('type') or ''

Out[16]: ''
</code></pre>","
",<p><strong>Example2</strong></p>,"
","<pre><code>In [17]: user_dict = {'type': ""lead""}

In [18]: user_dict.get('type') or ''

Out[18]: 'lead'

In [19]: user_dict.get('type', '')

Out[19]: 'lead'
</code></pre>","
"
"
","<p>In Django model QuerySets, I see that there is a <code>__gt</code> and <code>__lt</code> for comparative values, but is there a <code>__ne</code> or <code>!=</code> (<strong>not equals</strong>)? I want to filter out using a not equals. For example, for</p>","
","<pre><code>Model:
    bool a;
    int x;
</code></pre>","
",<p>I want to do</p>,"
","<pre><code>results = Model.objects.exclude(a=True, x!=5)
</code></pre>","
",<p>The <code>!=</code> is not correct syntax. I also tried <code>__ne</code>.</p>,"
",<p>I ended up using:</p>,"
","<pre><code>results = Model.objects.exclude(a=True, x__lt=5).exclude(a=True, x__gt=5)
</code></pre>","
"
"
","<p>You can use <a href=""https://docs.djangoproject.com/en/stable/topics/db/queries/#complex-lookups-with-q"" rel=""noreferrer"">Q objects</a> for this. They can be negated with the <code>~</code> operator and combined much like normal Python expressions:</p>","
","<pre><code>from myapp.models import Entry
from django.db.models import Q

Entry.objects.filter(~Q(id=3))
</code></pre>","
",<p>will return all entries except the one(s) with <code>3</code> as their ID:</p>,"
","<pre><code>[&lt;Entry: Entry object&gt;, &lt;Entry: Entry object&gt;, &lt;Entry: Entry object&gt;, ...]
</code></pre>","
"
"
","<p>Your query appears to have a double negative, you want to exclude all rows where <code>x</code> is not 5, so in other words you want to include all rows where <code>x</code> <em>is</em> 5. I believe this will do the trick:</p>","
","<pre><code>results = Model.objects.filter(x=5).exclude(a=True)
</code></pre>","
","<p>To answer your specific question, there is no ""not equal to"" <a href=""http://docs.djangoproject.com/en/stable/ref/models/querysets/#field-lookups"" rel=""noreferrer"">field lookup</a> but that's probably because Django has both <a href=""https://docs.djangoproject.com/en/stable/ref/models/querysets/#filter"" rel=""noreferrer""><code>filter</code></a> and <a href=""https://docs.djangoproject.com/en/stable/ref/models/querysets/#exclude"" rel=""noreferrer""><code>exclude</code></a> methods available so you can always just switch the logic around to get the desired result.</p>","
"
"
","<p>the <code>field=value</code> syntax in queries is a shorthand for <code>field__exact=value</code>.  That is to say that <a href=""http://docs.djangoproject.com/en/dev/ref/models/querysets/#field-lookups"" rel=""noreferrer"">Django puts query operators on query fields in the identifiers</a>.  Django supports the following operators:</p>","
","<pre><code>exact
iexact
contains
icontains
in
gt
gte
lt
lte
startswith
istartswith
endswith
iendswith
range

date
year
iso_year
month
day
week
week_day
iso_week_day
quarter
time
hour
minute
second

isnull
regex
iregex
</code></pre>","
","<p>I'm sure by combining these with the Q objects as <a href=""https://stackoverflow.com/questions/687295/how-do-i-do-a-not-equal-in-django-queryset-filtering/1154977#1154977"">Dave Vogt suggests</a> and using <code>filter()</code> or <code>exclude()</code> as <a href=""https://stackoverflow.com/questions/687295/how-do-i-do-a-not-equal-in-django-queryset-filtering/687316#687316"">Jason Baker suggests</a> you'll get exactly what you need for just about any possible query.</p>","
"
"
",<p>There are three options:</p>,"
","<ol>
<li><p><a href=""https://docs.djangoproject.com/en/stable/topics/db/queries/#retrieving-specific-objects-with-filters"" rel=""noreferrer"">Chain <code>exclude</code> and <code>filter</code></a></p>
<pre><code>results = Model.objects.exclude(a=True).filter(x=5)
</code></pre>
</li>
<li><p>Use <a href=""https://docs.djangoproject.com/en/stable/ref/models/querysets/#q-objects"" rel=""noreferrer""><code>Q()</code> objects</a> and the <a href=""https://docs.djangoproject.com/en/stable/topics/db/queries/#complex-lookups-with-q-objects"" rel=""noreferrer""><code>~</code> operator</a></p>
<pre><code>from django.db.models import Q
object_list = QuerySet.filter(~Q(a=True), x=5)
</code></pre>
</li>
<li><p>Register a <a href=""https://docs.djangoproject.com/en/stable/howto/custom-lookups/#a-lookup-example"" rel=""noreferrer"">custom lookup function</a></p>
<pre><code>from django.db.models import Lookup
from django.db.models import Field

@Field.register_lookup
class NotEqual(Lookup):
    lookup_name = 'ne'

    def as_sql(self, compiler, connection):
        lhs, lhs_params = self.process_lhs(compiler, connection)
        rhs, rhs_params = self.process_rhs(compiler, connection)
        params = lhs_params + rhs_params
        return '%s &lt;&gt; %s' % (lhs, rhs), params
</code></pre>
<p>Which can the be used as usual:</p>
<pre><code>results = Model.objects.exclude(a=True, x__ne=5)
</code></pre>
</li>
</ol>","
"
"
","<p>It's easy to create a custom lookup, there's an <code>__ne</code> lookup example in <a href=""https://docs.djangoproject.com/en/stable/howto/custom-lookups/#a-lookup-example"" rel=""noreferrer"">Django's official documentation</a>.</p>","
",<p>You need to create the lookup itself first:</p>,"
","<pre><code>from django.db.models import Lookup

class NotEqual(Lookup):
    lookup_name = 'ne'

    def as_sql(self, compiler, connection):
        lhs, lhs_params = self.process_lhs(compiler, connection)
        rhs, rhs_params = self.process_rhs(compiler, connection)
        params = lhs_params + rhs_params
        return '%s &lt;&gt; %s' % (lhs, rhs), params
</code></pre>","
",<p>Then you need to register it:</p>,"
","<pre><code>from django.db.models import Field
Field.register_lookup(NotEqual)
</code></pre>","
",<p>And now you can use the <code>__ne</code> lookup in your queries like this:</p>,"
","<pre><code>results = Model.objects.exclude(a=True, x__ne=5)
</code></pre>","
"
"
","<p>While you can filter Models with <code>=</code>, <code>__gt</code>, <code>__gte</code>, <code>__lt</code>, <code>__lte</code>, you cannot use <code>ne</code> or <code>!=</code>. However, you can achieve better filtering using the Q object.</p>","
","<p>You can avoid chaining <code>QuerySet.filter()</code> and <code>QuerySet.exclude()</code>, and use this:</p>","
","<pre><code>from django.db.models import Q
object_list = QuerySet.filter(~Q(field='not wanted'), field='wanted')
</code></pre>","
"
"
","<h1>Pending design decision. Meanwhile, use <code>exclude()</code></h1>","
","<p>The Django issue tracker has the remarkable <a href=""https://code.djangoproject.com/ticket/5763"">entry #5763</a>,
titled <em>""Queryset doesn't have a ""not equal"" filter operator""</em>.
It is remarkable because (as of April 2016) it was 
""opened 9 years ago"" (in the Django stone age),
""closed 4 years ago"", and 
""last changed 5 months ago"".</p>","
","<p>Read through the discussion, it is interesting.
Basically, some people argue <code>__ne</code> should be added
while others say <code>exclude()</code> is clearer and hence <code>__ne</code>
should <em>not</em> be added.</p>","
","<p>(I agree with the former, because the latter argument is
roughly equivalent to saying Python should not have <code>!=</code> because
it has <code>==</code> and <code>not</code> already...)</p>","
"
"
",<p>Using exclude and filter</p>,"
","<pre><code>results = Model.objects.filter(x=5).exclude(a=true)
</code></pre>","
"
"
",<p>You should use <code>filter</code> and <code>exclude</code> like this</p>,"
","<pre><code>results = Model.objects.exclude(a=true).filter(x=5)
</code></pre>","
"
"
","<p><a href=""https://pypi.org/project/django-model-values/"" rel=""noreferrer"">Django-model-values</a> (disclosure: author) provides an implementation of the <a href=""https://github.com/coady/django-model-values/blob/v0.5.1/model_values.py#L374"" rel=""noreferrer"">NotEqual</a> lookup, as in <a href=""https://stackoverflow.com/a/29227603/36433"">this answer</a>.  It also provides syntactic support for it:</p>","
","<pre><code>from model_values import F
Model.objects.exclude(F.x != 5, a=True)
</code></pre>","
"
"
",<p>This will give your desired result.</p>,"
","<pre><code>from django.db.models import Q
results = Model.objects.exclude(Q(a=True) &amp; ~Q(x=5))
</code></pre>","
","<p>for <strong>not equal</strong> you can use <code>~</code> on an equal query. obviously, <code>Q</code> can be used to reach the equal query.</p>","
"
"
",<p>The last bit of code will exclude all objects where x!=5 and a is True.  Try this:</p>,"
","<pre><code>results = Model.objects.filter(a=False, x=5)
</code></pre>","
","<p>Remember, the = sign in the above line is assigning False to the parameter a and the number 5 to the parameter x.  It's not checking for equality.  Thus, there isn't really any way to use the != symbol in a query call.</p>","
"
"
","<p>What you are looking for are all objects that have either <code>a=false</code> <strong>or</strong> <code>x=5</code>. In Django, <code>|</code> serves as <code>OR</code> operator between querysets:</p>","
","<pre><code>results = Model.objects.filter(a=false)|Model.objects.filter(x=5)
</code></pre>","
"
"
","<p><pre>results = Model.objects.filter(a = True).exclude(x = 5)</pre> Generetes this sql: <pre>select * from tablex where a != 0 and x !=5</pre>The sql depends on how your True/False field is represented, and the database engine. The django code is all you need though. </p>","
"
"
",<p>Watch out for lots of incorrect answers to this question!</p>,"
","<p>Gerard's logic is correct, though it will return a list rather than a queryset (which might not matter).</p>","
","<p>If you need a queryset, use Q:</p>","
","<pre><code>from django.db.models import Q
results = Model.objects.filter(Q(a=false) | Q(x=5))
</code></pre>","
"
"
","<p>If we need to exclude/negate based on the sub queryset we can use,</p>","
","<p><a href=""https://docs.djangoproject.com/en/3.2/ref/models/conditional-expressions/#conditional-filter"" rel=""nofollow noreferrer"">Conditional filter</a>:</p>","
","<p>When a conditional expression returns a boolean value, it is possible to use it directly in filters. Here <code>non_unique_account_type</code> returns a boolean value. But, still, we can use it in the filter.</p>","
","<pre><code>&gt;&gt;&gt; non_unique_account_type = Client.objects.filter(
...     account_type=OuterRef('account_type'),
... ).exclude(pk=OuterRef('pk')).values('pk')
&gt;&gt;&gt; Client.objects.filter(~Exists(non_unique_account_type))
</code></pre>","
","<p>In the SQL terms, it evaluates to:</p>","
","<pre><code>SELECT * FROM client c0
WHERE NOT EXISTS (
  SELECT c1.id
  FROM client c1
  WHERE c1.account_type = c0.account_type AND NOT c1.id = c0.id
)
</code></pre>","
"
"
",<p>I have recently installed tensorflow (Windows CPU version) and received the following message:</p>,"
","<blockquote>
<p>Successfully installed tensorflow-1.4.0 tensorflow-tensorboard-0.4.0rc2</p>
</blockquote>","
",<p>Then when I tried to run</p>,"
","<pre class=""lang-py prettyprint-override""><code>import tensorflow as tf
hello = tf.constant('Hello, TensorFlow!')
sess = tf.Session()
sess.run(hello)
'Hello, TensorFlow!'
a = tf.constant(10)
b = tf.constant(32)
sess.run(a + b)
42
sess.close()
</code></pre>","
","<p>(which I found through <a href=""https://github.com/tensorflow/tensorflow"" rel=""noreferrer"">https://github.com/tensorflow/tensorflow</a>)</p>","
",<p>I received the following message:</p>,"
","<blockquote>
<p>2017-11-02 01:56:21.698935: I C:\tf_jenkins\home\workspace\rel-win\M\windows\PY\36\tensorflow\core\platform\cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX AVX2</p>
</blockquote>","
",<p>But when I ran</p>,"
","<pre class=""lang-py prettyprint-override""><code>import tensorflow as tf
hello = tf.constant('Hello, TensorFlow!')
sess = tf.Session()
print(sess.run(hello))
</code></pre>","
","<p>it ran as it should and output <code>Hello, TensorFlow!</code>, which indicates that the installation was successful indeed but there is something else that is wrong.</p>","
",<p>Do you know what the problem is and how to fix it?</p>,"
"
"
",<h2>What is this warning about?</h2>,"
","<p>Modern CPUs provide a lot of low-level instructions, besides the usual arithmetic and logic, known as extensions, e.g. SSE2, SSE4, AVX, etc. From the <a href=""https://en.wikipedia.org/wiki/Advanced_Vector_Extensions"" rel=""noreferrer"">Wikipedia</a>:</p>","
","<blockquote>
<p><strong>Advanced Vector Extensions</strong> (<strong>AVX</strong>) are extensions to the x86 instruction
set architecture for microprocessors from Intel and AMD proposed by
Intel in March 2008 and first supported by Intel with the Sandy
Bridge processor shipping in Q1 2011 and later on by AMD with the
Bulldozer processor shipping in Q3 2011. AVX provides new features,
new instructions and a new coding scheme.</p>
</blockquote>","
","<p>In particular, AVX introduces <a href=""https://en.wikipedia.org/wiki/Multiply%E2%80%93accumulate_operation#Fused_multiply.E2.80.93add"" rel=""noreferrer"">fused multiply-accumulate</a> (FMA) operations, which speed up linear algebra computation, namely dot-product, matrix multiply, convolution, etc. Almost every machine-learning training involves a great deal of these operations, hence will be faster on a CPU that supports AVX and FMA (up to 300%). The warning states that your CPU does support AVX (hooray!).</p>","
",<p>I'd like to stress here: it's all about <strong>CPU only</strong>.</p>,"
",<h2>Why isn't it used then?</h2>,"
","<p>Because tensorflow default distribution is built <a href=""https://github.com/tensorflow/tensorflow/issues/7778"" rel=""noreferrer"">without CPU extensions</a>, such as SSE4.1, SSE4.2, AVX, AVX2, FMA, etc. The default builds (ones from <code>pip install tensorflow</code>) are intended to be compatible with as many CPUs as possible. Another argument is that even with these extensions CPU is a lot slower than a GPU, and it's expected for medium- and large-scale machine-learning training to be performed on a GPU.</p>","
",<h2>What should you do?</h2>,"
","<p><strong>If you have a GPU</strong>, you shouldn't care about AVX support, because most expensive ops will be dispatched on a GPU device (unless explicitly set not to). In this case, you can simply ignore this warning by</p>","
","<pre><code># Just disables the warning, doesn't take advantage of AVX/FMA to run faster
import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'
</code></pre>","
","<p>... or by setting <code>export TF_CPP_MIN_LOG_LEVEL=2</code> if you're on Unix. Tensorflow is working fine anyway, but you won't see these annoying warnings.</p>","
",<hr/>,"
","<p><strong>If you don't have a GPU</strong> and want to utilize CPU as much as possible, <strong>you should build tensorflow from the source optimized for <em>your</em> CPU</strong> with AVX, AVX2, and FMA enabled if your CPU supports them. It's been discussed in <a href=""https://stackoverflow.com/q/41293077/712995"">this question</a> and also <a href=""https://github.com/tensorflow/tensorflow/issues/8037"" rel=""noreferrer"">this GitHub issue</a>. Tensorflow uses an ad-hoc build system called <a href=""https://bazel.build/"" rel=""noreferrer"">bazel</a> and building it is not that trivial, but is certainly doable. After this, not only will the warning disappear, tensorflow performance should also improve.</p>","
"
"
",<p>Update the tensorflow binary for your CPU &amp; OS using this command</p>,"
","<pre><code>pip install --ignore-installed --upgrade ""Download URL""
</code></pre>","
",<p>The download url of the whl file can be found here</p>,"
","<p><a href=""https://github.com/lakshayg/tensorflow-build"" rel=""noreferrer"">https://github.com/lakshayg/tensorflow-build</a></p>","
"
"
",<h1>CPU optimization with GPU</h1>,"
",<p>There are performance gains you can get by installing TensorFlow from the source even if you have a GPU and use it for training and inference.  The reason is that some TF operations only have CPU implementation and cannot run on your GPU.</p>,"
","<p>Also, there are some performance enhancement tips that makes good use of your CPU.  <a href=""https://www.tensorflow.org/performance/performance_guide"" rel=""noreferrer"">TensorFlow's performance guide</a> recommends the following:</p>","
","<blockquote>
<p>Placing input pipeline operations on the CPU can significantly improve performance. Utilizing the CPU for the input pipeline frees the GPU to focus on training.</p>
</blockquote>","
","<p>For best performance, you should write your code to utilize your CPU and GPU to work in tandem, and not dump it all on your GPU if you have one. 
 Having your TensorFlow binaries optimized for your CPU could pay off hours of saved running time and you have to do it once.</p>","
"
"
","<p>For Windows, you can check the <a href=""https://software.intel.com/en-us/articles/intel-optimization-for-tensorflow-installation-guide#Anaconda_main_win"" rel=""noreferrer"">official Intel MKL optimization for TensorFlow</a> wheels that are compiled with AVX2. This solution speeds up my inference ~x3.</p>","
","<pre><code>conda install tensorflow-mkl
</code></pre>","
"
"
","<p>For Windows (Thanks to the owner f040225), go to here: <a href=""https://github.com/fo40225/tensorflow-windows-wheel"" rel=""noreferrer"">https://github.com/fo40225/tensorflow-windows-wheel</a> to fetch the url for your environment based on the combination of ""tf + python + cpu_instruction_extension"". Then use this cmd to install:</p>","
","<pre><code>pip install --ignore-installed --upgrade ""URL""
</code></pre>","
","<p>If you encounter the ""File is not a zip file"" error, download the .whl to your local computer, and use this cmd to install:</p>","
","<pre><code>pip install --ignore-installed --upgrade /path/target.whl
</code></pre>","
"
"
","<p>If you use the <strong>pip</strong> version of TensorFlow, it means it's already compiled and you are just installing it. Basically you install TensorFlow-GPU, but when you download it from the repository and trying to build it, you should build it with CPU AVX support. If you ignore it, you will get a warning every time when you run on the CPU. You can take a look at those too.</p>","
","<p><a href=""https://ai-pool.com/d/proper-way-to-compile-tensorflow-with-sse4-2-and-avx"" rel=""nofollow noreferrer"">Proper way to compile Tensorflow with SSE4.2 and AVX</a></p>","
","<p><a href=""https://ai-pool.com/d/what_is_avx_cpu_support_in_tensorflow"" rel=""nofollow noreferrer"">What is AVX Cpu support in tensorflow</a></p>","
"
"
",<p>The easiest way that I found to fix this is to uninstall everything then install a specific version of tensorflow-gpu:</p>,"
","<ol>
<li>uninstall tensorflow: </li>
</ol>","
","<pre><code>    pip uninstall tensorflow
</code></pre>","
","<ol start=""2"">
<li>uninstall tensorflow-gpu: (make sure to run this even if you are not sure if you installed it)</li>
</ol>","
","<pre><code>    pip uninstall tensorflow-gpu
</code></pre>","
","<ol start=""3"">
<li>Install specific tensorflow-gpu version:</li>
</ol>","
","<pre><code>    pip install tensorflow-gpu==2.0.0
    pip install tensorflow_hub
    pip install tensorflow_datasets
</code></pre>","
",<p>You can check if this worked by adding the following code into a python file:</p>,"
","<pre><code>from __future__ import absolute_import, division, print_function, unicode_literals

import numpy as np

import tensorflow as tf
import tensorflow_hub as hub
import tensorflow_datasets as tfds

print(""Version: "", tf.__version__)
print(""Eager mode: "", tf.executing_eagerly())
print(""Hub Version: "", hub.__version__)
print(""GPU is"", ""available"" if tf.config.experimental.list_physical_devices(""GPU"") else ""NOT AVAILABLE"")
</code></pre>","
",<p>Run the file and then the output should be something like this:</p>,"
","<pre><code>Version:  2.0.0
Eager mode:  True
Hub Version:  0.7.0
GPU is available
</code></pre>","
",<p>Hope this helps</p>,"
"
"
",<p>What worked for me tho is this library <code>https://pypi.org/project/silence-tensorflow/</code> </p>,"
","<p>Install this library and do as instructed on the page, it works like a charm!</p>","
"
"
",<p>Try using anaconda. I had the same error. One lone option was to build tensorflow from source which took long time. I tried using conda and it worked.</p>,"
","<ol>
<li>Create a new environment in anaconda.</li>
<li><code>conda -c conda-forge tensorflow</code></li>
</ol>","
","<p>Then, it worked.</p>","
"
"
","<p>Is there a portable way to get the current user's username in Python (i.e., one that works under both Linux and Windows, at least).  It would work like <code>os.getuid</code>:</p>","
","<pre><code>&gt;&gt;&gt; os.getuid()
42
&gt;&gt;&gt; os.getusername()
'slartibartfast'
</code></pre>","
","<p>I googled around and was surprised not to find a definitive answer (although perhaps I was just googling poorly).  The <a href=""http://www.python.org/doc/2.5.2/lib/module-pwd.html"" rel=""noreferrer"">pwd</a> module provides a relatively easy way to achieve this under, say, Linux, but it is not present on Windows.  Some of the search results suggested that getting the username under Windows can be complicated in certain circumstances (e.g., running as a Windows service), although I haven't verified that.</p>","
"
"
","<p>Look at <a href=""http://docs.python.org/library/getpass.html"" rel=""noreferrer"">getpass</a> module</p>","
","<pre><code>import getpass
getpass.getuser()
'kostya'
</code></pre>","
","<p>Availability: Unix, Windows</p>","
",<hr/>,"
","<p>p.s. Per comment below ""<em>this function looks at the values of various environment variables to determine the user name. Therefore, this function should not be relied on for access control purposes (or possibly any other purpose, since it allows any user to impersonate any other).</em>""</p>","
"
"
",<p>You best bet would be to combine <code>os.getuid()</code> with <code>pwd.getpwuid()</code>:</p>,"
","<pre><code>import os
import pwd

def get_username():
    return pwd.getpwuid( os.getuid() )[ 0 ]
</code></pre>","
",<p>Refer to the pwd docs for more details:</p>,"
","<p><a href=""http://docs.python.org/library/pwd.html"" rel=""noreferrer"">http://docs.python.org/library/pwd.html</a></p>","
"
"
",<p>You can also use:</p>,"
","<pre><code> os.getlogin()
</code></pre>","
"
"
",<p>You can probably use:</p>,"
","<pre><code>os.environ.get('USERNAME')
</code></pre>","
",<p>or</p>,"
","<pre><code>os.environ.get('USER')
</code></pre>","
",<p>But it's not going to be safe because environment variables can be changed.</p>,"
"
"
","<p>These might work.  I don't know how they behave when running as a service.  They aren't portable, but that's what <code>os.name</code> and <code>if</code>statements are for.</p>","
","<pre><code>win32api.GetUserName()

win32api.GetUserNameEx(...) 
</code></pre>","
","<p>See:
<a href=""http://timgolden.me.uk/python/win32_how_do_i/get-the-owner-of-a-file.html"" rel=""noreferrer"">http://timgolden.me.uk/python/win32_how_do_i/get-the-owner-of-a-file.html</a></p>","
"
"
","<p>If you are needing this to get user's home dir, below could be considered as portable (win32 and linux at least), part of a standard library.</p>","
","<pre><code>&gt;&gt;&gt; os.path.expanduser('~')
'C:\\Documents and Settings\\johnsmith'
</code></pre>","
",<p>Also you could parse such string to get only last path component (ie. user name).</p>,"
","<p>See: <a href=""http://docs.python.org/2/library/os.path.html#os.path.expanduser"" rel=""noreferrer"">os.path.expanduser</a></p>","
"
"
",<p>To me using <code>os</code> module looks the best for portability: Works best on both Linux and Windows.</p>,"
","<pre><code>import os

# Gives user's home directory
userhome = os.path.expanduser('~')          

print ""User's home Dir: "" + userhome

# Gives username by splitting path based on OS
print ""username: "" + os.path.split(userhome)[-1]           
</code></pre>","
",<p>Output:</p>,"
",<p>Windows:</p>,"
","<blockquote>
<p>User's home Dir: C:\Users\myuser</p>
<p>username: myuser</p>
</blockquote>","
",<p>Linux:</p>,"
","<blockquote>
<p>User's home Dir: /root</p>
<p>username: root</p>
</blockquote>","
",<p>No need of installing any modules or extensions. </p>,"
"
"
","<p>Combined <code>pwd</code> and <code>getpass</code> approach, based on other answers:</p>","
","<pre><code>try:
  import pwd
except ImportError:
  import getpass
  pwd = None

def current_user():
  if pwd:
    return pwd.getpwuid(os.geteuid()).pw_name
  else:
    return getpass.getuser()
</code></pre>","
"
"
","<p><a href=""https://github.com/giampaolo/psutil"" rel=""noreferrer"">psutil</a> provides a portable way that doesn't use environment variables like the <code>getpass</code> solution.  It is less prone to security issues, and should probably be the accepted answer as of today.</p>","
","<pre><code>import psutil

def get_username():
    return psutil.Process().username()
</code></pre>","
","<p>Under the hood, this combines the <code>getpwuid</code> based method for unix and the <code>GetTokenInformation</code> method for Windows.</p>","
"
"
","<p>For UNIX, at least, this works...</p>","
","<pre><code>import commands
username = commands.getoutput(""echo $(whoami)"")
print username
</code></pre>","
","<p><strong>edit:</strong>
I just looked it up and this works on Windows and UNIX:</p>","
","<pre><code>import commands
username = commands.getoutput(""whoami"")
</code></pre>","
","<p>On UNIX it returns your username, but on Windows, it returns your user's group, slash, your username.</p>","
",<p>--</p>,"
",<p>I.E.</p>,"
","<p>UNIX returns: ""username""</p>","
","<p>Windows returns: ""domain/username""</p>","
",<p>--</p>,"
","<p>It's interesting, but probably not ideal unless you are doing something in the terminal anyway... in which case you would probably be using <code>os.system</code> to begin with. For example, a while ago I needed to add my user to a group, so I did (this is in Linux, mind you)</p>","
","<pre><code>import os
os.system(""sudo usermod -aG \""group_name\"" $(whoami)"")
print ""You have been added to \""group_name\""! Please log out for this to take effect""
</code></pre>","
",<p>I feel like that is easier to read <strong>and</strong> you don't have to import pwd or getpass.</p>,"
","<p>I also feel like having ""domain/user"" could be helpful in certain applications in Windows.</p>","
"
"
",<p>Using only standard python libs:</p>,"
","<pre><code>from os import environ,getcwd
getUser = lambda: environ[""USERNAME""] if ""C:"" in getcwd() else environ[""USER""]
user = getUser()
</code></pre>","
","<p>Works on Windows (if you are on drive C), Mac or Linux</p>","
","<p>Alternatively, you could remove one line with an immediate invocation:</p>","
","<pre><code>from os import environ,getcwd
user = (lambda: environ[""USERNAME""] if ""C:"" in getcwd() else environ[""USER""])()
</code></pre>","
"
"
","<p>I wrote the plx module some time ago to get the user name in a portable way on Unix and Windows (among other things):
<a href=""http://www.decalage.info/en/python/plx"" rel=""nofollow noreferrer"">http://www.decalage.info/en/python/plx</a></p>","
",<p>Usage:</p>,"
","<pre><code>import plx

username = plx.get_username()
</code></pre>","
",<p>(it requires win32 extensions on Windows)</p>,"
"
"
","<p>You can get the current username on Windows by going through the Windows API, although it's a bit cumbersome to invoke via the ctypes FFI (<a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms683179"" rel=""nofollow"">GetCurrentProcess</a>  <a href=""http://msdn.microsoft.com/en-us/library/aa379295"" rel=""nofollow"">OpenProcessToken</a>  <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa446671"" rel=""nofollow"">GetTokenInformation</a>  <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa379166"" rel=""nofollow"">LookupAccountSid</a>).</p>","
","<p>I wrote a small module that can do this straight from Python, <a href=""https://gist.github.com/mkropat/7559409"" rel=""nofollow"">getuser.py</a>. Usage:</p>","
","<pre><code>import getuser
print(getuser.lookup_username())
</code></pre>","
",<p>It works on both Windows and *nix (the latter uses the <code>pwd</code> module as described in the other answers).</p>,"
"
"
","<p>None of the above worked in my case (scroll down to the actual solution).<br/>
The problem I'm getting with all solutions is the wrong username when running commands with <code>sudo</code>:</p>","
","<ul>
<li><code>psutil</code> soulution:</li>
</ul>","
","<pre class=""lang-sh prettyprint-override""><code>$ python3
&gt;&gt;&gt; import psutil
&gt;&gt;&gt; psutil.Process().username()
'ubuntu' # OK!

$ sudo su
$ python3
&gt;&gt;&gt; import psutil
&gt;&gt;&gt; psutil.Process().username()
'root' # OK!

$ sudo python3
&gt;&gt;&gt; import psutil
&gt;&gt;&gt; psutil.Process().username()
'root' # WRONG, should be ubuntu!
</code></pre>","
","<ul>
<li><code>getpass</code> solution:</li>
</ul>","
","<pre class=""lang-sh prettyprint-override""><code>$ python3
&gt;&gt;&gt; import getpass
&gt;&gt;&gt; getpass.getuser()
'ubuntu' # OK!

$ sudo su
$ python3
&gt;&gt;&gt; import getpass
&gt;&gt;&gt; getpass.getuser()
'root' # OK!

$ sudo python3
&gt;&gt;&gt; import getpass
&gt;&gt;&gt; getpass.getuser()
'root' # WRONG, should be ubuntu!
</code></pre>","
","<ul>
<li><code>pwd</code> + <code>os.getuid</code> solution:</li>
</ul>","
","<pre class=""lang-sh prettyprint-override""><code>$ python3
&gt;&gt;&gt; import os, pwd
&gt;&gt;&gt; pwd.getpwuid( os.getuid() )[ 0 ]
'ubuntu' # OK!

$ sudo su
$ python3
&gt;&gt;&gt; import os, pwd
&gt;&gt;&gt; pwd.getpwuid( os.getuid() )[ 0 ]
'root' # OK!

$ sudo python3
&gt;&gt;&gt; import getpass
&gt;&gt;&gt; getpass.getuser()
'root' # WRONG, should be ubuntu!
</code></pre>","
","<ul>
<li><code>os.getlogin</code> works a bit different, but still wrong:</li>
</ul>","
","<pre class=""lang-sh prettyprint-override""><code>$ python3
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.getlogin()
'ubuntu' # OK!

$ sudo su
$ python3
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.getlogin()
'ubuntu' # WRONG, should be root!


$ sudo python3
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.getlogin()
'ubuntu' # OK!
</code></pre>","
","<ul>
<li><code>os.getenv</code> gives the same results:</li>
</ul>","
","<pre class=""lang-sh prettyprint-override""><code>$ python3
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.getenv('SUDO_USER', os.getenv('USER'))
'ubuntu' # OK!

$ sudo su
$ python3
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.getenv('SUDO_USER', os.getenv('USER'))
'ubuntu' # WRONG, should be root!


$ sudo python3
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.getenv('SUDO_USER', os.getenv('USER'))
'ubuntu' # OK!
</code></pre>","
",<p>Switching <code>SUDO_USER</code> and <code>USER</code> gives the wrong result in <code>sudo python3</code> case.</p>,"
",<h2>Actual solution (non-portable)</h2>,"
",<p>Solution is a bit tricky and rely on the default root home directory location but works for all cases:</p>,"
","<pre class=""lang-sh prettyprint-override""><code>$ python3
&gt;&gt;&gt; import os
&gt;&gt;&gt; 'root' if os.path.expanduser('~') == '/root' else os.getenv('SUDO_USER', os.getenv('USER'))
'ubuntu' # OK!

$ sudo su
$ python3
&gt;&gt;&gt; import os
&gt;&gt;&gt; 'root' if os.path.expanduser('~') == '/root' else os.getenv('SUDO_USER', os.getenv('USER'))
'root' #  OK!

$ sudo python3
&gt;&gt;&gt; import os
&gt;&gt;&gt; 'root' if os.path.expanduser('~') == '/root' else os.getenv('SUDO_USER', os.getenv('USER'))
'ubuntu' # OK!
</code></pre>","
"
"
",<p>How can I find local IP addresses (i.e. 192.168.x.x or 10.0.x.x) in Python platform independently and using only the standard library?</p>,"
"
"
","<p>I just found this but it seems a bit hackish, however they say tried it on *nix and I did on windows and it worked.</p>","
","<pre><code>import socket
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.connect((""8.8.8.8"", 80))
print(s.getsockname()[0])
s.close()
</code></pre>","
","<p>This assumes you have an internet access, and that there is no local proxy.</p>","
"
"
","<pre><code>import socket
socket.gethostbyname(socket.gethostname())
</code></pre>","
","<p>This won't work always (returns <code>127.0.0.1</code> on machines having the hostname in <code>/etc/hosts</code> as <code>127.0.0.1</code>), a paliative would be what gimel shows, use <code>socket.getfqdn()</code> instead. Of course your machine needs a resolvable hostname.</p>","
"
"
","<p><strong>This method returns the ""primary"" IP on the local box (the one with a default route)</strong>.</p>","
","<ul>
<li>Does NOT need routable net access or any connection at all.</li>
<li>Works even if all interfaces are unplugged from the network.</li>
<li>Does NOT need or even try to get <em>anywhere else</em>.</li>
<li>Works with NAT, public, private, external, and internal IP's</li>
<li>Pure Python 2 (or 3) with no external dependencies.</li>
<li>Works on Linux, Windows, and OSX.</li>
</ul>","
",<p>Python 3 or 2:</p>,"
","<pre><code>import socket
def get_ip():
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    s.settimeout(0)
    try:
        # doesn't even have to be reachable
        s.connect(('10.255.255.255', 1))
        IP = s.getsockname()[0]
    except Exception:
        IP = '127.0.0.1'
    finally:
        s.close()
    return IP
</code></pre>","
","<p>This returns a single IP which is the primary (the one with a default route). If you need instead all IP's attached to all interfaces (including localhost, etc), see something like <a href=""https://stackoverflow.com/questions/166506/finding-local-ip-addresses-using-pythons-stdlib/24564613#24564613"">this answer</a>.</p>","
","<p>If you are behind a NAT firewall like your wifi box at home, then this will not show your public NAT IP, but instead your private IP on the local network which has a default route to your local WIFI router; getting your wifi router's external IP would either require running this on THAT box, or connecting to an external service such as whatismyip.com/whatismyipaddress.com that could reflect back the IP... but that is completely different from the original question. :)</p>","
"
"
",<p><strong>As an alias called <code>myip</code>:</strong></p>,"
","<pre><code>alias myip=""python -c 'import socket; print([l for l in ([ip for ip in socket.gethostbyname_ex(socket.gethostname())[2] if not ip.startswith(\""127.\"")][:1], [[(s.connect((\""8.8.8.8\"", 53)), s.getsockname()[0], s.close()) for s in [socket.socket(socket.AF_INET, socket.SOCK_DGRAM)]][0][1]]) if l][0][0])'""
</code></pre>","
","<ul>
<li>Works correctly with Python 2.x, Python 3.x, modern and old Linux distros, OSX/macOS and Windows for finding the current IPv4 address.</li>
<li>Will not return the correct result for machines with multiple IP addresses, IPv6, no configured IP address or no internet access.</li>
<li>Reportedly, this does not work on the latest releases of macOS.</li>
</ul>","
","<p><strong>NOTE</strong>: If you intend to use something like this within a Python program, the proper way is to make use of a Python module that has IPv6 support.</p>","
",<hr/>,"
","<p><strong>Same as above, but only the Python code:</strong></p>","
","<pre><code>import socket
print([l for l in ([ip for ip in socket.gethostbyname_ex(socket.gethostname())[2] if not ip.startswith(""127."")][:1], [[(s.connect(('8.8.8.8', 53)), s.getsockname()[0], s.close()) for s in [socket.socket(socket.AF_INET, socket.SOCK_DGRAM)]][0][1]]) if l][0][0])
</code></pre>","
","<ul>
<li>This will throw an exception if no IP address is configured.</li>
</ul>","
",<hr/>,"
",<p><strong>Version that will also work on LANs without an internet connection:</strong></p>,"
","<pre><code>import socket
print((([ip for ip in socket.gethostbyname_ex(socket.gethostname())[2] if not ip.startswith(""127."")] or [[(s.connect((""8.8.8.8"", 53)), s.getsockname()[0], s.close()) for s in [socket.socket(socket.AF_INET, socket.SOCK_DGRAM)]][0][1]]) + [""no IP found""])[0])
</code></pre>","
","<p>(thanks <a href=""https://stackoverflow.com/users/191246/ccpizza"">@ccpizza</a>)</p>","
",<hr/>,"
",<p><strong>Background</strong>:</p>,"
","<p>Using <code>socket.gethostbyname(socket.gethostname())</code> did not work here, because one of the computers I was on had an <code>/etc/hosts</code> with duplicate entries and references to itself. <code>socket.gethostbyname()</code> only returns the last entry in <code>/etc/hosts</code>.</p>","
","<p>This was my initial attempt, which weeds out all addresses starting with <code>""127.""</code>:</p>","
","<pre class=""lang-py prettyprint-override""><code>import socket
print([ip for ip in socket.gethostbyname_ex(socket.gethostname())[2] if not ip.startswith(""127."")][:1])
</code></pre>","
","<p>This works with Python 2 and 3, on Linux and Windows, but does not deal with several network devices or IPv6. However, it stopped working on recent Linux distros, so I tried this alternative technique instead. It tries to connect to the Google DNS server at <code>8.8.8.8</code> at port <code>53</code>:</p>","
","<pre class=""lang-py prettyprint-override""><code>import socket
print([(s.connect(('8.8.8.8', 53)), s.getsockname()[0], s.close()) for s in [socket.socket(socket.AF_INET, socket.SOCK_DGRAM)]][0][1])
</code></pre>","
","<p>Then I combined the two above techniques into a one-liner that should work everywhere, and created the <code>myip</code> alias and Python snippet at the top of this answer.</p>","
","<p>With the increasing popularity of IPv6, and for servers with multiple network interfaces, using a third-party Python module for finding the IP address is probably both more robust and reliable than any of the methods listed here.</p>","
"
"
","<p>You can use the <a href=""http://pypi.python.org/pypi/netifaces"" rel=""noreferrer"">netifaces</a> module. Just type:</p>","
","<pre><code>pip install netifaces
</code></pre>","
",<p>in your command shell and it will install itself on default Python installation.</p>,"
",<p>Then you can use it like this:</p>,"
","<pre><code>from netifaces import interfaces, ifaddresses, AF_INET
for ifaceName in interfaces():
    addresses = [i['addr'] for i in ifaddresses(ifaceName).setdefault(AF_INET, [{'addr':'No IP addr'}] )]
    print '%s: %s' % (ifaceName, ', '.join(addresses))
</code></pre>","
",<p>On my computer it printed:</p>,"
","<pre>{45639BDC-1050-46E0-9BE9-075C30DE1FBC}: 192.168.0.100
{D43A468B-F3AE-4BF9-9391-4863A4500583}: 10.5.9.207</pre>","
","<p>Author of this module claims it should work on Windows, UNIX and Mac OS X.</p>","
"
"
","<p>If the computer has a route to the Internet, this will <em>always</em> work to get the preferred local ip address, even if /etc/hosts is not set correctly.</p>","
","<pre><code>import socket

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.connect(('8.8.8.8', 1))  # connect() for UDP doesn't send packets
local_ip_address = s.getsockname()[0]
</code></pre>","
"
"
",<p><strong>Socket API method</strong></p>,"
","<p>see <a href=""https://stackoverflow.com/a/28950776/711085"">https://stackoverflow.com/a/28950776/711085</a></p>","
",<p>Downsides:</p>,"
","<ul>
<li><em>Not cross-platform.</em></li>
<li>Requires more fallback code, tied to existence of particular addresses on the internet</li>
<li>This will also not work if you're behind a NAT</li>
<li>Probably creates a UDP connection, not independent of (usually ISP's) DNS availability (see other answers for ideas like using 8.8.8.8: Google's (coincidentally also DNS) server)</li>
<li>Make sure you make the destination address UNREACHABLE, like a numeric IP address that is spec-guaranteed to be unused. Do NOT use some domain like fakesubdomain.google.com or somefakewebsite.com; you'll still be spamming that party (now or in the future), and spamming your own network boxes as well in the process.</li>
</ul>","
",<hr/>,"
",<p><strong>Reflector method</strong></p>,"
","<p>(Do note that this does not answer the OP's question of the local IP address, e.g. 192.168...; it gives you your public IP address, which might be more desirable depending on use case.)</p>","
","<p>You can query some site like whatismyip.com (but with an API), such as:</p>","
","<pre><code>from urllib.request import urlopen
import re
def getPublicIp():
    data = str(urlopen('http://checkip.dyndns.com/').read())
    # data = '&lt;html&gt;&lt;head&gt;&lt;title&gt;Current IP Check&lt;/title&gt;&lt;/head&gt;&lt;body&gt;Current IP Address: 65.96.168.198&lt;/body&gt;&lt;/html&gt;\r\n'

    return re.compile(r'Address: (\d+\.\d+\.\d+\.\d+)').search(data).group(1)
</code></pre>","
",<p>or if using python2:</p>,"
","<pre><code>from urllib import urlopen
import re
def getPublicIp():
    data = str(urlopen('http://checkip.dyndns.com/').read())
    # data = '&lt;html&gt;&lt;head&gt;&lt;title&gt;Current IP Check&lt;/title&gt;&lt;/head&gt;&lt;body&gt;Current IP Address: 65.96.168.198&lt;/body&gt;&lt;/html&gt;\r\n'

    return re.compile(r'Address: (\d+\.\d+\.\d+\.\d+)').search(data).group(1)
</code></pre>","
",<p>Advantages:</p>,"
","<ul>
<li>One upside of this method is it's cross-platform</li>
<li>It works from behind ugly NATs (e.g. your home router).</li>
</ul>","
",<p>Disadvantages (and workarounds):</p>,"
","<ul>
<li>Requires this website to be up, the format to not change (almost certainly won't), and your DNS servers to be working. One can mitigate this issue by also querying other third-party IP address reflectors in case of failure.</li>
<li>Possible attack vector if you don't query multiple reflectors (to prevent a compromised reflector from telling you that your address is something it's not), or if you don't use HTTPS (to prevent a man-in-the-middle attack pretending to be the server)</li>
</ul>","
",<hr/>,"
","<p><em>edit</em>: Though initially I thought these methods were really bad (unless you use many fallbacks, the code may be irrelevant many years from now), it does pose the question ""what is the internet?"". A computer may have many interfaces pointing to many different networks. For a more thorough description of the topic, google for <code>gateways and routes</code>. A computer may be able to access an internal network via an internal gateway, or access the world-wide web via a gateway on for example a router (usually the case). The local IP address that the OP asks about is only well-defined with respect to a single link layer, so you have to specify that (""is it the network card, or the ethernet cable, which we're talking about?""). There may be multiple non-unique answers to this question as posed. However the global IP address on the world-wide web is probably well-defined (in the absence of massive network fragmentation): probably the return path via the gateway which can access the TLDs.</p>","
"
"
",<p>On Linux:</p>,"
","<pre><code>&gt;&gt;&gt; import socket, struct, fcntl
&gt;&gt;&gt; sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
&gt;&gt;&gt; sockfd = sock.fileno()
&gt;&gt;&gt; SIOCGIFADDR = 0x8915
&gt;&gt;&gt;
&gt;&gt;&gt; def get_ip(iface = 'eth0'):
...     ifreq = struct.pack('16sH14s', iface, socket.AF_INET, '\x00'*14)
...     try:
...         res = fcntl.ioctl(sockfd, SIOCGIFADDR, ifreq)
...     except:
...         return None
...     ip = struct.unpack('16sH2x4s8x', res)[2]
...     return socket.inet_ntoa(ip)
... 
&gt;&gt;&gt; get_ip('eth0')
'10.80.40.234'
&gt;&gt;&gt; 
</code></pre>","
"
"
",<p>im using following module:</p>,"
","<pre><code>#!/usr/bin/python
# module for getting the lan ip address of the computer

import os
import socket

if os.name != ""nt"":
    import fcntl
    import struct
    def get_interface_ip(ifname):
        s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        return socket.inet_ntoa(fcntl.ioctl(
                s.fileno(),
                0x8915,  # SIOCGIFADDR
                struct.pack('256s', bytes(ifname[:15], 'utf-8'))
                # Python 2.7: remove the second argument for the bytes call
            )[20:24])

def get_lan_ip():
    ip = socket.gethostbyname(socket.gethostname())
    if ip.startswith(""127."") and os.name != ""nt"":
        interfaces = [""eth0"",""eth1"",""eth2"",""wlan0"",""wlan1"",""wifi0"",""ath0"",""ath1"",""ppp0""]
        for ifname in interfaces:
            try:
                ip = get_interface_ip(ifname)
                break;
            except IOError:
                pass
    return ip
</code></pre>","
","<p>Tested with windows and linux (and doesnt require additional modules for those)
intended for use on systems which are in a single IPv4 based LAN.</p>","
","<p>The fixed list of interface names does not work for recent linux versions, which have adopted the systemd v197 change regarding predictable interface names as pointed out by <a href=""https://stackoverflow.com/questions/166506/finding-local-ip-addresses-using-pythons-stdlib/1947766?noredirect=1#comment35654143_1947766"">Alexander</a>.
In such cases, you need to manually replace the list with the interface names on your system, or use another solution like <a href=""http://alastairs-place.net/projects/netifaces/"" rel=""noreferrer"">netifaces</a>.</p>","
"
"
","<p><strong>[Windows only]</strong> If you don't want to use external packages and don't want to rely on outside Internet servers, this might help. It's a code sample that I found on <a href=""http://www.google.com/codesearch?hl=en&amp;lr=&amp;q=getMACAddrWin&amp;sbtn=Search"" rel=""nofollow noreferrer"">Google Code Search</a> and modified to return required information:</p>","
","<pre><code>def getIPAddresses():
    from ctypes import Structure, windll, sizeof
    from ctypes import POINTER, byref
    from ctypes import c_ulong, c_uint, c_ubyte, c_char
    MAX_ADAPTER_DESCRIPTION_LENGTH = 128
    MAX_ADAPTER_NAME_LENGTH = 256
    MAX_ADAPTER_ADDRESS_LENGTH = 8
    class IP_ADDR_STRING(Structure):
        pass
    LP_IP_ADDR_STRING = POINTER(IP_ADDR_STRING)
    IP_ADDR_STRING._fields_ = [
        (""next"", LP_IP_ADDR_STRING),
        (""ipAddress"", c_char * 16),
        (""ipMask"", c_char * 16),
        (""context"", c_ulong)]
    class IP_ADAPTER_INFO (Structure):
        pass
    LP_IP_ADAPTER_INFO = POINTER(IP_ADAPTER_INFO)
    IP_ADAPTER_INFO._fields_ = [
        (""next"", LP_IP_ADAPTER_INFO),
        (""comboIndex"", c_ulong),
        (""adapterName"", c_char * (MAX_ADAPTER_NAME_LENGTH + 4)),
        (""description"", c_char * (MAX_ADAPTER_DESCRIPTION_LENGTH + 4)),
        (""addressLength"", c_uint),
        (""address"", c_ubyte * MAX_ADAPTER_ADDRESS_LENGTH),
        (""index"", c_ulong),
        (""type"", c_uint),
        (""dhcpEnabled"", c_uint),
        (""currentIpAddress"", LP_IP_ADDR_STRING),
        (""ipAddressList"", IP_ADDR_STRING),
        (""gatewayList"", IP_ADDR_STRING),
        (""dhcpServer"", IP_ADDR_STRING),
        (""haveWins"", c_uint),
        (""primaryWinsServer"", IP_ADDR_STRING),
        (""secondaryWinsServer"", IP_ADDR_STRING),
        (""leaseObtained"", c_ulong),
        (""leaseExpires"", c_ulong)]
    GetAdaptersInfo = windll.iphlpapi.GetAdaptersInfo
    GetAdaptersInfo.restype = c_ulong
    GetAdaptersInfo.argtypes = [LP_IP_ADAPTER_INFO, POINTER(c_ulong)]
    adapterList = (IP_ADAPTER_INFO * 10)()
    buflen = c_ulong(sizeof(adapterList))
    rc = GetAdaptersInfo(byref(adapterList[0]), byref(buflen))
    if rc == 0:
        for a in adapterList:
            adNode = a.ipAddressList
            while True:
                ipAddr = adNode.ipAddress
                if ipAddr:
                    yield ipAddr
                adNode = adNode.next
                if not adNode:
                    break
</code></pre>","
",<p>Usage:</p>,"
","<pre><code>&gt;&gt;&gt; for addr in getIPAddresses():
&gt;&gt;&gt;    print addr
192.168.0.100
10.5.9.207
</code></pre>","
","<p>As it relies on <code>windll</code>, this will work only on Windows.</p>","
"
"
",<p>I use this on my ubuntu machines:</p>,"
","<pre><code>import commands
commands.getoutput(""/sbin/ifconfig"").split(""\n"")[1].split()[1][5:]
</code></pre>","
",<p>This doesn't work.</p>,"
"
"
",<p>Variation on ninjagecko's answer. This should work on any LAN that allows UDP broadcast and doesn't require access to an address on the LAN or internet.</p>,"
","<pre><code>import socket
def getNetworkIp():
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    s.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, 1)
    s.connect(('&lt;broadcast&gt;', 0))
    return s.getsockname()[0]

print (getNetworkIp())
</code></pre>","
"
"
","<p>A version I do not believe that has been posted yet. 
I tested with python 2.7 on Ubuntu 12.04.</p>","
","<p>Found this solution at : <a href=""http://code.activestate.com/recipes/439094-get-the-ip-address-associated-with-a-network-inter/"" rel=""noreferrer"">http://code.activestate.com/recipes/439094-get-the-ip-address-associated-with-a-network-inter/</a></p>","
","<pre><code>import socket
import fcntl
import struct

def get_ip_address(ifname):
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    return socket.inet_ntoa(fcntl.ioctl(
        s.fileno(),
        0x8915,  # SIOCGIFADDR
        struct.pack('256s', ifname[:15])
    )[20:24])
</code></pre>","
",<p>Example Result:</p>,"
","<pre><code>&gt;&gt;&gt; get_ip_address('eth0')
'38.113.228.130'
</code></pre>","
"
"
",<p>On Debian (tested) and I suspect most Linux's..</p>,"
","<pre><code>import commands

RetMyIP = commands.getoutput(""hostname -I"")
</code></pre>","
",<p>On MS Windows (tested) </p>,"
","<pre><code>import socket

socket.gethostbyname(socket.gethostname())
</code></pre>","
"
"
","<p>This is a variant of UnkwnTech's answer -- it provides a <code>get_local_addr()</code> function, which returns the primary LAN ip address of the host. I'm posting it because this adds a number of things: ipv6 support, error handling, ignoring localhost/linklocal addrs, and uses a TESTNET addr (rfc5737) to connect to.</p>","
","<pre><code># imports
import errno
import socket
import logging

# localhost prefixes
_local_networks = (""127."", ""0:0:0:0:0:0:0:1"")

# ignore these prefixes -- localhost, unspecified, and link-local
_ignored_networks = _local_networks + (""0."", ""0:0:0:0:0:0:0:0"", ""169.254."", ""fe80:"")

def detect_family(addr):
    if ""."" in addr:
        assert "":"" not in addr
        return socket.AF_INET
    elif "":"" in addr:
        return socket.AF_INET6
    else:
        raise ValueError(""invalid ipv4/6 address: %r"" % addr)

def expand_addr(addr):
    """"""convert address into canonical expanded form --
    no leading zeroes in groups, and for ipv6: lowercase hex, no collapsed groups.
    """"""
    family = detect_family(addr)
    addr = socket.inet_ntop(family, socket.inet_pton(family, addr))
    if ""::"" in addr:
        count = 8-addr.count("":"")
        addr = addr.replace(""::"", ("":0"" * count) + "":"")
        if addr.startswith("":""):
            addr = ""0"" + addr
    return addr

def _get_local_addr(family, remote):
    try:
        s = socket.socket(family, socket.SOCK_DGRAM)
        try:
            s.connect((remote, 9))
            return s.getsockname()[0]
        finally:
            s.close()
    except socket.error:
        # log.info(""trapped error connecting to %r via %r"", remote, family, exc_info=True)
        return None

def get_local_addr(remote=None, ipv6=True):
    """"""get LAN address of host

    :param remote:
        return  LAN address that host would use to access that specific remote address.
        by default, returns address it would use to access the public internet.

    :param ipv6:
        by default, attempts to find an ipv6 address first.
        if set to False, only checks ipv4.

    :returns:
        primary LAN address for host, or ``None`` if couldn't be determined.
    """"""
    if remote:
        family = detect_family(remote)
        local = _get_local_addr(family, remote)
        if not local:
            return None
        if family == socket.AF_INET6:
            # expand zero groups so the startswith() test works.
            local = expand_addr(local)
        if local.startswith(_local_networks):
            # border case where remote addr belongs to host
            return local
    else:
        # NOTE: the two addresses used here are TESTNET addresses,
        #       which should never exist in the real world.
        if ipv6:
            local = _get_local_addr(socket.AF_INET6, ""2001:db8::1234"")
            # expand zero groups so the startswith() test works.
            if local:
                local = expand_addr(local)
        else:
            local = None
        if not local:
            local = _get_local_addr(socket.AF_INET, ""192.0.2.123"")
            if not local:
                return None
    if local.startswith(_ignored_networks):
        return None
    return local
</code></pre>","
"
"
","<p>I'm afraid there aren't any good platform independent ways to do this other than connecting to another computer and having it send you your IP address.  For example:  <a href=""http://www.findmyipaddress.info/locateipaddresses.html"" rel=""noreferrer"">findmyipaddress</a>.  Note that this won't work if you need an IP address that's behind NAT unless the computer you're connecting to is behind NAT as well.</p>","
","<p>Here's one solution that works in Linux:  <a href=""http://code.activestate.com/recipes/439094/"" rel=""noreferrer"">get the IP address associated with a network interface</a>.</p>","
"
"
",<p>FYI I can verify that the method:</p>,"
","<pre><code>import socket
addr = socket.gethostbyname(socket.gethostname())
</code></pre>","
","<p>Works in OS X (10.6,10.5), Windows XP, and on a well administered RHEL department server.  It did not work on a very minimal CentOS VM that I just do some kernel hacking on.  So for that instance you can just check for a 127.0.0.1 address and in that case do the following:</p>","
","<pre><code>if addr == ""127.0.0.1"":
     import commands
     output = commands.getoutput(""/sbin/ifconfig"")
     addr = parseaddress(output)
</code></pre>","
",<p>And then parse the ip address from the output.  It should be noted that ifconfig is not in a normal user's PATH by default and that is why I give the full path in the command.  I hope this helps.</p>,"
"
"
","<p>One simple way to produce ""clean"" output via command line utils:</p>","
","<pre><code>import commands
ips = commands.getoutput(""/sbin/ifconfig | grep -i \""inet\"" | grep -iv \""inet6\"" | "" +
                         ""awk {'print $2'} | sed -ne 's/addr\:/ /p'"")
print ips
</code></pre>","
",<p>It will show all IPv4 addresses on the system.</p>,"
"
"
","<p>For linux, you can just use <code>check_output</code> of the <code>hostname -I</code> system command like so:</p>","
","<pre><code>from subprocess import check_output
check_output(['hostname', '-I'])
</code></pre>","
"
"
",<p>This will work on most linux boxes:</p>,"
","<pre><code>import socket, subprocess, re
def get_ipv4_address():
    """"""
    Returns IP address(es) of current machine.
    :return:
    """"""
    p = subprocess.Popen([""ifconfig""], stdout=subprocess.PIPE)
    ifc_resp = p.communicate()
    patt = re.compile(r'inet\s*\w*\S*:\s*(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})')
    resp = patt.findall(ifc_resp[0])
    print resp

get_ipv4_address()
</code></pre>","
"
"
","<p>This answer is my personal attempt to solve the problem of getting the LAN IP, since <code>socket.gethostbyname(socket.gethostname())</code> also returned 127.0.0.1. This method does not require Internet just a LAN connection. Code is for Python 3.x but could easily be converted for 2.x. Using UDP Broadcast:</p>","
","<pre><code>import select
import socket
import threading
from queue import Queue, Empty

def get_local_ip():
        def udp_listening_server():
            s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
            s.bind(('&lt;broadcast&gt;', 8888))
            s.setblocking(0)
            while True:
                result = select.select([s],[],[])
                msg, address = result[0][0].recvfrom(1024)
                msg = str(msg, 'UTF-8')
                if msg == 'What is my LAN IP address?':
                    break
            queue.put(address)

        queue = Queue()
        thread = threading.Thread(target=udp_listening_server)
        thread.queue = queue
        thread.start()
        s2 = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        s2.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, 1)
        waiting = True
        while waiting:
            s2.sendto(bytes('What is my LAN IP address?', 'UTF-8'), ('&lt;broadcast&gt;', 8888))
            try:
                address = queue.get(False)
            except Empty:
                pass
            else:
                waiting = False
        return address[0]

if __name__ == '__main__':
    print(get_local_ip())
</code></pre>","
"
"
","<pre><code>import socket
[i[4][0] for i in socket.getaddrinfo(socket.gethostname(), None)]
</code></pre>","
"
"
","<p>If you're looking for an IPV4 address different from your localhost IP address <code>127.0.0.1</code>, here is a neat piece of python codes:</p>","
","<pre><code>import subprocess
address = subprocess.check_output(['hostname', '-s', '-I'])
address = address.decode('utf-8') 
address=address[:-1]
</code></pre>","
",<p>Which can also be written in a single line:</p>,"
","<pre><code>address = subprocess.check_output(['hostname', '-s', '-I']).decode('utf-8')[:-1]
</code></pre>","
","<p>Even if you put <code>localhost</code> in <code>/etc/hostname</code>, the code will still give your local IP address.</p>","
"
"
","<p><code>127.0.1.1</code> <em>is</em> your real IP address. More generally speaking, a computer can have any number of IP addresses. You can filter them for private networks - 127.0.0.0/8, 10.0.0.0/8, 172.16.0.0/12 and 192.168.0.0/16.</p>","
","<p>However, there is no cross-platform way to get all IP addresses. On Linux, you can use the <a href=""http://linux.die.net/man/7/netdevice"" rel=""nofollow""><code>SIOCGIFCONF</code></a> ioctl.</p>","
"
"
","<p>A slight refinement of the commands version that uses the IP command, and returns IPv4 and IPv6 addresses:</p>","
","<pre><code>import commands,re,socket

#A generator that returns stripped lines of output from ""ip address show""
iplines=(line.strip() for line in commands.getoutput(""ip address show"").split('\n'))

#Turn that into a list of IPv4 and IPv6 address/mask strings
addresses1=reduce(lambda a,v:a+v,(re.findall(r""inet ([\d.]+/\d+)"",line)+re.findall(r""inet6 ([\:\da-f]+/\d+)"",line) for line in iplines))
#addresses1 now looks like ['127.0.0.1/8', '::1/128', '10.160.114.60/23', 'fe80::1031:3fff:fe00:6dce/64']

#Get a list of IPv4 addresses as (IPstring,subnetsize) tuples
ipv4s=[(ip,int(subnet)) for ip,subnet in (addr.split('/') for addr in addresses1 if '.' in addr)]
#ipv4s now looks like [('127.0.0.1', 8), ('10.160.114.60', 23)]

#Get IPv6 addresses
ipv6s=[(ip,int(subnet)) for ip,subnet in (addr.split('/') for addr in addresses1 if ':' in addr)]
</code></pre>","
"
"
","<p>Well you can use the command ""ip route"" on GNU/Linux to know your current IP address.</p>","
","<p>This shows the IP given to the interface by the DHCP server running on the router/modem. Usually ""192.168.1.1/24"" is the IP for local network where ""24"" means the range of posible IP addresses given by the DHCP server within the mask range.</p>","
",<p>Here's an example: Note that PyNotify is just an addition to get my point straight and is not required at all</p>,"
","<pre><code>#! /usr/bin/env python

import sys , pynotify

if sys.version_info[1] != 7:
   raise RuntimeError('Python 2.7 And Above Only')       

from subprocess import check_output # Available on Python 2.7+ | N/A 

IP = check_output(['ip', 'route'])
Split_Result = IP.split()

# print Split_Result[2] # Remove ""#"" to enable

pynotify.init(""image"")
notify = pynotify.Notification(""Ip"", ""Server Running At:"" + Split_Result[2] , ""/home/User/wireless.png"")    
notify.show()    
</code></pre>","
",<p>The advantage of this is that you don't need to specify the network interface. That's pretty useful when running a socket server</p>,"
",<p>You can install PyNotify using easy_install or even Pip:</p>,"
","<pre><code>easy_install py-notify
</code></pre>","
",<p>or</p>,"
","<pre><code>pip install py-notify
</code></pre>","
",<p>or within python script/interpreter</p>,"
","<pre><code>from pip import main

main(['install', 'py-notify'])
</code></pre>","
"
"
",<p>To get the ip address you can use a <em>shell command</em> directly in <strong>python</strong>:</p>,"
","<pre><code>import socket, subprocess

def get_ip_and_hostname():
    hostname =  socket.gethostname()

    shell_cmd = ""ifconfig | awk '/inet addr/{print substr($2,6)}'""
    proc = subprocess.Popen([shell_cmd], stdout=subprocess.PIPE, shell=True)
    (out, err) = proc.communicate()

    ip_list = out.split('\n')
    ip = ip_list[0]

    for _ip in ip_list:
        try:
            if _ip != ""127.0.0.1"" and _ip.split(""."")[3] != ""1"":
                ip = _ip
        except:
            pass
    return ip, hostname

ip_addr, hostname = get_ip_and_hostname()
</code></pre>","
"
"
","<p>For a list of IP addresses on *nix systems,</p>","
","<pre><code>import subprocess
co = subprocess.Popen(['ifconfig'], stdout = subprocess.PIPE)
ifconfig = co.stdout.read()
ip_regex = re.compile('((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-4]|2[0-5][0-9]|[01]?[0-9][0-9]?))')
[match[0] for match in ip_regex.findall(ifconfig, re.MULTILINE)]
</code></pre>","
","<p>Though it's a bit late for this answer, I thought someone else may find it useful :-)</p>","
",<p>PS : It'll return Broadcast addresses and Netmask as well.</p>,"
"
"
","<p>Note: This is not using the standard library, but quite simple.</p>","
",<p>$ pip install pif</p>,"
","<pre><code>from pif import get_public_ip
get_public_ip()
</code></pre>","
"
"
","<p>netifaces is available via pip and easy_install.  (I know, it's not in base, but it could be worth the install.)</p>","
",<p>netifaces does have some oddities across platforms:</p>,"
","<ul>
<li>The localhost/loop-back interface may not always be included (Cygwin).</li>
<li>Addresses are listed per-protocol (e.g., IPv4, IPv6) and protocols are listed per-interface. On some systems (Linux) each protocol-interface pair has its own associated interface (using the interface_name:n notation) while on other systems (Windows) a single interface will have a list of addresses for each protocol.  In both cases there is a protocol list, but it may contain only a single element.</li>
</ul>","
",<p>Here's some netifaces code to play with:</p>,"
","<pre><code>import netifaces

PROTO = netifaces.AF_INET   # We want only IPv4, for now at least

# Get list of network interfaces
# Note: Can't filter for 'lo' here because Windows lacks it.
ifaces = netifaces.interfaces()

# Get all addresses (of all kinds) for each interface
if_addrs = [netifaces.ifaddresses(iface) for iface in ifaces]

# Filter for the desired address type
if_inet_addrs = [addr[PROTO] for addr in if_addrs if PROTO in addr]

iface_addrs = [s['addr'] for a in if_inet_addrs for s in a if 'addr' in s]
# Can filter for '127.0.0.1' here.
</code></pre>","
",<p>The above code doesn't map an address back to its interface name (useful for generating ebtables/iptables rules on the fly).  So here's a version that keeps the above information with the interface name in a tuple:</p>,"
","<pre><code>import netifaces

PROTO = netifaces.AF_INET   # We want only IPv4, for now at least

# Get list of network interfaces
ifaces = netifaces.interfaces()

# Get addresses for each interface
if_addrs = [(netifaces.ifaddresses(iface), iface) for iface in ifaces]

# Filter for only IPv4 addresses
if_inet_addrs = [(tup[0][PROTO], tup[1]) for tup in if_addrs if PROTO in tup[0]]

iface_addrs = [(s['addr'], tup[1]) for tup in if_inet_addrs for s in tup[0] if 'addr' in s]
</code></pre>","
","<p>And, no, I'm not in love with list comprehensions.  It's just the way my brain works these days.</p>","
",<p>The following snippet will print it all out:</p>,"
","<pre><code>from __future__ import print_function  # For 2.x folks
from pprint import pprint as pp

print('\nifaces = ', end='')
pp(ifaces)

print('\nif_addrs = ', end='')
pp(if_addrs)

print('\nif_inet_addrs = ', end='')
pp(if_inet_addrs)

print('\niface_addrs = ', end='')
pp(iface_addrs)
</code></pre>","
",<p>Enjoy!</p>,"
"
"
",<p>How do I get a list of all files (and directories) in a given directory in Python?</p>,"
"
"
",<p>This is a way to traverse every file and directory in a directory tree:</p>,"
","<pre><code>import os

for dirname, dirnames, filenames in os.walk('.'):
    # print path to all subdirectories first.
    for subdirname in dirnames:
        print(os.path.join(dirname, subdirname))

    # print path to all filenames.
    for filename in filenames:
        print(os.path.join(dirname, filename))

    # Advanced usage:
    # editing the 'dirnames' list will stop os.walk() from recursing into there.
    if '.git' in dirnames:
        # don't go into any .git directories.
        dirnames.remove('.git')
</code></pre>","
"
"
",<p>You can use</p>,"
","<pre><code>os.listdir(path)
</code></pre>","
",<p>For reference and more os functions look here:</p>,"
","<ul>
<li>Python 2 docs: <a href=""https://docs.python.org/2/library/os.html#os.listdir"" rel=""noreferrer"">https://docs.python.org/2/library/os.html#os.listdir</a></li>
<li>Python 3 docs: <a href=""https://docs.python.org/3/library/os.html#os.listdir"" rel=""noreferrer"">https://docs.python.org/3/library/os.html#os.listdir</a></li>
</ul>","
"
"
",<p>Here's a helper function I use quite often:</p>,"
","<pre><code>import os

def listdir_fullpath(d):
    return [os.path.join(d, f) for f in os.listdir(d)]
</code></pre>","
"
"
","<pre><code>import os

for filename in os.listdir(""C:\\temp""):
    print  filename
</code></pre>","
"
"
","<p>If you need globbing abilities, there's a module for that as well. For example:</p>","
","<pre><code>import glob
glob.glob('./[0-9].*')
</code></pre>","
",<p>will return something like:</p>,"
","<pre><code>['./1.gif', './2.txt']
</code></pre>","
","<p>See the documentation <a href=""http://docs.python.org/library/glob.html"">here</a>.</p>","
"
"
",<p>For files in current working directory without specifying a path</p>,"
",<p><strong>Python 2.7:</strong></p>,"
","<pre><code>import os
os.listdir('.')
</code></pre>","
",<p><strong>Python 3.x:</strong></p>,"
","<pre><code>import os
os.listdir()
</code></pre>","
"
"
",<p>Try this:</p>,"
","<pre><code>import os
for top, dirs, files in os.walk('./'):
    for nm in files:       
        print os.path.join(top, nm)
</code></pre>","
"
"
",<p>A recursive implementation</p>,"
","<pre><code>import os

def scan_dir(dir):
    for name in os.listdir(dir):
        path = os.path.join(dir, name)
        if os.path.isfile(path):
            print path
        else:
            scan_dir(path)
</code></pre>","
"
"
","<p>I wrote a long version, with all the options I might need: <a href=""http://sam.nipl.net/code/python/find.py"" rel=""nofollow"">http://sam.nipl.net/code/python/find.py</a></p>","
",<p>I guess it will fit here too:</p>,"
","<pre><code>#!/usr/bin/env python

import os
import sys

def ls(dir, hidden=False, relative=True):
    nodes = []
    for nm in os.listdir(dir):
        if not hidden and nm.startswith('.'):
            continue
        if not relative:
            nm = os.path.join(dir, nm)
        nodes.append(nm)
    nodes.sort()
    return nodes

def find(root, files=True, dirs=False, hidden=False, relative=True, topdown=True):
    root = os.path.join(root, '')  # add slash if not there
    for parent, ldirs, lfiles in os.walk(root, topdown=topdown):
        if relative:
            parent = parent[len(root):]
        if dirs and parent:
            yield os.path.join(parent, '')
        if not hidden:
            lfiles   = [nm for nm in lfiles if not nm.startswith('.')]
            ldirs[:] = [nm for nm in ldirs  if not nm.startswith('.')]  # in place
        if files:
            lfiles.sort()
            for nm in lfiles:
                nm = os.path.join(parent, nm)
                yield nm

def test(root):
    print ""* directory listing, with hidden files:""
    print ls(root, hidden=True)
    print
    print ""* recursive listing, with dirs, but no hidden files:""
    for f in find(root, dirs=True):
        print f
    print

if __name__ == ""__main__"":
    test(*sys.argv[1:])
</code></pre>","
"
"
",<p>Here is another option.</p>,"
","<pre><code>os.scandir(path='.')
</code></pre>","
",<p>It returns an iterator of os.DirEntry objects corresponding to the entries (along with file attribute information) in the directory given by path. </p>,"
",<p><em>Example:</em></p>,"
","<pre><code>with os.scandir(path) as it:
    for entry in it:
        if not entry.name.startswith('.'):
            print(entry.name)
</code></pre>","
","<p><strong>Using scandir() instead of listdir() can significantly increase the performance of code that also needs file type or file attribute information</strong>, because os.DirEntry objects expose this information if the operating system provides it when scanning a directory. All os.DirEntry methods may perform a system call, but is_dir() and is_file() usually only require a system call for symbolic links; os.DirEntry.stat() always requires a system call on Unix but only requires one for symbolic links on Windows.</p>","
","<p><a href=""https://docs.python.org/3/library/os.html#os.scandir"" rel=""nofollow noreferrer"">Python Docs</a></p>","
"
"
","<p>While <code>os.listdir()</code> is fine for generating a list of file and dir names, frequently you want to do more once you have those names - and in Python3, <a href=""https://docs.python.org/3/library/pathlib.html"" rel=""nofollow noreferrer"">pathlib</a> makes those other chores simple. Let's take a look and see if you like it as much as I do.</p>","
","<p>To list dir contents, construct a Path object and grab the iterator:</p>","
","<pre><code>In [16]: Path('/etc').iterdir()
Out[16]: &lt;generator object Path.iterdir at 0x110853fc0&gt;
</code></pre>","
",<p>If we want just a list of names of things:</p>,"
","<pre><code>In [17]: [x.name for x in Path('/etc').iterdir()]
Out[17]:
['emond.d',
 'ntp-restrict.conf',
 'periodic',
</code></pre>","
",<p>If you want just the dirs: </p>,"
","<pre><code>In [18]: [x.name for x in Path('/etc').iterdir() if x.is_dir()]
Out[18]:
['emond.d',
 'periodic',
 'mach_init.d',
</code></pre>","
",<p>If you want the names of all conf files in that tree:</p>,"
","<pre><code>In [20]: [x.name for x in Path('/etc').glob('**/*.conf')]
Out[20]:
['ntp-restrict.conf',
 'dnsextd.conf',
 'syslog.conf',
</code></pre>","
",<p>If you want a list of conf files in the tree &gt;= 1K:</p>,"
","<pre><code>In [23]: [x.name for x in Path('/etc').glob('**/*.conf') if x.stat().st_size &gt; 1024]
Out[23]:
['dnsextd.conf',
 'pf.conf',
 'autofs.conf',
</code></pre>","
",<p>Resolving relative paths become easy:</p>,"
","<pre><code>In [32]: Path('../Operational Metrics.md').resolve()
Out[32]: PosixPath('/Users/starver/code/xxxx/Operational Metrics.md')
</code></pre>","
",<p>Navigating with a Path is pretty clear (although unexpected):</p>,"
","<pre><code>In [10]: p = Path('.')

In [11]: core = p / 'web' / 'core'

In [13]: [x for x in core.iterdir() if x.is_file()]
Out[13]:
[PosixPath('web/core/metrics.py'),
 PosixPath('web/core/services.py'),
 PosixPath('web/core/querysets.py'),
</code></pre>","
"
"
",<p>The one worked with me is kind of a modified version from Saleh's answer elsewhere on this page.</p>,"
",<p>The code is as follows:</p>,"
","<pre class=""lang-py prettyprint-override""><code>dir = 'given_directory_name'
filenames = [os.path.abspath(os.path.join(dir,i)) for i in os.listdir(dir)]
</code></pre>","
"
"
",<p>A nice one liner to list only the files recursively.  I used this in my setup.py package_data directive:</p>,"
","<pre><code>import os

[os.path.join(x[0],y) for x in os.walk('&lt;some_directory&gt;') for y in x[2]]
</code></pre>","
","<p>I know it's not the answer to the question, but may come in handy</p>","
"
"
",<h1>For Python 2</h1>,"
","<pre><code>#!/bin/python2

import os

def scan_dir(path):
    print map(os.path.abspath, os.listdir(pwd))
</code></pre>","
",<h1>For Python 3</h1>,"
","<p>For filter and map, you need wrap them with list()</p>","
","<pre><code>#!/bin/python3

import os

def scan_dir(path):
    print(list(map(os.path.abspath, os.listdir(pwd))))
</code></pre>","
",<p>The recommendation now is that you replace your usage of map and filter with generators expressions or list comprehensions:</p>,"
","<pre><code>#!/bin/python

import os

def scan_dir(path):
    print([os.path.abspath(f) for f in os.listdir(path)])
</code></pre>","
"
"
","<pre><code>#import modules
import os

_CURRENT_DIR = '.'


def rec_tree_traverse(curr_dir, indent):
    ""recurcive function to traverse the directory""
    #print ""[traverse_tree]""

    try :
        dfList = [os.path.join(curr_dir, f_or_d) for f_or_d in os.listdir(curr_dir)]
    except:
        print ""wrong path name/directory name""
        return

    for file_or_dir in dfList:

        if os.path.isdir(file_or_dir):
            #print ""dir  : "",
            print indent, file_or_dir,""\\""
            rec_tree_traverse(file_or_dir, indent*2)

        if os.path.isfile(file_or_dir):
            #print ""file : "",
            print indent, file_or_dir

    #end if for loop
#end of traverse_tree()

def main():

    base_dir = _CURRENT_DIR

    rec_tree_traverse(base_dir,"" "")

    raw_input(""enter any key to exit...."")
#end of main()


if __name__ == '__main__':
    main()
</code></pre>","
"
"
","<p>FYI Add a filter of extension or ext file
    import os</p>","
","<pre><code>path = '.'
for dirname, dirnames, filenames in os.walk(path):
    # print path to all filenames with extension py.
    for filename in filenames:
        fname_path = os.path.join(dirname, filename)
        fext = os.path.splitext(fname_path)[1]
        if fext == '.py':
            print fname_path
        else:
            continue
</code></pre>","
"
"
",<p>If figured I'd throw this in.  Simple and dirty way to do wildcard searches.</p>,"
","<pre><code>import re
import os

[a for a in os.listdir(""."") if re.search(""^.*\.py$"",a)]
</code></pre>","
"
"
",<p>Below code will list directories and the files within the dir</p>,"
","<pre><code>def print_directory_contents(sPath):
        import os                                       
        for sChild in os.listdir(sPath):                
            sChildPath = os.path.join(sPath,sChild)
            if os.path.isdir(sChildPath):
                print_directory_contents(sChildPath)
            else:
                print(sChildPath)
</code></pre>","
"
"
",<p>Here is a one line Pythonic version:</p>,"
","<pre><code>import os
dir = 'given_directory_name'
filenames = [os.path.join(os.path.dirname(os.path.abspath(__file__)),dir,i) for i in os.listdir(dir)]
</code></pre>","
",<p>This code lists the full path of all files and directories in the given directory name. </p>,"
"
"
",<p>I know this is an old question. This is a neat way I came across if you are on a liunx machine. </p>,"
","<pre><code>import subprocess
print(subprocess.check_output([""ls"", ""/""]).decode(""utf8""))
</code></pre>","
"
"
","<p>If a <code>mydict</code> is not empty, I access an arbitrary element as:</p>","
","<pre><code>mydict[mydict.keys()[0]]
</code></pre>","
",<p>Is there any better way to do this?</p>,"
"
"
","<p>On Python 3, non-destructively and iteratively:</p>","
","<pre><code>next(iter(mydict.values()))
</code></pre>","
","<p>On Python 2, non-destructively and iteratively:</p>","
","<pre><code>mydict.itervalues().next()
</code></pre>","
","<p>If you want it to work in both Python 2 and 3, you can use the <code>six</code> package:</p>","
","<pre><code>six.next(six.itervalues(mydict))
</code></pre>","
",<p>though at this point it is quite cryptic and I'd rather prefer your code.</p>,"
","<p>If you want to remove any item, do:</p>","
","<pre><code>key, value = mydict.popitem()
</code></pre>","
","<p>Note that ""first"" may not be an appropriate term here because <code>dict</code> is not an ordered type in Python &lt; 3.6. Python 3.6+ <code>dicts</code> are ordered.</p>","
"
"
","<p>If you only need to access one element (being the first by chance, since dicts do not guarantee ordering) you can simply do this in <em>Python 2</em>:</p>","
","<pre><code>my_dict.keys()[0]     -&gt; key of ""first"" element
my_dict.values()[0]   -&gt; value of ""first"" element
my_dict.items()[0]    -&gt; (key, value) tuple of ""first"" element
</code></pre>","
",<p>Please note that (at best of my knowledge) Python does not guarantee that 2 successive calls to any of these methods will return list with the same ordering. This is not supported with Python3.</p>,"
",<p>in <em>Python 3</em>:</p>,"
","<pre><code>list(my_dict.keys())[0]     -&gt; key of ""first"" element
list(my_dict.values())[0]   -&gt; value of ""first"" element
list(my_dict.items())[0]    -&gt; (key, value) tuple of ""first"" element
</code></pre>","
"
"
","<p>In python3, The way :</p>","
","<pre><code>dict.keys() 
</code></pre>","
","<p>return a value in type : dict_keys(), we'll got an error when got 1st member of keys of dict by this way:</p>","
","<pre><code>dict.keys()[0]
TypeError: 'dict_keys' object does not support indexing
</code></pre>","
","<p>Finally, I convert dict.keys() to list @1st, and got 1st member by list splice method:</p>","
","<pre><code>list(dict.keys())[0]
</code></pre>","
"
"
",<h3>to get a key</h3>,"
","<pre><code>next(iter(mydict))
</code></pre>","
",<h3>to get a value</h3>,"
","<pre><code>next(iter(mydict.values()))
</code></pre>","
",<h3>to get both</h3>,"
","<pre><code>next(iter(mydict.items())) # or next(iter(mydict.viewitems())) in python 2
</code></pre>","
","<p>The first two are Python 2 and 3. The last two are lazy in Python 3, but not in Python 2.</p>","
"
"
","<p>As others mentioned, there is no ""first item"", since dictionaries have no guaranteed order (they're implemented as hash tables).  If you want, for example, the value corresponding to the smallest key, <code>thedict[min(thedict)]</code> will do that.  If you care about the order in which the keys were inserted, i.e., by ""first"" you mean ""inserted earliest"", then in Python 3.1 you can use <a href=""http://docs.python.org/py3k/library/collections.html?highlight=collections#collections.OrderedDict"" rel=""nofollow noreferrer"">collections.OrderedDict</a>, which is also in the forthcoming Python 2.7; for older versions of Python, download, install, and use the ordered dict backport (2.4 and later) which you can find <a href=""http://pypi.python.org/pypi/ordereddict/1.1"" rel=""nofollow noreferrer"">here</a>.</p>","
","<p><strong>Python 3.7</strong>
<a href=""https://docs.python.org/3/whatsnew/3.7.html#summary-release-highlights"" rel=""nofollow noreferrer"">Now</a> dicts are insertion ordered.</p>","
"
"
","<p>Ignoring issues surrounding dict ordering, this might be better:</p>","
","<pre><code>next(dict.itervalues())
</code></pre>","
",<p>This way we avoid item lookup and generating a list of keys that we don't use.</p>,"
",<h2>Python3</h2>,"
","<pre><code>next(iter(dict.values()))
</code></pre>","
"
"
","<p>How about, this. Not mentioned here yet.</p>","
",<p><strong>py 2 &amp; 3</strong></p>,"
","<pre><code>a = {""a"":2,""b"":3}
a[list(a)[0]] # the first element is here
&gt;&gt;&gt; 2
</code></pre>","
"
"
",<p>In python3 </p>,"
","<pre><code>list(dict.values())[0]
</code></pre>","
"
"
",<p>You can always do:</p>,"
","<pre><code>for k in sorted(d.keys()):
    print d[k]
</code></pre>","
",<p>This will give you a consistently sorted (with respect to <strong>builtin</strong>.hash() I guess) set of keys you can process on if the sorting has any meaning to you. That means for example numeric types are sorted consistently even if you expand the dictionary.</p>,"
",<p>EXAMPLE</p>,"
","<pre><code># lets create a simple dictionary
d = {1:1, 2:2, 3:3, 4:4, 10:10, 100:100}
print d.keys()
print sorted(d.keys())

# add some other stuff
d['peter'] = 'peter'
d['parker'] = 'parker'
print d.keys()
print sorted(d.keys())

# some more stuff, numeric of different type, this will ""mess up"" the keys set order
d[0.001] = 0.001
d[3.14] = 'pie'
d[2.71] = 'apple pie'
print d.keys()
print sorted(d.keys())
</code></pre>","
",<p>Note that the dictionary is sorted when printed. But the key set is essentially a hashmap!</p>,"
"
"
",<p>For both Python 2 and 3:</p>,"
","<pre><code>import six

six.next(six.itervalues(d))
</code></pre>","
"
"
","<pre><code>first_key, *rest_keys = mydict
</code></pre>","
"
"
","<p>No external libraries, works on both Python 2.7 and 3.x:</p>","
","<pre><code>&gt;&gt;&gt; list(set({""a"":1, ""b"": 2}.values()))[0]
1
</code></pre>","
",<p>For aribtrary key just leave out .values()</p>,"
","<pre><code>&gt;&gt;&gt; list(set({""a"":1, ""b"": 2}))[0]
'a'
</code></pre>","
"
"
","<p>Subclassing <code>dict</code> is one method, though not efficient. Here if you supply an integer it will return <code>d[list(d)[n]]</code>, otherwise access the dictionary as expected:</p>","
","<pre><code>class mydict(dict):
    def __getitem__(self, value):
        if isinstance(value, int):
            return self.get(list(self)[value])
        else:
            return self.get(value)

d = mydict({'a': 'hello', 'b': 'this', 'c': 'is', 'd': 'a',
            'e': 'test', 'f': 'dictionary', 'g': 'testing'})

d[0]    # 'hello'
d[1]    # 'this'
d['c']  # 'is'
</code></pre>","
"
"
",<p>I've tried to find a comprehensive guide on whether it is best to use <code>import module</code> or <code>from module import</code>. I've just started with Python and I'm trying to start off with best practices in mind.</p>,"
","<p>Basically, I was hoping if anyone could share their experiences, what preferences other developers have and what's the best way to avoid any <em>gotchas</em> down the road?</p>","
"
"
",<p>The difference between <code>import module</code> and <code>from module import foo</code> is mainly subjective.  Pick the one you like best and be consistent in your use of it.  Here are some points to help you decide.</p>,"
",<p><code>import module</code></p>,"
","<ul>
<li><strong>Pros:</strong>
<ul>
<li>Less maintenance of your <code>import</code> statements. Don't need to add any additional imports to start using another item from the module</li>
</ul></li>
<li><strong>Cons:</strong>
<ul>
<li>Typing <code>module.foo</code> in your code can be tedious and redundant (tedium can be minimized by using <code>import module as mo</code> then typing <code>mo.foo</code>)</li>
</ul></li>
</ul>","
",<p><code>from module import foo</code></p>,"
","<ul>
<li><strong>Pros:</strong>
<ul>
<li>Less typing to use <code>foo</code></li>
<li>More control over which items of a module can be accessed</li>
</ul></li>
<li><strong>Cons:</strong>
<ul>
<li>To use a new item from the module you have to update your <code>import</code> statement</li>
<li>You lose context about <code>foo</code>. For example, it's less clear what <code>ceil()</code> does compared to <code>math.ceil()</code></li>
</ul></li>
</ul>","
","<p>Either method is acceptable, but <strong>don't</strong> use <code>from module import *</code>.  </p>","
","<p>For any reasonable large set of code, if you <code>import *</code> you will likely be cementing it into the module, unable to be removed.  This is because it is difficult to determine what items used in the code are coming from 'module', making it easy to get to the point where you think you don't use the <code>import</code> any more but it's extremely difficult to be sure.</p>","
"
"
","<p>There's another detail here, not mentioned, related to writing to a module. Granted this may not be very common, but I've needed it from time to time.</p>","
","<p>Due to the way references and name binding works in Python, if you want to update some symbol in a module, say foo.bar, from outside that module, and have other importing code ""see"" that change, you have to import foo a certain way. For example:</p>","
",<p>module foo:</p>,"
","<pre><code>bar = ""apples""
</code></pre>","
",<p>module a:</p>,"
","<pre><code>import foo
foo.bar = ""oranges""   # update bar inside foo module object
</code></pre>","
",<p>module b:</p>,"
","<pre><code>import foo           
print foo.bar        # if executed after a's ""foo.bar"" assignment, will print ""oranges""
</code></pre>","
","<p>However, if you import symbol names instead of module names, this will not work.</p>","
","<p>For example, if I do this in module a:</p>","
","<pre><code>from foo import bar
bar = ""oranges""
</code></pre>","
","<p>No code outside of <code>a</code> will see <code>bar</code> as ""oranges"" because my setting of <code>bar</code> merely affected the name ""bar"" inside module <code>a</code>, it did not ""reach into"" the <code>foo</code> module object and update its <code>bar</code>.</p>","
"
"
","<p>Even though many people already explained about <code>import</code> vs <code>import from</code>, I want to try to explain a bit more about what happens under the hood, and where all the places it changes are.</p>","
",<hr/>,"
",<h2><code>import foo</code>:</h2>,"
","<p>Imports <code>foo</code>, and creates a reference to that module in the current namespace. Then you need to define completed module path to access a particular attribute or method from inside the module.</p>","
",<p>E.g. <code>foo.bar</code> but not <code>bar</code></p>,"
",<h2><code>from foo import bar</code>:</h2>,"
","<p>Imports <code>foo</code>, and creates references to all the members listed (<code>bar</code>). Does not set the variable <code>foo</code>.</p>","
",<p>E.g. <code>bar</code> but not <code>baz</code> or <code>foo.baz</code></p>,"
",<h2><code>from foo import *</code>:</h2>,"
","<p>Imports <code>foo</code>, and creates references to all public objects defined by that module in the current namespace (everything listed in <code>__all__</code> if <code>__all__</code> exists, otherwise everything that doesn't start with <code>_</code>). Does not set the variable <code>foo</code>.</p>","
",<p>E.g. <code>bar</code> and <code>baz</code> but not <code>_qux</code> or <code>foo._qux</code>.</p>,"
",<hr/>,"
",<p>Now lets see when we do <code>import X.Y</code>:</p>,"
","<pre><code>&gt;&gt;&gt; import sys
&gt;&gt;&gt; import os.path
</code></pre>","
",<p>Check <code>sys.modules</code> with name <code>os</code> and <code>os.path</code>:</p>,"
","<pre><code>&gt;&gt;&gt; sys.modules['os']
&lt;module 'os' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.pyc'&gt;
&gt;&gt;&gt; sys.modules['os.path']
&lt;module 'posixpath' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.pyc'&gt;
</code></pre>","
",<p>Check <code>globals()</code> and <code>locals()</code> namespace dicts with <code>os</code> and <code>os.path</code>:</p>,"
","<pre><code>&gt;&gt;&gt; globals()['os']
&lt;module 'os' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.pyc'&gt;
&gt;&gt;&gt; locals()['os']
&lt;module 'os' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.pyc'&gt;
&gt;&gt;&gt; globals()['os.path']
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
KeyError: 'os.path'
&gt;&gt;&gt;
</code></pre>","
","<p>From the above example we found that only <code>os</code> is inserted in the local and global namespace.
So, we should be able to use:</p>","
","<pre><code>&gt;&gt;&gt; os
&lt;module 'os' from
  '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.pyc'&gt;
&gt;&gt;&gt; os.path
&lt;module 'posixpath' from
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.pyc'&gt;
&gt;&gt;&gt;
</code></pre>","
",<p>But not <code>path</code>.</p>,"
","<pre><code>&gt;&gt;&gt; path
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
NameError: name 'path' is not defined
&gt;&gt;&gt;
</code></pre>","
","<p>Once you delete the <code>os</code> from locals() namespace, you won't be able to access <code>os</code> as well as <code>os.path</code> even though they exist in sys.modules:</p>","
","<pre><code>&gt;&gt;&gt; del locals()['os']
&gt;&gt;&gt; os
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
NameError: name 'os' is not defined
&gt;&gt;&gt; os.path
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
NameError: name 'os' is not defined
&gt;&gt;&gt;
</code></pre>","
",<h1>Now let's talk about <code>import from</code>:</h1>,"
",<h2><code>from</code>:</h2>,"
","<pre><code>&gt;&gt;&gt; import sys
&gt;&gt;&gt; from os import path
</code></pre>","
",<h2>Check <code>sys.modules</code> with <code>os</code> and <code>os.path</code>:</h2>,"
","<pre><code>&gt;&gt;&gt; sys.modules['os']
&lt;module 'os' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.pyc'&gt;
&gt;&gt;&gt; sys.modules['os.path']
&lt;module 'posixpath' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.pyc'&gt;
</code></pre>","
",<p>We found that in <code>sys.modules</code> we found as same as we did before by using <code>import name</code></p>,"
","<p>OK, let's check how it looks like in <code>locals()</code> and <code>globals()</code> namespace dicts:</p>","
","<pre><code>&gt;&gt;&gt; globals()['path']
&lt;module 'posixpath' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.pyc'&gt;
&gt;&gt;&gt; locals()['path']
&lt;module 'posixpath' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.pyc'&gt;
&gt;&gt;&gt; globals()['os']
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
KeyError: 'os'
&gt;&gt;&gt;
</code></pre>","
",<p>You can access by using name <code>path</code> not by <code>os.path</code>:</p>,"
","<pre><code>&gt;&gt;&gt; path
&lt;module 'posixpath' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.pyc'&gt;
&gt;&gt;&gt; os.path
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
NameError: name 'os' is not defined
&gt;&gt;&gt;
</code></pre>","
",<p>Let's delete 'path' from <code>locals()</code>:</p>,"
","<pre><code>&gt;&gt;&gt; del locals()['path']
&gt;&gt;&gt; path
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
NameError: name 'path' is not defined
&gt;&gt;&gt;
</code></pre>","
",<p>One final example using an alias:</p>,"
","<pre><code>&gt;&gt;&gt; from os import path as HELL_BOY
&gt;&gt;&gt; locals()['HELL_BOY']
&lt;module 'posixpath' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.pyc'&gt;
&gt;&gt;&gt; globals()['HELL_BOY']
&lt;module 'posixpath' from /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.pyc'&gt;
&gt;&gt;&gt;
</code></pre>","
",<p>And no path defined:</p>,"
","<pre><code>&gt;&gt;&gt; globals()['path']
Traceback (most recent call last):
 File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
KeyError: 'path'
&gt;&gt;&gt;
</code></pre>","
"
"
",<p>Both ways are supported for a reason: there are times when one is more appropriate than the other.</p>,"
","<ul>
<li><p><code>import module</code>: nice when you are using many bits from the module. drawback is that you'll need to qualify each reference with the module name.</p></li>
<li><p><code>from module import ...</code>: nice that imported items are usable directly without module name prefix. The drawback is that you must list each thing you use, and that it's not clear in code where something came from.</p></li>
</ul>","
","<p>Which to use depends on which makes the code clear and readable, and has more than a little to do with personal preference. I lean toward <code>import module</code> generally because in the code it's very clear where an object or function came from. I use <code>from module import ...</code> when I'm using some object/function a <em>lot</em> in the code.</p>","
"
"
",<p>I personally always use </p>,"
","<pre><code>from package.subpackage.subsubpackage import module
</code></pre>","
",<p>and then access everything as</p>,"
","<pre><code>module.function
module.modulevar
</code></pre>","
","<p>etc. The reason is that at the same time you have short invocation, and you clearly define the module namespace of each routine, something that is very useful if you have to search for usage of a given module in your source.</p>","
","<p>Needless to say, do not use the import *, because it pollutes your namespace and it does not tell you where a given function comes from (from which module)</p>","
","<p>Of course, you can run in trouble if you have the same module name for two different modules in two different packages, like</p>","
","<pre><code>from package1.subpackage import module
from package2.subpackage import module
</code></pre>","
","<p>in this case, of course you run into troubles, but then there's a strong hint that your package layout is flawed, and you have to rethink it.</p>","
"
"
","<pre><code>import module
</code></pre>","
",<p>Is best when you will use many functions from the module.</p>,"
","<pre><code>from module import function
</code></pre>","
",<p>Is best when you want to avoid polluting the global namespace with all the functions and types from a module when you only need <code>function</code>.</p>,"
"
"
",<p>I've just discovered one more subtle difference between these two methods.</p>,"
",<p>If module <code>foo</code> uses a following import:</p>,"
","<pre><code>from itertools import count
</code></pre>","
","<p>Then module <code>bar</code> can by mistake use <code>count</code> as though it was defined in <code>foo</code>, not in <code>itertools</code>:</p>","
","<pre><code>import foo
foo.count()
</code></pre>","
",<p>If <code>foo</code> uses:</p>,"
","<pre><code>import itertools
</code></pre>","
","<p>the mistake is still possible, but less likely to be made. <code>bar</code> needs to:</p>","
","<pre><code>import foo
foo.itertools.count()
</code></pre>","
","<p>This caused some troubles to me. I had a module that by mistake imported an exception from a module that did not define it, only imported it from other module (using <code>from module import SomeException</code>). When the import was no longer needed and removed, the offending module was broken.</p>","
"
"
","<p>Here is another difference not mentioned.  This is copied verbatim from <a href=""http://docs.python.org/2/tutorial/modules.html"" rel=""noreferrer"">http://docs.python.org/2/tutorial/modules.html</a></p>","
",<p>Note that when using </p>,"
","<pre><code>from package import item
</code></pre>","
","<p>the item can be either a submodule (or subpackage) of the package, or some other name defined in the package, like a function, class or variable. The import statement first tests whether the item is defined in the package; if not, it assumes it is a module and attempts to load it. If it fails to find it, an ImportError exception is raised.</p>","
","<p>Contrarily, when using syntax like </p>","
","<pre><code>import item.subitem.subsubitem
</code></pre>","
",<p>each item except for the last must be a package; the last item can be a module or a package but cant be a class or function or variable defined in the previous item.</p>,"
"
"
","<p>Since I am also a beginner, I will be trying to explain this in a simple way:
In Python, we have three types of <code>import</code> statements which are:</p>","
",<p><strong>1. Generic imports:</strong></p>,"
","<pre><code>import math
</code></pre>","
","<p><em>this type of import is my personal favorite, the only downside to this import technique is that if you need use any module's function you must use the following syntax:</em></p>","
","<pre><code>math.sqrt(4)
</code></pre>","
","<p><em>of course, it increases the typing effort but as a beginner, it will help you to keep track of module and function associated with it, (a good text editor will reduce the typing effort significantly and is recommended).</em></p>","
",<p><em><strong>Typing effort can be further reduced by using this import statement:</strong></em></p>,"
","<pre><code>import math as m
</code></pre>","
","<p><em>now, instead of using <code>math.sqrt()</code> you can use <code>m.sqrt()</code>.</em></p>","
",<p><strong>2. Function imports:</strong></p>,"
","<pre><code>from math import sqrt
</code></pre>","
","<p><em>this type of import is best suited if your code only needs to access single or few functions from the module, but for using any new item from the module you have to update import statement.</em></p>","
",<p><strong>3. Universal imports:</strong></p>,"
","<pre><code>from math import * 
</code></pre>","
","<p><em>Although it reduces typing effort significantly but is not recommended because it will fill your code with various functions from the module and their name could conflict with the name of user-defined functions.</em>
<strong>example:</strong></p>","
","<h3>If you have a function of your very own named sqrt and you import math, your function is safe: there is your sqrt and there is math.sqrt. If you do from math import *, however, you have a problem: namely, two different functions with the exact same name. Source: <a href=""https://www.codecademy.com"" rel=""nofollow noreferrer"">Codecademy</a></h3>","
"
"
","<pre><code>import package
import module
</code></pre>","
","<p>With <code>import</code>, the token must be a module (a file containing Python commands) or a package (a folder in the <code>sys.path</code> containing a file <code>__init__.py</code>.)</p>","
",<p>When there are subpackages:</p>,"
","<pre><code>import package1.package2.package
import package1.package2.module
</code></pre>","
","<p>the requirements for folder (package) or file (module) are the same, but the folder or file must be inside <code>package2</code> which must be inside <code>package1</code>, and both <code>package1</code> and <code>package2</code> must contain <code>__init__.py</code> files. <a href=""https://docs.python.org/2/tutorial/modules.html"" rel=""noreferrer"">https://docs.python.org/2/tutorial/modules.html</a></p>","
",<p>With the <code>from</code> style of import:</p>,"
","<pre><code>from package1.package2 import package
from package1.package2 import module
</code></pre>","
",<p>the package or module enters the namespace of the file containing the <code>import</code> statement as <code>module</code> (or <code>package</code>) instead of <code>package1.package2.module</code>. You can always bind to a more convenient name:</p>,"
","<pre><code>a = big_package_name.subpackage.even_longer_subpackage_name.function
</code></pre>","
",<p>Only the <code>from</code> style of import permits you to name a particular function or variable:</p>,"
","<pre><code>from package3.module import some_function
</code></pre>","
","<p>is allowed, but</p>","
","<pre><code>import package3.module.some_function 
</code></pre>","
",<p>is not allowed.</p>,"
"
"
","<p>To add to what people have said about <code>from x import *</code>: besides making it more difficult to tell where names came from, this throws off code checkers like Pylint.  They will report those names as undefined variables.</p>","
"
"
",<p>This is my directory structure of my current directory:</p>,"
","<blockquote>
<pre><code>.  
a  
   b  
     c
</code></pre>
</blockquote>","
","<ol>
<li><p>The <code>import</code> statement remembers <strong>all intermediate names</strong>.<br/>
These names <strong>have to be</strong> qualified:</p>
<pre><code>In[1]: import a.b.c

In[2]: a
Out[2]: &lt;module 'a' (namespace)&gt;

In[3]: a.b
Out[3]: &lt;module 'a.b' (namespace)&gt;

In[4]: a.b.c
Out[4]: &lt;module 'a.b.c' (namespace)&gt;
</code></pre></li>
<li><p>The <code>from ... import ...</code> statement remembers <strong>only the imported name</strong>.<br/>
This name <strong>must not</strong> be qualified:</p>
<pre><code>In[1]: from a.b import c

In[2]: a
NameError: name 'a' is not defined

In[2]: a.b
NameError: name 'a' is not defined

In[3]: a.b.c
NameError: name 'a' is not defined

In[4]: c
Out[4]: &lt;module 'a.b.c' (namespace)&gt;
</code></pre></li>
</ol>","
",<hr/>,"
","<ul>
<li><em>Note:</em> Of course, I restarted my Python console between steps 1 and 2.</li>
</ul>","
"
"
","<p>My own answer to this depends mostly on first, how many different modules I'll be using.  If i'm only going to use one or two, I'll often use <strong><code>from</code></strong> ... <strong><code>import</code></strong> since it makes for fewer keystrokes in the rest of the file, but if I'm going to make use of many different modules, I prefer just <strong><code>import</code></strong> because that means that each module reference is self-documenting.  I can see where each symbol comes from without having to hunt around.</p>","
","<p>Usuaully I prefer the self documenting style of plain import and only change to from.. import when the number of times I have to type the module name grows above 10 to 20, even if there's only one module being imported.</p>","
"
"
","<p>One of the significant difference I found out which <em>surprisingly</em> no-one has talked about is that using plain <em>import</em> you can access <code>private variable</code> and <code>private functions</code> from the imported module, which isn't possible with <em>from-import</em> statement. </p>","
","<p><a href=""https://i.stack.imgur.com/1fqOd.png"" rel=""nofollow noreferrer""><img alt=""enter image description here"" src=""https://i.stack.imgur.com/1fqOd.png""/></a></p>","
",<p>Code in image:</p>,"
",<h1>setting.py</h1>,"
","<pre><code>public_variable = 42
_private_variable = 141
def public_function():
    print(""I'm a public function! yay!"")
def _private_function():
    print(""Ain't nobody accessing me from another module...usually"")
</code></pre>","
",<h1>plain_importer.py</h1>,"
","<pre><code>import settings
print (settings._private_variable)
print (settings.public_variable)
settings.public_function()
settings._private_function()

# Prints:
# 141
# 42
# I'm a public function! yay!
# Ain't nobody accessing me from another module...usually
</code></pre>","
",<h1>from_importer.py</h1>,"
","<pre><code>from settings import *
#print (_private_variable) #doesn't work
print (public_variable)
public_function()
#_private_function()   #doesn't work
</code></pre>","
"
"
",<p>I would like to add to this. It can be useful to understand how Python handles imported modules as attributes if you run into circular imports.</p>,"
",<p>I have the following structure:</p>,"
","<pre><code>mod/
    __init__.py
    main.py
    a.py
    b.py
    c.py
    d.py
</code></pre>","
",<p>From main.py I will import the other modules using differnt import methods</p>,"
",<p>main.py:</p>,"
","<pre><code>import mod.a
import mod.b as b
from mod import c
import d
</code></pre>","
","<p>dis.dis shows the difference (note module names, a b c d):</p>","
","<pre><code>  1           0 LOAD_CONST               0 (-1)
              3 LOAD_CONST               1 (None)
              6 IMPORT_NAME              0 (mod.a)
              9 STORE_NAME               1 (mod)

  2          12 LOAD_CONST               0 (-1)
             15 LOAD_CONST               1 (None)
             18 IMPORT_NAME              2 (b)
             21 STORE_NAME               2 (b)

  3          24 LOAD_CONST               0 (-1)
             27 LOAD_CONST               2 (('c',))
             30 IMPORT_NAME              1 (mod)
             33 IMPORT_FROM              3 (c)
             36 STORE_NAME               3 (c)
             39 POP_TOP

  4          40 LOAD_CONST               0 (-1)
             43 LOAD_CONST               1 (None)
             46 IMPORT_NAME              4 (mod.d)
             49 LOAD_ATTR                5 (d)
             52 STORE_NAME               5 (d)
             55 LOAD_CONST               1 (None)
</code></pre>","
","<p>In the end they look the same (STORE_NAME is result in each example), but this is worth noting if you need to consider the following four circular imports:</p>","
",<h2>example1</h2>,"
","<pre><code>foo/
   __init__.py
   a.py
   b.py
</code></pre>","
","<pre><code>a.py:
import foo.b 
</code></pre>","
","<pre><code>b.py:
import foo.a
</code></pre>","
","<pre><code>&gt;&gt;&gt; import foo.a
&gt;&gt;&gt;
</code></pre>","
",<p>This works</p>,"
",<h2>example2</h2>,"
","<pre><code>bar/
   __init__.py
   a.py
   b.py
</code></pre>","
","<pre><code>a.py:
import bar.b as b
</code></pre>","
","<pre><code>b.py:
import bar.a as a
</code></pre>","
","<pre><code>&gt;&gt;&gt; import bar.a
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""bar\a.py"", line 1, in &lt;module&gt;
    import bar.b as b
  File ""bar\b.py"", line 1, in &lt;module&gt;
    import bar.a as a
AttributeError: 'module' object has no attribute 'a'
</code></pre>","
",<p>No dice</p>,"
",<h2>example3</h2>,"
","<pre><code>baz/
   __init__.py
   a.py
   b.py
</code></pre>","
","<pre><code>a.py:
from baz import b
</code></pre>","
","<pre><code>b.py:
from baz import a
</code></pre>","
","<pre><code>&gt;&gt;&gt; import baz.a
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""baz\a.py"", line 1, in &lt;module&gt;
    from baz import b
  File ""baz\b.py"", line 1, in &lt;module&gt;
    from baz import a
ImportError: cannot import name a
</code></pre>","
",<p>Similar issue... but clearly from x import y is not the same as import import x.y as y</p>,"
",<h2>example4</h2>,"
","<pre><code>qux/
   __init__.py
   a.py
   b.py
</code></pre>","
","<pre><code>a.py:
import b 
</code></pre>","
","<pre><code>b.py:
import a
</code></pre>","
","<pre><code>&gt;&gt;&gt; import qux.a
&gt;&gt;&gt;
</code></pre>","
",<p>This one also works</p>,"
"
"
","<p>As <em>Jan Wrobel</em> mentions, one aspect of the different imports is in which way the imports are disclosed.</p>","
",<p>Module <strong>mymath</strong></p>,"
","<pre class=""lang-py prettyprint-override""><code>from math import gcd
...
</code></pre>","
",<p>Use of <strong>mymath</strong>:</p>,"
","<pre><code>import mymath
mymath.gcd(30, 42)  # will work though maybe not expected
</code></pre>","
","<p>If I imported <code>gcd</code> only for internal use, not to disclose it to users of <code>mymath</code>, this can be inconvenient. I have this pretty often, and in most cases I want to ""keep my modules clean"".</p>","
","<p>Apart from the proposal of <em>Jan Wrobel</em> to obscure this a bit more by using <code>import math</code> instead, I have started to hide imports from disclosure by using a leading underscore:</p>","
","<pre><code># for instance...
from math import gcd as _gcd
# or...
import math as _math
</code></pre>","
","<p>In larger projects this ""best practice"" allows my to exactly control what is disclosed to subsequent imports and what isn't. This keeps my modules clean and pays back at a certain size of project.</p>","
"
"
",<p>since many people answered here but i am just trying my best :)</p>,"
","<ol>
<li><p><code>import module</code> is best when you don't know which item you have to import from <code>module</code>. In this way it may be difficult to debug when problem raises because
you don't know which item have problem.</p>
</li>
<li><p><code>form module import &lt;foo&gt;</code> is best when you know which item you require to import and also helpful in more controlling using importing specific item according to your need. Using this way debugging may be easy because you know which item you imported.</p>
</li>
</ol>","
"
"
",<p>Import Module - You don't need additional efforts to fetch another thing from module. It has disadvantages such as redundant typing </p>,"
",<p>Module Import From - Less typing &amp;More control over which items of a module can be accessed.To use a new item from the module you have to update your import statement.</p>,"
"
"
","<p>There are some builtin modules that contain mostly bare functions (<a href=""https://docs.python.org/3/library/base64.html"" rel=""nofollow noreferrer"">base64</a>, <a href=""https://docs.python.org/3/library/math.html"" rel=""nofollow noreferrer"">math</a>, <a href=""https://docs.python.org/3/library/os.html"" rel=""nofollow noreferrer"">os</a>, <a href=""https://docs.python.org/3/library/shutil.html"" rel=""nofollow noreferrer"">shutil</a>, <a href=""https://docs.python.org/3/library/sys.html"" rel=""nofollow noreferrer"">sys</a>, <a href=""https://docs.python.org/3/library/time.html"" rel=""nofollow noreferrer"">time</a>, ...) and it is definitely a good practice to have these bare functions <em>bound</em> to some namespace and thus improve the readability of your code. Consider how more difficult is to understand the meaning of these functions without their namespace:</p>","
","<pre class=""lang-py prettyprint-override""><code>copysign(foo, bar)
monotonic()
copystat(foo, bar)
</code></pre>","
",<p>than when they are bound to some module:</p>,"
","<pre class=""lang-py prettyprint-override""><code>math.copysign(foo, bar)
time.monotonic()
shutil.copystat(foo, bar)
</code></pre>","
","<p>Sometimes you even need the namespace to avoid conflicts between different modules (<a href=""https://docs.python.org/3/library/json.html#json.load"" rel=""nofollow noreferrer"">json.load</a> vs. <a href=""https://docs.python.org/3/library/pickle.html#pickle.load"" rel=""nofollow noreferrer"">pickle.load</a>)
<hr/>
On the other hand there are some modules that contain mostly classes (<a href=""https://docs.python.org/3/library/configparser.html"" rel=""nofollow noreferrer"">configparser</a>, <a href=""https://docs.python.org/3/library/datetime.html"" rel=""nofollow noreferrer"">datetime</a>, <a href=""https://docs.python.org/3/library/tempfile.html"" rel=""nofollow noreferrer"">tempfile</a>, <a href=""https://docs.python.org/3/library/zipfile.html"" rel=""nofollow noreferrer"">zipfile</a>, ...) and many of them make their class names self-explanatory enough:</p>","
","<pre class=""lang-py prettyprint-override""><code>configparser.RawConfigParser()
datetime.DateTime()
email.message.EmailMessage()
tempfile.NamedTemporaryFile()
zipfile.ZipFile()
</code></pre>","
",<p>so there can be a debate whether using these classes with the additional module namespace in your code adds some new information or just lengthens the code.</p>,"
"
"
",<p>I was answering a similar question post but the poster deleted it before i could post. Here is one example to illustrate the differences.</p>,"
","<p>Python libraries may have one or more files (modules). For exmaples,</p>","
","<pre><code>package1
  |-- __init__.py
</code></pre>","
",<p>or</p>,"
","<pre><code>package2
  |-- __init__.py
  |-- module1.py
  |-- module2.py
</code></pre>","
",<p>We can define python functions or classes inside <em>any</em> of the files based design requirements.</p>,"
",<p>Let's define</p>,"
","<ol>
<li><code>func1()</code> in  <code>__init__.py</code> under <code>mylibrary1</code>, and</li>
<li><code>foo()</code> in <code>module2.py</code> under <code>mylibrary2</code>.</li>
</ol>","
",<p>We can access <code>func1()</code> using one of these methods</p>,"
","<pre><code>import package1

package1.func1()
</code></pre>","
",<p>or</p>,"
","<pre><code>import package1 as my

my.func1()
</code></pre>","
",<p>or</p>,"
","<pre><code>from package1 import func1

func1()
</code></pre>","
",<p>or</p>,"
","<pre><code>from package1 import *

func1()
</code></pre>","
",<p>We can use one of these methods to access <code>foo()</code>:</p>,"
","<pre><code>import package2.module2

package2.module2.foo()
</code></pre>","
",<p>or</p>,"
","<pre><code>import package2.module2 as mod2

mod2.foo()
</code></pre>","
",<p>or</p>,"
","<pre><code>from package2 import module2

module2.foo()
</code></pre>","
",<p>or</p>,"
","<pre><code>from package2 import module2 as mod2

mod2.foo()
</code></pre>","
",<p>or</p>,"
","<pre><code>from package2.module2 import *

foo()
</code></pre>","
"
"
","<p>There have been many answers, but none have mentioned testing (with <code>unittest</code> or <code>pytest</code>).</p>","
",<h1>tl;dr</h1>,"
",<p>Use <code>import foo</code> for external modules to simplify testing.</p>,"
",<h1>The Hard Way</h1>,"
","<p>Importing classes/functions (<code>from foo import bar</code>) individually from a module makes red-green-refactor cycles tedious. For example, if my file looks like</p>","
","<pre><code># my_module.py

from foo import bar


class Thing:
    def do_thing(self):
        bar('do a thing')
</code></pre>","
",<p>and my test is</p>,"
","<pre><code># test_my_module.py

from unittest.mock import patch
import my_module


patch.object(my_module, 'bar')
def test_do_thing(mock_bar):
    my_module.Thing().do_thing()
    mock_bar.assert_called_with('do a thing')
</code></pre>","
","<p>At first glance, this seems great. But what happens if I want to implement <code>Thing</code> class in a different file? My structure would have to change like this...</p>","
","<pre><code># my_module.py

from tools import Thing


def do_thing():
    Thing().do_thing()


# tools.py

from foo import bar


class Thing:
    def do_thing(self):
        bar('do a thing')


# test_my_module.py

from unittest.mock import patch
import my_module
import tools  # Had to import implementation file...


patch.object(tools, 'bar')  # Changed patch
def test_do_thing(mock_bar):
    my_module.do_thing()  # Changed test (expected)
    mock_bar.assert_called_with('do a thing')
</code></pre>","
","<p>Unfortunately, since I used <code>from foo import bar</code>, I need to update my patch to reference the <code>tools</code> module. Essentially, since my test knows too much about implementation, much more than expected needs to be changed to do this refactor.</p>","
",<h1>The Better Approach</h1>,"
","<p>Using <code>import foo</code>, my tests can ignore how the module is implemented and simply patch the whole module.</p>","
","<pre><code># my_module.py

from tools import Thing


def do_thing():
    Thing().do_thing()


# tools.py

import foo


class Thing:
    def do_thing(self):
        foo.bar('do a thing')  # Specify 'bar' is from 'foo' module


# test_my_module.py

from unittest.mock import patch
import my_module


patch('foo')  # Patch entire foo module
def test_do_thing(mock_foo):
    my_module.do_thing()  # Changed test (expected)
    mock_foo.bar.assert_called_with('do a thing')
</code></pre>","
","<p>The less implementation details your tests know, the better. That way, if you come up with a better solution (use classes instead of functions, use additional files to separate ideas, etc.), less needs to be changed in your tests to accommodate the refactor.</p>","
"
"
","<p>I'm using Python's logging module to log some debug strings to a file which works pretty well. Now in addition, I'd like to use this module to also print the strings out to stdout. How do I do this? In order to log my strings to a file I use following code:</p>","
","<pre><code>import logging
import logging.handlers
logger = logging.getLogger("""")
logger.setLevel(logging.DEBUG)
handler = logging.handlers.RotatingFileHandler(
    LOGFILE, maxBytes=(1048576*5), backupCount=7
)
formatter = logging.Formatter(""%(asctime)s - %(name)s - %(levelname)s - %(message)s"")
handler.setFormatter(formatter)
logger.addHandler(handler)
</code></pre>","
",<p>and then call a logger function like</p>,"
","<pre><code>logger.debug(""I am written to the file"")
</code></pre>","
",<p>Thank you for some help here!</p>,"
"
"
","<p>Just get a handle to the root logger and add the <code>StreamHandler</code>. The <code>StreamHandler</code> writes to stderr. Not sure if you really need stdout over stderr, but this is what I use when I setup the Python logger and I also add the <code>FileHandler</code> as well. Then all my logs go to both places (which is what it sounds like you want).</p>","
","<pre><code>import logging
logging.getLogger().addHandler(logging.StreamHandler())
</code></pre>","
","<p>If you want to output to <code>stdout</code> instead of <code>stderr</code>, you just need to specify it to the <code>StreamHandler</code> constructor.</p>","
","<pre><code>import sys
# ...
logging.getLogger().addHandler(logging.StreamHandler(sys.stdout))
</code></pre>","
",<p>You could also add a <code>Formatter</code> to it so all your log lines have a common header.</p>,"
",<p>ie:</p>,"
","<pre><code>import logging
logFormatter = logging.Formatter(""%(asctime)s [%(threadName)-12.12s] [%(levelname)-5.5s]  %(message)s"")
rootLogger = logging.getLogger()

fileHandler = logging.FileHandler(""{0}/{1}.log"".format(logPath, fileName))
fileHandler.setFormatter(logFormatter)
rootLogger.addHandler(fileHandler)

consoleHandler = logging.StreamHandler()
consoleHandler.setFormatter(logFormatter)
rootLogger.addHandler(consoleHandler)
</code></pre>","
",<p>Prints to the format of:</p>,"
","<pre><code>2012-12-05 16:58:26,618 [MainThread  ] [INFO ]  my message
</code></pre>","
"
"
","<p><a href=""https://docs.python.org/3/library/logging.html#logging.basicConfig"" rel=""noreferrer""><code>logging.basicConfig()</code></a> can take a keyword argument <code>handlers</code> since Python 3.3, which simplifies logging setup a lot, especially when setting up multiple handlers with the same formatter:</p>","
","<blockquote>
<p><strong><code>handlers</code></strong>  If specified, this should be an iterable of already created handlers to add to the root logger. Any handlers which dont already have a formatter set will be assigned the default formatter created in this function.</p>
</blockquote>","
",<p>The whole setup can therefore be done with a single call like this:</p>,"
","<pre class=""lang-py prettyprint-override""><code>import logging

logging.basicConfig(
    level=logging.INFO,
    format=""%(asctime)s [%(levelname)s] %(message)s"",
    handlers=[
        logging.FileHandler(""debug.log""),
        logging.StreamHandler()
    ]
)
</code></pre>","
","<p>(Or with <code>import sys</code> + <code>StreamHandler(sys.stdout)</code> per original question's requirements  the default for StreamHandler is to write to stderr. Look at <a href=""https://docs.python.org/3/library/logging.html#logrecord-attributes"" rel=""noreferrer"">LogRecord attributes</a> if you want to customize the log format and add things like filename/line, thread info etc.)</p>","
",<p>The setup above needs to be done only once near the beginning of the script. You can use the logging from all other places in the codebase later like this:</p>,"
","<pre class=""lang-py prettyprint-override""><code>logging.info('Useful message')
logging.error('Something bad happened')
...
</code></pre>","
","<p>Note: If it doesn't work, someone else has probably already initialized the logging system differently. Comments suggest doing <code>logging.root.handlers = []</code> before the call to <code>basicConfig()</code>.</p>","
"
"
","<p>Adding a StreamHandler without arguments goes to stderr instead of stdout. If some other process has a dependency on the stdout dump (i.e. when writing an NRPE plugin), then make sure to specify stdout explicitly or you might run into some unexpected troubles.</p>","
",<p>Here's a quick example reusing the assumed values and LOGFILE from the question:</p>,"
","<pre><code>import logging
from logging.handlers import RotatingFileHandler
from logging import handlers
import sys

log = logging.getLogger('')
log.setLevel(logging.DEBUG)
format = logging.Formatter(""%(asctime)s - %(name)s - %(levelname)s - %(message)s"")

ch = logging.StreamHandler(sys.stdout)
ch.setFormatter(format)
log.addHandler(ch)

fh = handlers.RotatingFileHandler(LOGFILE, maxBytes=(1048576*5), backupCount=7)
fh.setFormatter(format)
log.addHandler(fh)
</code></pre>","
"
"
","<p>Here is a complete, nicely wrapped solution based on <a href=""https://stackoverflow.com/a/13733863/1976617"">Waterboy's answer</a> and various other sources. It supports logging to both console and log file, allows for different log level settings, provides colorized output and is easily configurable (also available as <a href=""https://gist.github.com/fonic/7e5ab76d951a2ab2d5f526a7db3e2004"" rel=""noreferrer"">Gist</a>):</p>","
","<pre><code>#!/usr/bin/env python3
# -*- coding: utf-8 -*-

# -------------------------------------------------------------------------------
#                                                                               -
#  Python dual-logging setup (console and log file),                            -
#  supporting different log levels and colorized output                         -
#                                                                               -
#  Created by Fonic &lt;https://github.com/fonic&gt;                                  -
#  Date: 04/05/20                                                               -
#                                                                               -
#  Based on:                                                                    -
#  https://stackoverflow.com/a/13733863/1976617                                 -
#  https://uran198.github.io/en/python/2016/07/12/colorful-python-logging.html  -
#  https://en.wikipedia.org/wiki/ANSI_escape_code#Colors                        -
#                                                                               -
# -------------------------------------------------------------------------------

# Imports
import os
import sys
import logging

# Logging formatter supporting colorized output
class LogFormatter(logging.Formatter):

    COLOR_CODES = {
        logging.CRITICAL: ""\033[1;35m"", # bright/bold magenta
        logging.ERROR:    ""\033[1;31m"", # bright/bold red
        logging.WARNING:  ""\033[1;33m"", # bright/bold yellow
        logging.INFO:     ""\033[0;37m"", # white / light gray
        logging.DEBUG:    ""\033[1;30m""  # bright/bold black / dark gray
    }

    RESET_CODE = ""\033[0m""

    def __init__(self, color, *args, **kwargs):
        super(LogFormatter, self).__init__(*args, **kwargs)
        self.color = color

    def format(self, record, *args, **kwargs):
        if (self.color == True and record.levelno in self.COLOR_CODES):
            record.color_on  = self.COLOR_CODES[record.levelno]
            record.color_off = self.RESET_CODE
        else:
            record.color_on  = """"
            record.color_off = """"
        return super(LogFormatter, self).format(record, *args, **kwargs)

# Setup logging
def setup_logging(console_log_output, console_log_level, console_log_color, logfile_file, logfile_log_level, logfile_log_color, log_line_template):

    # Create logger
    # For simplicity, we use the root logger, i.e. call 'logging.getLogger()'
    # without name argument. This way we can simply use module methods for
    # for logging throughout the script. An alternative would be exporting
    # the logger, i.e. 'global logger; logger = logging.getLogger(""&lt;name&gt;"")'
    logger = logging.getLogger()

    # Set global log level to 'debug' (required for handler levels to work)
    logger.setLevel(logging.DEBUG)

    # Create console handler
    console_log_output = console_log_output.lower()
    if (console_log_output == ""stdout""):
        console_log_output = sys.stdout
    elif (console_log_output == ""stderr""):
        console_log_output = sys.stderr
    else:
        print(""Failed to set console output: invalid output: '%s'"" % console_log_output)
        return False
    console_handler = logging.StreamHandler(console_log_output)

    # Set console log level
    try:
        console_handler.setLevel(console_log_level.upper()) # only accepts uppercase level names
    except:
        print(""Failed to set console log level: invalid level: '%s'"" % console_log_level)
        return False

    # Create and set formatter, add console handler to logger
    console_formatter = LogFormatter(fmt=log_line_template, color=console_log_color)
    console_handler.setFormatter(console_formatter)
    logger.addHandler(console_handler)

    # Create log file handler
    try:
        logfile_handler = logging.FileHandler(logfile_file)
    except Exception as exception:
        print(""Failed to set up log file: %s"" % str(exception))
        return False

    # Set log file log level
    try:
        logfile_handler.setLevel(logfile_log_level.upper()) # only accepts uppercase level names
    except:
        print(""Failed to set log file log level: invalid level: '%s'"" % logfile_log_level)
        return False

    # Create and set formatter, add log file handler to logger
    logfile_formatter = LogFormatter(fmt=log_line_template, color=logfile_log_color)
    logfile_handler.setFormatter(logfile_formatter)
    logger.addHandler(logfile_handler)

    # Success
    return True

# Main function
def main():

    # Setup logging
    script_name = os.path.splitext(os.path.basename(sys.argv[0]))[0]
    if (not setup_logging(console_log_output=""stdout"", console_log_level=""warning"", console_log_color=True,
                        logfile_file=script_name + "".log"", logfile_log_level=""debug"", logfile_log_color=False,
                        log_line_template=""%(color_on)s[%(created)d] [%(threadName)s] [%(levelname)-8s] %(message)s%(color_off)s"")):
        print(""Failed to setup logging, aborting."")
        return 1

    # Log some messages
    logging.debug(""Debug message"")
    logging.info(""Info message"")
    logging.warning(""Warning message"")
    logging.error(""Error message"")
    logging.critical(""Critical message"")

# Call main function
if (__name__ == ""__main__""):
    sys.exit(main())
</code></pre>","
",<hr/>,"
","<p><strong>NOTE regarding Microsoft Windows:</strong><br/>
For colors to actually appear on Microsoft Windows, additional steps are necessary. There are two options (both successfully tested on Microsoft Windows 10):</p>","
","<p>1) Enable ANSI terminal mode using the following code (enables terminal to interpret escape sequences by setting flag <code>ENABLE_VIRTUAL_TERMINAL_PROCESSING</code>; more info on this <a href=""https://stackoverflow.com/a/36760881/1976617"">here</a>, <a href=""https://stackoverflow.com/a/37505496/1976617"">here</a>, <a href=""https://docs.microsoft.com/en-us/windows/console/setconsolemode"" rel=""noreferrer"">here</a> and <a href=""https://docs.microsoft.com/en-us/windows/console/console-virtual-terminal-sequences"" rel=""noreferrer"">here</a>):</p>","
","<pre><code># Enable ANSI terminal mode on Microsoft Windows
def windows_enable_ansi_terminal_mode():
    if (sys.platform != ""win32""):
        return None
    try:
        import ctypes
        kernel32 = ctypes.windll.kernel32
        result = kernel32.SetConsoleMode(kernel32.GetStdHandle(-11), 7)
        if (result == 0): raise Exception
        return True
    except:
        return False
</code></pre>","
","<p>2) Use Python package <a href=""https://pypi.org/project/colorama/"" rel=""noreferrer"">colorama</a> (filters output sent to <em>stdout</em> and <em>stderr</em> and translates escape sequences to native Windows API calls):</p>","
","<pre><code>import colorama
colorama.init()
</code></pre>","
"
"
","<p>Either run <code>basicConfig</code> with <code>stream=sys.stdout</code> as the argument prior to setting up any other handlers or logging any messages, or manually add a <code>StreamHandler</code> that pushes messages to stdout to the root logger (or any other logger you want, for that matter).</p>","
"
"
",<p>Logging to <code>stdout</code> and <code>rotating file</code> with different levels and formats:</p>,"
","<pre><code>import logging
import logging.handlers
import sys

if __name__ == ""__main__"":

    # Change root logger level from WARNING (default) to NOTSET in order for all messages to be delegated.
    logging.getLogger().setLevel(logging.NOTSET)

    # Add stdout handler, with level INFO
    console = logging.StreamHandler(sys.stdout)
    console.setLevel(logging.INFO)
    formater = logging.Formatter('%(name)-13s: %(levelname)-8s %(message)s')
    console.setFormatter(formater)
    logging.getLogger().addHandler(console)

    # Add file rotating handler, with level DEBUG
    rotatingHandler = logging.handlers.RotatingFileHandler(filename='rotating.log', maxBytes=1000, backupCount=5)
    rotatingHandler.setLevel(logging.DEBUG)
    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
    rotatingHandler.setFormatter(formatter)
    logging.getLogger().addHandler(rotatingHandler)

    log = logging.getLogger(""app."" + __name__)

    log.debug('Debug message, should only appear in the file.')
    log.info('Info message, should appear in file and stdout.')
    log.warning('Warning message, should appear in file and stdout.')
    log.error('Error message, should appear in file and stdout.')
</code></pre>","
"
"
","<p>After having used Waterboy's code over and over in multiple Python packages, I finally cast it into a tiny standalone Python package, which you can find here:</p>","
","<p><a href=""https://github.com/acschaefer/duallog"" rel=""noreferrer"">https://github.com/acschaefer/duallog</a></p>","
","<p>The code is well documented and easy to use. Simply download the <code>.py</code> file and include it in your project, or install the whole package via <code>pip install duallog</code>. </p>","
"
"
","<p>For 2.7, try the following:  </p>","
","<pre><code>fh = logging.handlers.RotatingFileHandler(LOGFILE, maxBytes=(1048576*5), backupCount=7)
</code></pre>","
"
"
","<p>I would like to increase the width of the ipython notebook in my browser. I have a high-resolution screen, and I would like to expand the cell width/size to make use of this extra space.</p>","
",<p>Thanks!</p>,"
",<hr/>,"
",<p><strong>EDIT / ANSWER :</strong> 5/2017</p>,"
","<p>I now use <strong>jupyterthemes</strong>: <a href=""https://github.com/dunovank/jupyter-themes"" rel=""noreferrer"">https://github.com/dunovank/jupyter-themes</a></p>","
",<p>and this command:</p>,"
","<pre><code>jt -t oceans16 -f roboto -fs 12 -cellw 100%
</code></pre>","
",<p>which sets the width to 100% with a nice theme.</p>,"
"
"
","<p>If you don't want to change your default settings, and you only want to change the width of the current notebook you're working on, you can enter the following into a cell:</p>","
","<pre><code>from IPython.core.display import display, HTML
display(HTML(""&lt;style&gt;.container { width:100% !important; }&lt;/style&gt;""))
</code></pre>","
"
"
","<p>That <code>div.cell</code> solution didn't actually work on my IPython, however luckily someone suggested a working solution for new IPythons:</p>","
",<p>Create a file <code>~/.ipython/profile_default/static/custom/custom.css</code> (iPython) or <code>~/.jupyter/custom/custom.css</code> (Jupyter) with content</p>,"
","<pre><code>.container { width:100% !important; }
</code></pre>","
",<p>Then restart iPython/Jupyter notebooks. Note that this will affect all notebooks.</p>,"
"
"
",<p>To get this to work with jupyter (version 4.0.6) I created <code>~/.jupyter/custom/custom.css</code> containing:</p>,"
","<pre class=""lang-css prettyprint-override""><code>/* Make the notebook cells take almost all available width */
.container {
    width: 99% !important;
}   

/* Prevent the edit cell highlight box from getting clipped;
 * important so that it also works when cell is in edit mode*/
div.cell.selected {
    border-left-width: 1px !important;
}
</code></pre>","
"
"
","<p>It's time to use <a href=""https://github.com/jupyterlab/jupyterlab"" rel=""nofollow noreferrer"">jupyterlab</a></p>","
","<p>Finally, a much-needed upgrade has come to notebooks. Jupyterlab uses the full width of your window like any other full-fledged native IDE by default.</p>","
",<p>All you have to do is:</p>,"
","<pre><code>pip install jupyterlab
# if you use conda
conda install -c conda-forge jupyterlab
# to run 
jupyter lab    # instead of jupyter notebook
</code></pre>","
","<p><a href=""https://blog.jupyter.org/jupyterlab-is-ready-for-users-5a6f039b8906"" rel=""nofollow noreferrer"">Here is a screenshot from blog.Jupyter.org</a>
<img alt="""" src=""https://cdn-images-1.medium.com/max/1400/1*OneJZOqKqBZ9oN80kRX7kQ.png""/></p>","
"
"
",<p>What I do usually after new installation is to modify the main css file where all visual styles are stored. I use Miniconda but location is similar with others <code>C:\Miniconda3\Lib\site-packages\notebook\static\style\style.min.css</code></p>,"
",<p><em>With some screens these resolutions are different and more than 1. To be on the safe side I change all to 98% so if I disconnect from my external screens on my laptop I still have 98% screen width.</em></p>,"
",<p>Then just replace <strong>1140px with 98%</strong> of the screen width. </p>,"
","<pre><code>@media (min-width: 1200px) {
  .container {
    width: 1140px;
  }
}
</code></pre>","
","<p><a href=""https://i.stack.imgur.com/6adwp.png"" rel=""noreferrer""><img alt=""enter image description here"" src=""https://i.stack.imgur.com/6adwp.png""/></a></p>","
",<p>After editing</p>,"
","<pre><code>@media (min-width: 1200px) {
  .container {
    width: 98%;
  }
}
</code></pre>","
","<p><a href=""https://i.stack.imgur.com/GJlZ4.png"" rel=""noreferrer""><img alt=""enter image description here"" src=""https://i.stack.imgur.com/GJlZ4.png""/></a>
Save and restart your notebook </p>","
",<hr/>,"
",<p><strong>Update</strong></p>,"
","<p>Recently had to wider Jupyter cells on an environment it is installed, which led me to come back here and remind myself. </p>","
",<p>If you need to do it in virtual env you installed jupyter on. You can find the css file in this subdir</p>,"
","<pre><code>env/lib/python3.6/site-packages/notebook/static/style/stye.min.css
</code></pre>","
"
"
","<p>You can set the CSS of a notebook by calling a stylesheet from any cell. As an example, take a look at the <a href=""https://bitbucket.org/cfdpython/cfd-python-class/overview"" rel=""noreferrer"">12 Steps to Navier Stokes course</a>.</p>","
","<p>In particular, creating a file containing</p>","
","<pre><code>&lt;style&gt;
    div.cell{
        width:100%;
        margin-left:1%;
        margin-right:auto;
    }
&lt;/style&gt;
</code></pre>","
","<p>should give you a starting point. However, it may be necessary to also adjust e.g <code>div.text_cell_render</code> to deal with markdown as well as code cells.</p>","
",<p>If that file is <code>custom.css</code> then add a cell containing:</p>,"
","<pre><code>from IPython.core.display import HTML
def css_styling():
    styles = open(""custom.css"", ""r"").read()
    return HTML(styles)
css_styling()
</code></pre>","
","<p>This will apply all the stylings, and, in particular, change the cell width.</p>","
"
"
",<p>This is the code I ended up using. It stretches input &amp; output cells to the left and right. Note that the input/output number indication will be gone:</p>,"
","<pre><code>from IPython.core.display import display, HTML
display(HTML(""&lt;style&gt;.container { width:100% !important; }&lt;/style&gt;""))
display(HTML(""&lt;style&gt;.output_result { max-width:100% !important; }&lt;/style&gt;""))
display(HTML(""&lt;style&gt;.prompt { display:none !important; }&lt;/style&gt;""))
</code></pre>","
"
"
","<p>(As of 2018, I would advise trying out JupyterHub/JupyterLab. It uses the full width of the monitor. If this is not an option, maybe since you are using one of the cloud-based Jupyter-as-a-service providers, keep reading)</p>","
","<p>(Stylish is accused of stealing user data, I have moved on to using Stylus plugin instead)</p>","
","<p>I recommend using <a href=""https://userstyles.org/"" rel=""nofollow noreferrer"">Stylish Browser Plugin</a>. This way you can override css for all notebooks, without adding any code to notebooks. 
We don't like to change configuration in .ipython/profile_default, since  we are running a shared Jupyter server for the whole team and width is a user preference.</p>","
","<p>I made a  style specifically for vertically-oriented high-res screens, that makes cells wider and adds a bit of empty-space in the bottom, so you can position the last cell in the centre of the screen.
<a href=""https://userstyles.org/styles/131230/jupyter-wide"" rel=""nofollow noreferrer"">https://userstyles.org/styles/131230/jupyter-wide</a>
You can, of course, modify my css to your liking, if you have a different layout, or you don't want extra empty-space in the end.</p>","
","<p>Last but not least, Stylish is a great tool to have in your toolset, since you can easily customise other sites/tools to your liking (e.g. Jira, Podio, Slack, etc.)</p>","
","<pre><code>@media (min-width: 1140px) {
  .container {
    width: 1130px;
  }
}

.end_space {
  height: 800px;
}
</code></pre>","
"
"
","<p>For Chrome users, I recommend <a href=""https://chrome.google.com/webstore/detail/stylebot/oiaejidbmkiecgbjeifoejpgmdaleoha?hl=en"" rel=""noreferrer"">Stylebot</a>, which will let you override any CSS on any page, also let you search and install other share custom CSS. However, for our purpose we don't need any advance theme. Open Stylebot, change to <code>Edit CSS</code>. Jupyter captures some keystrokes, so you will not be able to type the code below in. Just copy and paste, or just your editor:</p>","
","<pre><code>#notebook-container.container {
    width: 90%;
}
</code></pre>","
","<p>Change the width as you like, I find 90% looks nicer than 100%. But it is totally up to your eye.</p>","
"
"
",<p>I made some modification to @jvd10's solution. The '!important' seems too strong that the container doesn't adapt well when TOC sidebar is displayed. I removed it and added 'min-width' to limit the minimal width.</p>,"
",<p>Here is my .juyputer/custom/custom.css:</p>,"
","<pre><code>/* Make the notebook cells take almost all available width and limit minimal width to 1110px */
.container {
    width: 99%;
    min-width: 1110px;
}   

/* Prevent the edit cell highlight box from getting clipped;
 * important so that it also works when cell is in edit mode*/
div.cell.selected {
    border-left-width: 1px;
}
</code></pre>","
"
"
","<p>Note that if you do this the old way, you'll now get a deprecation warning. This uses the newer submodule naming:</p>","
","<pre><code>from IPython.display import HTML

HTML(""&lt;style&gt;.container { width:100% !important; }&lt;/style&gt;"")
</code></pre>","
"
"
","<p>I tried everything and nothing worked for me, I ended up using displaying my data frame as HTML as follows</p>","
","<pre><code>from IPython.display import HTML    
HTML (pd.to_html())
</code></pre>","
"
"
","<p>For Firefox/Chrome users, a nice way to achieve 100% width is to use a custom <a href=""https://www.tampermonkey.net/"" rel=""nofollow noreferrer"">TamperMonkey</a> script.</p>","
",<p>The benefits are</p>,"
","<ol>
<li>configure this once in your browser, no need to modify the server configuration.</li>
<li>works with multiple jupyter servers.</li>
<li>TamperMonkey is trusted, maintained, and stable.</li>
<li>Lots of additional customization is possible via javascript.</li>
</ol>","
","<p>This script works for me <a href=""https://gist.githubusercontent.com/mrk-andreev/2a9c2538fad0b687c27e192d5948834f/raw/6aa1148573dc20a22fca126e56e3b03f4abf281b/jpn_tmonkey.js"" rel=""nofollow noreferrer"">https://gist.githubusercontent.com/mrk-andreev/2a9c2538fad0b687c27e192d5948834f/raw/6aa1148573dc20a22fca126e56e3b03f4abf281b/jpn_tmonkey.js</a></p>","
"
"
",<p><strong>adding to answers by @jdv10 and @gerenuk</strong></p>,"
","<blockquote>
<p>The best option is to add and tweak the custom.css file. Below I am
sharing my CSS file contents which I use to squeeze out the maximum
screen area in a Jupyter Notebook.</p>
</blockquote>","
","<blockquote>
<p>Since it targets the vanilla CSS codes of the rendered page, it is supposed to work for all types of
language used for coding on the Notebook.</p>
</blockquote>","
","<p><div class=""snippet"" data-babel=""false"" data-console=""true"" data-hide=""false"" data-lang=""js"">
<div class=""snippet-code"">
<pre class=""snippet-code-css lang-css prettyprint-override""><code>/* Notebook styling */

body, p, div.rendered_html { 
    color: #93a1a1;
    font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif;
    font-size: 11pt;
}

body { background-color: #eee8d5 !important; }

/* the following controls aspects which are around the cells */
#notebook { 
    background-color: #073642 !important;
    box-shadow: inset 20px 36px 20px -35px black !important;
    margin: 1px !important;
    padding: 1px !important;
}
#notebook-container {
    padding: 2px !important;
}

/* Make the notebook cells take almost all available width */
.container {
    width:99.5% !important;
    /*margin:.5% !important;*/
    /*color: #93a1a1 !important;*/
    color: black !important;
    background-color: lightblue !important;
}



/* Cell output */

.rendered_html pre, .rendered_html code {
    color: inherit !important;
    background-color: inherit !important;
}

.rendered_html table, .rendered_html td, .rendered_html th {
    border: 1px solid #586e75 !important;
}

div.cell {
    width:100% !important;
    margin: 5px !important;
    /* margin-left:2px !important; */
    /* margin-right:2px !important; */
    padding: 2px !important;
    /* the following overrides the background color of the input area */
    /* background-color: yellow !important;  */
    /* border-color: black !important; */
    
}

/* Prevent the edit cell highlight box from getting clipped;  * important so that it also works when cell is in edit mode*/
div.cell.selected {
    border-left-width: 5px !important;
    border-right-width: 1px !important;
    border-top-width: 2px !important;
    border-bottom-width: 2px !important;
    border-color: red !important;
}
/*this is for the area to the left of the editor or input area*/

div.run_this_cell {
    width: auto !important;
    color: green !important;
    padding: 0 !important;  
    padding-top: 5px !important;
    padding-left: 5px !important;
    font-weight: bold !important;
    font: 2em sans-serif;
}

div.input_area { 
    border-color: green !important; 
    background-color: #ffffdd !important; 
}

.prompt { 
    line-height: 1em !important;
}
div.prompt {
    min-width: auto;
    background-color: white;
}

div.input_prompt { 
    color: #268bd2 !important;
    color: #000000 !important;
    font-weight: bold !important;
    border: 1px solid #ff9900 !important;
    background-color: greenyellow;
    padding-right: 0px !important;
    text-align: center !important;
    width: auto !important;
    font-size: 10px !important;
}
div.output_area {
    color: #000000 !important;
    background-color: #e2e2ff !important;
    font-size: 0.9em !important;
}


/* Syntax highlighting */
.cm-s-ipython span.cm-comment { 
    /*color: #6c71c4 !important;*/
    color: midnightblue !important;
    color: rgb(100, 100, 170) !important;
    font-style: italic !important;
}

.cm-s-ipython span.cm-string { 
    color: rgb(100, 20, 29) !important;
}</code></pre>
</div>
</div>
</p>","
"
"
","<pre><code>r = {'is_claimed': 'True', 'rating': 3.5}
r = json.dumps(r)
file.write(str(r['rating']))
</code></pre>","
",<p>I am not able to access my data in the JSON. What am I doing wrong?</p>,"
","<pre><code>TypeError: string indices must be integers, not str
</code></pre>","
"
"
","<p><code>json.dumps()</code> converts a dictionary to <code>str</code> object, not a <code>json(dict)</code> object! So you have to load your <code>str</code> into a <code>dict</code> to use it by using <a href=""https://docs.python.org/2/library/json.html#json.loads"" rel=""noreferrer""><strong><code>json.loads()</code></strong></a> method</p>","
",<p>See <code>json.dumps()</code> as a save method and <code>json.loads()</code> as a retrieve method.</p>,"
",<p>This is the code sample which might help you understand it more:</p>,"
","<pre><code>import json

r = {'is_claimed': 'True', 'rating': 3.5}
r = json.dumps(r)
loaded_r = json.loads(r)
loaded_r['rating'] #Output 3.5
type(r) #Output str
type(loaded_r) #Output dict
</code></pre>","
"
"
","<p><code>json.dumps()</code> returns the JSON string representation of the python dict. <a href=""https://docs.python.org/2/library/json.html#json.dumps"" rel=""noreferrer"">See the docs</a></p>","
","<p>You can't do <code>r['rating']</code> because r is a string, not a dict anymore</p>","
",<p>Perhaps you meant something like</p>,"
","<pre><code>r = {'is_claimed': 'True', 'rating': 3.5}
json = json.dumps(r) # note i gave it a different name
file.write(str(r['rating']))
</code></pre>","
"
"
","<h3><a href=""https://docs.python.org/3/library/json.html#module-json"" rel=""noreferrer""><code>json.dumps()</code></a> is used to decode JSON data</h3>","
","<ul>
<li><code>json.loads</code> take a string as input and returns a dictionary as output.</li>
<li><code>json.dumps</code> take a dictionary as input and returns a string as output.</li>
</ul>","
","<pre class=""lang-py prettyprint-override""><code>import json

# initialize different data
str_data = 'normal string'
int_data = 1
float_data = 1.50
list_data = [str_data, int_data, float_data]
nested_list = [int_data, float_data, list_data]
dictionary = {
    'int': int_data,
    'str': str_data,
    'float': float_data,
    'list': list_data,
    'nested list': nested_list
}

# convert them to JSON data and then print it
print('String :', json.dumps(str_data))
print('Integer :', json.dumps(int_data))
print('Float :', json.dumps(float_data))
print('List :', json.dumps(list_data))
print('Nested List :', json.dumps(nested_list, indent=4))
print('Dictionary :', json.dumps(dictionary, indent=4))  # the json data will be indented
</code></pre>","
",<p>output:</p>,"
","<pre class=""lang-sh prettyprint-override""><code>String : ""normal string""
Integer : 1
Float : 1.5
List : [""normal string"", 1, 1.5]
Nested List : [
    1,
    1.5,
    [
        ""normal string"",
        1,
        1.5
    ]
]
Dictionary : {
    ""int"": 1,
    ""str"": ""normal string"",
    ""float"": 1.5,
    ""list"": [
        ""normal string"",
        1,
        1.5
    ],
    ""nested list"": [
        1,
        1.5,
        [
            ""normal string"",
            1,
            1.5
        ]
    ]
}
</code></pre>","
","<ul>
<li>Python Object to JSON Data Conversion</li>
</ul>","
","<pre class=""lang-sh prettyprint-override""><code>|                 Python                 |  JSON  |
|:--------------------------------------:|:------:|
|                  dict                  | object |
|               list, tuple              |  array |
|                   str                  | string |
| int, float, int- &amp; float-derived Enums | number |
|                  True                  |  true  |
|                  False                 |  false |
|                  None                  |  null  |
</code></pre>","
",<h2>UPDATE</h2>,"
",<h3>In the JSON file</h3>,"
","<pre class=""lang-py prettyprint-override""><code>nested_dictionary = {
    'one': nested_list,
    'two': dictionary,

}

json_dict = {'Nested Dictionary': nested_dictionary,
             'Multiple':[nested_dictionary, nested_dictionary, nested_dictionary]
            }

with open(""test_nested.json"", ""w"") as outfile:
    json.dump(json_dict, outfile, indent=4, sort_keys=False)

</code></pre>","
",<p>chart response</p>,"
","<p><a href=""https://i.stack.imgur.com/KoAVo.png"" rel=""noreferrer""><img alt=""enter image description here"" src=""https://i.stack.imgur.com/KoAVo.png""/></a></p>","
",<p>output into <code>test_nested.json</code></p>,"
","<pre class=""lang-sh prettyprint-override""><code>{
    ""Nested Dictionary"": {
        ""one"": [
            1,
            1.5,
            [
                ""normal string"",
                1,
                1.5
            ]
        ],
        ""two"": {
            ""int"": 1,
            ""str"": ""normal string"",
            ""float"": 1.5,
            ""list"": [
                ""normal string"",
                1,
                1.5
            ],
            ""nested list"": [
                1,
                1.5,
                [
                    ""normal string"",
                    1,
                    1.5
                ]
            ]
        }
    },
    ""Multiple"": [
        {
            ""one"": [
                1,
                1.5,
                [
                    ""normal string"",
                    1,
                    1.5
                ]
            ],
            ""two"": {
                ""int"": 1,
                ""str"": ""normal string"",
                ""float"": 1.5,
                ""list"": [
                    ""normal string"",
                    1,
                    1.5
                ],
                ""nested list"": [
                    1,
                    1.5,
                    [
                        ""normal string"",
                        1,
                        1.5
                    ]
                ]
            }
        },
        {
            ""one"": [
                1,
                1.5,
                [
                    ""normal string"",
                    1,
                    1.5
                ]
            ],
            ""two"": {
                ""int"": 1,
                ""str"": ""normal string"",
                ""float"": 1.5,
                ""list"": [
                    ""normal string"",
                    1,
                    1.5
                ],
                ""nested list"": [
                    1,
                    1.5,
                    [
                        ""normal string"",
                        1,
                        1.5
                    ]
                ]
            }
        },
        {
            ""one"": [
                1,
                1.5,
                [
                    ""normal string"",
                    1,
                    1.5
                ]
            ],
            ""two"": {
                ""int"": 1,
                ""str"": ""normal string"",
                ""float"": 1.5,
                ""list"": [
                    ""normal string"",
                    1,
                    1.5
                ],
                ""nested list"": [
                    1,
                    1.5,
                    [
                        ""normal string"",
                        1,
                        1.5
                    ]
                ]
            }
        }
    ]
}
</code></pre>","
",<h3><code>class</code> instance to JSON</h3>,"
","<ul>
<li>A simple solution:</li>
</ul>","
","<pre class=""lang-py prettyprint-override""><code>class Foo(object):
    def __init__(
            self,
            data_str,
            data_int,
            data_float,
            data_list,
            data_n_list,
            data_dict,
            data_n_dict):
        self.str_data = data_str
        self.int_data = data_int
        self.float_data = data_float
        self.list_data = data_list
        self.nested_list = data_n_list
        self.dictionary = data_dict
        self.nested_dictionary = data_n_dict


foo = Foo(
    str_data,
    int_data,
    float_data,
    list_data,
    nested_list,
    dictionary,
    nested_dictionary)

# Because the JSON object is a Python dictionary. 
result = json.dumps(foo.__dict__, indent=4)
# See table above.

# or with built-in function that accesses .__dict__ for you, called vars()
# result = json.dumps(vars(foo), indent=4)

print(result) # same as before
</code></pre>","
","<ul>
<li>Even simpler</li>
</ul>","
","<pre class=""lang-py prettyprint-override""><code>class Bar:
    def toJSON(self):
        return json.dumps(self, default=lambda o: o.__dict__,
                          sort_keys=False, indent=4)


bar = Bar()
bar.web = ""Stackoverflow""
bar.type = ""Knowledge""
bar.is_the_best = True
bar.user = Bar()
bar.user.name = ""Milovan""
bar.user.age = 34

print(bar.toJSON())
</code></pre>","
",<p>chart response</p>,"
","<p><a href=""https://i.stack.imgur.com/kksty.png"" rel=""noreferrer""><img alt=""enter image description here"" src=""https://i.stack.imgur.com/kksty.png""/></a></p>","
",<p>output:</p>,"
","<pre class=""lang-sh prettyprint-override""><code>{
    ""web"": ""Stackoverflow"",
    ""type"": ""Knowledge"",
    ""is_the_best"": true,
    ""user"": {
        ""name"": ""Milovan"",
        ""age"": 34
    }
}
</code></pre>","
"
"
",<p>No need to convert it in a string by using <code>json.dumps()</code></p>,"
","<pre><code>r = {'is_claimed': 'True', 'rating': 3.5}
file.write(r['is_claimed'])
file.write(str(r['rating']))
</code></pre>","
",<p>You can get the values directly from the dict object.</p>,"
"
"
",<p>Defining r as a dictionary should do the trick:</p>,"
","<pre><code>&gt;&gt;&gt; r: dict = {'is_claimed': 'True', 'rating': 3.5}
&gt;&gt;&gt; print(r['rating'])
3.5
&gt;&gt;&gt; type(r)
&lt;class 'dict'&gt;
</code></pre>","
"
"
",<p>You can create a nested dictionary in the above example by declaring a new dictionary inside the default dictionary.</p>,"
","<pre><code>import json 
dictionary = {
'fruit':{""Grapes"": ""10"",""color"": ""green""},
'vegetable':{""chilli"": ""4"",""color"": ""red""},
}
result = json.dumps(dictionary, indent = 3)
</code></pre>","
",<p>print(result)</p>,"
","<p>Here, I have used indent=3</p>","
","<p>Reference: <a href=""https://favtutor.com/blogs/dict-to-json-python"" rel=""nofollow noreferrer"">https://favtutor.com/blogs/dict-to-json-python</a></p>","
"
"
","<p>When I try to use a <code>print</code> statement in Python, it gives me this error:</p>","
","<pre><code>&gt;&gt;&gt; print ""Hello, World!""
  File ""&lt;stdin&gt;"", line 1
    print ""Hello, World!""
                        ^
SyntaxError: Missing parentheses in call to 'print'
</code></pre>","
",<p>What does that mean?</p>,"
"
"
",<p>This error message means that you are attempting to use Python 3 to follow an example or run a program that uses the Python 2 <code>print</code> statement:</p>,"
",<p><s></s></p>,"
","<pre><code>print ""Hello, World!""
</code></pre>","
",<p></p>
"
","<p>Unfortunately, the old <a href=""http://xkcd.com/353/"" rel=""noreferrer"">xkcd comic</a> isn't completely up to date anymore.</p>","
","<p><a href=""http://xkcd.com/353/"" rel=""noreferrer""><img alt=""https://imgs.xkcd.com/comics/python.png"" src=""https://imgs.xkcd.com/comics/python.png"" title=""I wrote 20 short programs in Python yesterday. It was wonderful. Perl, I'm leaving you.""/></a></p>","
",<p>Since Python 3.0 you have to write:</p>,"
","<pre><code>print(""Hello, World!"")
</code></pre>","
",<p>And someone has still to write that <code>antigravity</code> library :(</p>,"
"
"
","<p>There is a change in syntax from Python 2 to Python 3.
In Python 2,</p>","
","<pre><code>print ""Hello, World!"" 
</code></pre>","
","<p>will work but in Python 3, use parentheses as </p>","
","<pre><code>print(""Hello, World!"")
</code></pre>","
",<p>This is equivalent syntax to Scala and near to Java.</p>,"
"
"
","<p>Basically, since Python 3.x you need to use <code>print</code> with parenthesis.</p>","
","<p><strong>Python 2.x</strong>: print ""Lord of the Rings""</p>","
","<p><strong>Python 3.x</strong>: print(""Lord of the Rings"")</p>","
","<hr>
<h1>Explanation</h1>
<p><strong><code>print</code></strong> was a <strong>statement</strong> in <strong>2.x</strong>, but it's a <strong>function</strong> in <strong>3.x</strong>. Now, there are a number of good reasons for this.</p>
<ol>
<li>With function format of Python 3.x, more flexibility comes when printing multiple items with comma separated.</li>
<li>You can't use argument splatting with a statement. In 3.x if you have a list of items that you want to print with a separator, you can do this:</li>
</ol>
<pre><code>&gt;&gt;&gt; items = ['foo', 'bar', 'baz']
&gt;&gt;&gt; print(*items, sep='+')
foo+bar+baz
</code></pre>
<ol start=""3"">
<li>You can't override a statement. If you want to change the behavior of print, you can do that when it's a function but not when it's a statement.</li>
</ol>
</hr>"
"
","<p>If your code should work in both Python 2 and 3, you can achieve this by loading this at the beginning of your program:</p>","
","<pre><code>from __future__ import print_function   # If code has to work in Python 2 and 3!
</code></pre>","
",<p>Then you can print in the Python 3 way:</p>,"
","<pre><code>print(""python"")
</code></pre>","
",<p>If you want to print something without creating a new line - you can do this:</p>,"
","<pre><code>for number in range(0, 10):
    print(number, end=', ')
</code></pre>","
"
"
","<p>In Python 3, you can only print as:</p>","
","<pre><code>print(""STRING"")
</code></pre>","
","<p>But in Python 2, the parentheses are not necessary.</p>","
"
"
","<p>I could also just add that I knew everything about the syntax change between <code>Python2.7</code> and <code>Python3</code>, and my code was correctly written as <code>print(""string"")</code> and even 
<code>print(f""string"")</code>... </p>","
",<p>But after some time of debugging I realized that my bash script was calling python like: </p>,"
","<blockquote>
<p>python file_name.py</p>
</blockquote>","
",<p>which had the effect of calling my python script by default using <code>python2.7</code> which gave the error. So I changed my bash script to:</p>,"
","<blockquote>
<p>python3 file_name.py</p>
</blockquote>","
",<p>which of coarse uses python3 to run the script which fixed the error.</p>,"
"
"
","<p>Outside of the direct answers here, one should note the other key difference between python 2 and 3. The <a href=""https://wiki.python.org/moin/Python2orPython3"" rel=""nofollow noreferrer"">official python wiki</a> goes into almost all of the major differences and focuses on when you should use either of the versions. <a href=""https://learntocodewith.me/programming/python/python-2-vs-python-3/"" rel=""nofollow noreferrer"">This blog post</a> also does a fine job of explaining the current python universe and the somehow unsolved puzzle of moving to python 3.</p>","
","<p>As far as I can tell, you are beginning to learn the python language. You should consider the aforementioned articles before you continue down the python 3 route. Not only will you have to change some of your syntax, you will also need to think about which packages will be available to you (an advantage of python 2) and potential optimizations that could be made in your code (an advantage of python 3).</p>","
"
"
","<p><code>print('Hello, World!')</code></p>","
","<p>You're using python 3, where you need brackets when printing.</p>","
"
"
",<p>So I was getting this error</p>,"
","<pre><code>from trp import BoundingBox, Document
File ""C:\Users\Kshitij Agarwal\AppData\Roaming\Python\Python39\site-packages\trp\__init__.py"", line 31
print ip
      ^ 
SyntaxError: Missing parentheses in call to 'print'. Did you mean print(ip)?
</code></pre>","
","<p>This is a Python package error, in which Python2 has been used and you are probably running this on Python3.</p>","
","<p>One solution could be to convert Python2 <code>print something</code> to Python3 <code>print(something)</code> for every line in each file in the package folder, which is not a good idea. I mean, you can do it but still there are better ways.</p>","
","<p>To perform the same task, there is a package named <strong>2to3</strong> in Python which converts Python2 scripts to Python3 scripts. To install it, execute the  command in terminal..</p>","
","<pre><code>pip install 2to3
</code></pre>","
","<p>Then change the directory in terminal to the location where the package files are present, in my case - <strong>C:\Users\Kshitij Agarwal\AppData\Roaming\Python\Python39\site-packages\trp</strong></p>","
",<p>Now execute the command </p>,"
","<pre><code>2to3 . -w
</code></pre>","
","<p>and <strong>voila</strong>, all the <em>Python2</em> files in that directory will be converted to <em>Python3</em>.</p>","
",<p><strong>Note</strong>:- The above commands hold true for other operating systems as well. Only Python package path will vary as per the system.</p>,"
"
"
",<p>I want to build a query for sunburnt(solr interface) using class inheritance and therefore adding key - value pairs together. The sunburnt interface takes keyword arguments. How can I transform a dict <code>({'type':'Event'})</code> into keyword arguments <code>(type='Event')</code>?</p>,"
"
"
","<p>Use the <a href=""http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists"" rel=""noreferrer"">double-star</a> (aka <a href=""https://stackoverflow.com/questions/2322355/proper-name-for-python-operator/2322384#2322384"">double-splat?</a>) operator:</p>","
","<pre><code>func(**{'type':'Event'})
</code></pre>","
",<p>is equivalent to</p>,"
","<pre><code>func(type='Event')
</code></pre>","
"
"
",<p><code>**</code> operator would be helpful here. </p>,"
",<p><code>**</code> operator will unpack the dict elements and thus <code>**{'type':'Event'}</code> would be treated as <code>type='Event'</code></p>,"
",<p><code>func(**{'type':'Event'})</code> is same as <code>func(type='Event')</code> i.e the dict elements would be converted to the <code>keyword arguments</code>. </p>,"
",<p>FYI</p>,"
",<p><code>*</code> will unpack the list elements and they would be treated as <code>positional arguments</code>.</p>,"
","<p><code>func(*['one', 'two'])</code> is same as <code>func('one', 'two')</code></p>","
"
"
",<p>Here is a complete example showing how to use the <code>**</code> operator to pass values from a dictionary as keyword arguments.</p>,"
","<pre><code>&gt;&gt;&gt; def f(x=2):
...     print(x)
... 
&gt;&gt;&gt; new_x = {'x': 4}
&gt;&gt;&gt; f()        #    default value x=2
2
&gt;&gt;&gt; f(x=3)     #   explicit value x=3
3
&gt;&gt;&gt; f(**new_x) # dictionary value x=4 
4
</code></pre>","
"
"
","<div>
<aside class=""s-notice s-notice__info post-notice js-post-notice mb16"" role=""status"">
<div class=""d-flex fd-column fw-nowrap"">
<div class=""d-flex fw-nowrap"">
<div class=""flex--item wmn0 fl1 lh-lg"">
<div class=""flex--item fl1 lh-lg"">
<b>This question already has answers here</b>:
                        
                    </div>
</div>
</div>
<div class=""flex--item mb0 mt4"">
<a dir=""ltr"" href=""/questions/1186789/what-is-the-best-way-to-call-a-script-from-another-script"">What is the best way to call a script from another script?</a>
<span class=""question-originals-answer-count"">
                                (15 answers)
                            </span>
</div>
<div class=""flex--item mb0 mt8"">Closed <span class=""relativetime"" title=""2015-02-26 14:05:25Z"">7 years ago</span>.</div>
</div>
</aside>
</div>","
",<p>I want to run a Python script from another Python script. I want to pass variables like I would using the command line.</p>,"
","<p>For example, I would run my first script that would iterate through a list of values (0,1,2,3) and pass those to the 2nd script <code>script2.py 0</code> then <code>script2.py 1</code>, etc.</p>","
","<p>I found <a href=""https://stackoverflow.com/questions/1186789/what-is-the-best-way-to-call-a-python-script-from-another-python-script"">StackOverflow question 1186789</a> which is a similar question, but ars's answer calls a function, where as I want to run the whole script, not just a function, and balpha's answer calls the script but with no arguments. I changed this to something like the below as a test:</p>","
","<pre><code>execfile(""script2.py 1"")
</code></pre>","
","<p>But it is not accepting variables properly. When I print out the <code>sys.argv</code> in script2.py it is the original command call to first script ""['C:\script1.py'].</p>","
",<p>I don't really want to change the original script (i.e. script2.py in my example) since I don't own it.</p>,"
",<p>I figure there must be a way to do this; I am just confused how you do it.</p>,"
"
"
","<p>Try using <a href=""http://docs.python.org/library/os.html#os.system""><code>os.system</code></a>:</p>","
","<pre><code>os.system(""script2.py 1"")
</code></pre>","
",<p><code>execfile</code> is different because it is designed to run a sequence of Python statements in the <em>current</em> execution context. That's why <code>sys.argv</code> didn't change for you.</p>,"
"
"
","<p>This is inherently the wrong thing to do. If you are running a Python script from another Python script, you should communicate through Python instead of through the OS:</p>","
","<pre><code>import script1
</code></pre>","
","<p>In an ideal world, you will be able to call a function inside <code>script1</code> directly:</p>","
","<pre><code>for i in range(whatever):
    script1.some_function(i)
</code></pre>","
","<p>If necessary, you can hack <code>sys.argv</code>. There's a neat way of doing this using a context manager to ensure that you don't make any permanent changes.</p>","
","<pre><code>import contextlib
@contextlib.contextmanager
def redirect_argv(num):
    sys._argv = sys.argv[:]
    sys.argv=[str(num)]
    yield
    sys.argv = sys._argv

with redirect_argv(1):
    print(sys.argv)
</code></pre>","
",<p>I think this is preferable to passing all your data to the OS and back; that's just silly.</p>,"
"
"
","<p>Ideally, the Python script you want to run will be set up with code like this near the end:</p>","
","<pre><code>def main(arg1, arg2, etc):
    # do whatever the script does


if __name__ == ""__main__"":
    main(sys.argv[1], sys.argv[2], sys.argv[3])
</code></pre>","
","<p>In other words, <em>if</em> the module is called from the command line, it parses the command line options and then calls another function, <code>main()</code>, to do the actual work. (The actual arguments will vary, and the parsing may be more involved.)</p>","
","<p>If you want to call such a script from another Python script, however, you can simply <code>import</code> it and call <code>modulename.main()</code> directly, rather than going through the operating system.</p>","
","<p><code>os.system</code> will work, but it is the roundabout (read ""slow"") way to do it, as you are starting a whole new Python interpreter process each time for no raisin.</p>","
"
"
",<p>I think the good practice may be something like this; </p>,"
","<pre><code>import subprocess
cmd = 'python script.py'

p = subprocess.Popen(cmd, stdout=subprocess.PIPE, shell=True)
out, err = p.communicate() 
result = out.split('\n')
for lin in result:
    if not lin.startswith('#'):
        print(lin)
</code></pre>","
","<p>according to documentation 
The subprocess module allows you to spawn new processes, connect to their input/output/error pipes, and obtain their return codes. This module intends to replace several older modules and functions:</p>","
","<pre><code>os.system
os.spawn*
os.popen*
popen2.*
commands.*
</code></pre>","
","<p>Use communicate() rather than .stdin.write, .stdout.read or .stderr.read to avoid deadlocks due to any of the other OS pipe buffers filling up and blocking the child process.
<a href=""https://docs.python.org/2/library/subprocess.html#replacing-os-system"" rel=""noreferrer"">Read Here</a></p>","
"
"
","<p>SubProcess module:<br/>
<a href=""http://docs.python.org/dev/library/subprocess.html#using-the-subprocess-module"" rel=""noreferrer"">http://docs.python.org/dev/library/subprocess.html#using-the-subprocess-module</a></p>","
","<pre><code>import subprocess
subprocess.Popen(""script2.py 1"", shell=True)
</code></pre>","
","<p>With this, you can also redirect stdin, stdout, and stderr.</p>","
"
"
","<pre><code>import subprocess
subprocess.call("" python script2.py 1"", shell=True)
</code></pre>","
"
"
",<p>I want to perform my own complex operations on financial data in dataframes in a sequential manner.</p>,"
","<p>For example I am using the following MSFT CSV file taken from <a href=""http://finance.yahoo.com/q/hp?s=MSFT"">Yahoo Finance</a>:</p>","
","<pre><code>Date,Open,High,Low,Close,Volume,Adj Close
2011-10-19,27.37,27.47,27.01,27.13,42880000,27.13
2011-10-18,26.94,27.40,26.80,27.31,52487900,27.31
2011-10-17,27.11,27.42,26.85,26.98,39433400,26.98
2011-10-14,27.31,27.50,27.02,27.27,50947700,27.27

....
</code></pre>","
",<p>I then do the following:</p>,"
","<pre><code>#!/usr/bin/env python
from pandas import *

df = read_csv('table.csv')

for i, row in enumerate(df.values):
    date = df.index[i]
    open, high, low, close, adjclose = row
    #now perform analysis on open/close based on date, etc..
</code></pre>","
","<p>Is that the most efficient way? Given the focus on speed in pandas, I would assume there must be some special function to iterate through the  values in a manner that one also retrieves the index (possibly through a generator to be memory efficient)? <code>df.iteritems</code> unfortunately only iterates column by column.</p>","
"
"
",<p>The newest versions of pandas now include a built-in function for iterating over rows. </p>,"
","<pre><code>for index, row in df.iterrows():

    # do some logic here
</code></pre>","
","<p>Or, if you want it faster use <code>itertuples()</code></p>","
","<p>But, unutbu's suggestion to use numpy functions to avoid iterating over rows will produce the fastest code. </p>","
"
"
","<p>Pandas is based on NumPy arrays.
The key to speed with NumPy arrays is to perform your operations on the whole array at once, never row-by-row or item-by-item.</p>","
","<p>For example, if <code>close</code> is a 1-d array, and you want the day-over-day percent change,</p>","
","<pre><code>pct_change = close[1:]/close[:-1]
</code></pre>","
","<p>This computes the entire array of percent changes as one statement, instead of </p>","
","<pre><code>pct_change = []
for row in close:
    pct_change.append(...)
</code></pre>","
","<p>So try to avoid the Python loop <code>for i, row in enumerate(...)</code> entirely, and
think about how to perform your calculations with operations on the entire array (or dataframe) as a whole, rather than row-by-row.</p>","
"
"
","<p>Like what has been mentioned before, pandas object is most efficient when process the whole array at once. However for those who really need to loop through a pandas DataFrame to perform something, like me, I found at least three ways to do it. I have done a short test to see which one of the three is the least time consuming.</p>","
","<pre><code>t = pd.DataFrame({'a': range(0, 10000), 'b': range(10000, 20000)})
B = []
C = []
A = time.time()
for i,r in t.iterrows():
    C.append((r['a'], r['b']))
B.append(time.time()-A)

C = []
A = time.time()
for ir in t.itertuples():
    C.append((ir[1], ir[2]))    
B.append(time.time()-A)

C = []
A = time.time()
for r in zip(t['a'], t['b']):
    C.append((r[0], r[1]))
B.append(time.time()-A)

print B
</code></pre>","
",<p>Result:</p>,"
","<pre><code>[0.5639059543609619, 0.017839908599853516, 0.005645036697387695]
</code></pre>","
",<p>This is probably not the best way to measure the time consumption but it's quick for me.</p>,"
",<p>Here are some pros and cons IMHO:</p>,"
","<ul>
<li>.iterrows(): return index and row items in separate variables, but significantly slower</li>
<li>.itertuples(): faster than .iterrows(), but return index together with row items, ir[0] is the index</li>
<li>zip: quickest, but no access to index of the row</li>
</ul>","
",<h2>EDIT 2020/11/10</h2>,"
","<p>For what it is worth, here is an updated benchmark with some other alternatives (perf with MacBookPro 2,4 GHz Intel Core i9 8 cores 32 Go 2667 MHz DDR4)</p>","
","<pre class=""lang-py prettyprint-override""><code>import sys
import tqdm
import time
import pandas as pd

B = []
t = pd.DataFrame({'a': range(0, 10000), 'b': range(10000, 20000)})
for _ in tqdm.tqdm(range(10)):
    C = []
    A = time.time()
    for i,r in t.iterrows():
        C.append((r['a'], r['b']))
    B.append({""method"": ""iterrows"", ""time"": time.time()-A})

    C = []
    A = time.time()
    for ir in t.itertuples():
        C.append((ir[1], ir[2]))
    B.append({""method"": ""itertuples"", ""time"": time.time()-A})

    C = []
    A = time.time()
    for r in zip(t['a'], t['b']):
        C.append((r[0], r[1]))
    B.append({""method"": ""zip"", ""time"": time.time()-A})

    C = []
    A = time.time()
    for r in zip(*t.to_dict(""list"").values()):
        C.append((r[0], r[1]))
    B.append({""method"": ""zip + to_dict('list')"", ""time"": time.time()-A})

    C = []
    A = time.time()
    for r in t.to_dict(""records""):
        C.append((r[""a""], r[""b""]))
    B.append({""method"": ""to_dict('records')"", ""time"": time.time()-A})

    A = time.time()
    t.agg(tuple, axis=1).tolist()
    B.append({""method"": ""agg"", ""time"": time.time()-A})

    A = time.time()
    t.apply(tuple, axis=1).tolist()
    B.append({""method"": ""apply"", ""time"": time.time()-A})

print(f'Python {sys.version} on {sys.platform}')
print(f""Pandas version {pd.__version__}"")
print(
    pd.DataFrame(B).groupby(""method"").agg([""mean"", ""std""]).xs(""time"", axis=1).sort_values(""mean"")
)

## Output

Python 3.7.9 (default, Oct 13 2020, 10:58:24) 
[Clang 12.0.0 (clang-1200.0.32.2)] on darwin
Pandas version 1.1.4
                           mean       std
method                                   
zip + to_dict('list')  0.002353  0.000168
zip                    0.003381  0.000250
itertuples             0.007659  0.000728
to_dict('records')     0.025838  0.001458
agg                    0.066391  0.007044
apply                  0.067753  0.006997
iterrows               0.647215  0.019600
</code></pre>","
"
"
",<p>You can loop through the rows by transposing and then calling iteritems:</p>,"
","<pre><code>for date, row in df.T.iteritems():
   # do some logic here
</code></pre>","
","<p>I am not certain about efficiency in that case. To get the best possible performance in an iterative algorithm, you might want to explore writing it in <a href=""http://cython.org"">Cython</a>, so you could do something like:</p>","
","<pre><code>def my_algo(ndarray[object] dates, ndarray[float64_t] open,
            ndarray[float64_t] low, ndarray[float64_t] high,
            ndarray[float64_t] close, ndarray[float64_t] volume):
    cdef:
        Py_ssize_t i, n
        float64_t foo
    n = len(dates)

    for i from 0 &lt;= i &lt; n:
        foo = close[i] - open[i] # will be extremely fast
</code></pre>","
","<p>I would recommend writing the algorithm in pure Python first, make sure it works and see how fast it is-- if it's not fast enough, convert things to Cython like this with minimal work to get something that's about as fast as hand-coded C/C++.</p>","
"
"
",<p>You have three options:</p>,"
","<p>By <a href=""https://www.neural-networks.io/en/python/dataframes.php#iterate-over-rows-by-index"" rel=""noreferrer"">index</a> (simplest):</p>","
","<pre><code>&gt;&gt;&gt; for index in df.index:
...     print (""df["" + str(index) + ""]['B']="" + str(df['B'][index]))
</code></pre>","
","<p>With <a href=""https://www.neural-networks.io/en/python/dataframes.php#iterate-over-rows-with-iterrows"" rel=""noreferrer"">iterrows</a> (most used):</p>","
","<pre><code>&gt;&gt;&gt; for index, row in df.iterrows():
...     print (""df["" + str(index) + ""]['B']="" + str(row['B']))
</code></pre>","
","<p>With <a href=""https://www.neural-networks.io/en/python/dataframes.php#iterate-over-rows-with-itertuples"" rel=""noreferrer"">itertuples</a> (fastest):</p>","
","<pre><code>&gt;&gt;&gt; for row in df.itertuples():
...     print (""df["" + str(row.Index) + ""]['B']="" + str(row.B))
</code></pre>","
",<p>Three options display something like:</p>,"
","<pre><code>df[0]['B']=125
df[1]['B']=415
df[2]['B']=23
df[3]['B']=456
df[4]['B']=189
df[5]['B']=456
df[6]['B']=12
</code></pre>","
","<p>Source: <a href=""https://alphons.io/2101/what-is-the-most-efficient-way-to-loop-through-dataframes-with-pandas/"" rel=""noreferrer"">alphons.io</a></p>","
"
"
","<p>I checked out <code>iterrows</code> after noticing <a href=""https://stackoverflow.com/users/475872/nick-crawford"">Nick Crawford's</a> answer, but found that it yields (index, Series) tuples. Not sure which would work best for you, but I ended up using the <code>itertuples</code> method for my problem, which yields (index, row_value1...) tuples.</p>","
","<p>There's also <code>iterkv</code>, which iterates through (column, series) tuples.</p>","
"
"
","<p>Just as a small addition, you can also do an apply if you have a complex function that you apply to a single column:</p>","
","<p><a href=""http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.apply.html"">http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.apply.html</a></p>","
","<pre><code>df[b] = df[a].apply(lambda col: do stuff with col here)
</code></pre>","
"
"
","<p>As <a href=""https://stackoverflow.com/users/653364/joris"">@joris</a> pointed out, <code>iterrows</code> is much slower than <code>itertuples</code> and <code>itertuples</code> is approximately 100 times fater than <code>iterrows</code>, and I tested speed of both methods in a DataFrame with 5027505 records the result is for <code>iterrows</code>, it is 1200it/s, and  <code>itertuples</code> is 120000it/s.</p>","
","<p>If you use <code>itertuples</code>, note that every element in the for loop is a namedtuple, so to get the value in each column, you can refer to the following example code</p>","
","<pre><code>&gt;&gt;&gt; df = pd.DataFrame({'col1': [1, 2], 'col2': [0.1, 0.2]},
                      index=['a', 'b'])
&gt;&gt;&gt; df
   col1  col2
a     1   0.1
b     2   0.2
&gt;&gt;&gt; for row in df.itertuples():
...     print(row.col1, row.col2)
...
1, 0.1
2, 0.2
</code></pre>","
"
"
","<p>For sure, the fastest way to iterate over a dataframe is to access the underlying numpy ndarray either via <code>df.values</code> (as you do) or by accessing each column separately <code>df.column_name.values</code>. Since you want to have access to the index too, you can use <code>df.index.values</code> for that.</p>","
","<pre><code>index = df.index.values
column_of_interest1 = df.column_name1.values
...
column_of_interestk = df.column_namek.values

for i in range(df.shape[0]):
   index_value = index[i]
   ...
   column_value_k = column_of_interest_k[i]
</code></pre>","
",<p>Not pythonic? Sure. But fast.</p>,"
","<p>If you want to squeeze more juice out of the loop you will want to look into <a href=""http://cython.org/"" rel=""noreferrer"">cython</a>. Cython will let you gain huge speedups (think 10x-100x). For maximum performance check <a href=""http://cython.readthedocs.io/en/latest/src/userguide/memoryviews.html"" rel=""noreferrer"">memory views for cython</a>.</p>","
"
"
",<p>Another suggestion would be to combine groupby with vectorized calculations if subsets of the rows shared characteristics which allowed you to do so. </p>,"
"
"
",<p>look at last one</p>,"
","<pre><code>t = pd.DataFrame({'a': range(0, 10000), 'b': range(10000, 20000)})
B = []
C = []
A = time.time()
for i,r in t.iterrows():
    C.append((r['a'], r['b']))
B.append(round(time.time()-A,5))

C = []
A = time.time()
for ir in t.itertuples():
    C.append((ir[1], ir[2]))    
B.append(round(time.time()-A,5))

C = []
A = time.time()
for r in zip(t['a'], t['b']):
    C.append((r[0], r[1]))
B.append(round(time.time()-A,5))

C = []
A = time.time()
for r in range(len(t)):
    C.append((t.loc[r, 'a'], t.loc[r, 'b']))
B.append(round(time.time()-A,5))

C = []
A = time.time()
[C.append((x,y)) for x,y in zip(t['a'], t['b'])]
B.append(round(time.time()-A,5))
B

0.46424
0.00505
0.00245
0.09879
0.00209
</code></pre>","
"
"
","<p>I believe the most simple and efficient way to loop through DataFrames is using numpy and numba.  In that case, looping can be approximately as fast as vectorized operations in many cases.  If numba is not an option, plain numpy is likely to be the next best option.  As has been noted many times, your default should be vectorization, but this answer merely considers efficient looping, given the decision to loop, for whatever reason.</p>","
","<p>For a test case, let's use the example from @DSM's answer of calculating a percentage change.  This is a very simple situation and as a practical matter you would not write a loop to calculate it, but as such it provides a reasonable baseline for timing vectorized approaches vs loops.</p>","
","<p>Let's set up the 4 approaches with a small DataFrame, and we'll time them on a larger dataset below.</p>","
","<pre><code>import pandas as pd
import numpy as np
import numba as nb

df = pd.DataFrame( { 'close':[100,105,95,105] } )

pandas_vectorized = df.close.pct_change()[1:]

x = df.close.to_numpy()
numpy_vectorized = ( x[1:] - x[:-1] ) / x[:-1]
        
def test_numpy(x):
    pct_chng = np.zeros(len(x))
    for i in range(1,len(x)):
        pct_chng[i] = ( x[i] - x[i-1] ) / x[i-1]
    return pct_chng

numpy_loop = test_numpy(df.close.to_numpy())[1:]

@nb.jit(nopython=True)
def test_numba(x):
    pct_chng = np.zeros(len(x))
    for i in range(1,len(x)):
        pct_chng[i] = ( x[i] - x[i-1] ) / x[i-1]
    return pct_chng
    
numba_loop = test_numba(df.close.to_numpy())[1:]
</code></pre>","
","<p>And here are the timings on a DataFrame with 100,000 rows (timings performed with Jupyter's <code>%timeit</code> function, collapsed to a summary table for readability):</p>","
","<pre><code>pandas/vectorized   1,130 micro-seconds
numpy/vectorized      382 micro-seconds
numpy/looped       72,800 micro-seconds
numba/looped          455 micro-seconds
</code></pre>","
","<p>Summary:  for simple cases, like this one, you would go with (vectorized) pandas for simplicity and readability, and (vectorized) numpy for speed.  If you really need to use a loop, do it in numpy.  If numba is available, combine it with numpy for additional speed.  In this case, numpy + numba is almost as fast as vectorized numpy code.</p>","
",<p>Other details:</p>,"
","<ul>
<li>Not shown are various options like iterrows, itertuples, etc. which are orders of magnitude slower and really should never be used.</li>
<li>The timings here are fairly typical: numpy is faster than pandas and vectorized is faster than loops, but adding numba to numpy will often speed numpy up dramatically.</li>
<li>Everything except the pandas option requires converting the DataFrame column to a numpy array.  That conversion is included in the timings.</li>
<li>The time to define/compile the numpy/numba functions was not included in the timings, but would generally be a negligible component of the timing for any large dataframe.</li>
</ul>","
"
"
","<p>I am trying to make a scatter plot and annotate data points with different numbers from a list.
So, for example, I want to plot <code>y</code> vs <code>x</code> and annotate with corresponding numbers from <code>n</code>.</p>","
","<pre><code>y = [2.56422, 3.77284, 3.52623, 3.51468, 3.02199]
z = [0.15, 0.3, 0.45, 0.6, 0.75]
n = [58, 651, 393, 203, 123]
ax = fig.add_subplot(111)
ax1.scatter(z, y, fmt='o')
</code></pre>","
",<p>Any ideas?</p>,"
"
"
",<p>I'm not aware of any plotting method which takes arrays or lists but you could use <code>annotate()</code> while iterating over the values in <code>n</code>.</p>,"
","<pre><code>y = [2.56422, 3.77284, 3.52623, 3.51468, 3.02199]
z = [0.15, 0.3, 0.45, 0.6, 0.75]
n = [58, 651, 393, 203, 123]

fig, ax = plt.subplots()
ax.scatter(z, y)

for i, txt in enumerate(n):
    ax.annotate(txt, (z[i], y[i]))
</code></pre>","
","<p>There are a lot of formatting options for <code>annotate()</code>, see the <a href=""https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.annotate.html"" rel=""noreferrer"">matplotlib website:</a></p>","
","<p><img alt=""enter image description here"" src=""https://i.stack.imgur.com/6g4Et.png""/></p>","
"
"
","<p>In case anyone is trying to apply the above solutions to a .scatter() instead of a .subplot(),   </p>","
",<p>I tried running the following code</p>,"
","<pre><code>y = [2.56422, 3.77284, 3.52623, 3.51468, 3.02199]
z = [0.15, 0.3, 0.45, 0.6, 0.75]
n = [58, 651, 393, 203, 123]

fig, ax = plt.scatter(z, y)

for i, txt in enumerate(n):
    ax.annotate(txt, (z[i], y[i]))
</code></pre>","
","<p>But ran into errors stating ""cannot unpack non-iterable PathCollection object"", with the error specifically pointing at codeline fig, ax = plt.scatter(z, y)</p>","
",<p>I eventually solved the error using the following code</p>,"
","<pre><code>plt.scatter(z, y)

for i, txt in enumerate(n):
    plt.annotate(txt, (z[i], y[i]))
</code></pre>","
","<p>I didn't expect there to be a difference between .scatter() and .subplot()
I should have known better. </p>","
"
"
","<p>In versions earlier than matplotlib 2.0, <code>ax.scatter</code> is not necessary to plot text without markers. In version 2.0 you'll need <code>ax.scatter</code> to set the proper range and markers for text.</p>","
","<pre><code>y = [2.56422, 3.77284, 3.52623, 3.51468, 3.02199]
z = [0.15, 0.3, 0.45, 0.6, 0.75]
n = [58, 651, 393, 203, 123]

fig, ax = plt.subplots()

for i, txt in enumerate(n):
    ax.annotate(txt, (z[i], y[i]))
</code></pre>","
","<p>And in this <a href=""http://matplotlib.org/examples/mplot3d/text3d_demo.html"" rel=""noreferrer"">link</a> you can find an example in 3d.</p>","
"
"
","<p>You may also use <code>pyplot.text</code> (see <a href=""https://matplotlib.org/api/_as_gen/matplotlib.pyplot.text.html"" rel=""noreferrer"">here</a>).</p>","
","<pre><code>def plot_embeddings(M_reduced, word2Ind, words):
    """""" 
        Plot in a scatterplot the embeddings of the words specified in the list ""words"".
        Include a label next to each point.
    """"""
    for word in words:
        x, y = M_reduced[word2Ind[word]]
        plt.scatter(x, y, marker='x', color='red')
        plt.text(x+.03, y+.03, word, fontsize=9)
    plt.show()

M_reduced_plot_test = np.array([[1, 1], [-1, -1], [1, -1], [-1, 1], [0, 0]])
word2Ind_plot_test = {'test1': 0, 'test2': 1, 'test3': 2, 'test4': 3, 'test5': 4}
words = ['test1', 'test2', 'test3', 'test4', 'test5']
plot_embeddings(M_reduced_plot_test, word2Ind_plot_test, words)
</code></pre>","
","<p><a href=""https://i.stack.imgur.com/2WD5m.png"" rel=""noreferrer""><img alt=""enter image description here"" src=""https://i.stack.imgur.com/2WD5m.png""/></a></p>","
"
"
",<p>I would love to add that you can even use arrows /text boxes to annotate the labels. Here is what I mean:</p>,"
","<pre><code>import random
import matplotlib.pyplot as plt


y = [2.56422, 3.77284, 3.52623, 3.51468, 3.02199]
z = [0.15, 0.3, 0.45, 0.6, 0.75]
n = [58, 651, 393, 203, 123]

fig, ax = plt.subplots()
ax.scatter(z, y)

ax.annotate(n[0], (z[0], y[0]), xytext=(z[0]+0.05, y[0]+0.3), 
    arrowprops=dict(facecolor='red', shrink=0.05))

ax.annotate(n[1], (z[1], y[1]), xytext=(z[1]-0.05, y[1]-0.3), 
    arrowprops = dict(  arrowstyle=""-&gt;"",
                        connectionstyle=""angle3,angleA=0,angleB=-90""))

ax.annotate(n[2], (z[2], y[2]), xytext=(z[2]-0.05, y[2]-0.3), 
    arrowprops = dict(arrowstyle=""wedge,tail_width=0.5"", alpha=0.1))

ax.annotate(n[3], (z[3], y[3]), xytext=(z[3]+0.05, y[3]-0.2), 
    arrowprops = dict(arrowstyle=""fancy""))

ax.annotate(n[4], (z[4], y[4]), xytext=(z[4]-0.1, y[4]-0.2),
    bbox=dict(boxstyle=""round"", alpha=0.1), 
    arrowprops = dict(arrowstyle=""simple""))

plt.show()
</code></pre>","
","<p>Which will generate the following graph:
<a href=""https://i.stack.imgur.com/IM6fl.png"" rel=""noreferrer""><img alt=""enter image description here"" src=""https://i.stack.imgur.com/IM6fl.png""/></a></p>","
"
"
",<p>For limited set of values matplotlib is fine. But when you have lots of values the tooltip starts to overlap over other data points. But with limited space you can't ignore the values. Hence it's better to zoom out or zoom in.</p>,"
",<p>Using plotly</p>,"
","<pre><code>import plotly.express as px
df = px.data.tips()

df = px.data.gapminder().query(""year==2007 and continent=='Americas'"")


fig = px.scatter(df, x=""gdpPercap"", y=""lifeExp"", text=""country"", log_x=True, size_max=100, color=""lifeExp"")
fig.update_traces(textposition='top center')
fig.update_layout(title_text='Life Expectency', title_x=0.5)
fig.show()
</code></pre>","
","<p><a href=""https://i.stack.imgur.com/qRTv0.gif"" rel=""noreferrer""><img alt=""enter image description here"" src=""https://i.stack.imgur.com/qRTv0.gif""/></a></p>","
"
"
",<p>Python 3.6+:</p>,"
","<pre><code>coordinates = [('a',1,2), ('b',3,4), ('c',5,6)]
for x in coordinates: plt.annotate(x[0], (x[1], x[2]))
</code></pre>","
"
"
",<p>As a one liner using list comprehension and numpy: </p>,"
","<p><code>[ax.annotate(x[0], (x[1], x[2])) for x in np.array([n,z,y]).T]</code></p>","
",<p>setup is ditto to Rutger's answer.</p>,"
"
"
","<p>This might be useful when you need individually annotate in different time (I mean, not in a single for loop)</p>","
","<pre><code>ax = plt.gca()
ax.annotate('your_lable', (x,y)) 
</code></pre>","
",<p>where <code>x</code> and <code>y</code> are the your <em>target coordinate</em> and type is float/int.</p>,"
"
