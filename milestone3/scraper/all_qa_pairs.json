[{"question": "What is the use of the yield keyword in Python? What does it do?", "answers": ["To understand what yield does, you must understand what generators are. And before you can understand generators, you must understand iterables.", "When you see a function with yield statements, apply this easy trick to understand what will happen:", "Think of it this way:", "The yield keyword is reduced to two simple facts:", "What does the yield keyword do in Python?"]}, {"question": "Given the following code, what does the if __name__ == \"__main__\": do?", "answers": ["It's boilerplate code that protects users from accidentally invoking the script when they didn't intend to. Here are some common problems when the guard is omitted from a script:", "When your script is run by passing it as a command to the Python interpreter,", "The simplest explanation for the __name__ variable (imho) is the following:", "To outline the basics:", "if __name__ == \"__main__\" is the part that runs when the script is run from (say) the command line using a command like python myscript.py."]}, {"question": "If Python does not have a ternary conditional operator, is it possible to simulate one using other language constructs?", "answers": ["Yes, It was added in version 2.5. The expression syntax is:", "You can index into a tuple:", "For versions prior to 2.5, there's the trick:", " <expression 1> if <condition> else <expression 2> ", "From the documentation:"]}, {"question": "In Python, what are metaclasses and what do we use them for?", "answers": ["Before understanding metaclasses, you need to master classes in Python. And Python has a very peculiar idea of what classes are, borrowed from the Smalltalk language.", "A metaclass is the class of a class. A class defines how an instance of the class (i.e. an object) behaves while a metaclass defines how a class behaves. A class is an instance of a metaclass.", "Note, this answer is for Python 2.x as it was written in 2008, metaclasses are slightly different in 3.x.", "Others have explained how metaclasses work and how they fit into the Python type system. Here's an example of what they can be used for. In a testing framework I wrote, I wanted to keep track of the order in which classes were defined, so that I could later instantiate them in this order. I found it easiest to do this using a metaclass.", "One use for metaclasses is adding new properties and methods to an instance automatically."]}, {"question": "I have two Python dictionaries, and I want to write a single expression that returns these two dictionaries, merged (i.e. taking the union).  The update() method would be what I need, if it returned its result instead of modifying a dictionary in-place.", "answers": ["For dictionaries x and y, z becomes a shallowly-merged dictionary with values from y replacing those from x.", "In your case, what you can do is:", "An alternative:", "Another, more concise, option:", "This probably won't be a popular answer, but you almost certainly do not want to do this.  If you want a copy that's a merge, then use copy (or deepcopy, depending on what you want) and then update.  The two lines of code are much more readable - more Pythonic - than the single line creation with .items() + .items().  Explicit is better than implicit."]}, {"question": "How do you call an external command (as if I'd typed it at the Unix shell or Windows command prompt) from within a Python script?", "answers": ["Use the subprocess module in the standard library:", "Summary of ways to call external programs, including their advantages and disadvantages:", "Typical implementation:", "Some hints on detaching the child process from the calling one (starting the child process in background).", "Note that this is dangerous, since the command isn't cleaned. I leave it up to you to google for the relevant documentation on the 'os' and 'sys' modules. There are a bunch of functions (exec* and spawn*) that will do similar things."]}, {"question": "What is the most elegant way to check if the directory a file is going to be written to exists, and if not, create the directory using Python? Here is what I tried:", "answers": ["On Python \u2265 3.5, use pathlib.Path.mkdir:", "pathlib.Path.mkdir as used above recursively creates the directory and does not raise an exception if the directory already exists. If you don't need or want the parents to be created, skip the parents argument.", "Using try except and the right error code from errno module gets rid of the race condition and is cross-platform:", "Starting from Python 3.5, pathlib.Path.mkdir has an exist_ok flag:", "I would personally recommend that you use os.path.isdir() to test instead of os.path.exists()."]}, {"question": "What is the difference between a function decorated with @staticmethod and one decorated with @classmethod?", "answers": ["Maybe a bit of example code will help: Notice the difference in the call signatures of foo, class_foo and static_foo:", "A staticmethod is a method that knows nothing about the class or instance it was called on. It just gets the arguments that were passed, no implicit first argument. It is basically useless in Python -- you can just use a module function instead of a staticmethod.", "Basically @classmethod makes a method whose first argument is the class it's called from (rather than the class instance), @staticmethod does not have any implicit arguments.", "Official python docs:", "To decide whether to use @staticmethod or @classmethod you have to look inside your method. If your method accesses other variables/methods in your class then use @classmethod. On the other hand, if your method does not touches any other parts of the class then use @staticmethod."]}, {"question": "I need a good explanation (references are a plus) on Python's slice notation. ", "answers": ["It's pretty simple really:", "The Python tutorial talks about it (scroll down a bit until you get to the part about slicing).", "Enumerating the possibilities allowed by the grammar:", "The answers above don't discuss slice assignment. To understand slice assignment, it's helpful to add another concept to the ASCII art:", "In short, the colons (:) in subscript notation (subscriptable[subscriptarg]) make slice notation - which has the optional arguments, start, stop, step:"]}, {"question": "I am a bit puzzled by the following code:", "answers": ["key is just a variable name.  ", "It's not that key is a special word, but that dictionaries implement the iterator protocol.  You could do this in your class, e.g. see this question for how to build class iterators.", "Iterating over a dict iterates through its keys in no particular order, as you can see here:", "key is simply a variable.", "When you iterate through dictionaries using the for .. in ..-syntax, it always iterates over the keys (the values are accessible using dictionary[key])."]}, {"question": "How can I create or use a global variable in a function?", "answers": ["You can use a global variable within other functions by declaring it as global within each function that assigns a value to it:", "If I'm understanding your situation correctly, what you're seeing is the result of how Python handles local (function) and global (module) namespaces.", "You may want to explore the notion of namespaces. In Python, the module is the natural place for global data:", "Python uses a simple heuristic to decide which scope it should load a variable from, between local and global.  If a variable name appears on the left hand side of an assignment, but is not declared global, it is assumed to be local.  If it does not appear on the left hand side of an assignment, it is assumed to be global.  ", "If you want to refer to a global variable in a function, you can use the global keyword to declare which variables are global. You don't have to use it in all cases (as someone here incorrectly claims) - if the name referenced in an expression cannot be found in local scope or scopes in the functions in which this function is defined, it is looked up among global variables."]}, {"question": "I'm looking for a string.contains or string.indexof method in Python.", "answers": ["You can use the in operator:", "If it's just a substring search you can use string.find(\"substring\").", "99% of use cases will be covered using the keyword, in, which returns True or False:", "if needle in haystack: is the normal use, as @Michael says -- it relies on the in operator, more readable and faster than a method call.", "Here are a few useful examples that speak for themselves concerning the in method:"]}, {"question": "I know that I can do:", "answers": ["From Python Documentation:", "Do this:", "From Python documentation -> 8.3 Handling Exceptions:", "If you frequently use a large number of exceptions, you can pre-define a tuple, so you don't have to re-type them many times. ", "One of the way to do this is.."]}, {"question": "What is the difference between __str__ and __repr__ in Python?", "answers": ["Alex summarized well but, surprisingly, was too succinct.", "My rule of thumb:  __repr__ is for developers, __str__ is for customers.", "Unless you specifically act to ensure otherwise, most classes don't have helpful results for either:", "__repr__: representation of python object usually eval will convert it back to that object", "In short, the goal of __repr__ is to be unambiguous and __str__ is to be\n  readable."]}, {"question": "How do I concatenate two lists in Python?", "answers": ["You can use the + operator to combine them:", "Python >= 3.5 alternative: [*l1, *l2]", "It's also possible to create a generator that simply iterates over the items in both lists using itertools.chain(). This allows you to chain lists (or any iterable) together for processing without copying the items to a new list:", "You could also use the list.extend() method in order to add a list to the end of another one:", "You can use sets to obtain merged list of unique values"]}, {"question": "For example, if passed the following:", "answers": ["Using the implicit booleanness of the empty list is quite pythonic.", "The pythonic way to do it is from the PEP 8 style guide.", "I prefer it explicitly:", "This is the first google hit for \"python test empty array\" and similar queries, plus other people seem to be generalizing the question beyond just lists, so I thought I'd add a caveat for a different type of sequence that a lot of people might use.", "For example, if passed the following:"]}, {"question": "What's the difference between the list methods append() and extend()?", "answers": ["append appends object at the end.", "append adds an element to a list, and extend concatenates the first list with another list (or another iterable, not necessarily a list.)", "The list.append method appends an object to the end of the list.", "append appends a single element. extend appends a list of elements.", "With append you can append a single element that will extend the list:"]}, {"question": "What is __init__.py for in a Python source directory?", "answers": ["It used to be a required part of a package (old, pre-3.3 \"regular package\", not newer 3.3+ \"namespace package\").", "Files named __init__.py are used to mark directories on disk as Python package directories.\nIf you have the files", "In addition to labeling a directory as a Python package and defining __all__, __init__.py allows you to define any variable at the package level. Doing so is often convenient if a package defines something that will be imported frequently, in an API-like fashion. This pattern promotes adherence to the Pythonic \"flat is better than nested\" philosophy.", "There are 2 main reasons for __init__.py", "The __init__.py file makes Python treat directories containing it as modules. "]}, {"question": "Anyone tinkering with Python long enough has been bitten (or torn to pieces) by the following issue:", "answers": ["Actually, this is not a design flaw, and it is not because of internals or performance.\nIt comes simply from the fact that functions in Python are first-class objects, and not only a piece of code.", "Suppose you have the following code", "The relevant part of the documentation:", "I know nothing about the Python interpreter inner workings (and I'm not an expert in compilers and interpreters either) so don't blame me if I propose anything unsensible or impossible.", "Well, the reason is quite simply that bindings are done when code is executed, and the function definition is executed, well... when the functions is defined."]}, {"question": "I would like to know how to put a time delay in a Python script.", "answers": ["Here is another example where something is run approximately once a minute:", "You can use the sleep() function in the time module. It can take a float argument for sub-second resolution.", "In a single thread I suggest the sleep function:", "Delays can be also implemented by using the following methods.", "There are five methods which I know: time.sleep(), pygame.time.wait(), matplotlib's pyplot.pause(), .after(), and asyncio.sleep()."]}, {"question": "The Python documentation seems unclear about whether parameters are passed by reference or value, and the following code produces the unchanged value 'Original'", "answers": ["Arguments are passed by assignment. The rationale behind this is twofold:", "The problem comes from a misunderstanding of what variables are in Python. If you're used to most traditional languages, you have a mental model of what happens in the following sequence:", "I found the other answers rather long and complicated, so I created this simple diagram to explain the way Python treats variables and parameters.\n", "It is neither pass-by-value or pass-by-reference - it is call-by-object. See this, by Fredrik Lundh:", "Think of stuff being passed by assignment instead of by reference/by value. That way, it is always clear, what is happening as long as you understand what happens during the normal assignment."]}, {"question": "While using new_list = my_list, any modifications to new_list changes my_list every time. Why is this, and how can I clone or copy the list to prevent it?", "answers": ["With new_list = my_list, you don't actually have two lists. The assignment just copies the reference to the list, not the actual list, so both new_list and my_list refer to the same list after the assignment.", "Felix already provided an excellent answer, but I thought I'd do a speed comparison of the various methods:", "I've been told that Python 3.3+ adds the list.copy() method, which should be as fast as slicing:", "In Python 3, a shallow copy can be made with:", "There are many answers already that tell you how to make a proper copy, but none of them say why your original 'copy' failed. "]}, {"question": "How can I make two decorators in Python that would do the following?", "answers": ["If you are not into long explanations, see Paolo Bergantino\u2019s answer.", "Check out the documentation to see how decorators work. Here is what you asked for:", "Alternatively, you could write a factory function which return a decorator which wraps the return value of the decorated function in a tag passed to the factory function. For example:", "It looks like the other people have already told you how to solve the problem. I hope this will help you understand what decorators are.", "And of course you can return lambdas as well from a decorator function:"]}, {"question": "I'm trying to understand the use of super(). From the looks of it, both child classes can be created, just fine. ", "answers": ["super() lets you avoid referring to the base class explicitly, which can be nice. But the main advantage comes with multiple inheritance, where all sorts of fun stuff can happen. See the standard docs on super if you haven't already.", "The reason we use super is so that child classes that may be using cooperative multiple inheritance will call the correct next parent class function in the Method Resolution Order (MRO).", "It's been noted that in Python 3.0+ you can use", "Super has no side effects", "Just a heads up... with Python 2.7, and I believe ever since super() was introduced in version 2.2, you can only call super() if one of the parents inherit from a class that eventually inherits object (new-style classes)."]}, {"question": "In the following method definitions, what does the * and ** do for param2?", "answers": ["The *args and **kwargs is a common idiom to allow arbitrary number of arguments to functions as described in the section more on defining functions in the Python documentation.", "It's also worth noting that you can use * and ** when calling functions as well. This is a shortcut that allows you to pass multiple arguments to a function directly using either a list/tuple or a dictionary. For example, if you have the following function:", "The single * means that there can be any number of extra positional arguments. foo() can be invoked like foo(1,2,3,4,5). In the body of foo() param2 is a sequence containing 2-5.", "They allow for functions to be defined to accept and for users to pass any number of arguments, positional (*) and keyword (**).", "Let us first understand what are positional arguments and keyword arguments.\nBelow is an example of function definition with Positional arguments."]}, {"question": "How can I select rows from a DataFrame based on values in some column in Pandas?", "answers": ["To select rows whose column value equals a scalar, some_value, use ==:", "There are several ways to select rows from a Pandas dataframe:", "The Pandas equivalent to", "I find the syntax of the previous answers to be redundant and difficult to remember. Pandas introduced the query() method in v0.13 and I much prefer it. For your question, you could do df.query('col == val')", "August 2019 updated answer"]}, {"question": "How do you change the size of figure drawn with Matplotlib?", "answers": ["figure tells you the call signature:", "If you've already got the figure created, you can use figure.set_size_inches to adjust the figure size:", "There is also this workaround in case you want to change the size without using the figure environment. So in case you are using plt.plot() for example, you can set a tuple with width and height.", "Deprecation note:\n  As per the official Matplotlib guide, usage of the pylab module is no longer recommended. Please consider using the matplotlib.pyplot module instead, as described by this other answer.", "Please try a simple code as following:"]}, {"question": "How can I raise an exception in Python so that it can later be caught via an except block?", "answers": ["Use the most specific Exception constructor that semantically fits your issue.", "DON'T DO THIS. Raising a bare Exception is absolutely not the right thing to do; see Aaron Hall's excellent answer instead.", "In Python3 there are 4 different syntaxes for rasing exceptions: ", "For the common case where you need to throw an exception in response to some unexpected conditions, and that you never intend to catch, but simply to fail fast to enable you to debug from there if it ever happens \u2014 the most logical one seems to be AssertionError:", "Read the existing answers first, this is just an addendum."]}, {"question": "How can I output colored text to the terminal in Python?", "answers": ["This somewhat depends on what platform you are on. The most common way to do this is by printing ANSI escape sequences. For a simple example, here's some Python code from the Blender build scripts:", "There is also the Python termcolor module. Usage is pretty simple:", "The answer is Colorama for all cross-platform coloring in Python.", "Print a string that starts a color/style, then the string, and then end the color/style change with '\\x1b[0m':", "Define a string that starts a color and a string that ends the color. Then print your text with the start string at the front and the end string at the end."]}, {"question": "I set an environment variable that I want to access in my Python application. How do I get its value?", "answers": ["Environment variables are accessed through os.environ", "To check if the key exists (returns True or False)", "The original question (first part) was \"how to check environment variables in Python.\" ", "Actually it can be done this way:", "You can access the environment variables using"]}, {"question": "In Python, what commands can I use to find:", "answers": ["To get the full path to the directory a Python file is contained in, write this in that file:", "Current working directory:  os.getcwd()", "You may find this useful as a reference:", "The pathlib module, introduced in Python 3.4 (PEP 428 \u2014 The pathlib module \u2014 object-oriented filesystem paths), makes the path-related experience much much better.", "To get the current directory full path"]}, {"question": "I wanted to test if a key exists in a dictionary before updating the value for the key.\nI wrote the following code:", "answers": ["in is the intended way to test for the existence of a key in a dict.", "You don't have to call keys:", "You can test for the presence of a key in a dictionary, using the in keyword:", "You can shorten your code to this:", "For additional information on speed execution of the accepted answer's proposed methods (10\u00a0million loops):"]}, {"question": "pip is a replacement for easy_install. But should I install pip using easy_install on Windows? Is there a better way?", "answers": ["Good news! Python 3.4 (released March 2014) and Python 2.7.9 (released December 2014) ship with Pip. This is the best feature of any Python release. It makes the community's wealth of libraries accessible to everyone. Newbies are no longer excluded from using community libraries by the prohibitive difficulty of setup. In shipping with a package manager, Python joins Ruby, Node.js, Haskell, Perl, Go\u2014almost every other contemporary language with a majority open-source community. Thank you, Python.", "-- Outdated -- use distribute, not setuptools as described here. --\n-- Outdated #2 -- use setuptools as distribute is deprecated.", "2014 UPDATE:", "2016+ Update: ", "Python 3.4, which  was released in March 2014, comes with pip included:\nhttp://docs.python.org/3.4/whatsnew/3.4.html\nSo, since the release of Python 3.4, the up-to-date way to install pip on Windows is to just install Python."]}, {"question": "It is my understanding that the range() function, which is actually an object type in Python 3, generates its contents on the fly, similar to a generator.", "answers": ["The Python 3 range() object doesn't produce numbers immediately; it is a smart sequence object that produces numbers on demand. All it contains is your start, stop and step values, then as you iterate over the object the next integer is calculated each iteration.", "The fundamental misunderstanding here is in thinking that range is a generator. It's not. In fact, it's not any kind of iterator.", "Use the source, Luke!", "To add to Martijn\u2019s answer, this is the relevant part of the source (in C, as the range object is written in native code):", "If you're wondering why this optimization was added to range.__contains__, and why it wasn't added to xrange.__contains__ in 2.7:"]}, {"question": "In Python, how do you get the last element of a list?", "answers": ["some_list[-1] is the shortest and most Pythonic.", "If your str() or list() objects might end up being empty as so: astr = '' or alist = [], then you might want to use alist[-1:] instead of alist[-1] for object \"sameness\".", "You can also do:", "The simplest way to display last element in python is", "To just get the last element, "]}, {"question": "When deleting a key from a dictionary, I use:", "answers": ["To delete a key regardless of whether it is in the dictionary, use the two-argument form of dict.pop():", "Specifically to answer \"is there a one line way of doing this?\"", "It took me some time to figure out what exactly my_dict.pop(\"key\", None) is doing. So I'll add this as an answer to save others googling time:", "del my_dict[key] is slightly faster than my_dict.pop(key) for removing a key from a dictionary when the key exists", "If you need to remove a lot of keys from a dictionary in one line of code, I think using map() is quite succinct and Pythonic readable:"]}, {"question": "Is there a way to convert a string from uppercase, or even part uppercase to lowercase? ", "answers": ["Use .lower() - For example:", "Is there any way to convert an entire user inputted string from uppercase, or even part uppercase to lowercase?", "With Python 2, this doesn't work for non-English words in UTF-8. In this case decode('utf-8') can help:", "Also, you can overwrite some variables:", "You can use the built-in string method lower to do that"]}, {"question": "Is it possible to have static class variables or methods in Python? What syntax is required to do this?", "answers": ["Variables declared inside the class definition, but not inside a method are class or static variables:", "@Blair Conrad said static variables declared inside the class definition, but not inside a method are class or \"static\" variables:", "As the other answers have noted, static and class methods are easily accomplished using the built-in decorators:", "You can also add class variables to classes on the fly", "Personally I would use a classmethod whenever I needed a static method. Mainly because I get the class as an argument."]}, {"question": "I'd like to do it in Python. What I'd like to do in this example in C:", "answers": ["In Python 3, you can use the sep= and end= parameters of the print function:", "For Python 2 and earlier, it should be as simple as described in Re: How does one print without a CR? by Guido van Rossum (paraphrased):", "Note: The title of this question used to be something like \"How to printf in Python\"", "Use the Python\u00a03-style print function for Python\u00a02.6+ (it will also break any existing keyworded print statements in the same file).", "How to print on the same line:"]}, {"question": "What is the best way to go call a function, given a string with the function's name in a Python program. For example, let's say that I have a module foo, and I have a string whose content is \"bar\". What is the best way to call foo.bar()?", "answers": ["Assuming module foo with method bar:", "or", "Patrick's solution is probably the cleanest.\nIf you need to dynamically pick up the module as well, you can import it like:", "Just a simple contribution. If the class that we need to instance is in the same file, we can use something like this:", "Given a string, with a complete python path to a function, this is how I went about getting the result of said function:"]}, {"question": "Consider the following:", "answers": ["The len() function can be used with several different types in Python - both built-in types and library types. For example:", "To find the size of a list, use the builtin function, len:", "While this may not be useful due to the fact that it'd make a lot more sense as being \"out of the box\" functionality, a fairly simple hack would be to build a class with a length property:", "Besides len you can also use operator.length_hint (requires Python 3.4+). For a normal list both are equivalent, but length_hint makes it possible to get the length of a list-iterator, which could be useful in certain circumstances:", "And for completeness (primarily educational), it is possible without using the len() function. I would not condone this as a good option DO NOT PROGRAM LIKE THIS IN PYTHON, but it serves a purpose for learning algorithms."]}, {"question": "Assume I have the following list:", "answers": ["Use random.choice():", "If you want to randomly select more than one item from a list, or select an item from a set, I'd recommend using random.sample instead.", "If you also need the index, use random.randrange", "As of Python 3.6 you can use the secrets module, which is preferable to the random module for cryptography or security uses.", "I propose a script for removing randomly picked up items off a list until it is empty:"]}, {"question": "Is there a way in Python to determine if an object has some attribute?  For example:", "answers": ["Try hasattr():", "As Jarret Hardie answered, hasattr will do the trick.  I would like to add, though, that many in the Python community recommend a strategy of \"easier to ask for forgiveness than permission\" (EAFP) rather than \"look before you leap\" (LBYL).  See these references:", "You can use hasattr() or catch AttributeError, but if you really just want the value of the attribute with a default if it isn't there, the best option is just to use getattr():", "I think what you are looking for is hasattr. However, I'd recommend something like this if you want to detect python properties-", "According to pydoc, hasattr(obj, prop) simply calls getattr(obj, prop) and catches exceptions. So, it is just as valid to wrap the attribute access with a try statement and catch AttributeError as it is to use hasattr() beforehand."]}, {"question": "I'm using virtualenv and the virtualenvwrapper. I can switch between virtualenv's just fine using the workon command.", "answers": ["Usually, activating a virtualenv gives you a shell function named:", "Use:", "I defined an alias, workoff, as the opposite of workon:", "To activate a Python virtual environment:", "To activate a Python virtual environment:"]}, {"question": "We are working on an S60 version and this platform has a nice Python API..", "answers": ["One way is to use Kivy:", "There is also the new Android Scripting Environment (ASE/SL4A) project. It looks awesome, and it has some integration with native Android components. ", "Yes! : Android Scripting Environment", "Pygame is a 2D game engine for Python (on desktop) that is popular with new programmers. The Pygame Subset for Android describes itself as...", "As a Python lover and Android programmer, I'm sad to say this is not a good way to go. There are two problems:"]}, {"question": "I want a to be rounded to 13.95.", "answers": ["You are running into the old problem with floating point numbers that not all numbers can be represented exactly. The command line is just showing you the full floating point form from memory.", "There are new format specifications, String Format Specification Mini-Language:", "The built-in round() works just fine in Python 2.7 or later.", "Nobody here seems to have mentioned it yet, so let me give an example in Python 3.6's f-string/template-string format, which I think is beautifully neat:", "I feel that the simplest approach is to use the format() function."]}, {"question": "I wanted to compare reading lines of string input from stdin using Python and C++ and was shocked to see my C++ code run an order of magnitude slower than the equivalent Python code. Since my C++ is rusty and I'm not yet an expert Pythonista, please tell me if I'm doing something wrong or if I'm misunderstanding something.", "answers": ["By default, cin is synchronized with stdio, which causes it to avoid any input buffering.  If you add this to the top of your main, you should see much better performance:", "Just out of curiosity I've taken a look at what happens under the hood, and I've used dtruss/strace on each test.", "I'm a few years behind here, but:", "I reproduced the original result on my computer using g++ on a Mac.", "getline, stream operators, scanf, can be convenient if you don't care about file loading time or if you are loading small text files. But, if the performance is something you care about, you should really just buffer the entire file into memory (assuming it will fit)."]}, {"question": "I have the following folder structure.", "answers": ["Note: This answer was intended for a very specific question. For most programmers coming here from a search engine, this is not the answer you are looking for. Typically you would structure your files into packages (see other answers) instead of modifying the search path.", "Nothing wrong with:", "When modules are in parallel locations, as in the question:", "First import sys in name-file.py", "I think an ad-hoc way would be to use the environment variable PYTHONPATH as described in the documentation: Python2, Python3"]}, {"question": "gives me : Key Error: Hello\\\\", "answers": ["You need to double the {{ and }}:", "Python 3.6+ (2017)", "You escape it by doubling the braces.", "The OP wrote this comment:", "Try this:"]}, {"question": "Is there a simple way to determine if a variable is a list, dictionary, or something else? I am getting an object back that may be either type and I need to be able to tell the difference.", "answers": ["There are two built-in functions that help you identify the type of an object. You can use type()  if you need the exact type of an object, and isinstance() to check an object\u2019s type against something. Usually, you want to use isinstance() most of the times since it is very robust and also supports type inheritance.", "You can do that using type():", "It might be more Pythonic to use a try...except block. That way, if you have a class which quacks like a list, or quacks like a dict, it will behave properly regardless of what its type really is.", "On instances of object you also have the:", "Determine the type of an object with type"]}, {"question": "This has always confused me. It seems like this would be nicer:", "answers": ["It's because any iterable can be joined (e.g, list, tuple, dict, set), but its contents and the \"joiner\" must be strings.", "This was discussed in the String methods... finally thread in the Python-Dev achive, and was accepted by Guido. This thread began in Jun 1999, and str.join was included in Python 1.6 which was released in Sep 2000 (and supported Unicode). Python 2.0 (supported str methods including join) was released in Oct 2000.", "Because the join() method is in the string class, instead of the list class?", "I agree that it's counterintuitive at first, but there's a good reason. Join can't be a method of a list because:", "This is because join is a \"string\" method! It creates a string from any iterable. If we stuck the method on lists, what about when we have iterables that aren't lists? "]}, {"question": "How do I remove an element from a list by index in Python?", "answers": ["Use del and specify the index of the element you want to delete:", "You probably want pop:", "Like others mentioned pop and del are the efficient ways to remove an item of given index. Yet just for the sake of completion (since the same thing can be done via many ways in Python):", "pop is also useful to remove and keep an item from a list.  Where del actually trashes the item.", "If you want to remove elements at specific positions in a list, like the 2nd, 3rd and 7th elements, you can't use"]}, {"question": "Is it possible to have static methods in Python which I could call without initializing a class, like:", "answers": ["Yep, using the staticmethod decorator", "I think that Steven is actually right. To answer the original question, then, in order to set up a class method, simply assume that the first argument is not going to be a calling instance, and then make sure that you only call the method from the class.", "Yes, check out the staticmethod decorator:", "You don't really need to use the @staticmethod decorator. Just declaring a method (that doesn't expect the self parameter) and call it from the class. The decorator is only there in case you want to be able to call it from an instance as well (which was not what you wanted to do)", "Static methods in Python?"]}, {"question": "How do you append to the file instead of overwriting it? Is there a special function that appends to the file?", "answers": ["This can be achieved by setting the mode in open() to \"a\" (append) instead of \"w\" (write). See the documentation op open() for all available modes.", "You need to open the file in append mode, by setting \"a\" or \"ab\" as the mode. See open().", "I always do this,", "Python has many variations off of the main three modes, these three modes are:", "You probably want to pass \"a\" as the mode argument.  See the docs for open()."]}, {"question": "When deleting a column in a DataFrame I use:", "answers": ["The best way to do this in Pandas is to use drop:", "As you've guessed, the right syntax is ", "Use:", "Delete first, second and fourth columns:", "The actual question posed, missed by most answers here is:"]}, {"question": "What is a Pythonic way to pad a numeric string with zeroes to the left, i.e. so the numeric string has a specific length?", "answers": ["Strings:", "Just use the rjust method of the string object.", "Besides zfill, you can use general string formatting:", "For Python 3.6+ using f-strings:", "if you want the opposite:"]}, {"question": "Could someone explain to me the meaning of @classmethod and @staticmethod in python? I need to know the difference and the meaning. ", "answers": ["Though classmethod and staticmethod are quite similar, there's a slight difference in usage for both entities: classmethod must have a reference to a class object as the first parameter, whereas staticmethod can have no parameters at all.", "Rostyslav Dzinko's answer is very appropriate. I thought I could highlight one other reason you should choose @classmethod over @staticmethod when you are creating an additional constructor.", "@classmethod means: when this method is called, we pass the class as the first argument instead of the instance of that class (as we normally do with methods). This means you can use the class and its properties inside that method rather than a particular instance.", "@staticmethod function is nothing more than a function defined inside a class. It is callable without instantiating the class first. It\u2019s definition is immutable via inheritance.", "when should I use them, why should I use them, and how should I use them?"]}, {"question": "How do I find out a name of class that created an instance of an object in Python if the function I am doing this from is the base class of which the class of the instance has been derived?", "answers": ["Have you tried the __name__ attribute of the class? ie type(x).__name__ will give you the name of the class, which I think is what you want.", "Do you want the name of the class as a string?", "type() ?", "The sample code above (when input in the interactive interpreter) will produce '__main__.A' as opposed to 'A' which is produced if the __name__ attribute is invoked. By simply passing the result of A.__class__ to the str constructor the parsing is handled for you. However, you could also use the following code if you want something more explicit.", "In Python 2,"]}, {"question": "What I want is to start counting time somewhere in my code and then get the passed time, to measure the time it took to execute few function. I think I'm using the timeit module wrong, but the docs are just confusing for me.", "answers": ["If you just want to measure the elapsed wall-clock time between two points, you could use  time.time():", "Use timeit.default_timer instead of timeit.timeit. The former provides the best clock available on your platform and version of Python automatically:", "Since time.clock() is deprecated as of Python 3.3, you will want to use time.perf_counter() for system-wide timing, or time.process_time() for process-wide timing, just the way you used to use time.clock():", "Measuring time in seconds:", "Given a function you'd like to time,"]}, {"question": "I have a very long query. I would like to split it in several lines in Python. A way to do it in JavaScript would be using several sentences and joining them with a + operator (I know, maybe it's not the most efficient way to do it, but I'm not really concerned about performance in this stage, just code readability). Example:", "answers": ["Are you talking about multi-line strings? Easy, use triple quotes to start and end them.", "If you don't want a multiline string, but just have a long single line string, you can use parentheses. Just make sure you don't include commas between the string segments (then it will be a tuple).", "Breaking lines by \\ works for me.  Here is an example:", "I found myself happy with this one:", "I find that when building long strings, you are usually doing something like building an SQL query, in which case this is best:"]}, {"question": "How can I generate random integers between 0 and 9 (inclusive) in Python?", "answers": ["Try:", "Return a random integer N such that a <= N <= b.", "Try this:", "This generates 10 pseudorandom integers in range 0 to 9 inclusive.", "The secrets module is new in Python 3.6. This is better than the random module for cryptography or security uses."]}, {"question": "I am trying to install version 1.2.2 of MySQL_python, using a fresh virtualenv created with the --no-site-packages option. The current version shown in PyPi is 1.2.3. Is there a way to install the older version? I have tried:", "answers": ["TL;DR:", "You can even use a version range with pip install command. Something like this:", "One way, as suggested in this post, is to mention version in pip as:", "To install a specific python package version whether it is the first time, an upgrade or a downgrade use: ", "I believe that if you already have a package it installed, pip will not overwrite it with another version.  Use -I to ignore previous versions."]}, {"question": "I spent most of the day yesterday searching for a clear answer for installing pip (package manager for Python). I can't find a good solution.", "answers": ["pip's documentation lists the supported mechanisms to install it: https://pip.pypa.io/en/stable/installation/#supported-methods", "\u26a1\ufe0f TL;DR \u2014 One-line solution.", "I'm surprised no-one has mentioned this - since 2013, python itself is capable of installing pip, no external commands (and no internet connection) required.", "You can install it through Homebrew on OS X.  Why would you install Python with Homebrew?", "On Mac:"]}, {"question": "Python 3.3 includes in its standard library the new package venv. What does it do, and how does it differ from all the other packages that seem to match the regex (py)?(v|virtual|pip)?env?", "answers": ["This is my personal recommendation for beginners: start by learning virtualenv and pip, tools which work with both Python 2 and 3 and in a variety of situations, and pick up other tools once you start needing them.", "I would just avoid the use of virtualenv after Python3.3+ and instead use the standard shipped library venv. To create a new virtual environment you would type:", "Added below \"Conclusion\" paragraph", "Let's start with the problems these tools want to solve:", "Jan 2020 Update"]}, {"question": "I'm trying to do some of the code golf challenges, but they all require the input to be taken from stdin. How do I get that in Python?", "answers": ["You could use the fileinput module:", "There's a few ways to do it.", "Note that this will include a newline character at the end. To remove the newline at the end, use line.rstrip() as @brittohalloran said.", "Python also has built-in functions input() and raw_input(). See the Python documentation under Built-in Functions.", "Here's from Learning Python:"]}, {"question": "There are several ways to write to stderr:", "answers": ["I found this to be the only one short, flexible, portable and readable:", "Is my choice, just more readable and saying exactly what you intend to do and portable across versions.  ", "Python 2:", "Nobody's mentioned logging yet, but logging was created specifically to communicate error messages. Basic configuration will set up a stream handler writing to stderr.", "For Python 2 my choice is:\nprint >> sys.stderr, 'spam'\nBecause you can simply print lists/dicts etc. without convert it to string. \nprint >> sys.stderr, {'spam': 'spam'}\ninstead of:\nsys.stderr.write(str({'spam': 'spam'}))"]}, {"question": "Can someone please explain the exact meaning of having single and double leading underscores before an object's name in Python, and the difference between both?", "answers": ["Names, in a class, with a leading underscore are simply to indicate to other programmers that the attribute or method is intended to be private.  However, nothing special is done with the name itself.", "__foo__: this is just a convention, a way for the Python system to use names that won't conflict with user names.", "Excellent answers so far but some tidbits are missing. A single leading underscore isn't exactly just a convention: if you use from foobar import *, and module foobar does not define an __all__ list, the names imported from the module do not include those with a leading underscore. Let's say it's mostly a convention, since this case is a pretty obscure corner;-).", "._variable is semiprivate and meant just for convention", "Single underscore at the beginning:"]}, {"question": "What's the proper way to declare custom exception classes in modern Python? My primary goal is to follow whatever standard other exception classes have, so that (for instance) any extra string I include in the exception is printed out by whatever tool caught the exception.", "answers": ["Maybe I missed the question, but why not:", "With modern Python Exceptions, you don't need to abuse .message, or override .__str__() or .__repr__() or any of it. If all you want is an informative message when your exception is raised, do this:", "This is fine unless your exception is really a type of a more specific exception:", "see how exceptions work by default if one vs more attributes are used (tracebacks omitted):", "As of Python 3.8 (2018, https://docs.python.org/dev/whatsnew/3.8.html), the recommended method is still:"]}, {"question": "What is the best way to check whether a given object is of a given type? How about checking whether the object inherits from a given type?", "answers": ["To check if o is an instance of str or any subclass of str, use isinstance (this would be the \"canonical\" way):", "The most Pythonic way to check the type of an object is... not to check it.", "isinstance(o, str) will return True if o is an str or is of a type that inherits from str.", "After the question was asked and answered, type hints were added to Python. Type hints in Python allow types to be checked but in a very different way from statically typed languages. Type hints in Python associate the expected types of arguments with functions as runtime accessible data associated with functions and this allows for types to be checked. Example of type hint syntax:", "In Python 3.10, you can use | in isinstance:"]}, {"question": "I have a JSON file that is a mess that I want to prettyprint. What's the easiest way to do this in Python?", "answers": ["The json module already implements some basic pretty printing in the dump and dumps functions, with the indent parameter that specifies how many spaces to indent by:", "You can do this on the command line:", "You could use the built-in module pprint (https://docs.python.org/3.9/library/pprint.html).", "Pygmentize is a killer tool. See this.", "Use this function and don't sweat having to remember if your JSON is a str or dict again - just look at the pretty print:"]}, {"question": "I am trying to build a shared library using a C extension file but first I have to generate the output file using the command below:", "answers": ["Looks like you haven't properly installed the header files and static libraries for python dev.  Use your package manager to install them system-wide.", "On Ubuntu, I was running Python 3 and I had to install ", "For Python 3.7 and Ubuntu in particular, I needed", "Two things you have to do.", "on Fedora run this for Python 2:"]}, {"question": "Is there any reason for a class declaration to inherit from object?", "answers": ["In Python 3, apart from compatibility between Python 2 and 3, no reason. In Python 2, many reasons. ", "Python 3", "Yes, this is a 'new style' object. It was a feature introduced in python2.2.", "History from Learn Python the Hard Way:", "Yes, it's historical. Without it, it creates an old-style class."]}, {"question": "Project Euler and other coding contests often have a maximum time to run or people boast of how fast their particular solution runs. With Python, sometimes the approaches are somewhat kludgey - i.e., adding timing code to __main__.", "answers": ["Python includes a profiler called cProfile. It not only gives the total running time, but also times each function separately, and tells you how many times each function was called, making it easy to determine where you should make optimizations.", "A while ago I made pycallgraph which generates a visualisation from your Python code. Edit: I've updated the example to work with 3.3, the latest release as of this writing.", "It's worth pointing out that using the profiler only works (by default) on the main thread, and you won't get any information from other threads if you use them.  This can be a bit of a gotcha as it is completely unmentioned in the profiler documentation.", "The python wiki is a great page for profiling resources:\nhttp://wiki.python.org/moin/PythonSpeed/PerformanceTips#Profiling_Code", "@Maxy's comment on this answer helped me out enough that I think it deserves its own answer: I already had cProfile-generated .pstats files and I didn't want to re-run things with pycallgraph, so I used gprof2dot, and got pretty svgs:"]}, {"question": "I'm trying to get the number of rows of dataframe df with Pandas, and here is my code.", "answers": ["For a dataframe df, one can use any of the following:", "Suppose df is your dataframe then:", "Use len(df) :-).", "This table summarises the different situations in which you'd want to count something in a DataFrame (or Series, for completeness), along with the recommended method(s).", "len() lets you for getting the number of items in a list. So, for getting row counts of a DataFrame, simply use len(df)."]}, {"question": "How can I load a Python module given its full path?", "answers": ["For Python 3.5+ use:", "The advantage of adding a path to sys.path (over using imp) is that it simplifies things when importing more than one module from a single package.  For example:", "To import your module, you need to add its directory to the environment variable, either temporarily or permanently.", "If your top-level module is not a file but is packaged as a directory with __init__.py, then the accepted solution almost works, but not quite. In Python 3.5+ the following code is needed (note the added line that begins with 'sys.modules'):", "It sounds like you don't want to specifically import the configuration file (which has a whole lot of side effects and additional complications involved). You just want to run it, and be able to access the resulting namespace. The standard library provides an API specifically for that in the form of runpy.run_path:"]}, {"question": "So I have difficulty with the concept of *args and **kwargs.", "answers": ["The syntax is the * and **.  The names *args and **kwargs are only by convention but there's no hard requirement to use them.", "One place where the use of *args and **kwargs is quite useful is for subclassing.", "Here's an example that uses 3 different types of parameters.", "Here's one of my favorite places to use the ** syntax as in Dave Webb's final example:", "One case where *args and **kwargs are useful is when writing wrapper functions (such as decorators) that need to be able accept arbitrary arguments to pass through to the function being wrapped.  For example, a simple decorator that prints the arguments and return value of the function being wrapped:"]}, {"question": "How can I represent an infinite number in python? No matter which number you enter in the program, no number should be greater than this representation of infinity.", "answers": ["In Python, you can do:", "Since Python 3.5 you can use math.inf:", "No one seems to have mentioned about the negative infinity explicitly, so I think I should add it.", "I don't know exactly what you are doing, but float(\"inf\") gives you a float Infinity, which is greater than any other number.", "There is an infinity in the NumPy library: from numpy import inf. To get negative infinity one can simply write -inf."]}, {"question": "What is the quickest way to HTTP GET in Python if I know the content will be a string? I am searching the documentation for a quick one-liner like:", "answers": ["Python 3:", "You could use a library called requests.", "If you want solution with httplib2 to be oneliner consider instantiating anonymous Http object", "Have a look at httplib2, which - next to a lot of very useful features - provides exactly what you want.", "It's simple enough with the powerful urllib3 library."]}, {"question": "I'm coming from the Java world and reading Bruce Eckels' Python 3 Patterns, Recipes and Idioms. ", "answers": ["It's cultural.  In Python, you don't write to other classes' instance or class variables.  In Java, nothing prevents you from doing the same if you really want to - after all, you can always edit the source of the class itself to achieve the same effect. Python drops that pretence of security and encourages programmers to be responsible. In practice, this works very nicely.", "Private variables in python is more or less a hack: the interpreter intentionally renames the variable.", "As correctly mentioned by many of the comments above, let's not forget the main goal of Access Modifiers: To help users of code understand what is supposed to change and what is supposed not to. When you see a private field you don't mess around with it. So it's mostly syntactic sugar which is easily achieved in Python by the _ and __.", "There is a variation of private variables in the underscore convention.", "As mentioned earlier, you can indicate that a variable or method is private by prefixing it with an underscore. If you don't feel like this is enough, you can always use the property decorator. Here's an example:"]}, {"question": "I found some answers online, but I have no experience with regular expressions, which I believe is what is needed here.", "answers": ["Luckily, Python has this built-in :)", "Do a str.replace('; ', ', ') and then a str.split(', ')", "Here's a safe way for any iterable of delimiters, using regular expressions:", "In response to Jonathan's answer above, this only seems to work for certain delimiters.  For example:", "This is how the regex look like:"]}, {"question": "I have a data frame df and I use several columns from it to groupby:", "answers": ["The simplest way to get row counts per group is by calling .size(), which returns a Series:", "On groupby object, the agg function can take a list to apply several aggregation methods at once. This should give you the result you need:", "Returns count, mean, std, and other useful statistics per-group.", "To get multiple stats, collapse the index, and retain column names:", "We can easily do it by using groupby and count. But, we should remember to use reset_index()."]}, {"question": "I've come across situations where a current version of a package seems not to be working and requires reinstallation. But pip install -U won't touch a package that is already up-to-date. I see how to force a reinstallation by first uninstalling (with pip uninstall) and then installing, but is there a way to simply force an \"update\" to a nominally current version in a single step?", "answers": ["When upgrading, reinstall all packages even if they are already up-to-date.", "You might want to have all three options: --upgrade and --force-reinstall ensures reinstallation, while --no-deps avoids reinstalling dependencies.", "If you want to reinstall packages specified in a requirements.txt file, without upgrading, so just reinstall the specific versions specified in the requirements.txt file:", "doesn't appear to force reinstall using python2.7 with pip-1.5", "In the case you need to force the reinstallation of pip itself you can do:"]}, {"question": "I want to create a series of lists, all of varying lengths. Each list will contain the same element e, repeated n times (where n = length of the list).", "answers": ["You can also write:", "Be careful when the item being repeated is a list. The list will not be cloned: all the elements will refer to the same list!", "Depending on your use-case, you want to use different techniques with different semantics.", "Itertools has a function just for that:", "As others have pointed out, using the * operator for a mutable object duplicates references, so if you change one you change them all. If you want to create independent instances of a mutable object, your xrange syntax is the most Pythonic way to do this. If you are bothered by having a named variable that is never used, you can use the anonymous underscore variable."]}, {"question": "I have four different files named: main.py, vector.py, entity.py and physics.py. I will not post all the code, just the imports, because I think that's where the error is (If you want, I can post more).", "answers": ["You have circular dependent imports. physics.py is imported from entity before class Ent is defined and physics tries to import entity that is already initializing. Remove the dependency to physics from entity module.", "While you should definitely avoid circular dependencies, you can defer imports in python.", "This is a circular dependency. It can be solved without any structural modifications to the code. The problem occurs because in vector you demand that entity be made available for use immediately, and vice versa. The reason for this problem is that you asking to access the contents of the module before it is ready -- by using from x import y. This is essentially the same as", "To make logic clear is very important. This problem appear, because the reference become a dead loop.", "In my case, I was working in a Jupyter notebook and this was happening due the import already being cached from when I had defined the class/function inside my working file. "]}, {"question": "I've got a dict that has a whole bunch of entries. I'm only interested in a select few of them. Is there an easy way to prune all the other ones out?", "answers": ["Constructing a new dict: ", "Slightly more elegant dict comprehension:", "Here's an example in python 2.6:", "You can do that with project function from my funcy library:", "Code 1:"]}, {"question": "Given the name of a Python package that can be installed with pip, is there any way to find out a list of all the possible versions of it that pip could install? Right now it's trial and error.", "answers": ["For pip >= 21.2 use:", "(update: As of March 2020, many people have reported that yolk, installed via pip install yolk3k, only returns latest version.  Chris's answer seems to have the most upvotes and worked for me)", "You don't need a third party package to get this information. pypi provides simple JSON feeds for all packages under", "Update:\nAs of Sep 2017 this method no longer works: --no-install was removed in pip 7", "I came up with dead-simple bash script. Thanks to jq's author."]}, {"question": "I want to add an item to an existing dictionary in Python. For example, this is my dictionary:", "answers": ["Easy as py.", "It can be as simple as:", "It occurred to me that you may have actually be asking how to implement the + operator for dictionaries, the following seems to work:"]}, {"question": "I am working with code that throws a lot of (for me at the moment) useless warnings using the warnings library. Reading (/scanning) the documentation I only found a way to disable warnings for single functions. But I don't want to change so much of the code.", "answers": ["Look at the Temporarily Suppressing Warnings section of the Python docs:", "There's the -W option.", "You can also define an environment variable (new feature in 2010 - i.e. python 2.7)", "If you don't want something complicated, then: ", "This is an old question but there is some newer guidance in PEP 565 that to turn off all warnings if you're writing a python application you should use:"]}, {"question": "How does one round a number UP in Python?", "answers": ["The ceil (ceiling) function:", "I know this answer is for a question from a while back, but if you don't want to import math and you just want to round up, this works for me.", "Interesting Python 2.x issue to keep in mind:", "If working with integers, one way of rounding up is to take advantage of the fact that // rounds down: Just do the division on the negative number, then negate the answer.  No import, floating point, or conditional needed.", "You might also like numpy:"]}, {"question": "Is there an easy way with Python f-strings to fix the number of digits after the decimal point? (Specifically f-strings, not other string formatting options like .format or %)", "answers": ["Include the type specifier in your format expression:", "When it comes to float numbers, you can use format specifiers:", "Adding to Rob\u1d69's answer: in case you want to print rather large numbers, using thousand separators can be a great help (note the comma).", "Adding to Rob's answer, you can use format specifiers with f strings (more here).", "Going further, Format strings have the below syntax. As you can see there is a lot more that can be done."]}, {"question": "Is there any way to make pip play well with multiple versions of Python? For example, I want to use pip to explicitly install things to either my site 2.5 installation or my site 2.6 installation.", "answers": ["The current recommendation is to use python -m pip, where python is the version of Python you would like to use. This is the recommendation because it works across all versions of Python, and in all forms of virtualenv. For example:", "On Windows, you can execute the pip module using a given Python version through the Python launcher, py.exe, if you chose to install it during Python 3 setup.", "/path/to/python2.{5,6} /path/to/pip install PackageName doesn't work?", "I had python 2.6 installed by default (Amazon EC2 AMI), but needed python2.7 plus some external packages for my application. Assuming you already installed python2.7 alongside with default python (2.6 in my case). Here is how to install pip and packages for non-default python2.7", "It worked for me in windows this way:"]}, {"question": "I am trying to fix how python plots my data.", "answers": ["You could explicitly set where you want to tick marks with plt.xticks:", "Another approach is to set the axis locator:", "I like this solution (from the Matplotlib Plotting Cookbook):", "In case anyone is interested in a general one-liner, simply get the current ticks and use it to set the new ticks by sampling every other tick.", "This is a bit hacky, but by far the cleanest/easiest to understand example that I've found to do this. It's from an answer on SO here:"]}, {"question": "I have a Unicode string in Python, and I would like to remove all the accents (diacritics).", "answers": ["Unidecode is the correct answer for this. It transliterates any unicode string into the closest possible representation in ascii text.", "How about this:", "I just found this answer on the Web:", "Actually I work on project compatible python 2.6, 2.7 and 3.4 and I have to create IDs from free user entries. ", "This handles not only accents, but also \"strokes\" (as in \u00f8 etc.):"]}, {"question": "Does time.time() in the Python time module return the system's time or the time in UTC?", "answers": ["The time.time() function returns the number of seconds since the epoch, as seconds.  Note that the \"epoch\" is defined as the start of January 1st, 1970 in UTC.  So the epoch is defined in terms of UTC and establishes a global moment in time.  No matter where you are \"seconds past epoch\" (time.time()) returns the same value at the same moment.", "This is for the text form of a timestamp that can be used in your text files. (The title of the question was different in the past, so the introduction to this answer was changed to clarify how it could be interpreted as the time. [updated 2016-01-14])", "Based on the answer from #squiguy, to get a true timestamp I would type cast it from float. ", "The answer could be neither or both.", "To get a local timestamp using datetime library, Python 3.x"]}, {"question": "I need a way to get a dictionary value if its key exists, or simply return None, if it does not.", "answers": ["You can use dict.get()", "Wonder no more. It's built into the language.", "Use dict.get", "You should use the get() method from the dict class", "If you want a more transparent solution, you can subclass dict to get this behavior:"]}, {"question": "How can I get the position of a character inside a string in Python?", "answers": ["There are two string methods for this, find() and index().  The difference between the two is what happens when the search string isn't found.  find() returns -1  and index() raises a ValueError.", "Just for a sake of completeness, if you need to find all positions of a character in a string, you can do the following:", "\"Long winded\" way", "Just for completion, in the case I want to find the extension in a file name in order to check it, I need to find the last '.', in this case use rfind:", "What happens when the string contains a duplicate character?\nfrom my experience with index() I saw that for duplicate you get back the same index."]}, {"question": "I want to fill out a string with spaces. I know that the following works for zero's:", "answers": ["You can do this with str.ljust(width[, fillchar]):", "For a flexible method that works even when formatting complicated string, you probably should use the string-formatting mini-language,", "The new(ish) string format method lets you do some fun stuff with nested keyword arguments. The simplest case:", "You can try this:", "Correct way of doing this would be to use Python's format syntax as described in the official documentation"]}, {"question": "Dictionaries are ordered in Python 3.6 (under the CPython implementation at least) unlike in previous incarnations. This seems like a substantial change, but it's only a short paragraph in the documentation. It is described as a CPython implementation detail rather than a language feature, but also implies this may become standard in the future.", "answers": ["Are dictionaries ordered in Python 3.6+?", "Below is answering the original first question:", "Update:\nGuido van Rossum announced on the mailing list that as of Python 3.7 dicts in all Python implementations must preserve insertion order.", "I wanted to add to the discussion above but don't have the reputation to comment.", "To fully answer this question in 2020, let me quote several statements from official Python docs:"]}, {"question": "I am trying to pass a list as an argument to a command line program. Is there an argparse option to pass a list as option?", "answers": ["Use the nargs option or the 'append' setting of the action option (depending on how you want the user interface to behave).", "I prefer passing a delimited string which I parse later in the script. The reasons for this are; the list can be of any type int or str, and sometimes using nargs I run into problems if there are multiple optional arguments and positional arguments.", "Additionally to nargs, you might want to use choices if you know the list in advance:", "Using nargs parameter in argparse's add_argument method", "If you are intending to make a single switch take multiple parameters, then you use nargs='+'. If your example '-l' is actually taking integers:"]}, {"question": "I'm just trying to streamline one of my classes and have introduced some functionality in the same style as the flyweight design pattern.", "answers": ["Use __new__ when you need to control\nthe creation of a new instance.", "__new__ is static class method, while __init__ is instance method. \n__new__ has to create the instance first, so __init__ can initialize it. Note that __init__ takes self as parameter. Until you create instance there is no self.", "In most well-known OO languages, an expression like SomeClass(arg1, arg2) will allocate a new instance, initialise the instance's attributes, and then return it.", "To quote the documentation:", "I realize that this question is quite old but I had a similar issue.\nThe following did what I wanted:"]}, {"question": "How to set the current working directory in Python?", "answers": ["Try os.chdir", "Perhaps this is what you are looking for:", "To set the working directory:", "It work for Mac also ", "people using pandas package"]}, {"question": "After you train a model in Tensorflow: ", "answers": ["I am improving my answer to add more details for saving and restoring models. ", "In (and after) TensorFlow version 0.11.0RC1, you can save and restore your model directly by calling tf.train.export_meta_graph and tf.train.import_meta_graph according to https://www.tensorflow.org/programmers_guide/meta_graph.", "Adapted from the docs", "For TensorFlow version < 0.11.0RC1:", "My environment: Python 3.6, Tensorflow 1.3.0"]}, {"question": "Just like C, you can break a long line into multiple short lines. But in Python, if I do this, there will be an indent error... Is it possible?", "answers": ["From PEP 8 - Style Guide for Python Code:", "There is more than one way to do it.", "If you want to assign a long string to variable, you can do it as below:", "It works in Python too:", "When trying to enter continuous text (say, a query) do not put commas at the end of the line or you will get a list of strings instead of one long string:"]}, {"question": "How would one create an iterative function (or iterator object) in python?", "answers": ["Iterator objects in python conform to the iterator protocol, which basically means they provide two methods: __iter__()  and  __next__().  ", "There are four ways to build an iterative function:", "I see some of you doing return self in __iter__. I just wanted to note that __iter__ itself can be a generator (thus removing the need for __next__ and raising StopIteration exceptions)", "First of all the itertools module is incredibly useful for all sorts of cases in which an iterator would be useful, but here is all you need to create an iterator in python:", "This question is about iterable objects, not about iterators. In Python, sequences are iterable too so one way to make an iterable class is to  make it behave like a sequence, i.e. give it __getitem__ and __len__ methods. I have tested this on Python 2 and 3."]}, {"question": "What is the python keyword \"with\" used for?", "answers": ["In python the with keyword is used when working with unmanaged resources (like file streams). It is similar to the using statement in VB.NET and C#. It allows you to ensure that a resource is \"cleaned up\" when the code that uses it finishes running, even if exceptions are thrown. It provides 'syntactic sugar' for try/finally blocks.", "Explanation from the Pershing on Programming blog:"]}, {"question": "Sometimes I want to just insert some print statements in my code, and see what gets printed out when I exercise it. My usual way to \"exercise\" it is with existing pytest tests. But when I run these, I don't seem able to see any standard output (at least from within PyCharm, my IDE).", "answers": ["The -s switch disables per-test capturing (only if a test fails).", "pytest captures the stdout from individual tests and displays them only on certain conditions, along with the summary of the tests it prints by default.", "In an upvoted comment to the accepted answer, Joe asks:", "When running the test use the -s option. All print statements in exampletest.py would get printed on the console when test is run.", "According to pytest documentation, version 3 of pytest can temporary disable capture in a test:"]}, {"question": "I understand how this construct works:", "answers": ["A common construct is to run a loop until something is found and then to break out of the loop. The problem is that if I break out of the loop or the loop ends I need to determine which case happened. One method is to create a flag or store variable that will let me do a second test to see how the loop was exited.", "It's a strange construct even to seasoned Python coders. When used in conjunction with for-loops it basically means \"find some item in the iterable, else if none was found do ...\". As in:", "There's an excellent presentation by Raymond Hettinger, titled Transforming Code into Beautiful, Idiomatic Python, in which he briefly addresses the history of the for ... else construct. The relevant section is \"Distinguishing multiple exit points in loops\" starting at 15:50 and continuing for about three minutes. Here are the high points:", "To make it simple, you can think of it like that;", "Because they didn't want to introduce a new keyword to the language. Each one steals an identifier and causes backwards compatibility problems, so it's usually a last resort."]}, {"question": "I'm new to Python and I'm just trying to understand how its packages work.  Presumably eggs are some sort of packaging mechanism, but what would be a quick overview of what role they play and may be some information on why they're useful and how to create them?", "answers": ["Note: Egg packaging has been superseded by Wheel packaging.", "The .egg file is a distribution format for Python packages. It\u2019s just an alternative to a source code distribution or Windows exe. But note that for pure Python, the .egg file is completely cross-platform.", "\"Egg\" is a single-file importable distribution format for Python-related projects.", "Disclaimer: egg is an abandoned format of python package, the tools to use eggs no longer exist."]}, {"question": "My Google-fu has failed me.", "answers": ["is will return True if two variables point to the same object (in memory), == if the objects referred to by the variables are equal.", "There is a simple rule of thumb to tell you when to use == or is.", "Yes, they have a very important difference.", "== determines if the values are equal, while is determines if they are the exact same object.", "== and is are different comparison! As others already said:"]}, {"question": "I am interested in knowing how to convert a pandas dataframe into a NumPy array.", "answers": ["It's time to deprecate your usage of values and as_matrix().", "To convert a pandas dataframe (df) to a numpy ndarray, use this code:", "Note: The .as_matrix() method used in this answer is deprecated. Pandas 0.23.4 warns:", "I would just chain the DataFrame.reset_index() and DataFrame.values functions to get the Numpy representation of the dataframe, including the index:", "You can use the to_records method, but have to play around a bit with the dtypes if they are not what you want from the get go. In my case, having copied your DF from a string, the index type is string (represented by an object dtype in pandas):"]}, {"question": "I am using Python 3.1 and can't get the raw_input to \"freeze\" the dos pop-up. The book I'm reading is for Python 2.5 and I'm using Python 3.1", "answers": ["Starting with Python 3, raw_input() was renamed to input().", "This works in Python 3.x and 2.x:", "A reliable way to address this is", "As others have indicated, the raw_input function has been renamed to input in Python 3.0, and you really would be better served by a more up-to-date book, but I want to point out that there are better ways to see the output of your script.", "Timmerman's solution works great when running the code, but if you don't want to get Undefined name errors when using pyflakes or a similar linter you could use the following instead:"]}, {"question": "I'm using virtualenv and I need to install \"psycopg2\".", "answers": ["Note: Since a while back, there are binary wheels for Windows in PyPI, so this should no longer be an issue for Windows users. Below are solutions for Linux, Mac users, since lots of them find this post through web searches.", "On CentOS, you need the postgres dev packages:", "if you're on a mac you can use homebrew", "On Mac Mavericks with Postgres.app version 9.3.2.0 RC2 I needed to use the following code after installing Postgres:", "I recently configured psycopg2 on a windows machine. The easiest install is using a windows executable binary. You can find it at http://stickpeople.com/projects/python/win-psycopg/."]}, {"question": "I'm working on a python script that starts several processes and database connections. Every now and then I want to kill the script with a Ctrl+C signal, and I'd like to do some cleanup.", "answers": ["Register your handler with signal.signal like this:", "You can treat it like an exception (KeyboardInterrupt), like any other. Make a new file and run it from your shell with the following contents to see what I mean:", "And as a context manager:", "You can handle CTRL+C by catching the KeyboardInterrupt exception. You can implement any clean-up code in the exception handler.", "From Python's documentation:"]}, {"question": "I am trying to save a csv to a folder after making some edits to the file. ", "answers": ["Use index=False.", "There are two ways to handle the situation where we do not want the index to be stored in csv file.", "If you want no index, read file using:", "As others have stated, if you don't want to save the index column in the first place, you can use df.to_csv('processed.csv', index=False)", "Another solution if you want to keep this column as index. "]}, {"question": "I want to install pip. It should support Python 3, but it requires setuptools, which is available only for Python 2.", "answers": ["edit: Manual installation and use of setuptools is not the standard process anymore.", "I was able to install pip for python 3 on Ubuntu just by running sudo apt-get install python3-pip. ", "Good news! Python 3.4 (released March 2014) ships with Pip. This is the best feature of any Python release. It makes the community's wealth of libraries accessible to everyone. Newbies are no longer excluded by the prohibitive difficulty of setup. In shipping with a package manager, Python joins Ruby, Nodejs, Haskell, Perl, Go--almost every other contemporary language with a majority open-source community. Thank you Python.", "if you're using python 3.4+", "For Ubuntu 12.04 or older, "]}, {"question": "\nWant to improve this question? Update the question so it focuses on one problem only by editing this post.\r\n                ", "answers": ["There are a bunch of ways to do it, but the most straightforward is to simply \nuse the Python debugger. Just add following line in to a Django view function:", "I really like Werkzeug's interactive debugger. It's similar to Django's debug page, except that you get an interactive shell on every level of the traceback. If you use the django-extensions, you get a runserver_plus managment command which starts the development server and gives you Werkzeug's debugger on exceptions.", "A little quickie for template tags:", "There are a few tools that cooperate well and can make your debugging task easier.", "I use PyCharm (same pydev engine as eclipse).  Really helps me to visually be able to step through my code and see what is happening."]}, {"question": "Is there a built-in function for getting the size of a file object in bytes? I see some people do something like this:", "answers": ["Use os.path.getsize(path) which will", "Return the size, in bytes, of path. Raise os.error if the file does not exist or is inaccessible.", "You may use os.stat() function, which is a wrapper of system call stat():", "Try ", "You can use os.stat(path) call"]}, {"question": "What is the difference between the search() and match() functions in the Python re module?", "answers": ["re.match is anchored at the beginning of the string. That has nothing to do with newlines, so it is not the same as using ^ in the pattern.", "search \u21d2 find something anywhere in the string and return a match object.", "match is much faster than search, so instead of doing regex.search(\"word\") you can do regex.match((.*?)word(.*?)) and gain tons of performance if you are working with millions of samples.", "re.search searches for the pattern throughout the string, whereas re.match does not search the pattern; if it does not, it has no other choice than to match it at start of the string.", "You can refer the below example to understand the working of re.match and re.search"]}, {"question": "The documentation for the argparse python module, while excellent I'm sure, is too much for my tiny beginner brain to grasp right now. I don't need to do math on the command line or meddle with formatting lines on the screen or change option characters. All I want to do is \"If arg is A, do this, if B do that, if none of the above show help and quit\".", "answers": ["Here's the way I do it with argparse (with multiple args):", "My understanding of the original question is two-fold. First, in terms of the simplest possible argparse example, I'm surprised that I haven't seen it here. Of course, to be dead-simple, it's also all overhead with little power, but it might get you started.", "The argparse documentation is reasonably good but leaves out a few useful details which might not be obvious. (@Diego Navarro already mentioned some of this but I'll try to expand on his answer slightly.) Basic usage is as follows:", "Matt is asking about positional parameters in argparse, and I agree that the Python documentation is lacking on this aspect. There's not a single, complete example in the ~20 odd pages that shows both parsing and using positional parameters. ", "Yet another summary introduction, inspired by this post."]}, {"question": "I\u2019m trying to port an open-source library to Python 3.  (SymPy, if anyone is wondering.) ", "answers": ["As of March 2020, most of the other answers to this question are several years out-of-date. When you come across advice on Python packaging issues, remember to look at the date of publication, and don't trust out-of-date information.", "I\u2019m a distutils maintainer and distutils2/packaging contributor.  I did a talk about Python packaging at ConFoo 2011 and these days I\u2019m writing an extended version of it.  It\u2019s not published yet, so here are excerpts that should help define things.", "NOTE: Answer deprecated, Distribute now obsolete. This answer is no longer valid since the Python Packaging Authority was formed and has done a lot of work cleaning this up.", "I realize that I have replied to your secondary question without addressing unquestioned assumptions in your original problem:", "Updating this question in late 2014 where fortunately the Python packaging chaos has been greatly cleaned up by Continuum's \"conda\" package manager.  "]}, {"question": "I've installed a library using the command", "answers": ["Normally your requirements.txt file would look something like this:", "\u201cEditable\u201d packages syntax can be used in requirements.txt to import packages from a variety of VCS (git, hg, bzr, svn):", "requirements.txt allows the following ways of specifying a dependency on a package in a git repository as of pip 7.0:1", "First, install with git+git or git+https, in any way you know. Example of installing kronok's branch of the brabeion project:", "Since pip v1.5, (released Jan 1 2014: CHANGELOG, PR) you may also specify a subdirectory of a git repo to contain your module.  The syntax looks like this:"]}, {"question": "I'm writing a Python application that takes as a command as an argument, for example:", "answers": ["With Python older than 2.7/3.1, that's pretty much how you do it.", "The recommended way for Python 2.7 and 3.1 and later is to use importlib module:", "Note: imp is deprecated since Python 3.4 in favor of importlib", "Nowadays you should use importlib. ", "Use the imp module, or the more direct __import__() function."]}, {"question": "I have a function that analyzes a CSV file with Pandas and produces a dict with summary information. I want to return the results as a response from a Flask view. How do I return a JSON response?", "answers": ["As of Flask 1.1.0 a view can directly return a Python dict and Flask will call jsonify automatically.", "jsonify serializes the data you pass it to JSON. If you want to serialize the data yourself, do what jsonify does by building a response with status=200 and mimetype='application/json'.", "Pass keyword arguments to flask.jsonify and they will be output as a JSON object.", "If you don't want to use jsonify for some reason, you can do what it does manually. Call flask.json.dumps to create JSON data, then return a response with the application/json content type.", "To return a JSON response and set a status code you can use make_response:"]}, {"question": "I haven't been able to find an understandable explanation of how to actually use Python's itertools.groupby() function.  What I'm trying to do is this:", "answers": ["IMPORTANT NOTE: You have to sort your data first.", "itertools.groupby is a tool for grouping items.", "The example on the Python docs is quite straightforward:", "A neato trick with groupby is to run length encoding in one line:", "Another example:"]}, {"question": "I want my Python function to split a sentence (input) and store each word in a list. My current code splits the sentence, but does not store the words as a list. How do I do that?", "answers": ["This should be enough to store each word in a list.  words is already a list of the words from the sentence, so there is no need for the loop.", "Splits the string in text on any consecutive runs of whitespace.", "str.split()", "Depending on what you plan to do with your sentence-as-a-list, you may want to look at the Natural Language Took Kit.  It deals heavily with text processing and evaluation. You can also use it to solve your problem:", "How about this algorithm? Split text on whitespace, then trim punctuation. This carefully removes punctuation from the edge of words, without harming apostrophes inside words such as we're."]}, {"question": "I am printing Python exception messages to a log file with logging.error:", "answers": ["logger.exception will output a stack trace alongside the error message.", "Using exc_info options may be better, to allow you to choose the error level (if you use exception, it will always be at the error level): ", "One nice thing about logging.exception that SiggyF's answer doesn't show is that you can pass in an arbitrary message, and logging will still show the full traceback with all the exception details:", "Quoting", "You can log the stack trace without an exception."]}, {"question": "Python has an ordered dictionary. What about an ordered set?", "answers": ["There is an ordered set (possible new link) recipe for this which is referred to from the Python 2 Documentation. This runs on Py2.6 or later and 3.0 or later without any modifications. The interface is almost exactly the same as a normal set, except that initialisation should be done with a list.", "The answer is no, but you can use collections.OrderedDict from the Python standard library with just keys (and values as None) for the same purpose.", "Update: This answer is obsolete as of Python 3.7. See jrc's answer above for a better solution. Will keep this answer here only for historical reasons.", "While others have pointed out that there is no built-in implementation of an insertion-order preserving set in Python (yet), I am feeling that this question is missing an answer which states what there is to be found on PyPI.", "I can do you one better than an OrderedSet: boltons has a pure-Python, 2/3-compatible IndexedSet type that is not only an ordered set, but also supports indexing (as with lists)."]}, {"question": "Is there a Python equivalent for the case statement such as the examples available in VB.NET or C#?", "answers": ["In Python 3.10, they introduced the pattern matching.", "The direct replacement is if/elif/else. "]}, {"question": "Is output buffering enabled by default in Python's interpreter for sys.stdout?", "answers": ["From Magnus Lycka answer on a mailing list:", "I would rather put my answer in How to flush output of print function? or in Python's print function that flushes the buffer when it's called?, but since they were marked as duplicates of this one (what I do not agree), I'll answer it here.", "Credits: \"Sebastian\", somewhere on the Python mailing list.", "Yes, it is.", "This relates to  Crist\u00f3v\u00e3o D. Sousa's answer, but I couldn't comment yet."]}, {"question": "In Python Pandas, what's the best way to check whether a DataFrame has one (or more) NaN values?", "answers": ["jwilner's response is spot on. I was exploring to see if there's a faster option, since in my experience, summing flat arrays is (strangely) faster than counting. This code seems faster:", "You have a couple of options. ", "To find out which rows have NaNs in a specific column:", "If you need to know how many rows there are with \"one or more NaNs\":", "df.isnull().any().any() should do it."]}, {"question": "I'm trying to map a list into hex, and then use the list elsewhere. In python 2.6, this was easy:", "answers": ["Do this:", "New and neat in Python 3.5:", "Why aren't you doing this:", "List-returning map function has the advantage of saving typing, especially during interactive sessions. You can define lmap function (on the analogy of python2's imap) that returns list:", "Converting my old comment for better visibility: For a \"better way to do this\" without map entirely, if your inputs are known to be ASCII ordinals, it's generally much faster to convert to bytes and decode, a la bytes(list_of_ordinals).decode('ascii'). That gets you a str of the values, but if you need a list for mutability or the like, you can just convert it (and it's still faster). For example, in ipython microbenchmarks converting 45 inputs:"]}, {"question": "I have a list of lists:", "answers": ["A key can be a function that returns a tuple:", "I'm not sure if this is the most pythonic method ...\nI had a list of tuples that needed sorting 1st by descending integer values and 2nd alphabetically. This required reversing the integer sort but not the alphabetical sort. Here was my solution: (on the fly in an exam btw, I was not even aware you could 'nest' sorted functions)", "Several years late to the party but I want to both sort on 2 criteria and use reverse=True. In case someone else wants to know how, you can wrap your criteria (functions) in parenthesis:", "It appears you could use a list instead of a tuple. \nThis becomes more important I think when you are grabbing attributes instead of 'magic indexes' of a list/tuple.  ", "Here's one way: You basically re-write your sort function to take a list of sort functions, each sort function compares the attributes you want to test, on each sort test, you look and see if the cmp function returns a non-zero return if so break and send the return value. \nYou call it by calling a Lambda of a function of a list of Lambdas."]}, {"question": "Can you tell me when to use these vectorization methods with basic examples? ", "answers": ["Straight from Wes McKinney's Python for Data Analysis book, pg. 132 (I highly recommended this book):", "First major difference: DEFINITION", "DataFrame.apply operates on entire rows or columns at a time.", "Adding to the other answers, in a Series there are also map and apply. ", "@jeremiahbuddha mentioned that apply works on row/columns, while applymap works element-wise. But it seems you can still use apply for element-wise computation...."]}, {"question": "I'm quite familiar with Django, but I recently noticed there exists an on_delete=models.CASCADE option with the models. I have searched for the documentation for the same, but I couldn't find anything more than:", "answers": ["This is the behaviour to adopt when the referenced object is deleted. It is not specific to Django; this is an SQL standard. Although Django has its own implementation on top of SQL. (1)", "The on_delete method is used to tell Django what to do with model instances that depend on the model instance you delete. (e.g. a ForeignKey relationship). The on_delete=models.CASCADE tells Django to cascade the deleting effect i.e. continue deleting the dependent models as well. ", "FYI, the on_delete parameter in models is backwards from what it sounds like.  You put on_delete on a foreign key (FK) on a model to tell Django what to do if the FK entry that you are pointing to on your record is deleted.  The options our shop have used the most are PROTECT, CASCADE, and SET_NULL. Here are the basic rules I have figured out:", "As mentioned earlier, CASCADE will delete the record that has a foreign key and references another object that was deleted. So for example if you have a real estate website and have a Property that references a City ", "Using CASCADE means actually telling Django to delete the referenced record.\nIn the poll app example below: When a 'Question' gets deleted it will also delete the Choices this Question has."]}, {"question": "It seems that python supports many different commands to stop script execution.The choices I've found are:  quit(), exit(), sys.exit(), os._exit() ", "answers": ["Let me give some information on them:", "The functions* quit(), exit(), and sys.exit() function in the same way: they raise the SystemExit exception.  So there is no real difference, except that sys.exit() is always available but exit() and quit() are only available if the site module is imported.", "os._exit():", "sys.exit is the canonical way to exit. "]}, {"question": "What is the difference between abstract class and interface in Python?", "answers": ["What you'll see sometimes is the following:", "An interface, for an object, is a set of methods and attributes on that object.", "Python >= 2.6 has Abstract Base Classes.", "In a more basic way to explain:\nAn interface is sort of like an empty muffin pan.\nIt's a class file with a set of method definitions that have no code.", "Python doesn't really have either concept."]}, {"question": "I've seen some code samples and tutorials that use", "answers": ["Without the main sentinel, the code would be executed even if the script were imported as a module.", "Everyone else has already answered it, but I think I still have something else to add.", "if the content of foo.py", "\"What does if __name__==\u201c__main__\u201d: do?\" has already been answered.", "Consider the second script. If you import it in another one, the instructions, as at \"global level\", will be executed."]}, {"question": "I'm not sure if this is Flask specific, but when I run an app in dev mode (http://localhost:5000), I cannot access it from other machines on the network (with http://[dev-host-ip]:5000). With Rails in dev mode, for example, it works fine. I couldn't find any docs regarding the Flask dev server configuration. Any idea what should be configured to enable this?", "answers": ["While this is possible, you should not use the Flask dev server in production. The Flask dev server is not designed to be particularly secure, stable, or efficient. See the docs on deploying for correct solutions.", "If you use the flask executable to start your server, use flask run --host=0.0.0.0 to change the default from 127.0.0.1 and open it up to non-local connections.", "Try this if the 0.0.0.0 method doesn't work", "Add host='0.0.0.0' to app.run`.", "If your cool app has it's configuration loaded from an external file, like in the following example, then don't forget to update the corresponding config file with HOST=\"0.0.0.0\""]}, {"question": "I'm using the Python bindings to run Selenium WebDriver:", "answers": ["You can read the innerHTML attribute to get the source of the content of the element or outerHTML for the source with the current element.", "There is not really a straightforward way of getting the HTML source code of a webelement. You will have to use JavaScript. I am not too sure about python bindings, but you can easily do like this in Java. I am sure there must be something similar to JavascriptExecutor class in Python.", "Sure we can get all HTML source code with this script below in Selenium Python:", "In Ruby, using selenium-webdriver (2.32.1), there is a page_source method that contains the entire page source.", "Using the attribute method is, in fact, easier and more straightforward."]}, {"question": "This code reads thefile.csv, makes changes, and writes results to thefile_subset1.", "answers": ["In Python 2, open outfile with mode 'wb' instead of 'w'.  The csv.writer writes \\r\\n into the file directly.  If you don't open the file in binary mode, it will write \\r\\r\\n because on Windows text mode will translate each \\n into \\r\\n.", "Opening the file in binary mode \"wb\" will not work in Python 3+.  Or rather, you'd have to convert your data to binary before writing it.  That's just a hassle.", "The simple answer is that csv files should always be opened in binary mode whether for input or output, as otherwise on Windows there are problems with the line ending. Specifically on output the csv module will write \\r\\n (the standard CSV row terminator) and then (in text mode) the runtime will replace the \\n by \\r\\n (the Windows standard line terminator) giving a result of \\r\\r\\n.", "Note: It seems this is not the preferred solution because of how the extra line was being added on a Windows system.  As stated in the python document:", "A lot of the other answers have become out of date in the ten years since the original question. For Python3, the answer is right in the documentation:"]}, {"question": "Why does the following behave unexpectedly in Python?", "answers": ["Take a look at this:", "In summary - let me emphasize: Do not use is to compare integers.", "I'm late but, you want some source with your answer? I'll try and word this in an introductory manner so more folks can follow along.", "It depends on whether you're looking to see if 2 things are equal, or the same object. ", "As you can check in source file intobject.c, Python caches small integers for efficiency. Every time you create a reference to a small integer, you are referring the cached small integer, not a new object. 257 is not an small integer, so it is calculated as a different object."]}, {"question": "Is there a way to rename a dictionary key, without reassigning its value to a new name and removing the old name key; and without iterating through dict key/value?\nIn case of OrderedDict, do the same, while keeping that key's position.", "answers": ["For a regular dict, you can use:", "Using a check for newkey!=oldkey, this way you can do:", "In case  of  renaming  all dictionary  keys:", "You can use this OrderedDict recipe written by Raymond Hettinger and modify it to add a rename method, but this is going to be a O(N) in complexity:", "A few people before me mentioned the .pop trick to delete and create a key in a one-liner."]}, {"question": "I'm running a program which is processing 30,000 similar files. A random number of them are stopping and producing this error...", "answers": ["read_csv takes an encoding option to deal with files in different formats. I mostly use read_csv('file', encoding = \"ISO-8859-1\"), or alternatively encoding = \"utf-8\" for reading, and generally utf-8 for to_csv.", "Simplest of all Solutions:", "Pandas allows to specify encoding, but does not allow to ignore errors not to automatically replace the offending bytes. So there is no one size fits all method but different ways depending on the actual use case.", "after executing this code you will find encoding of 'filename.csv' then execute code as following", "This is a more general script approach for the stated question."]}, {"question": "I noticed a Python script I was writing was acting squirrelly, and traced it to an infinite loop, where the loop condition was while line is not ''. Running through it in the debugger, it turned out that line was in fact ''. When I changed it to !='' rather than is not '', it worked fine. ", "answers": ["For all built-in Python objects (like\n  strings, lists, dicts, functions,\n  etc.), if x is y, then x==y is also\n  True.", "I would like to show a little example on how is and == are involved in immutable types. Try that:", "The logic is not flawed.  The statement", "See This question"]}, {"question": "Is there a way to make Python logging using the logging module automatically output things to stdout in addition to the log file where they are supposed to go? For example, I'd like all calls to logger.warning, logger.critical, logger.error to go to their intended places but in addition always be copied to stdout. This is to avoid duplicating messages like:", "answers": ["All logging output is handled by the handlers; just add a logging.StreamHandler() to the root logger.", "The simplest way to log to stdout:", "You could create two handlers for file and stdout and then create one logger with handlers argument to basicConfig. It could be useful if you have the same log_level and format output for both handlers:", "It's possible using multiple handlers.", "The simplest way to log to file and to stderr:"]}, {"question": "Is this correct? Is there a better way to structure this? Will this cover all my bases? ", "answers": ["Have a look at the Requests exception docs.  In short:", "One additional suggestion to be explicit. It seems best to go from specific to general down the stack of errors to get the desired error to be caught, so the specific ones don't get masked by the general one.", "Exception object also contains original response e.response, that could be useful if need to see error body in response from the server. For example:", "Here's a generic way to do things which at least means that you don't have to surround each and every requests call with try ... except:"]}, {"question": "Suppose I have:", "answers": ["Similarly, ", "And if you want to access more than one column at a time you could do:", "this command gives you a row vector, if you just want to loop over it, it's fine, but if you want to hstack with some other array with dimension 3xN, you will have", "You could also transpose and return a row:", "Although the question has been answered, let me mention some nuances."]}, {"question": "What is the best way to extend a dictionary with another one while avoiding the use of a for loop? For instance:", "answers": ["Latest Python Standard Library Documentation", "A beautiful gem in this closed question:", "Have you tried using dictionary comprehension with dictionary mapping:", "Will add keys and values from b to a, overwriting if there's already a value for a key.", "As others have mentioned, a.update(b) for some dicts a and b will achieve the result you've asked for in your question. However, I want to point out that many times I have seen the extend method of mapping/set objects desire that in the syntax a.extend(b), a's values should NOT be overwritten by b's values. a.update(b) overwrites a's values, and so isn't a good choice for extend."]}, {"question": "I am using Python 3.2.1 and I can't import the StringIO module. I use \nio.StringIO and it works, but I can't use it with numpy's genfromtxt like this:", "answers": ["when i write import StringIO it says there is no such module.", "In my case I have used:", "On Python 3 numpy.genfromtxt expects a bytes stream. Use the following:", "Thank you OP for your question, and Roman for your answer. I had to search a bit to find this; I hope the following helps others.", "You can use the StringIO from the six module:"]}, {"question": "I am trying to get a Python script to run on the linux server I'm connected to via ssh. The script uses mysqldb. I have all the other components I need, but when I try to install mySQLdb via setuptools like so:, ", "answers": ["mySQLdb is a python interface for mysql, but it is not mysql itself. And apparently mySQLdb needs the command 'mysql_config', so you need to install that first.", "I was installing python-mysql on Ubuntu 12.04 using", "(Specific to Mac OS X) ", "On Red Hat I had to do", "On python 3.5.2"]}, {"question": "I have a list l:", "answers": ["Do-something if <condition>, else do-something else.", "The reason you're getting this error has to do with how the list comprehension is performed.", "And for a reward, here is the comment, I wrote to remember this the first time I did this error:", "You must put the expression at the beginning of the list comprehension, an if statement at the end filters elements!", "Like in [a if condition1 else b for i in list1 if condition2], the two ifs with condition1 and condition2 doing two different things. The part (a if condition1 else b) is from a lambda expression:"]}, {"question": "I want to iterate over each line of an entire file. One way to do this is by reading the entire file, saving it to a list, then going over the line of interest. This method uses a lot of memory, so I am looking for an alternative.", "answers": ["The correct, fully Pythonic way to read a file is the following:", "Two memory efficient ways in ranked order (first is best) -", "With universal newline support all text file lines will seem to be terminated with '\\n', whatever the terminators in the file, '\\r', '\\n', or '\\r\\n'. ", "this is a possible way of reading a file in python:", "Some context up front as to where I am coming from. Code snippets are at the end."]}, {"question": "I came across the following header format for Python source files in a document about Python coding guidelines:", "answers": ["Its all metadata for the Foobar module.", "I strongly favour minimal file headers, by which I mean just:", "The answers above are really complete, but if you want a quick and dirty header to copy'n paste, use this:", "Also see PEP 263 if you are using a non-ascii characterset", "What I use in some project is this line in the first line for Linux machines:"]}, {"question": "I have a problem with the transfer of variable 'insurance_mode' by the decorator. I would do it by the following decorator statement:", "answers": ["The syntax for decorators with arguments is a bit different - the decorator with arguments should return a function that will take a function and return another function. So it should really return a normal decorator. A bit confusing, right? What I mean is:", "Edit : for an in-depth understanding of the mental model of decorators, take a look at this awesome Pycon Talk. well worth the 30 minutes.", "I'd like to show an idea which is IMHO quite elegant. The solution proposed by t.dubrownik shows a pattern which is always the same: you need the three-layered wrapper regardless of what the decorator does.", "Here is a slightly modified version of t.dubrownik's answer. Why?", "I presume your problem is passing arguments to your decorator. This is a little tricky and not straightforward."]}, {"question": "How do I declare an array in Python?", "answers": ["Now variable refers to an empty list*.", "This is surprisingly complex topic in Python. ", "You don't actually declare things, but this is how you create an array in Python:", "I think you (meant)want an list with the first 30 cells already filled.\nSo", "This is how:"]}, {"question": "I'm new to programming and started with Python about two months ago and am going over Sweigart's Automate the Boring Stuff with Python text. I'm using IDLE and already installed the Selenium module and the Firefox browser.", "answers": ["selenium.common.exceptions.WebDriverException: Message: 'geckodriver' executable needs to be in PATH.", "This solved it for me.", "This steps solved it for me on Ubuntu and Firefox 50.", "I see the discussions still talk about the old way of setting up geckodriver by downloading the binary and configuring the path manually.", "The answer by saurabh solves the issue, but it doesn't explain why Automate the Boring Stuff with Python doesn't include those steps."]}, {"question": "Suppose I have a df which has columns of 'ID', 'col_1', 'col_2'. And I define a function :", "answers": ["Here's an example using apply on the dataframe, which I am calling with axis = 1. ", "There is a clean, one-line way of doing this in Pandas:", "A simple solution is:", "A interesting question! my answer as below:", "The method you are looking for is Series.combine. \nHowever, it seems some care has to be taken around datatypes. \nIn your example, you would (as I did when testing the answer) naively call "]}, {"question": "Imagine this directory structure:", "answers": ["Everyone seems to want to tell you what you should be doing rather than just answering the question.", "Here is the solution which works for me:", "Alternatively 2 or 3 could use: from app.package_a import module_a", "\"Guido views running scripts within a package as an anti-pattern\" (rejected\nPEP-3122)", "This is solved 100%:"]}, {"question": "\nWant to improve this question? Update the question so it focuses on one problem only by editing this post.\r\n                ", "answers": ["ctypes module is part of the standard library, and therefore is more stable and widely available than swig, which always tended to give me problems.", "You should have a look at Boost.Python. Here is the short introduction taken from their website:", "The quickest way to do this is using SWIG.", "I started my journey in the Python <-> C++ binding from this page, with the objective of linking high level data types (multidimensional STL vectors with Python lists) :-)", "There is also pybind11, which is like a lightweight version of Boost.Python and compatible with all modern C++ compilers:"]}, {"question": "I am writing a project in Django and I see that 80% of the code is in the file models.py. This code is confusing and, after a certain time, I cease to understand what is really happening.", "answers": ["It seems like you are asking about the difference between the data model and the domain model \u2013\u00a0the latter is where you can find the business logic and entities as perceived by your end user, the former is where you actually store your data.", "I usually implement a service layer in between views and models. This acts like your project's API and gives you a good helicopter view of what is going on. I inherited this practice from a colleague of mine that uses this layering technique a lot with Java projects (JSF), e.g:", "First of all, Don't repeat yourself.", "Django employs a slightly modified kind of MVC. There's no concept of a \"controller\" in Django. The closest proxy is a \"view\", which tends to cause confusion with MVC converts because in MVC a view is more like Django's \"template\".", "In Django, MVC structure is as Chris Pratt said, different from classical MVC model used in other frameworks, I think the main reason for doing this is avoiding a too strict application structure, like happens in others MVC frameworks like CakePHP."]}, {"question": "I have constructed a condition that extract exactly one row from my data frame:", "answers": ["If you have a DataFrame with only one row, then access the first (only) row as a Series using iloc, and then the value using the column name:", "These are fast access for scalars", "You can turn your 1x1 dataframe into a numpy array, then access the first and only value of that array:", "Most answers are using iloc which is good for selection by position.", "It doesn't need to be complicated:"]}, {"question": "I have a Pandas Dataframe as below:", "answers": ["I believe DataFrame.fillna() will do this for you.", "It is not guaranteed that the slicing returns a view or a copy. You can do", "You could use replace to change NaN to 0:", "The below code worked for me.", "I just wanted to provide a bit of an update/special case since it looks like people still come here. If you're using a multi-index or otherwise using an index-slicer the inplace=True option may not be enough to update the slice you've chosen. For example in a 2x2 level multi-index this will not change any values (as of pandas 0.15):"]}, {"question": "Is there a way to conveniently define a C-like structure in Python? I'm tired of writing stuff like:", "answers": ["With the introduction of Data Classes in Python 3.7 we get very close. ", "Use a named tuple, which was added to the collections module in the standard library in Python 2.6. It's also possible to use Raymond Hettinger's named tuple recipe if you need to support Python 2.4.", "You can use a tuple for a lot of things where you would use a struct in C (something like x,y coordinates or RGB colors for example).", "Perhaps you are looking for Structs without constructors:", "How about a dictionary?"]}, {"question": "I know there is a method for a Python list to return the first index of something:", "answers": ["Yes, given an array, array, and a value, item to search for, you can use np.where as:", "If you need the index of the first occurrence of only one value, you can use nonzero (or where, which amounts to the same thing in this case):", "You can also convert a NumPy array to list in the air and get its index. For example,", "Just to add a very performant and handy numba alternative based on np.ndenumerate to find the first index:", "l.index(x) returns the smallest i such that i is the index of the first occurrence of x in the list."]}, {"question": "I see people are using any to gather another list to see if an item exists in a list, but is there a quick way to just do something like this?", "answers": ["You can use this syntax:", "In addition to what other have said, you may also be interested to know that what in does is to call the list.__contains__ method, that you can define on any class you write and can get extremely handy to use python at his full extent. \u00a0", "I came up with this one liner recently for getting True if a list contains any number of occurrences of an item, or False if it contains no occurrences or nothing at all. Using next(...) gives this a default return value (False) and means it should run significantly faster than running the whole list comprehension.", "The list method index will return -1 if the item is not present, and will return the index of the item in the list if it is present. Alternatively in an if statement you can do the following:", "There is also the list method:"]}, {"question": "Given a Python object of any kind, is there an easy way to get the list of all methods that this object has?", "answers": ["For many objects, you can use this code, replacing 'object' with the object you're interested in:", "You can use the built in dir() function to get a list of all the attributes a module has.  Try this at the command line to see how it works.", "The simplest method is to use dir(objectname). It will display all the methods available for that object. Cool trick.", "I believe that you want something like this:", "To check if it has a particular method:"]}, {"question": "Suppose the following:", "answers": ["Two options that don't require copying the whole set:", "Least code would be:", "I wondered how the functions will perform for different sets, so I did a benchmark:", "for first_item in muh_set: break remains the optimal approach in Python 3.x. Curse you, Guido.", "To provide some timing figures behind the different approaches, consider the following code.\nThe get() is my custom addition to Python's setobject.c, being just a pop() without removing the element."]}, {"question": "randrange(start, stop) only takes integer arguments. So how would I get a random number between two float values?", "answers": ["Use random.uniform(a, b):", "if you want generate a random float with N digits to the right of point, you can make this : ", "random.uniform(a, b) appears to be what your looking for.  From the docs:", "Most commonly, you'd use:", "From my experience dealing with python, I can only say that the random function can help in generating random float numbers. Take the example below;"]}, {"question": "str.split(//) does not seem to work like Ruby does. Is there a simple way of doing this without looping?", "answers": ["You need list", "You take the string and pass it to list()", "You can also do it in this very simple way without list():", "If you want to process your String one character at a time. you have various options.  ", "If you just need an array of chars:"]}, {"question": "I need help with setting the limits of y-axis on matplotlib. Here is the code that I tried, unsuccessfully.", "answers": ["Get current axis via plt.gca(), and then set its limits:", "Another workaround is to get the plot's axes and reassign changing only the y-values:", "One thing you can do is to set your axis range by yourself by using matplotlib.pyplot.axis.", "You can instantiate an object from matplotlib.pyplot.axes and call the set_ylim() on it. It would be something like this:", "Just for fine tuning. If you want to set only one of the boundaries of the axis and let the other boundary unchanged, you can choose one or more of the following statements"]}, {"question": "What's all this fuss about Python and CPython (Jython,IronPython), I don't get it:", "answers": ["CPython is the original Python implementation. It is the implementation you download from Python.org. People call it CPython to distinguish it from other, later, Python implementations, and to distinguish the implementation of the language engine from the Python programming language itself.", "You need to distinguish between a language and an implementation. Python is a language, ", "Even I had the same problem understanding how are CPython, JPython, IronPython, PyPy are different from each other.", "This article thoroughly explains the difference between different implementations of Python. Like the article puts it: ", "Python is a language: a set of rules that can be used to write programs. There are several implementaions of this language. "]}, {"question": "I'm using the subprocess module to start a subprocess and connect to its output stream (standard output). I want to be able to execute non-blocking reads on its standard output. Is there a way to make .readline non-blocking or to check if there is data on the stream before I invoke .readline? I'd like this to be portable or at least work under Windows and Linux.", "answers": ["fcntl, select, asyncproc won't help in this case.", "I have often had a similar problem; Python programs I write frequently need to have the ability to execute some primary functionality while simultaneously accepting user input from the command line (stdin). Simply putting the user input handling functionality in another thread doesn't solve the problem because readline() blocks and has no timeout. If the primary functionality is complete and there is no longer any need to wait for further user input I typically want my program to exit, but it can't because readline() is still blocking in the other thread waiting for a line. A solution I have found to this problem is to make stdin a non-blocking file using the fcntl module:", "Python 3.4 introduces new provisional API for asynchronous IO -- asyncio module. ", "Try the asyncproc module. For example:", "You can do this really easily in Twisted. Depending upon your existing code base, this might not be that easy to use, but if you are building a twisted application, then things like this become almost trivial. You create a ProcessProtocol class, and override the outReceived() method. Twisted (depending upon the reactor used) is usually just a big select() loop with callbacks installed to handle data from different file descriptors (often network sockets). So the outReceived() method is simply installing a callback for handling data coming from STDOUT.  A simple example demonstrating this behavior is as follows:"]}, {"question": "Is there any benefit in using compile for regular expressions in Python?", "answers": ["I've had a lot of experience running a compiled regex 1000s of times versus compiling on-the-fly, and have not noticed any perceivable difference.  Obviously, this is anecdotal, and certainly not a great argument against compiling, but I've found the difference to be negligible.", "For me, the biggest benefit to re.compile is being able to separate definition of the regex from its use.", "FWIW:", "Here's a simple test case:", "I just tried this myself. For the simple case of parsing a number out of a string and summing it, using a compiled regular expression object is about twice as fast as using the re methods."]}, {"question": "I want to delete the file filename if it exists.  Is it proper to say", "answers": ["A more pythonic way would be:", "I prefer to suppress an exception rather than checking for the file's existence, to avoid a TOCTTOU bug.  Matt's answer is a good example of this, but we can simplify it slightly under Python 3, using contextlib.suppress():", "As of Python 3.8, use missing_ok=True and pathlib.Path.unlink (docs here)", "os.path.exists returns True for folders as well as files. Consider using os.path.isfile to check for whether the file exists instead.", "In the spirit of Andy Jones' answer, how about an authentic ternary operation:"]}, {"question": "I've been working on a web app using Django, and I'm curious if there is a way to schedule a job to run periodically. ", "answers": ["One solution that I have employed is to do this:", "Celery is a distributed task queue, built on AMQP (RabbitMQ). It also handles periodic tasks in a cron-like fashion (see periodic tasks). Depending on your app, it might be worth a gander.", "We've open-sourced what I think is a structured app. that Brian's solution above alludes too. We would love any / all feedback!", "If you're using a standard POSIX OS, you use cron.", "Interesting new pluggable Django app: django-chronograph"]}, {"question": "I have a list of 2-item tuples and I'd like to convert them to 2 lists where the first contains the first item in each tuple and the second list holds the second item.", "answers": ["zip is its own inverse! Provided you use the special * operator.", "You could also do", "I like to use zip(*iterable) (which is the piece of code you're looking for) in my programs as so:", "If you have lists that are not the same length, you may not want to use zip as per Patricks answer. This works:", "Gives a tuple of lists as in the question."]}, {"question": "What is the related_name argument useful for on ManyToManyField and ForeignKey fields? For example, given the following code, what is the effect of related_name='maps'?", "answers": ["The related_name attribute specifies the name of the reverse relation from the User model back to your model.", "To add to existing  answer - related name is a must in case there 2 FKs in the model that point to the same table. For example in case of Bill of material", "The related_name argument is also useful if you have more complex related class names. For example, if you have a foreign key relationship:", "The essentials of your question are as follows.", "The related name parameter is actually an option. If we do not set it, Django\nautomatically creates the other side of the relation for us. In the case of the Map model,\nDjango would have created a map_set attribute, allowing access via m.map_set in your\nexample(m being your class instance). The formula Django uses is the name of the model followed by the\nstring _set. The related name parameter thus simply overrides Django\u2019s default rather\nthan providing new behavior."]}, {"question": "How can I use ORDER BY descending in a SQLAlchemy query like the following?", "answers": ["Just as an FYI, you can also specify those things as column attributes. For instance, I might have done:", "Usage from @jpmc26", "One other thing you might do is:", "This will order by amount in descending order\nor ", "You can try: .order_by(ClientTotal.id.desc())"]}, {"question": "I have a file called tester.py, located on /project.", "answers": ["Take a look at the Packages documentation (Section 6.4).", "In lib\\BoxTime.py, write a function foo() like this:", "You can try inserting it in sys.path:", "I am writing this down because everyone seems to suggest that you have to create a lib directory.", "Try import .lib.BoxTime. For more information read about relative import in PEP 328."]}, {"question": "Python is installed in a local directory.  ", "answers": ["Based on your comments to orip's post, I guess this is what happened:", "Does", "I ran into something very similar when I did this exercise in LPTHW; I could never get Python to recognise that I had files in the directory I was calling from. But I was able to get it to work in the end. What I did, and what I recommend, is to try this:", "On *nix, also make sure that PYTHONPATH is configured correctly, especially that it has this format:", "You are reading this answer says that your __init__.py is in the right place, you have installed all the dependencies and you are still getting the ImportError."]}, {"question": "I am very new to Python and trying to > pip install linkchecker on Windows 7. Some notes:", "answers": ["Just install any package with the \"config --global http.sslVerify false\" statement", "You can specify a cert with this param:", "For me the problem was fixed by creating a folder\npip, with a file: pip.ini\nin \nC:\\Users\\<username>\\AppData\\Roaming\\\ne.g:", "kenorb\u2019s answer is very useful (and great!).\nAmong his solutions, maybe this is the most simple one: \n--trusted-host", "The answers are quite similar and a bit confusing. In my case, the certificates in my company's network was the issue. I was able to work around the problem using:"]}, {"question": "I'm having trouble parsing HTML elements with \"class\" attribute using Beautifulsoup. The code looks like this", "answers": ["You can refine your search to only find those divs with a given class using BS3:", "From the documentation:", "Update: 2016\nIn the latest version of beautifulsoup, the method 'findAll' has been renamed to \n'find_all'. Link to official documentation", "CSS selectors", "Specific to BeautifulSoup 3:"]}, {"question": "What the difference is between flush() and commit() in SQLAlchemy?", "answers": ["A Session object is basically an ongoing transaction of changes to a database (update, insert, delete). These operations aren't persisted to the database until they are committed (if your program aborts for some reason in mid-session transaction, any uncommitted changes within are lost).", "This does not strictly answer the original question but some people have mentioned that with session.autoflush = True you don't have to use session.flush()... And this is not always true.", "Why flush if you can commit?", "Use flush when you need to simulate a write, for example to get a primary key ID from an autoincrementing counter.", "The existing answers don't make a lot of sense unless you understand what a database transaction is. (Twas the case for myself until recently.)"]}, {"question": "I'm having a hard time wrapping my brain around PEP 380.", "answers": ["Let's get one thing out of the way first. The explanation that yield from g is equivalent to for v in g: yield v does not even begin to do justice to what yield from is all about. Because, let's face it, if all yield from does is expand the for loop, then it does not warrant adding yield from to the language and preclude a whole bunch of new features from being implemented in Python 2.x.", "What are the situations where \"yield from\" is useful?", "Wherever you invoke a generator from within a generator you need a \"pump\" to re-yield the values:  for v in inner_generator: yield v.  As the PEP points out there are subtle complexities to this which most people ignore.  Non-local flow-control like throw() is one example given in the PEP.  The new syntax yield from inner_generator is used wherever you would have written the explicit for loop before.  It's not merely syntactic sugar, though:  It handles all of the corner cases that are ignored by the for loop.  Being \"sugary\" encourages people to use it and thus get the right behaviors.", "A short example will help you understand one of yield from's use case: get value from another generator", "In applied usage for the Asynchronous IO coroutine, yield from has a similar behavior as await in a coroutine function. Both of which is used to suspend the execution of coroutine. "]}, {"question": "How do I learn where the source file for a given Python module is installed? Is the method different on Windows than on Linux?", "answers": ["For a pure python module you can find the source by looking at themodule.__file__.\nThe datetime module, however, is written in C, and therefore datetime.__file__ points to a .so file (there is no datetime.__file__ on Windows), and therefore, you can't see the source.", "Running python -v from the command line should tell you what is being imported and from where.  This works for me on Windows and Mac OS X.", "I realize this answer is 4 years late, but the existing answers are misleading people.", "If you're using pip to install your modules, just pip show $module the location is returned.", "The sys.path list contains the list of directories which will be searched for modules at runtime:"]}, {"question": "Is there a performance or code maintenance issue with using assert as part of the standard code instead of using it just for debugging purposes?", "answers": ["Asserts should be used to test conditions that should never happen.  The purpose is to crash early in the case of a corrupt program state.", "\"assert\" statements are removed when the compilation is optimized.  So, yes, there are both performance and functional differences.", "To be able to automatically throw an error when x become less than zero throughout the function. You can use class descriptors. Here is an example:", "Assume you work on 200,000 lines of code with four colleagues Alice, Bernd, Carl, and Daphne.\nThey call your code, you call their code.", "In addition to the other answers, asserts themselves throw exceptions, but only AssertionErrors. From a utilitarian standpoint, assertions aren't suitable for when you need fine grain control over which exceptions you catch."]}, {"question": "In C++, I can iterate over an std::string like this:", "answers": ["As Johannes pointed out, ", "If you need access to the index as you iterate through the string, use enumerate():", "Even easier:", "Just to make a more comprehensive answer, the C way of iterating over a string can apply in Python, if you really wanna force a square peg into a round hole.", "Well you can also do something interesting like this and do your job by using for loop"]}, {"question": "[] = empty list", "answers": ["No, there's no literal syntax for the empty set. You have to write set().", "By all means, please use set() to create an empty set. ", "Just to extend the accepted answer:", "Yes. The same notation that works for non-empty dict/set works for empty ones.", "It depends on if you want the literal for a comparison, or for assignment."]}, {"question": "\nWant to improve this question? Update the question so it focuses on one problem only by editing this post.\r\n                ", "answers": ["If you're brand new to using unittests, the simplest approach to learn is often the best. On that basis along I recommend using py.test rather than the default unittest module.", "The free Python book Dive Into Python has a chapter on unit testing that you might find useful.", "There are, in my opinion, three great Python testing frameworks that are good to check out:", "The docs for unittest would be a good place to start.", "unittest comes with the standard library, but I would recommend you nosetests."]}, {"question": "In Python, I have an ndarray y\nthat is printed as array([0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1])", "answers": ["Non-numpy way:", "What about using numpy.count_nonzero, something like ", "Personally, I'd go for:\n(y == 0).sum() and (y == 1).sum()", "For your case you could also look into numpy.bincount", "If you know that they are just 0 and 1:"]}, {"question": "Sometimes I come across code such as this:", "answers": ["I think this would be best explained by the following picture:", "These are subplot grid parameters encoded as a single integer. For example, \"111\" means \"1x1 grid, first subplot\" and \"234\" means \"2x3 grid, 4th subplot\".", "The answer from Constantin is spot on but for more background this behavior is inherited from Matlab. ", "My solution is", " "]}, {"question": "I'm trying to use NetworkX to read a Shapefile and use the function write_shp() to generate the Shapefiles that will contain the nodes and edges, but when I try to run the code it gives me the following error:", "answers": ["As you are in python3 , use dict.items() instead of dict.iteritems()", "In Python2, we had .items() and .iteritems() in dictionaries. dict.items() returned list of tuples in dictionary [(k1,v1),(k2,v2),...]. It copied all tuples in dictionary and created new list. If dictionary is very big, there is very big memory impact. ", "I had a similar problem (using 3.5) and lost 1/2 a day to it but here is a something that works - I am retired and just learning Python so I can help my grandson (12) with it.", "In Python2, dictionary.iteritems() is more efficient than dictionary.items() so in Python3, the functionality of dictionary.iteritems() has been migrated to dictionary.items() and iteritems() is removed. So you are getting this error. ", "The purpose of .iteritems() was to use less memory space by yielding one result at a time while looping. I am not sure why Python 3 version does not support iteritems()though it's been proved to be efficient than .items()"]}, {"question": "__del__(self) above fails with an AttributeError exception.  I understand Python doesn't guarantee the existence of \"global variables\" (member data in this context?) when __del__() is invoked.  If that is the case and this is the reason for the exception, how do I make sure the object destructs properly?", "answers": ["I'd recommend using Python's with statement for managing resources that need to be cleaned up.  The problem with using an explicit close() statement is that you have to worry about people forgetting to call it at all or forgetting to place it in a finally block to prevent a resource leak when an exception occurs.", "The standard way is to use atexit.register:", "As an appendix to Clint's answer, you can simplify PackageResource using contextlib.contextmanager:", "A better alternative is to use weakref.finalize. See the examples at Finalizer Objects and Comparing finalizers with __del__() methods.", "I don't think that it's possible for instance members to be removed before __del__ is called. My guess would be that the reason for your particular AttributeError is somewhere else (maybe you mistakenly remove self.file elsewhere)."]}, {"question": "Reading the changes in Python 3.1, I found something... unexpected:", "answers": ["Named tuples are basically easy-to-create, lightweight object types.  Named tuple instances can be referenced using object-like variable dereferencing or the standard tuple syntax.  They can be used similarly to struct or other common record types, except that they are immutable.  They were added in Python 2.6 and Python 3.0, although there is a recipe for implementation in Python 2.4.", "A named tuple is a tuple.", "namedtuple is a factory function for making a tuple class. With that class we can create tuples that are callable by name also.", "namedtuples are a great feature, they are perfect container for data. When you have to \"store\" data you would use tuples or dictionaries, like:", "named tuples allow backward compatibility with code that checks for the version like this"]}, {"question": "What is the difference between old style and new style classes in Python?  When should I use one or the other?", "answers": ["From New-style and classic classes:", "Declaration-wise:", "Important behavior changes between old and new style classes", "Old style classes are still marginally faster for attribute lookup. This is not usually important, but it may be useful in performance-sensitive Python 2.x code:", "Guido has written The Inside Story on New-Style Classes, a really great article about new-style and old-style class in Python."]}, {"question": "Should I put the shebang in my Python scripts? In what form?", "answers": ["The shebang line in any script determines the script's ability to be executed like a standalone executable without typing python beforehand in the terminal or when double clicking it in a file manager (when configured properly). It isn't necessary but generally put there so when someone sees the file opened in an editor, they immediately know what they're looking at. However, which shebang line you use is important.", "It's really just a matter of taste. Adding the shebang means people can invoke the script directly if they want (assuming it's marked as executable); omitting it just means python has to be invoked manually.", "Should I put the shebang in my Python scripts? ", "If you have more than one version of Python and the script needs to run under a specific version, the she-bang can ensure the right one is used when the script is executed directly, for example:", "You should add a shebang if the script is intended to be executable. You should also install the script with an installing software that modifies the shebang to something correct so it will work on the target platform. Examples of this is distutils and Distribute."]}, {"question": "How can I print the error/exception in my except: block?", "answers": ["For Python 2.6 and later and Python 3.x:", "The traceback module provides methods for formatting and printing exceptions and their tracebacks, e.g. this would print exception like the default handler does:", "In Python 2.6 or greater it's a bit cleaner:", "In case you want to pass error strings, here is an example from Errors and Exceptions (Python 2.6)", "(I was going to leave this as a comment on @jldupont's answer, but I don't have enough reputation.)"]}, {"question": "I need to get the location of the home directory of the current logged-on user. Currently, I've been using the following on Linux:", "answers": ["You want to use os.path.expanduser.\nThis will ensure it works on all platforms:", "I found that pathlib module also supports this.", "I know this is an old thread, but I recently needed this for a large scale project (Python 3.8). It had to work on any mainstream OS, so therefore I went with the solution @Max wrote in the comments.", "This doesn't really qualify for the question (it being tagged as cross-platform), but perhaps this could be useful for someone."]}, {"question": "The community reviewed whether to reopen this question last month and left it closed:", "answers": ["If you need to do this, do", "All proposed answers so far seem to miss the fact that a double (floats in python are actually doubles) can also be an integer (if it has nothing after the decimal point).  I use the built-in is_integer() method on doubles to check this.", "Here's a summary of the different methods mentioned here:", "If you really need to check then it's better to use abstract base classes rather than concrete classes. For an integer that would mean:", "See here for more."]}, {"question": "Let\u2019s say I have the following Pandas dataframe:", "answers": ["You can use the isin method:", "You can use the method query:", "Another method;"]}, {"question": "I wonder what is better to do:", "answers": ["in is definitely more pythonic.", "in wins hands-down, not just in elegance (and not being deprecated;-) but also in performance, e.g.:", "According to python docs:", "Use dict.has_key() if (and only if) your code is required to be runnable by Python versions earlier than 2.3 (when key in dict was introduced). ", "There is one example where in actually kills your performance."]}, {"question": "How does one write a unittest that fails only if a function doesn't throw an expected exception?", "answers": ["Use TestCase.assertRaises (or TestCase.failUnlessRaises) from the unittest module, for example:", "Since Python 2.7 you can use context manager to get ahold of the actual Exception object thrown:", "The code in my previous answer can be simplified to:", "How do you test that a Python function throws an exception?", "Your code should follow this pattern (this is a unittest module style test):"]}, {"question": "How do I import other files in Python?", "answers": ["Don't just hastily pick the first import strategy that works for you or else you'll have to rewrite the codebase later on when you find it doesn't meet your needs.  ", "importlib was added to Python 3 to programmatically import a module.", "To import a specific Python file at 'runtime' with a known name:", "First case \nYou want to import file A.py in file B.py, these two files are in the same folder, like this:", "You do not have many complex methods to import a python file from one folder to another. Just create a __init__.py file to declare this folder is a python package and then go to your host file where you want to import just type "]}, {"question": "I am looking for minimum and maximum values for integers in python. For eg., in Java, we have Integer.MIN_VALUE and Integer.MAX_VALUE. Is there something like this in python?", "answers": ["In Python 3, this question doesn't apply. The plain int type is unbounded.", "If you just need a number that's bigger than all others, you can use", "The sys.maxint constant has been removed from Python 3.0 onward, instead use sys.maxsize.", "In Python integers will automatically switch from a fixed-size int representation into a variable width long representation once you pass the value sys.maxint, which is either 231 - 1 or 263 - 1 depending on your platform. Notice the L that gets appended here:", "For Python 3, it is"]}, {"question": "\nWant to improve this question? Update the question so it's on-topic for Stack Overflow.\r\n                ", "answers": ["Spreadsheet version"]}, {"question": "What is the purpose of __slots__ in Python \u2014 especially with respect to when I would want to use it, and when not?", "answers": ["The special attribute __slots__ allows you to explicitly state which instance attributes you expect your object instances to have, with the expected results:", "Quoting Jacob Hallen:", "You would want to use __slots__ if you are going to instantiate a lot (hundreds, thousands) of objects of the same class. __slots__ only exists as a memory optimization tool.", "Each python object has a __dict__ atttribute which is a dictionary containing all other attributes. e.g. when you type self.attr python is actually doing self.__dict__['attr']. As you can imagine using a dictionary to store attribute takes some extra space & time for accessing it.", "In addition to the other answers, here is an example of using __slots__:"]}, {"question": "Does anyone know how to do convert from a string to a boolean in Python? I found this link. But it doesn't look like a proper way to do it.  I.e. using built-in functionality, etc.", "answers": ["Really, you just compare the string to whatever you expect to accept as representing true, so you can do this:", "Use:", "Then call it like so:", "The JSON parser is also useful for in general converting strings to reasonable python types.", "Starting with Python 2.6, there is now ast.literal_eval:"]}, {"question": "I happened to find myself having a basic filtering need: I have a list and I have to filter it by an attribute of the items.", "answers": ["It is strange how much beauty varies for different people. I find the list comprehension much clearer than filter+lambda, but use whichever you find easier.", "This is a somewhat religious issue in Python. Even though Guido considered removing map, filter and reduce from Python 3, there was enough of a backlash that in the end only reduce was moved from built-ins to functools.reduce.", "Since any speed difference is bound to be miniscule, whether to use filters or list comprehensions comes down to a matter of taste. In general I'm inclined to use comprehensions (which seems to agree with most other answers here), but there is one case where I prefer filter. ", "Although filter may be the \"faster way\", the \"Pythonic way\" would be not to care about such things unless performance is absolutely critical (in which case you wouldn't be using Python!).", "I thought I'd just add that in python 3, filter() is actually an iterator object, so you'd have to pass your filter method call to list() in order to build the filtered list. So in python 2:"]}, {"question": "I am trying to print an integer in Python 2.6.1 with commas as thousands separators. For example, I want to show the number 1234567 as 1,234,567. How would I go about doing this? I have seen many examples on Google, but I am looking for the simplest practical way.", "answers": ["Per Format Specification Mini-Language,", "I got this to work:", "I'm surprised that no one has mentioned that you can do this with f-strings in Python 3.6+ as easy as this:", "For inefficiency and unreadability it's hard to beat:", "Here is the locale grouping code after removing irrelevant parts and cleaning it up a little:"]}, {"question": "I have a list of dictionaries like this:", "answers": ["Supposing d is your list of dicts, simply:", "The other answers are correct, but not much has been explained in terms of advantages and limitations of these methods. The aim of this post will be to show examples of these methods under different situations, discuss when to use (and when not to use), and suggest alternatives.", "In pandas 16.2, I had to do pd.DataFrame.from_records(d) to get this to work.", "You can also use pd.DataFrame.from_dict(d) as :", "Pyhton3:\nMost of the solutions listed previously work. However, there are instances when row_number of the dataframe is not required and the each row (record) has to be written individually."]}, {"question": "I notice that a pre-increment/decrement operator can be applied on a variable (like ++count). It compiles, but it does not actually change the value of the variable!", "answers": ["++ is not an operator. It is two + operators. The + operator is the identity operator, which does nothing. (Clarification: the + and - unary operators only work on numbers, but I presume that you wouldn't expect a hypothetical ++ operator to work on strings.)", "Python does not have pre and post increment operators.", "While the others answers are correct in so far as they show what a mere + usually does (namely, leave the number as it is, if it is one), they are incomplete in so far as they don't explain what happens.", "Python does not have unary increment/decrement operators (--/++). Instead, to increment a value, use ", "Python does not have these operators, but if you really need them you can write a function having the same functionality."]}, {"question": "Here's my code:", "answers": ["You would want and instead of &&.", "Python uses and and or conditionals.", "I'm getting an error in the IF conditional. What am I doing wrong?", "Two comments:", "You use and and or to perform logical operations like in C, C++. Like literally and is && and or is ||. "]}, {"question": "\nWant to improve this question? Update the question so it focuses on one problem only by editing this post.\r\n                ", "answers": ["Are you talking about lambda expressions? Like", "lambda is just a fancy way of saying function. Other than its name, there is nothing obscure, intimidating or cryptic about it. When you read the following line, replace lambda by function in your mind:", "The two-line summary:", "A lambda is part of a very important abstraction mechanism which deals with higher order functions. To get proper understanding of its value, please watch high quality lessons from Abelson and Sussman, and read the book SICP", "I doubt lambda will go away.\nSee Guido's post about finally giving up trying to remove it. Also see an outline of the conflict."]}, {"question": "I work with Series and DataFrames on the terminal a lot. The default __repr__ for a Series returns a reduced sample, with some head and tail values, but the rest missing.", "answers": ["You can also use the option_context, with one or more options:", "No need to hack settings. There is a simple way:", "Sure, if this comes up a lot, make a function like this one. You can even configure it to load every time you start IPython: https://ipython.org/ipython-doc/1/config/overview.html", "After importing pandas, as an alternative to using the context manager, set such options for displaying entire dataframes:", "Use the tabulate package:"]}, {"question": "I'm helping a veterinary clinic measuring pressure under a dogs paw. I use Python for my data analysis and now I'm stuck trying to divide the paws into (anatomical) subregions.", "answers": ["I detected the peaks using a local maximum filter. Here is the result on your first dataset of 4 paws:\n", "Data file: paw.txt. Source code:", "This is an image registration problem. The general strategy is:", "Using persistent homology to analyze your data set I get the following result (click to enlarge):", "This problem has been studied in some depth by physicists. There is a good implementation in ROOT. Look at the TSpectrum classes (especially TSpectrum2 for your case) and the documentation for them."]}, {"question": "A tweet reads: ", "answers": ["From Ian Bicking's own introduction to pip:", "Many of the answers here are out of date for 2015 (although the initially accepted one from Daniel Roseman is not). Here's the current state of things:", "Another\u2014as of yet unmentioned\u2014reason for favoring pip is because it is the new hotness and will continue to be used in the future.", "Two reasons, there may be more:", "REQUIREMENTS files."]}, {"question": "I have the list [0, 1, 2, 3, 4] I'd like to make it into [1, 2, 3, 4]. How do I go about this? ", "answers": ["You can find a short collection of useful list functions here.", "Slicing:", "More on this here.", "With list slicing, see the Python tutorial about lists for more details:", "you would just do this"]}, {"question": "In Python, how do I get a function name as a string, without calling the function?", "answers": ["Using __name__ is the preferred method as it applies uniformly. Unlike func_name, it works on built-in functions as well:", "To get the current function's or method's name from inside it, consider:", "There are also other fun properties of functions. Type dir(func_name) to list them. func_name.func_code.co_code is the compiled function, stored as a string.", "If you're interested in class methods too, Python 3.3+ has __qualname__ in addition to __name__.", "This function will return the caller's function name."]}, {"question": "Using pip, is it possible to figure out which version of a package is currently installed?", "answers": ["As of pip 1.3, there is a pip show command.", "I just sent a pull request in pip with the enhancement Hugo Tavares said:", "Pip 1.3 now also has a list command:", "and with --outdated as an extra argument, you will get the Current and Latest versions of the packages you are using :", "You can also install yolk and then run yolk -l which also gives some nice output.  Here is what I get for my little virtualenv:"]}, {"question": "I know pip is a package manager for python packages. However, I saw the installation on IPython's website use conda to install IPython.", "answers": ["Quoting from the Conda blog:", "Disclaimer: This answer describes the state of things as it was a decade ago, at that time pip did not support binary packages. Conda was specifically created to better support building and distributing binary packages, in particular data science libraries with C extensions. For reference, pip only gained widespread support for portable binary packages with wheels (pip 1.4 in 2013) and the manylinux1 specification (pip 8.1 in March 2016). See the more recent answer for more history.", "The other answers give a fair description of the details, but I want to highlight some high-level points.", "Not to confuse you further, \nbut you can also use pip within your conda environment, which validates the general vs. python specific managers comments above. ", "Quote from Conda for Data Science article onto Continuum's website:"]}, {"question": "I am trying to understand the advantages of multiprocessing over threading. I know that multiprocessing gets around the Global Interpreter Lock, but what other advantages are there, and can threading not do the same thing?", "answers": ["Here are some pros/cons I came up with.", "The threading module uses threads, the multiprocessing module uses processes. The difference is that threads run in the same memory space, while processes have separate memory. This makes it a bit harder to share objects between processes with multiprocessing. Since threads use the same memory, precautions have to be taken or two threads will write to the same memory at the same time. This is what the global interpreter lock is for.", "Threading's job is to enable applications to be responsive. Suppose you have a database connection and you need to respond to user input. Without threading, if the database connection is busy the application will not be able to respond to the user. By splitting off the database connection into a separate thread you can make the application more responsive. Also because both threads are in the same process, they can access the same data structures - good performance, plus a flexible software design.", "Python documentation quotes", "The key advantage is isolation. A crashing process won't bring down other processes, whereas a crashing thread will probably wreak havoc with other threads."]}, {"question": "How do I create a GUID in Python that is platform independent? I hear there is a method using ActivePython on Windows but it's Windows only because it uses COM. Is there a method using plain Python?", "answers": ["The uuid module provides immutable UUID objects (the UUID class) and the functions uuid1(), uuid3(), uuid4(), uuid5() for generating version 1, 3, 4, and 5 UUIDs as specified in RFC 4122.", "If you're using Python 2.5 or later, the uuid module is already included with the Python standard distribution.", "Copied from : https://docs.python.org/3/library/uuid.html (Since the links posted were not active and they keep updating)", "I use GUIDs as random keys for database type operations.", "If you need to pass UUID for a primary key for your model or unique field then below code returns the UUID object -     "]}, {"question": "I'm iterating over a list of tuples in Python, and am attempting to remove them if they meet certain criteria. ", "answers": ["You can use a list comprehension to create a new list containing only the elements you don't want to remove:", "The answers suggesting list comprehensions are ALMOST correct -- except that they build a completely new list and then give it the same name the old list as, they do NOT modify the old list in place. That's different from what you'd be doing by selective removal, as in @Lennart's suggestion -- it's faster, but if your list is accessed via multiple references the fact that you're just reseating one of the references and NOT altering the list object itself can lead to subtle, disastrous bugs.", "You need to take a copy of the list and iterate over it first, or the iteration will fail with what may be unexpected results.", "You need to go backwards otherwise it's a bit like sawing off the tree-branch that you are sitting on :-)", "Overview of workarounds"]}, {"question": "Given a path such as \"mydir/myfile.txt\", how do I find the file's absolute path relative to the current working directory in Python? E.g. on Windows, I might end up with:", "answers": ["Also works if it is already an absolute path:", "You could use the new Python 3.4 library pathlib. (You can also get it for Python 2.6 or 2.7 using pip install pathlib.) The authors wrote: \"The aim of this library is to provide a simple hierarchy of classes to handle filesystem paths and the common operations users do over them.\"", "Install a third-party path module (found on PyPI), it wraps all the os.path functions and other related functions into methods on an object that can be used wherever strings are used:", "Note that expanduser is necessary (on Unix) in case the given expression for the file (or directory) name and location may contain a leading ~/(the tilde refers to the user's home directory), and expandvars takes care of any other environment variables (like $HOME).", "Update for Python 3.4+ pathlib that actually answers the question:"]}, {"question": "Coming from a C# background the naming convention for variables and method names are usually either camelCase or PascalCase:", "answers": ["See Python PEP 8: Function and Variable Names:", "The Google Python Style Guide has the following convention:", "David Goodger (in \"Code Like a Pythonista\" here)  describes the PEP 8 recommendations as follows:", "As the Style Guide for Python Code admits,", "As mentioned, PEP 8 says to use lower_case_with_underscores for variables, methods and functions."]}, {"question": "I'm building a Python application and don't want to force my clients to install Python and modules.", "answers": ["You can use PyInstaller to package Python programs as standalone executables. It works on Windows, Linux, and Mac.", "You can use py2exe as already answered and use Cython to convert your key .py files in .pyc, C compiled files, like .dll in Windows and .so on Linux.", "You might wish to investigate Nuitka. It takes Python source code and converts it in to C++ API calls. Then it compiles into an executable binary (ELF on Linux). It has been around for a few years now and supports a wide range of Python versions.", "Yes, it is possible to compile Python scripts into standalone executables.", "I would like to compile some useful information about creating standalone files on Windows using Python 2.7."]}, {"question": "Today, I came across the dict method get which, given a key in the dictionary, returns the associated value.", "answers": ["It allows you to provide a default value if the key is missing:", "What is the dict.get() method?", "get takes a second optional value.  If the specified key does not exist in your dictionary, then this value will be returned.", "I will give a practical example in scraping web data using python, a lot of the times you will get keys with no values, in those cases you will get errors if you use dictionary['key'], whereas dictionary.get('key', 'return_otherwise') has no problems.", "A gotcha to be aware of when using .get():"]}, {"question": "How can I write a try/except block that catches all exceptions?", "answers": ["Apart from a bare except: clause (which as others have said you shouldn't use), you can simply catch Exception:", "You can but you probably shouldn't:", "To catch all possible exceptions, catch BaseException. It's on top of the Exception hierarchy:", "You can do this to handle general exceptions", "Very simple example, similar to the one found here:"]}, {"question": "I've always laughed to myself when I've looked back at my VB6 days and thought, \"What modern language doesn't allow incrementing with double plus signs?\":", "answers": ["Python doesn't support ++, but you can do:", "Simply put, the ++ and -- operators don't exist in Python because they wouldn't be operators, they would have to be statements. All namespace modification in Python is a statement, for simplicity and consistency. That's one of the design decisions. And because integers are immutable, the only way to 'change' a variable is by reassigning it.", "You can do:", "Yes. The ++ operator is not available in Python. Guido doesn't like these operators.", "The main reason ++ comes in handy in C-like languages is for keeping track of indices. In Python, you deal with data in an abstract way and seldom increment through indices and such. The closest-in-spirit thing to ++ is the next method of iterators."]}, {"question": "I have a dataframe in pandas which I would like to write to a CSV file.", "answers": ["To delimit by a tab you can use the sep argument of to_csv:", "When you are storing a DataFrame object into a csv file using the to_csv method, you probably wont be needing to store the preceding indices of each row of the DataFrame object.", "To write a pandas DataFrame to a CSV file, you will need DataFrame.to_csv. This function offers many arguments with reasonable defaults that you will more often than not need to override to suit your specific use case. For example, you might want to use a different separator, change the datetime format, or drop the index when writing. to_csv has arguments you can pass to address these requirements.", "Example of export in file with full path on Windows and in case your file has headers:", "Something else you can try if you are having issues encoding to 'utf-8' and want to go cell by cell you could try the following. "]}, {"question": "What is the related_name argument useful for on ManyToManyField and ForeignKey fields? For example, given the following code, what is the effect of related_name='maps'?", "answers": ["The related_name attribute specifies the name of the reverse relation from the User model back to your model.", "To add to existing  answer - related name is a must in case there 2 FKs in the model that point to the same table. For example in case of Bill of material", "The related_name argument is also useful if you have more complex related class names. For example, if you have a foreign key relationship:", "The essentials of your question are as follows.", "The related name parameter is actually an option. If we do not set it, Django\nautomatically creates the other side of the relation for us. In the case of the Map model,\nDjango would have created a map_set attribute, allowing access via m.map_set in your\nexample(m being your class instance). The formula Django uses is the name of the model followed by the\nstring _set. The related name parameter thus simply overrides Django\u2019s default rather\nthan providing new behavior."]}, {"question": "How can I use ORDER BY descending in a SQLAlchemy query like the following?", "answers": ["Just as an FYI, you can also specify those things as column attributes. For instance, I might have done:", "Usage from @jpmc26", "One other thing you might do is:", "This will order by amount in descending order\nor ", "You can try: .order_by(ClientTotal.id.desc())"]}, {"question": "I have a file called tester.py, located on /project.", "answers": ["Take a look at the Packages documentation (Section 6.4).", "In lib\\BoxTime.py, write a function foo() like this:", "You can try inserting it in sys.path:", "I am writing this down because everyone seems to suggest that you have to create a lib directory.", "Try import .lib.BoxTime. For more information read about relative import in PEP 328."]}, {"question": "Python is installed in a local directory.  ", "answers": ["Based on your comments to orip's post, I guess this is what happened:", "Does", "I ran into something very similar when I did this exercise in LPTHW; I could never get Python to recognise that I had files in the directory I was calling from. But I was able to get it to work in the end. What I did, and what I recommend, is to try this:", "On *nix, also make sure that PYTHONPATH is configured correctly, especially that it has this format:", "You are reading this answer says that your __init__.py is in the right place, you have installed all the dependencies and you are still getting the ImportError."]}, {"question": "What the difference is between flush() and commit() in SQLAlchemy?", "answers": ["A Session object is basically an ongoing transaction of changes to a database (update, insert, delete). These operations aren't persisted to the database until they are committed (if your program aborts for some reason in mid-session transaction, any uncommitted changes within are lost).", "This does not strictly answer the original question but some people have mentioned that with session.autoflush = True you don't have to use session.flush()... And this is not always true.", "Why flush if you can commit?", "Use flush when you need to simulate a write, for example to get a primary key ID from an autoincrementing counter.", "The existing answers don't make a lot of sense unless you understand what a database transaction is. (Twas the case for myself until recently.)"]}, {"question": "How do I learn where the source file for a given Python module is installed? Is the method different on Windows than on Linux?", "answers": ["For a pure python module you can find the source by looking at themodule.__file__.\nThe datetime module, however, is written in C, and therefore datetime.__file__ points to a .so file (there is no datetime.__file__ on Windows), and therefore, you can't see the source.", "Running python -v from the command line should tell you what is being imported and from where.  This works for me on Windows and Mac OS X.", "I realize this answer is 4 years late, but the existing answers are misleading people.", "If you're using pip to install your modules, just pip show $module the location is returned.", "The sys.path list contains the list of directories which will be searched for modules at runtime:"]}, {"question": "Is there a performance or code maintenance issue with using assert as part of the standard code instead of using it just for debugging purposes?", "answers": ["Asserts should be used to test conditions that should never happen.  The purpose is to crash early in the case of a corrupt program state.", "\"assert\" statements are removed when the compilation is optimized.  So, yes, there are both performance and functional differences.", "To be able to automatically throw an error when x become less than zero throughout the function. You can use class descriptors. Here is an example:", "Assume you work on 200,000 lines of code with four colleagues Alice, Bernd, Carl, and Daphne.\nThey call your code, you call their code.", "In addition to the other answers, asserts themselves throw exceptions, but only AssertionErrors. From a utilitarian standpoint, assertions aren't suitable for when you need fine grain control over which exceptions you catch."]}, {"question": "In C++, I can iterate over an std::string like this:", "answers": ["As Johannes pointed out, ", "If you need access to the index as you iterate through the string, use enumerate():", "Even easier:", "Just to make a more comprehensive answer, the C way of iterating over a string can apply in Python, if you really wanna force a square peg into a round hole.", "Well you can also do something interesting like this and do your job by using for loop"]}, {"question": "[] = empty list", "answers": ["No, there's no literal syntax for the empty set. You have to write set().", "By all means, please use set() to create an empty set. ", "Just to extend the accepted answer:", "Yes. The same notation that works for non-empty dict/set works for empty ones.", "It depends on if you want the literal for a comparison, or for assignment."]}, {"question": "\nWant to improve this question? Update the question so it focuses on one problem only by editing this post.\r\n                ", "answers": ["If you're brand new to using unittests, the simplest approach to learn is often the best. On that basis along I recommend using py.test rather than the default unittest module.", "The free Python book Dive Into Python has a chapter on unit testing that you might find useful.", "There are, in my opinion, three great Python testing frameworks that are good to check out:", "The docs for unittest would be a good place to start.", "unittest comes with the standard library, but I would recommend you nosetests."]}, {"question": "In Python, I have an ndarray y\nthat is printed as array([0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1])", "answers": ["Non-numpy way:", "What about using numpy.count_nonzero, something like ", "Personally, I'd go for:\n(y == 0).sum() and (y == 1).sum()", "For your case you could also look into numpy.bincount", "If you know that they are just 0 and 1:"]}, {"question": "Sometimes I come across code such as this:", "answers": ["I think this would be best explained by the following picture:", "These are subplot grid parameters encoded as a single integer. For example, \"111\" means \"1x1 grid, first subplot\" and \"234\" means \"2x3 grid, 4th subplot\".", "The answer from Constantin is spot on but for more background this behavior is inherited from Matlab. ", "My solution is", " "]}, {"question": "I'm trying to use NetworkX to read a Shapefile and use the function write_shp() to generate the Shapefiles that will contain the nodes and edges, but when I try to run the code it gives me the following error:", "answers": ["As you are in python3 , use dict.items() instead of dict.iteritems()", "In Python2, we had .items() and .iteritems() in dictionaries. dict.items() returned list of tuples in dictionary [(k1,v1),(k2,v2),...]. It copied all tuples in dictionary and created new list. If dictionary is very big, there is very big memory impact. ", "I had a similar problem (using 3.5) and lost 1/2 a day to it but here is a something that works - I am retired and just learning Python so I can help my grandson (12) with it.", "In Python2, dictionary.iteritems() is more efficient than dictionary.items() so in Python3, the functionality of dictionary.iteritems() has been migrated to dictionary.items() and iteritems() is removed. So you are getting this error. ", "The purpose of .iteritems() was to use less memory space by yielding one result at a time while looping. I am not sure why Python 3 version does not support iteritems()though it's been proved to be efficient than .items()"]}, {"question": "__del__(self) above fails with an AttributeError exception.  I understand Python doesn't guarantee the existence of \"global variables\" (member data in this context?) when __del__() is invoked.  If that is the case and this is the reason for the exception, how do I make sure the object destructs properly?", "answers": ["I'd recommend using Python's with statement for managing resources that need to be cleaned up.  The problem with using an explicit close() statement is that you have to worry about people forgetting to call it at all or forgetting to place it in a finally block to prevent a resource leak when an exception occurs.", "The standard way is to use atexit.register:", "As an appendix to Clint's answer, you can simplify PackageResource using contextlib.contextmanager:", "A better alternative is to use weakref.finalize. See the examples at Finalizer Objects and Comparing finalizers with __del__() methods.", "I don't think that it's possible for instance members to be removed before __del__ is called. My guess would be that the reason for your particular AttributeError is somewhere else (maybe you mistakenly remove self.file elsewhere)."]}, {"question": "How can I print the version number of the current Python installation from my script?", "answers": ["Try", "This prints something like", "Try    ", "expanded version  ", "If you are using jupyter notebook Try:"]}, {"question": "\nWant to improve this question? Update the question so it can be answered with facts and citations by editing this post.\r\n                ", "answers": ["For a file module.py, the unit test should normally be called test_module.py, following Pythonic naming conventions.", "If there has only 1 test files, putting it in a top-level directory is recommended:", "A common practice is to put the tests directory in the same parent directory as your module/package. So if your module was called foo.py your directory layout would look like:", "We had the very same question when writing Pythoscope (https://pypi.org/project/pythoscope/), which generates unit tests for Python programs.  We polled people on the testing in python list before we chose a directory, there were many different opinions.  In the end we chose to put a \"tests\" directory in the same directory as the source code. In that directory we generate a test file for each module in the parent directory.  ", "I also tend to put my unit tests in the file itself, as Jeremy Cantrell above notes, although I tend to not put the test function in the main body, but rather put everything in an"]}, {"question": "What is the most efficient way to map a function over a numpy array? The way I've been doing it in my current project is as follows:", "answers": ["I've tested all suggested methods plus np.array(map(f, x)) with perfplot (a small project of mine).", "How about using numpy.vectorize.", "As noted by @user2357112, a \"direct\" method of applying the function is always the fastest and simplest way to map a function over Numpy arrays:", "There are numexpr, numba and cython around, the goal of this answer is to take these possibilities into consideration.", "Arithmetic operations on arrays are automatically applied elementwise, with efficient C-level loops that avoid all the interpreter overhead that would apply to a Python-level loop or comprehension."]}, {"question": "I activated a virtualenv which has pip installed. I did", "answers": ["pip show <package name> will provide the location for Windows and macOS, and I'm guessing any system. :)", "pip when used with virtualenv will generally install packages in the path <virtualenv_name>/lib/<python_ver>/site-packages.", "pip list -v can be used to list packages' install locations, introduced in https://pip.pypa.io/en/stable/news/#b1-2018-03-31", "Easiest way is probably", "By default, on Linux, Pip installs packages to /usr/local/lib/python2.7/dist-packages."]}, {"question": "I'm trying to get the name of the Python script that is currently running.", "answers": ["You can use __file__ to get the name of the current file. When used in the main module, this is the name of the script that was originally invoked.", "This will print foo.py for python foo.py, dir/foo.py for python dir/foo.py, etc. It's the first argument to python. (Note that after py2exe it would be foo.exe.)", "For completeness' sake, I thought it would be worthwhile summarizing the various possible outcomes and supplying references for the exact behaviour of each.", "Note that __file__ will give the file where this code resides, which can be imported and different from the main file being interpreted. To get the main file, the special __main__ module can be used:", "The Above answers are good . But I found this method more efficient using above results.\nThis results in actual script file name not a path."]}, {"question": "What is the proper way to use **kwargs in Python when it comes to default values?", "answers": ["You can pass a default value to get() for keys that are not in the dictionary:", "While most answers are saying that, e.g.,", "I suggest something like this", "You'd do", "Using **kwargs and default values is easy.  Sometimes, however, you shouldn't be using **kwargs in the first place."]}, {"question": "Suppose I have a Python function as defined below:", "answers": ["If the function is from a source file available on the filesystem, then inspect.getsource(foo) might be of help:", "The inspect module has methods for retrieving source code from python objects. Seemingly it only works if the source is located in a file though. If you had that I guess you wouldn't need to get the source from the object.", "Just use foo?? or ??foo.", "dis is your friend if the source code is not available:", "While I'd generally agree that inspect is a good answer, I'd disagree that you can't get the source code of objects defined in the interpreter.  If you use dill.source.getsource from dill, you can get the source of functions and lambdas, even if they are defined interactively.\nIt also can get the code for from bound or unbound class methods and functions defined in curries... however, you might not be able to compile that code without the enclosing object's code."]}, {"question": "I have a Python pandas DataFrame rpt:", "answers": ["Use the isin method: ", "isin() is ideal if you have a list of exact matches, but if you have a list of partial matches or substrings to look for, you can filter using the str.contains method and regular expressions.", "you can also use ranges by using:", "You can also directly query your DataFrame for this information.", "Given a dataframe like this:"]}, {"question": "Here's my code:", "answers": ["As stated in the urllib2 documentation:", "For a script working with Python 2 (tested versions 2.7.3 and 2.6.8) and Python 3 (3.2.3 and 3.3.2+) try:", "The above didn't work for me in 3.3. Try this instead (YMMV, etc)", "Some tab completions to show the contents of the packages in Python 2 vs Python 3.", "Python 3:"]}, {"question": "I'm trying to use pandas to manipulate a .csv file but I get this error:", "answers": ["you could also try;", "It might be an issue with", "The parser is getting confused by the header of the file.  It reads the first row and infers the number of columns from that row.  But the first two rows aren't representative of the actual data in the file.", "This is definitely an issue of delimiter, as most of the csv CSV are got create using sep='/t' so try to read_csv using the tab character (\\t) using separator /t. so, try to open using following code line.", "Your CSV file might have variable number of columns and read_csv inferred the number of columns from the first few rows. Two ways to solve it in this case:"]}, {"question": "I've seen a lot of posts about stack trace and exceptions in Python. But haven't found what I need.", "answers": ["See the traceback module, specifically the format_exc() function. Here.", "Let's create a decently complicated stacktrace, in order to demonstrate that we get the full stacktrace:", "With Python 3, the following code will format an Exception object exactly as would be obtained using traceback.format_exc():", "You use sys.exc_info() to collect the information and the functions in the traceback module to format it.\nHere are some examples for formatting it.", "For Python 3.5+:"]}, {"question": "Is there a mechanism to comment out large blocks of Python code?", "answers": ["Python does not have such a mechanism. Prepend a # to each line to block comment. For more information see PEP 8. Most Python IDEs support a mechanism to do the block-commenting-with-hash-signs automatically for you. For example, in IDLE on my machine, it's Alt+3 and Alt+4.", "The only cure I know for this is a good editor. Sorry. ", "Hide the triple quotes in a context that won't be mistaken for a docstring, eg:", "The only way you can do this without triple quotes is to add an:", "In JetBrains PyCharm on Mac use Command + / to comment/uncomment selected block of code. On Windows, use CTRL + /."]}, {"question": "\nWant to improve this question? Update the question so it focuses on one problem only by editing this post.\r\n                ", "answers": ["Here's an aggregate of many of the answers below that I use regularly (no imports required).", "Writing '\\r' will move the cursor back to the beginning of the line.", "tqdm: add a progress meter to your loops in a second:", "Write a \\r to the console. That is a \"carriage return\" which causes all text after it to be echoed at the beginning of the line. Something like:", "It is less than 10 lines of code. "]}, {"question": "I am creating a program that reads a file and if the first line of the file is not blank, it reads the next four lines.  Calculations are performed on those lines and then the next line is read.  If that line is not empty it continues.  However, I am getting this error:", "answers": ["Just for the record:", "The following are totally acceptable in python:", "Pythonic way of iterating over a file and converting to int:", "I found a work around. Python will convert the number to a float. Simply calling float first then converting that to an int will work:\noutput = int(float(input))", "The reason is that you are getting an empty string or a string as an argument into int. Check if it is empty or it contains alpha characters. If it contains characters, then simply ignore that part."]}, {"question": "I know the obvious answer is to use virtualenv and virtualenvwrapper, but for various reasons I can't/don't want to do that.", "answers": ["The --target switch is the thing you're looking for:", "Use:", "Instead of the --target or --install-options options, I have found that setting the PYTHONUSERBASE environment variable works well (from discussion on a bug regarding this very thing):", "Installing a Python package often only includes some pure Python files. If the package includes data, scripts and or executables, these are installed in different directories from the pure Python files.", "To pip install a library exactly where I wanted it, I navigated to the location I wanted the directory with the terminal then used"]}, {"question": "How do you convert a Unicode string (containing extra characters like \u00a3 $, etc.) into a Python string?", "answers": ["See unicodedata.normalize", "You can use encode to ASCII if you don't need to translate the non-ASCII characters:", "If the string only contains ascii characters.", "If you have a Unicode string, and you want to write this to a file, or other serialised form, you must first encode it into a particular representation that can be stored.  There are several common Unicode encodings, such as UTF-16 (uses two bytes for most Unicode characters) or UTF-8 (1-4 bytes / codepoint depending on the character), etc. To convert that string into a particular encoding, you can use:", "Here is an example:"]}, {"question": "What is the proper indentation for Python multiline strings within a function?", "answers": ["You probably want to line up with the \"\"\"", "The textwrap.dedent function allows one to start with correct indentation in the source, and then strip it from the text before use.", "Use inspect.cleandoc like so:", "One option which seems to missing from the other answers (only mentioned deep down in a comment by naxa) is the following:", "Some more options.  In Ipython with pylab enabled, dedent is already in the namespace.  I checked and it is from matplotlib.  Or it can be imported with:"]}, {"question": "When the user accesses this URL running on my flask app, I want the web service to be able to handle the parameters specified after the question mark:", "answers": ["Use request.args to get parsed contents of query string:", "The URL parameters are available in request.args, which is an ImmutableMultiDict that has a get method, with optional parameters for default value (default) and type (type) - which is a callable that converts the input value to the desired format. (See the documentation of the method for more details.)", "You can also use brackets <> on the URL of the view definition and this input will go into your view function arguments", "If you have a single argument passed in the URL you can do it as follows", "url: "]}, {"question": "I've tried to find a comprehensive guide on whether it is best to use import module or from module import. I've just started with Python and I'm trying to start off with best practices in mind.", "answers": ["The difference between import module and from module import foo is mainly subjective.  Pick the one you like best and be consistent in your use of it.  Here are some points to help you decide.", "There's another detail here, not mentioned, related to writing to a module. Granted this may not be very common, but I've needed it from time to time.", "Even though many people already explained about import vs import from, I want to try to explain a bit more about what happens under the hood, and where all the places it changes are.", "Both ways are supported for a reason: there are times when one is more appropriate than the other.", "I personally always use "]}, {"question": "I'm getting a datetime string in a format like \"2009-05-28T16:15:00\" (this is ISO 8601, I believe). One hackish option seems to be to parse the string using time.strptime and passing the first six elements of the tuple into the datetime constructor, like:", "answers": ["I prefer using the dateutil library for timezone handling and generally solid date parsing. If you were to get an ISO 8601 string like: 2010-05-08T23:41:54.000Z you'd have a fun time parsing that with strptime, especially if you didn't know up front whether or not the timezone was included. pyiso8601 has a couple of issues (check their tracker) that I ran into during my usage and it hasn't been updated in a few years. dateutil, by contrast, has been active and worked for me:", "Since Python 3.7 and no external libraries, you can use the strptime function from the datetime module:", "Because ISO 8601 allows many variations of optional colons and dashes being present, basically CCYY-MM-DDThh:mm:ss[Z|(+|-)hh:mm]. If you want to use strptime, you need to strip out those variations first.", "Arrow looks promising for this:", "You should keep an eye on the timezone information, as you might get into trouble when comparing non-tz-aware datetimes with tz-aware ones."]}, {"question": "How do I find the full path of the currently running Python interpreter from within the currently executing Python script?", "answers": ["sys.executable contains full path of the currently running Python interpreter.", "Just noting a different way of questionable usefulness, using os.environ:", "There are a few alternate ways to figure out the currently used python in Linux is:"]}, {"question": "What is the most basic definition of \"iterable\", \"iterator\" and \"iteration\" in Python?", "answers": ["Iteration is a general term for taking each item of something, one after another. Any time you use a loop, explicit or implicit, to go over a group of items, that is iteration.", "Here's the explanation I use in teaching Python classes:", "The above answers are great, but as most of what I've seen, don't stress the distinction enough for people like me.", "An iterable is a object which has a __iter__() method. It can possibly iterated over several times, such as list()s and tuple()s.", "Here's my cheat sheet:"]}, {"question": "Which types of objects fall into the domain of \"subscriptable\"?", "answers": ["It basically means that the object implements the __getitem__() method. In other words, it describes objects that are \"containers\", meaning they contain other objects. This includes strings, lists, tuples, and dictionaries.", "Off the top of my head, the following are the only built-ins that are subscriptable:", "A scriptable object is an object that records the operations done to it and it can store them as a \"script\" which can be replayed.", "The meaning of subscript in computing is:\n\"a symbol (notionally written as a subscript but in practice usually not) used in a program, alone or with others, to specify one of the elements of an array.\"", "I had this same issue. I was doing"]}, {"question": "I'm trying to convert a server side Ajax response script into a Django HttpResponse, but apparently it's not working.", "answers": ["I usually use a dictionary, not a list to return JSON content. ", "New in django 1.7", "I use this, it works fine.", "Since Django 1.7 you have a standard JsonResponse that's exactly what you need:", "For those who use Django 1.7+"]}, {"question": "From time to time in Python, I see the block:", "answers": ["\"I do not know if it is out of ignorance, but I do not like that\n  kind of programming, as it is using exceptions to perform flow control.\"", "A try block allows you to handle an expected error. The except block should only catch exceptions you are prepared to handle. If you handle an unexpected error, your code may do the wrong thing and hide bugs.", "Python doesn't subscribe to the idea that exceptions should only be used for exceptional cases, in fact the idiom is 'ask for forgiveness, not permission'. This means that using exceptions as a routine part of your flow control is perfectly acceptable, and in fact, encouraged.", "See the following example which illustrate everything about try-except-else-finally:", "Is it a good practice to use try-except-else in python?"]}, {"question": "I've been looking at dynamic evaluation of Python code, and come across the eval() and compile() functions, and the exec statement.", "answers": ["Basically, eval is used to evaluate a single dynamically generated Python expression, and exec is used to execute dynamically generated Python code only for its side effects.", "exec is not an expression: a statement in Python 2.x, and a function in Python 3.x. It compiles and immediately evaluates a statement or set of statement contained in a string. Example:", "exec is for statement and does not return anything.\neval is for expression and returns value of expression."]}, {"question": "I wrote a Python program that acts on a large input file to create a few million objects representing triangles.  The algorithm is:", "answers": ["According to Python Official Documentation, you can explicitly invoke the Garbage Collector to release unreferenced memory with gc.collect(). Example:", "Unfortunately (depending on your version and release of Python) some types of objects use \"free lists\" which are a neat local optimization but may cause memory fragmentation, specifically by making more and more memory \"earmarked\" for only objects of a certain type and thereby unavailable to the \"general fund\".", "The del statement might be of use, but IIRC it isn't guaranteed to free the memory. The docs are here ... and a why it isn't released is here.", "Python is garbage-collected, so if you reduce the size of your list, it will reclaim memory.  You can also use the \"del\" statement to get rid of a variable completely:", "(del can be your friend, as it marks objects as being deletable when there no other references to them. Now, often the CPython interpreter keeps this memory for later use, so your operating system might not see the \"freed\" memory.)"]}, {"question": "I am curious as to why df[2] is not supported, while df.ix[2] and df[2:3] both work. ", "answers": ["echoing @HYRY, see the new docs in 0.11", "When the indexing operator is passed a string or integer, it attempts to find a column with that particular name and return it as a Series.", "You can think DataFrame as a dict of Series. df[key] try to select the column index by key and returns a Series object.", "To index-based access to the pandas table, one can also consider numpy.as_array option to convert the table to Numpy array as", "You can take a look at the source code ."]}, {"question": "Is there a way to get all attributes/methods/fields/etc. of an object in Python?", "answers": ["Use the built-in function dir().", "I use __dict__ and dir(<instance>)", "What you probably want is dir().", "You can use dir(your_object) to get the attributes and getattr(your_object, your_object_attr) to get the values"]}, {"question": "I've been testing out Selenium with Chromedriver and I noticed that some pages can detect that you're using Selenium even though there's no automation at all. Even when I'm just browsing manually just using Chrome through Selenium and Xephyr I often get a page saying that suspicious activity was detected. I've checked my user agent, and my browser fingerprint, and they are all exactly identical to the normal Chrome browser.", "answers": ["Basically, the way the Selenium detection works, is that they test for predefined JavaScript variables which appear when running with Selenium. The bot detection scripts usually look anything containing word \"selenium\" / \"webdriver\" in any of the variables (on window object), and also document variables called $cdc_ and $wdc_. Of course, all of this depends on which browser you are on. All the different browsers expose different things.", "You can use vim or perl to replace the cdc_ string in chromedriver. See answer by @Erti-Chris Eelmaa to learn more about that string and how it's a detection point.", "As we've already figured out in the question and the posted answers, there is an anti Web-scraping and a Bot detection service called \"Distil Networks\" in play here. And, according to the company CEO's interview:", "A lot have been analyzed and discussed about a website being detected being driven by Selenium controlled ChromeDriver. Here are my two cents:", "Example of how it's implemented on wellsfargo.com: "]}, {"question": "I want to apply my custom function (it uses an if-else ladder) to these six columns (ERI_Hispanic, ERI_AmerInd_AKNatv, ERI_Asian, ERI_Black_Afr.Amer, ERI_HI_PacIsl, ERI_White) in each row of my dataframe.", "answers": ["OK, two steps to this - first is to write a function that does the translation you want - I've put an example together based on your pseudo-code:", "Since this is the first Google result for 'pandas new column from others', here's a simple example:", "The answers above are perfectly valid, but a vectorized solution exists, in the form of numpy.select.  This allows you to define conditions, then define outputs for those conditions, much more efficiently than using apply:", ".apply() takes in a function as the first parameter; pass in the label_race function as so:", "try this,"]}, {"question": "I'm deploying a Django app to a dev server and am hitting this error when I run pip install -r requirements.txt:", "answers": ["July 2018 Update ", "fixed it for me in Debian. Seems like uninstalling some .deb packages (twisted set in my case) has broken the path python uses to find packages ", "I have seen this error while trying to install rhodecode to a virtualenv on ubuntu 13.10. For me the solution was to run ", "It also happened to me. I think the problem will happen if the requirements.txt contains a \"distribute\" entry while the virtualenv uses setuptools. Pip will try to patch setuptools to make room for distribute, but unfortunately it will fail half way.", "In CentOS 6 installing the package python-setuptools fixed it."]}, {"question": "The function foo below returns a string 'foo'. How can I get the value 'foo' which is returned from the thread's target?", "answers": ["One way I've seen is to pass a mutable object, such as a list or a dictionary, to the thread's constructor, along with a an index or other identifier of some sort. The thread can then store its results in its dedicated slot in that object.  For example:", "FWIW, the multiprocessing module has a nice interface for this using the Pool class.  And if you want to stick with threads rather than processes, you can just use the multiprocessing.pool.ThreadPool class as a drop-in replacement.", "In Python 3.2+, stdlib concurrent.futures module provides a higher level API to threading, including passing return values or exceptions from a worker thread back to the main thread:", "Jake's answer is good, but if you don't want to use a threadpool (you don't know how many threads you'll need, but create them as needed) then a good way to transmit information between threads is the built-in Queue.Queue class, as it offers thread safety.", "Another solution that doesn't require changing your existing code:"]}, {"question": "How can I get a list of the values in a dict in Python?", "answers": ["dict.values returns a view of the dictionary's values, so you have to wrap it in list:", "You can use * operator to unpack dict_values:", "There should be one \u2012 and preferably only one \u2012 obvious way to do it.", "Follow the below example --", "Purely for visual purposes. Does not produce a useful product... Only useful if you want a long dictionary to print in a paragraph type form."]}, {"question": "I've seen a lot of questions that ask about pivot tables.  Even if they don't know that they are asking about pivot tables, they usually are.  It is virtually impossible to write a canonical question and answer that encompasses all aspects of pivoting...", "answers": ["We start by answering the first question:", "To extend @piRSquared's answer another version of Question 10", "To better understand how pivot works you can look at the example from Pandas documentation:"]}, {"question": "I have issue after installing the matplotlib package unable to import matplotlib.pyplot as plt. Any suggestion will be greatly appreciate.  ", "answers": ["Problem Cause"]}, {"question": "Is it possible to declare more than one variable using a with statement in Python?", "answers": ["It is possible in Python 3 since v3.1 and  Python 2.7. The new with syntax supports multiple context managers:", "Note that if you split the variables into lines, prior to Python 3.10 you must use backslashes to wrap the newlines.", "contextlib.nested supports this:", "Since Python 3.3, you can use the class ExitStack from the contextlib module.", "I think you want to do this instead:"]}, {"question": "I have a pandas DataFrame and I want to delete rows from it where the length of the string in a particular column is greater than 2.", "answers": ["To directly answer this question's original title \"How to delete rows from a pandas DataFrame based on a conditional expression\" (which I understand is not necessarily the OP's problem but could help other users coming across this question) one way to do this is to use the drop method:", "When you do len(df['column name']) you are just getting one number, namely the number of rows in the DataFrame (i.e., the length of the column itself).  If you want to apply len to each element in the column, use df['column name'].map(len).  So try", "You can assign the DataFrame to a filtered version of itself:", "I will expand on @User's generic solution to provide a drop free alternative. This is for folks directed here based on the question's title (not OP 's problem)  ", "In pandas you can do str.len with your boundary and using the Boolean result to filter it . "]}, {"question": "While reading up the documentation for dict.copy(), it says that it makes a shallow copy of the dictionary. Same goes for the book I am following (Beazley's Python Reference), which says: ", "answers": ["By \"shallow copying\" it means the content of the dictionary is not copied by value, but just creating a new reference.", "Take this example:", "It's not a matter of deep copy or shallow copy, none of what you're doing is deep copy.", "Adding to kennytm's answer. When you do a shallow copy parent.copy() a new dictionary is created with same keys,but the values are not copied they are referenced.If you add a new value to parent_copy it won't effect parent because parent_copy is a new dictionary not reference.", "\"new\" and \"original\" are different dicts, that's why you can update just one of them.. The items are shallow-copied, not the dict itself."]}, {"question": "In Python, when should you use lists and when tuples?", "answers": ["Tuples are fixed size in nature whereas lists are dynamic.\nIn other words, a tuple is immutable whereas a list is mutable.", "There's a strong culture of tuples being for heterogeneous collections, similar to what you'd use structs for in C, and lists being for homogeneous collections, similar to what you'd use arrays for.  But I've never quite squared this with the mutability issue mentioned in the other answers.  Mutability has teeth to it (you actually can't change a tuple), while homogeneity is not enforced, and so seems to be a much less interesting distinction.", "I believe (and I am hardly well-versed in Python) that the main difference is that a tuple is immutable (it can't be changed in place after assignment) and a list is mutable (you can append, change, subtract, etc).", "Must it be mutable?  Use a list.\nMust it not be mutable?  Use a tuple.", "The first thing you need to decide is whether the data structure needs to be mutable or not. As has been mentioned, lists are mutable, tuples are not. This also means that tuples can be used for dictionary keys, wheres lists cannot."]}, {"question": "I need a way to tell what mode the shell is in from within the shell.", "answers": ["One way is to look at sys.maxsize as documented here:", "When starting the Python interpreter in the terminal/command line you may also see a line like: ", "Basically a variant on Matthew Marshall's answer (with struct from the std.library):", "Try using ctypes to get the size of a void pointer:", "Open python console:"]}, {"question": "I have a list of strings like this:", "answers": ["Shortest Code", "Zip the two lists together, sort it, then take the parts you want:", "Also, if you don't mind using numpy arrays (or in fact already are dealing with numpy arrays...), here is another nice solution:", "The most obvious solution to me is to use the key keyword arg.", "more_itertools has a tool for sorting iterables in parallel:"]}, {"question": "I am trying to understand when to use __getattr__ or __getattribute__.  The documentation mentions __getattribute__ applies to new-style classes. What are new-style classes?  ", "answers": ["A key difference between __getattr__ and __getattribute__ is that __getattr__ is only invoked if the attribute wasn't found the usual ways.  It's good for implementing a fallback for missing attributes, and is probably the one of two you want.", "Lets see some simple examples of both __getattr__ and __getattribute__ magic methods.", "This is just an example based on Ned Batchelder's explanation. ", "New-style classes inherit from object, or from another new style class:", "New-style classes are ones that subclass \"object\" (directly or indirectly).  They have a __new__ class method in addition to __init__ and have somewhat more rational low-level behavior."]}, {"question": "I want to change the key of an entry in a Python dictionary.", "answers": ["Easily done in 2 steps:", "if you want to change all the keys:", "pop'n'fresh", "In python 2.7 and higher, you can use dictionary comprehension:\nThis is an example I encountered while reading a CSV using a DictReader. The user had suffixed all the column names with ':'", "Since keys are what dictionaries use to lookup values, you can't really change them. The closest thing you can do is to save the value associated with the old key, delete it, then add a new entry with the replacement key and the saved value. Several of the other answers illustrate different ways this can be accomplished."]}, {"question": "I would like to know how to check whether a string starts with \"hello\" in Python.", "answers": ["More info about startswith.", "RanRag has already answered it for your specific question.", "In case you want to match multiple words to your magic word, you can pass the words to match as a tuple:", "Can also be done this way..", "I did a little experiment to see which of these methods"]}, {"question": "Whenever I am trying to install any package using pip, I am getting this import error:", "answers": ["You must have inadvertently upgraded your system pip (probably through something like sudo pip install pip --upgrade)", "We can clear the error by modifying the pip file.", "Thanks to Anthony's explanation above, you can retain your original system pip (in /usr/bin/ and dist-packages/) and remove the manually-installed pip (in ~/.local/) to resolve the conflict:", "resolved in one step only.", "Use python -m pip install instead of pip install"]}, {"question": "What exactly are the Python scoping rules?", "answers": ["Actually, a concise rule for Python Scope resolution, from Learning Python, 3rd. Ed.. (These rules are specific to variable names, not attributes. If you reference it without a period, these rules apply.)", "Essentially, the only thing in Python that introduces a new scope is a function definition.  Classes are a bit of a special case in that anything defined directly in the body is placed in the class's namespace, but they are not directly accessible from within the methods (or nested classes) they contain.", "There was no thorough answer concerning Python3 time, so I made an answer here. Most of what is described here is detailed in the 4.2.2 Resolution of names of the Python 3 documentation.", "A slightly more complete example of scope:", "The scoping rules for Python 2.x have been outlined already in other answers. The only thing I would add is that in Python 3.0, there is also the concept of a non-local scope (indicated by the 'nonlocal' keyword). This allows you to access outer scopes directly, and opens up the ability to do some neat tricks, including lexical closures (without ugly hacks involving mutable objects)."]}, {"question": "I have a try...except block in my code and When an exception is throw. I really just want to continue with the code because in that case, everything is still able to run just fine. The problem is if you leave the except: block empty or with a #do nothing, it gives you a syntax error. I can't use continue because its not in a loop. Is there a keyword i can use that tells the code to just keep going?", "answers": ["Python docs for the pass statement", "The standard \"nop\" in Python is the pass statement:", "There's a new way to do this coming in Python 3.4:", "Try this:"]}, {"question": "I have a list of tuples that looks something like this:", "answers": ["Try using the key keyword with sorted().", "IMO using itemgetter is more readable in this case than the solution by @cheeken. It is\nalso faster since almost all of the computation will be done on the c side (no pun intended) rather than through the use of lambda.  ", "Adding to Cheeken's answer,\nThis is how you sort a list of tuples by the 2nd item in descending order.", "As a python neophyte, I just wanted to mention that if the data did actually look like this: ", "For an in-place sort, use"]}, {"question": "How would I create a list with values between two values I put in? \nFor example, the following list is generated for values from 11 to 16:", "answers": ["Use range. In Python 2.x it returns a list so all you need is:", "You seem to be looking for range():", "Try:", "assuming you want to have a range between x to y", "If you are looking for range like function which works for float type, then here is a very good article."]}, {"question": "I have a dictionary which looks like this: di = {1: \"A\", 2: \"B\"}", "answers": ["You can use .replace.  For example:", "If your dictionary has more than a couple of keys, using map can be much faster than replace.  There are two versions of this approach, depending on whether your dictionary exhaustively maps all possible values (and also whether you want non-matches to keep their values or be converted to NaNs):", "There is a bit of ambiguity in your question. There are at least three two interpretations:", "DSM has the accepted answer, but the coding doesn't seem to work for everyone.  Here is one that works with the current version of pandas (0.23.4 as of 8/2018):", "Given map is faster than replace (@JohnE's solution) you need to be careful with Non-Exhaustive mappings where you intend to map specific values to NaN. The proper method in this case requires that you mask the Series when you .fillna, else you undo the mapping to NaN."]}, {"question": "I'm using Python's logging module to log some debug strings to a file which works pretty well. Now in addition, I'd like to use this module to also print the strings out to stdout. How do I do this? In order to log my strings to a file I use following code:", "answers": ["Just get a handle to the root logger and add the StreamHandler. The StreamHandler writes to stderr. Not sure if you really need stdout over stderr, but this is what I use when I setup the Python logger and I also add the FileHandler as well. Then all my logs go to both places (which is what it sounds like you want).", "logging.basicConfig() can take a keyword argument handlers since Python 3.3, which simplifies logging setup a lot, especially when setting up multiple handlers with the same formatter:", "Adding a StreamHandler without arguments goes to stderr instead of stdout. If some other process has a dependency on the stdout dump (i.e. when writing an NRPE plugin), then make sure to specify stdout explicitly or you might run into some unexpected troubles.", "Here is a complete, nicely wrapped solution based on Waterboy's answer and various other sources. It supports logging to both console and log file, allows for different log level settings, provides colorized output and is easily configurable (also available as Gist):", "Either run basicConfig with stream=sys.stdout as the argument prior to setting up any other handlers or logging any messages, or manually add a StreamHandler that pushes messages to stdout to the root logger (or any other logger you want, for that matter)."]}, {"question": "Is there a way to expand a Python tuple into a function - as actual parameters?", "answers": ["myfun(*some_tuple) does exactly what you request. The * operator simply unpacks the tuple (or any iterable) and passes them as the positional arguments to the function. Read more about unpacking arguments.", "Note that you can also expand part of argument list:", "Take a look at the Python tutorial section 4.7.3 and 4.7.4.\nIt talks about passing tuples as arguments.", "This is the functional programming method. It lifts the tuple expansion feature out of syntax sugar:", "Similar to @Dominykas's answer, this is a decorator that converts multiargument-accepting functions into tuple-accepting functions:"]}, {"question": "How to fix it?", "answers": ["Without seeing the source it's difficult to know the root cause, so I'll have to speak generally.", "Finally I got it:", "This is the classic \"unicode issue\".   I believe that explaining this is beyond the scope of a StackOverflow answer to completely explain what is happening.  ", "In some cases, when you check your default encoding (print sys.getdefaultencoding()), it returns that you are using ASCII. If you change to UTF-8, it doesn't work, depending on the content of your variable.\nI found another way:    ", "I was searching to solve the following error message:"]}, {"question": "I have a parameter file of the form:", "answers": ["str.replace() v2|v3 does not recognize regular expressions. ", "You are looking for the re.sub function.", "As a summary ", "re.sub is definitely what you are looking for.  And so you know, you don't need the anchors and the wildcards."]}, {"question": "This \"underscoring\" seems to occur a lot, and I was wondering if this was a requirement in the Python language, or merely a matter of convention?", "answers": ["From the Python PEP 8 -- Style Guide for Python Code:", "The other respondents are correct in describing the double leading and trailing underscores as a naming convention for \"special\" or \"magic\" methods.", "Names surrounded by double underscores are \"special\" to Python. They're listed in the Python Language Reference, section 3, \"Data model\".", "Actually I use _ method names when I need to differ between parent and child class names. I've read some codes that used this way of creating parent-child classes. As an example I can provide this code: ", "Added an example to understand the use of __ in python. Here is the list of All __"]}, {"question": "I need to print some stuff only when a boolean variable is set to True. So, after looking at this, I tried with a simple example:", "answers": ["Python does not have a trailing if statement.", "Inline if-else EXPRESSION must always contain else clause, e.g:", "The 'else' statement is mandatory. You can do stuff like this :", "If you don't want to from __future__ import print_function you can do the following:", "Since 2.5 you can use equivalent of C\u2019s \u201d?:\u201d ternary conditional operator and the syntax is:"]}, {"question": "I want to plot a graph with one logarithmic axis using matplotlib. ", "answers": ["You can use the Axes.set_yscale method. That allows you to change the scale after the Axes object is created. That would also allow you to build a control to let the user pick the scale if you needed to.", "First of all, it's not very tidy to mix pylab and pyplot code. What's more, pyplot style is preferred over using pylab.", "You simply need to use semilogy instead of plot:", "if you want to change the base of logarithm, just add:", "I know this is slightly off-topic, since some comments mentioned the ax.set_yscale('log') to be \"nicest\" solution I thought a rebuttal could be due. I would not recommend using ax.set_yscale('log') for histograms and bar plots. In my version (0.99.1.1) i run into some rendering problems - not sure how general this issue is. However both bar and hist has optional arguments to set the y-scale to log, which work fine."]}, {"question": "When writing custom classes it is often important to allow equivalence by means of the == and != operators. In Python, this is made possible by implementing the __eq__ and __ne__ special methods, respectively. The easiest way I've found to do this is the following method:", "answers": ["Consider this simple problem:", "You need to be careful with inheritance:", "The way you describe is the way I've always done it. Since it's totally generic, you can always break that functionality out into a mixin class and inherit it in classes where you want that functionality.", "Not a direct answer but seemed relevant enough to be tacked on as it saves a bit of verbose tedium on occasion. Cut straight from the docs...", "You don't have to override both __eq__ and __ne__ you can override only __cmp__ but this will make an implication on the result of ==, !==, < , > and so on."]}, {"question": "Let's say I have two lists, l1 and l2.  I want to perform l1 - l2, which returns all elements of l1 not in l2.", "answers": ["Python has a language feature called List Comprehensions that is perfectly suited to making this sort of thing extremely easy. The following statement does exactly what you want and stores the result in l3:", "One way is to use sets:", "Comparing the performance of all the answers mentioned here on Python 3.9.1 and Python 2.7.16.", "Expanding on Donut's answer and the other answers here, you can get even better results by using a generator comprehension instead of a list comprehension, and by using a set data structure (since the in operator is O(n) on a list but O(1) on a set).", "Use the Python set type.   That would be the most Pythonic.  :)"]}, {"question": "I have a set like this:", "answers": ["e.g, keep.update(xrange(11)) for your specific example.  Or, if you have to produce the values in a loop for some other reason,", "Define set", "You can also use the | operator to concatenate two sets (union in set theory):", "Use update like this:", "This question is the first one that shows up on Google when one looks up \"Python how to add elements to set\", so it's worth noting explicitly that, if you want to add a whole string to a set, it should be added with .add(), not .update()."]}, {"question": "Is it possible to read binary MATLAB .mat files in Python?", "answers": ["An import is required, import scipy.io...", "Neither scipy.io.savemat, nor scipy.io.loadmat work for MATLAB arrays version 7.3. But the good part is that MATLAB version 7.3 files are hdf5 datasets. So they can be read using a number of tools, including NumPy.", "First save the .mat file as:", "There is a nice package called mat4py which can easily be installed using", "Reading the file"]}, {"question": "Why are there no ++ and -- operators in Python?", "answers": ["It's not because it doesn't make sense; it makes perfect sense to define \"x++\" as \"x += 1, evaluating to the previous binding of x\".", "This original answer I wrote is a myth from the folklore of computing: debunked by Dennis Ritchie as \"historically impossible\" as noted in the letters to the editors of Communications of the ACM July 2012 doi:10.1145/2209249.2209251", "I always assumed it had to do with this line of the zen of python:", "Of course, we could say \"Guido just decided that way\", but I think the question is really about the reasons for that decision. I think there are several reasons:", "Because, in Python, integers are immutable (int's += actually returns a different object)."]}, {"question": "What is the difference between iterators and generators? Some examples for when you would use each case would be helpful.", "answers": ["iterator is a more general concept: any object whose class has a __next__ method (next in Python 2) and an __iter__ method that does return self.", "In summary: Iterators are objects that have an __iter__ and a __next__ (next in Python 2) method. Generators provide an easy, built-in way to create instances of Iterators.", "Iterators:", "Adding an answer because none of the existing answers specifically address the confusion in the official literature.", "Everybody has a really nice and verbose answer with examples and I really appreciate it. I just wanted to give a short few lines answer for people who are still not quite clear conceptually:"]}, {"question": "Set_up: I have a .py file for each function I need to use in a program.", "answers": ["There isn't any need to add file.py while importing. Just write from file import function, and then call the function using function(a, b). The reason why this may not work, is because file is one of Python's core modules, so I suggest you change the name of your file.", "First of all you do not need a .py.", "You can do this in 2 ways. First is just to import the specific function you want from file.py. To do this use", "If your file is in the different package structure and you want to call it from a different package, then you can call it in that fashion:", "You can call the function from a different directory as well, in case you cannot or do not want to have the function in the same directory you are working. You can do this in two ways (perhaps there are more alternatives, but these are the ones that have worked for me)."]}, {"question": "list.append() is the obvious choice for adding to the end of a list.  Here's a reasonable explanation for the missing list.prepend().  Assuming my list is short and performance concerns are negligible, is ", "answers": ["The s.insert(0, x) form is the most common.", "If you can go the functional way, the following is pretty clear", "You don't usually want to repetitively prepend to a list in Python.", "If someone finds this question like me, here are my performance tests of proposed methods:", "In my opinion, the most elegant and idiomatic way of prepending an element or list to another list, in Python, is using the expansion operator * (also called unpacking operator),"]}, {"question": "I have the following DataFrame:", "answers": ["The idiomatic way to do this with Pandas is to use the .sample method of your dataframe to sample all rows without replacement:", "You can simply use sklearn for this", "You can shuffle the rows of a dataframe by indexing with a shuffled index. For this, you can eg use np.random.permutation (but np.random.choice is also a possibility):", "TL;DR: np.random.shuffle(ndarray) can do the job.\nSo, in your case ", "What is also useful, if you use it for Machine_learning and want to seperate always the same data, you could use:"]}, {"question": "I read through the zipfile documentation, but couldn't understand how to unzip a file, only how to zip a file. How do I unzip all the contents of a zip file into the same directory?", "answers": ["That's pretty much it!", "If you are using Python 3.2 or later:", "zipfile is a somewhat low-level library. Unless you need the specifics that it provides, you can get away with shutil's higher-level functions make_archive and unpack_archive.", "Use the extractall method, if you're using Python 2.6+", "You can also import only ZipFile:"]}, {"question": "How can I achieve the equivalents of SQL's IN and NOT IN?", "answers": ["You can use pd.Series.isin.", "Alternative solution that uses .query() method:", "Pandas offers two methods: Series.isin and DataFrame.isin for Series and DataFrames, respectively.", "I've been usually doing generic filtering over rows like this:", "Collating possible solutions from the answers:"]}, {"question": "NumPy proposes a way to get the index of the maximum value of an array via np.argmax.", "answers": ["Newer NumPy versions (1.8 and up) have a function called argpartition for this. To get the indices of the four largest elements, do", "The simplest I've been able to come up with is:", "Simpler yet:", "Use:", "If you happen to be working with a multidimensional array then you'll need to flatten and unravel the indices:"]}, {"question": "How can I represent an infinite number in python? No matter which number you enter in the program, no number should be greater than this representation of infinity.", "answers": ["In Python, you can do:", "Since Python 3.5 you can use math.inf:", "No one seems to have mentioned about the negative infinity explicitly, so I think I should add it.", "I don't know exactly what you are doing, but float(\"inf\") gives you a float Infinity, which is greater than any other number.", "There is an infinity in the NumPy library: from numpy import inf. To get negative infinity one can simply write -inf."]}, {"question": "What's the difference between:", "answers": ["means to call SomeBaseClass's __init__. while", "The benefits of super() in single-inheritance are minimal -- mostly, you don't have to hard-code the name of the base class into every method that uses its parent methods.", "I had played a bit with super(), and had recognized that we can change calling order.", "Doesn't all of this assume that the base class is a new-style class?", "When calling super() to resolve to a parent's version of a classmethod, instance method, or staticmethod, we want to pass the current class whose scope we are in as the first argument, to indicate which parent's scope we're trying to resolve to, and as a second argument the object of interest to indicate which object we're trying to apply that scope to."]}, {"question": "What is the quickest way to HTTP GET in Python if I know the content will be a string? I am searching the documentation for a quick one-liner like:", "answers": ["Python 3:", "You could use a library called requests.", "If you want solution with httplib2 to be oneliner consider instantiating anonymous Http object", "Have a look at httplib2, which - next to a lot of very useful features - provides exactly what you want.", "It's simple enough with the powerful urllib3 library."]}, {"question": "I have created a Pandas DataFrame", "answers": ["RukTech's answer, df.set_value('C', 'x', 10), is far and away faster than the options I've suggested below. However, it has been slated for deprecation.", "Update: The .set_value method is going to be deprecated. .iat/.at are good replacements, unfortunately pandas provides little documentation", "You can also use a conditional lookup using .loc as seen here:", "Try using df.loc[row_index,col_indexer] = value", "The recommended way (according to the maintainers) to set a value is:"]}, {"question": "I'm coming from the Java world and reading Bruce Eckels' Python 3 Patterns, Recipes and Idioms. ", "answers": ["It's cultural.  In Python, you don't write to other classes' instance or class variables.  In Java, nothing prevents you from doing the same if you really want to - after all, you can always edit the source of the class itself to achieve the same effect. Python drops that pretence of security and encourages programmers to be responsible. In practice, this works very nicely.", "Private variables in python is more or less a hack: the interpreter intentionally renames the variable.", "As correctly mentioned by many of the comments above, let's not forget the main goal of Access Modifiers: To help users of code understand what is supposed to change and what is supposed not to. When you see a private field you don't mess around with it. So it's mostly syntactic sugar which is easily achieved in Python by the _ and __.", "There is a variation of private variables in the underscore convention.", "As mentioned earlier, you can indicate that a variable or method is private by prefixing it with an underscore. If you don't feel like this is enough, you can always use the property decorator. Here's an example:"]}, {"question": "What I need to do", "answers": ["In general, to make a naive datetime timezone-aware, use the localize method:", "All of these examples use an external module, but you can achieve the same result using just the datetime module, as also presented in this SO answer:", "I wrote this Python 2 script in 2011, but never checked if it works on Python 3.", "I use this statement in Django to convert an unaware time to an aware:", "Python 3.9 adds the zoneinfo module so now only the standard library is needed!"]}, {"question": "I found some answers online, but I have no experience with regular expressions, which I believe is what is needed here.", "answers": ["Luckily, Python has this built-in :)", "Do a str.replace('; ', ', ') and then a str.split(', ')", "Here's a safe way for any iterable of delimiters, using regular expressions:", "In response to Jonathan's answer above, this only seems to work for certain delimiters.  For example:", "This is how the regex look like:"]}, {"question": "Having issue filtering my result dataframe with an or condition. I want my result df to extract all column var values that are above 0.25 and below -0.25.", "answers": ["The or and and python statements require truth-values. For pandas these are considered ambiguous so you should use \"bitwise\" | (or) or & (and) operations:", "Well pandas use bitwise & | and each condition should be wrapped in a ()", "For boolean logic, use & and |.", "Or, alternatively, you could use Operator module. More detailed information is here Python docs", "This excellent answer explains very well what is happening and provides a solution. I would like to add another solution that might be suitable in similar cases: using the query method:"]}, {"question": "I have a data frame df and I use several columns from it to groupby:", "answers": ["The simplest way to get row counts per group is by calling .size(), which returns a Series:", "On groupby object, the agg function can take a list to apply several aggregation methods at once. This should give you the result you need:", "Returns count, mean, std, and other useful statistics per-group.", "To get multiple stats, collapse the index, and retain column names:", "We can easily do it by using groupby and count. But, we should remember to use reset_index()."]}, {"question": "I've come across situations where a current version of a package seems not to be working and requires reinstallation. But pip install -U won't touch a package that is already up-to-date. I see how to force a reinstallation by first uninstalling (with pip uninstall) and then installing, but is there a way to simply force an \"update\" to a nominally current version in a single step?", "answers": ["When upgrading, reinstall all packages even if they are already up-to-date.", "You might want to have all three options: --upgrade and --force-reinstall ensures reinstallation, while --no-deps avoids reinstalling dependencies.", "If you want to reinstall packages specified in a requirements.txt file, without upgrading, so just reinstall the specific versions specified in the requirements.txt file:", "doesn't appear to force reinstall using python2.7 with pip-1.5", "In the case you need to force the reinstallation of pip itself you can do:"]}, {"question": "I want to create a series of lists, all of varying lengths. Each list will contain the same element e, repeated n times (where n = length of the list).", "answers": ["You can also write:", "Be careful when the item being repeated is a list. The list will not be cloned: all the elements will refer to the same list!", "Depending on your use-case, you want to use different techniques with different semantics.", "Itertools has a function just for that:", "As others have pointed out, using the * operator for a mutable object duplicates references, so if you change one you change them all. If you want to create independent instances of a mutable object, your xrange syntax is the most Pythonic way to do this. If you are bothered by having a named variable that is never used, you can use the anonymous underscore variable."]}, {"question": "I have four different files named: main.py, vector.py, entity.py and physics.py. I will not post all the code, just the imports, because I think that's where the error is (If you want, I can post more).", "answers": ["You have circular dependent imports. physics.py is imported from entity before class Ent is defined and physics tries to import entity that is already initializing. Remove the dependency to physics from entity module.", "While you should definitely avoid circular dependencies, you can defer imports in python.", "This is a circular dependency. It can be solved without any structural modifications to the code. The problem occurs because in vector you demand that entity be made available for use immediately, and vice versa. The reason for this problem is that you asking to access the contents of the module before it is ready -- by using from x import y. This is essentially the same as", "To make logic clear is very important. This problem appear, because the reference become a dead loop.", "In my case, I was working in a Jupyter notebook and this was happening due the import already being cached from when I had defined the class/function inside my working file. "]}, {"question": "I've got a dict that has a whole bunch of entries. I'm only interested in a select few of them. Is there an easy way to prune all the other ones out?", "answers": ["Constructing a new dict: ", "Slightly more elegant dict comprehension:", "Here's an example in python 2.6:", "You can do that with project function from my funcy library:", "Code 1:"]}, {"question": "Given the name of a Python package that can be installed with pip, is there any way to find out a list of all the possible versions of it that pip could install? Right now it's trial and error.", "answers": ["For pip >= 21.2 use:", "(update: As of March 2020, many people have reported that yolk, installed via pip install yolk3k, only returns latest version.  Chris's answer seems to have the most upvotes and worked for me)", "You don't need a third party package to get this information. pypi provides simple JSON feeds for all packages under", "Update:\nAs of Sep 2017 this method no longer works: --no-install was removed in pip 7", "I came up with dead-simple bash script. Thanks to jq's author."]}, {"question": "I want to add an item to an existing dictionary in Python. For example, this is my dictionary:", "answers": ["Easy as py.", "It can be as simple as:", "It occurred to me that you may have actually be asking how to implement the + operator for dictionaries, the following seems to work:"]}, {"question": "I am working with code that throws a lot of (for me at the moment) useless warnings using the warnings library. Reading (/scanning) the documentation I only found a way to disable warnings for single functions. But I don't want to change so much of the code.", "answers": ["Look at the Temporarily Suppressing Warnings section of the Python docs:", "There's the -W option.", "You can also define an environment variable (new feature in 2010 - i.e. python 2.7)", "If you don't want something complicated, then: ", "This is an old question but there is some newer guidance in PEP 565 that to turn off all warnings if you're writing a python application you should use:"]}, {"question": "How does one round a number UP in Python?", "answers": ["The ceil (ceiling) function:", "I know this answer is for a question from a while back, but if you don't want to import math and you just want to round up, this works for me.", "Interesting Python 2.x issue to keep in mind:", "If working with integers, one way of rounding up is to take advantage of the fact that // rounds down: Just do the division on the negative number, then negate the answer.  No import, floating point, or conditional needed.", "You might also like numpy:"]}, {"question": "Is there an easy way with Python f-strings to fix the number of digits after the decimal point? (Specifically f-strings, not other string formatting options like .format or %)", "answers": ["Include the type specifier in your format expression:", "When it comes to float numbers, you can use format specifiers:", "Adding to Rob\u1d69's answer: in case you want to print rather large numbers, using thousand separators can be a great help (note the comma).", "Adding to Rob's answer, you can use format specifiers with f strings (more here).", "Going further, Format strings have the below syntax. As you can see there is a lot more that can be done."]}, {"question": "Is there any way to make pip play well with multiple versions of Python? For example, I want to use pip to explicitly install things to either my site 2.5 installation or my site 2.6 installation.", "answers": ["The current recommendation is to use python -m pip, where python is the version of Python you would like to use. This is the recommendation because it works across all versions of Python, and in all forms of virtualenv. For example:", "On Windows, you can execute the pip module using a given Python version through the Python launcher, py.exe, if you chose to install it during Python 3 setup.", "/path/to/python2.{5,6} /path/to/pip install PackageName doesn't work?", "I had python 2.6 installed by default (Amazon EC2 AMI), but needed python2.7 plus some external packages for my application. Assuming you already installed python2.7 alongside with default python (2.6 in my case). Here is how to install pip and packages for non-default python2.7", "It worked for me in windows this way:"]}, {"question": "I am trying to fix how python plots my data.", "answers": ["You could explicitly set where you want to tick marks with plt.xticks:", "Another approach is to set the axis locator:", "I like this solution (from the Matplotlib Plotting Cookbook):", "In case anyone is interested in a general one-liner, simply get the current ticks and use it to set the new ticks by sampling every other tick.", "This is a bit hacky, but by far the cleanest/easiest to understand example that I've found to do this. It's from an answer on SO here:"]}, {"question": "I have a Unicode string in Python, and I would like to remove all the accents (diacritics).", "answers": ["Unidecode is the correct answer for this. It transliterates any unicode string into the closest possible representation in ascii text.", "How about this:", "I just found this answer on the Web:", "Actually I work on project compatible python 2.6, 2.7 and 3.4 and I have to create IDs from free user entries. ", "This handles not only accents, but also \"strokes\" (as in \u00f8 etc.):"]}, {"question": "Does time.time() in the Python time module return the system's time or the time in UTC?", "answers": ["The time.time() function returns the number of seconds since the epoch, as seconds.  Note that the \"epoch\" is defined as the start of January 1st, 1970 in UTC.  So the epoch is defined in terms of UTC and establishes a global moment in time.  No matter where you are \"seconds past epoch\" (time.time()) returns the same value at the same moment.", "This is for the text form of a timestamp that can be used in your text files. (The title of the question was different in the past, so the introduction to this answer was changed to clarify how it could be interpreted as the time. [updated 2016-01-14])", "Based on the answer from #squiguy, to get a true timestamp I would type cast it from float. ", "The answer could be neither or both.", "To get a local timestamp using datetime library, Python 3.x"]}, {"question": "I need a way to get a dictionary value if its key exists, or simply return None, if it does not.", "answers": ["You can use dict.get()", "Wonder no more. It's built into the language.", "Use dict.get", "You should use the get() method from the dict class", "If you want a more transparent solution, you can subclass dict to get this behavior:"]}, {"question": "How can I get the position of a character inside a string in Python?", "answers": ["There are two string methods for this, find() and index().  The difference between the two is what happens when the search string isn't found.  find() returns -1  and index() raises a ValueError.", "Just for a sake of completeness, if you need to find all positions of a character in a string, you can do the following:", "\"Long winded\" way", "Just for completion, in the case I want to find the extension in a file name in order to check it, I need to find the last '.', in this case use rfind:", "What happens when the string contains a duplicate character?\nfrom my experience with index() I saw that for duplicate you get back the same index."]}, {"question": "I want to fill out a string with spaces. I know that the following works for zero's:", "answers": ["You can do this with str.ljust(width[, fillchar]):", "For a flexible method that works even when formatting complicated string, you probably should use the string-formatting mini-language,", "The new(ish) string format method lets you do some fun stuff with nested keyword arguments. The simplest case:", "You can try this:", "Correct way of doing this would be to use Python's format syntax as described in the official documentation"]}, {"question": "Dictionaries are ordered in Python 3.6 (under the CPython implementation at least) unlike in previous incarnations. This seems like a substantial change, but it's only a short paragraph in the documentation. It is described as a CPython implementation detail rather than a language feature, but also implies this may become standard in the future.", "answers": ["Are dictionaries ordered in Python 3.6+?", "Below is answering the original first question:", "Update:\nGuido van Rossum announced on the mailing list that as of Python 3.7 dicts in all Python implementations must preserve insertion order.", "I wanted to add to the discussion above but don't have the reputation to comment.", "To fully answer this question in 2020, let me quote several statements from official Python docs:"]}, {"question": "I am trying to pass a list as an argument to a command line program. Is there an argparse option to pass a list as option?", "answers": ["Use the nargs option or the 'append' setting of the action option (depending on how you want the user interface to behave).", "I prefer passing a delimited string which I parse later in the script. The reasons for this are; the list can be of any type int or str, and sometimes using nargs I run into problems if there are multiple optional arguments and positional arguments.", "Additionally to nargs, you might want to use choices if you know the list in advance:", "Using nargs parameter in argparse's add_argument method", "If you are intending to make a single switch take multiple parameters, then you use nargs='+'. If your example '-l' is actually taking integers:"]}, {"question": "I'm just trying to streamline one of my classes and have introduced some functionality in the same style as the flyweight design pattern.", "answers": ["Use __new__ when you need to control\nthe creation of a new instance.", "__new__ is static class method, while __init__ is instance method. \n__new__ has to create the instance first, so __init__ can initialize it. Note that __init__ takes self as parameter. Until you create instance there is no self.", "In most well-known OO languages, an expression like SomeClass(arg1, arg2) will allocate a new instance, initialise the instance's attributes, and then return it.", "To quote the documentation:", "I realize that this question is quite old but I had a similar issue.\nThe following did what I wanted:"]}, {"question": "How to set the current working directory in Python?", "answers": ["Try os.chdir", "Perhaps this is what you are looking for:", "To set the working directory:", "It work for Mac also ", "people using pandas package"]}, {"question": "After you train a model in Tensorflow: ", "answers": ["I am improving my answer to add more details for saving and restoring models. ", "In (and after) TensorFlow version 0.11.0RC1, you can save and restore your model directly by calling tf.train.export_meta_graph and tf.train.import_meta_graph according to https://www.tensorflow.org/programmers_guide/meta_graph.", "Adapted from the docs", "For TensorFlow version < 0.11.0RC1:", "My environment: Python 3.6, Tensorflow 1.3.0"]}, {"question": "Just like C, you can break a long line into multiple short lines. But in Python, if I do this, there will be an indent error... Is it possible?", "answers": ["From PEP 8 - Style Guide for Python Code:", "There is more than one way to do it.", "If you want to assign a long string to variable, you can do it as below:", "It works in Python too:", "When trying to enter continuous text (say, a query) do not put commas at the end of the line or you will get a list of strings instead of one long string:"]}, {"question": "How would one create an iterative function (or iterator object) in python?", "answers": ["Iterator objects in python conform to the iterator protocol, which basically means they provide two methods: __iter__()  and  __next__().  ", "There are four ways to build an iterative function:", "I see some of you doing return self in __iter__. I just wanted to note that __iter__ itself can be a generator (thus removing the need for __next__ and raising StopIteration exceptions)", "First of all the itertools module is incredibly useful for all sorts of cases in which an iterator would be useful, but here is all you need to create an iterator in python:", "This question is about iterable objects, not about iterators. In Python, sequences are iterable too so one way to make an iterable class is to  make it behave like a sequence, i.e. give it __getitem__ and __len__ methods. I have tested this on Python 2 and 3."]}, {"question": "Very similar to this question but with the difference that my figure can be as large as it needs to be.", "answers": ["Try using plt.tight_layout", "You can use plt.subplots_adjust to change the spacing between the subplots (source)", "I found that subplots_adjust(hspace = 0.001) is what ended up working for me. When I use space = None, there is still white space between each plot. Setting it to something very close to zero however seems to force them to line up. What I've uploaded here isn't the most elegant piece of code, but you can see how the hspace works. ", "Similar to tight_layout matplotlib now (as of version 2.2) provides constrained_layout. In contrast to tight_layout, which may be called any time in the code for a single optimized layout, constrained_layout is a property, which may be active and will optimze the layout before every drawing step. ", "The plt.subplots_adjust method:"]}, {"question": "Is there a way to select pytest tests to run from a file?\nFor example, a file foo.txt containing a list of tests to be executed:", "answers": ["You can use -k option to run test cases with different patterns:", "Pytest supports several ways to run and select tests from the command-line.", "My answer provides a ways to run a subset of test in different scenarios.", "Method 1: Randomly selected tests. Long and ugly.", "If you have the same method name in two different classes and you just want to run one of them, this works:"]}, {"question": "I have both python2.7 and python3.2 installed in Ubuntu 12.04.\nThe symbolic link python links to python2.7.", "answers": ["Ubuntu 12.10+ and Fedora 13+ have a package called python3-pip which will install pip-3.2 (or pip-3.3, pip-3.4 or pip3 for newer versions) without needing this jumping through hoops.", "You may want to build a virtualenv of python3, then install packages of python3 after activating the virtualenv. So your system won't be messed up :)", "Source: Shashank Bharadwaj's comment", "Well, on ubuntu 13.10/14.04, things are a little different.", "The easiest way to install latest pip2/pip3 and corresponding packages:"]}, {"question": "As we all know, there's list comprehension, like", "answers": ["You can use a generator expression:", "Raymond Hettinger (one of the Python core developers) had this to say about tuples in a recent tweet:", "Since Python 3.5, you can also use splat * unpacking syntax to unpack a generator expresion:", "As another poster macm mentioned, the fastest way to create a tuple from a generator is tuple([generator]).", "Comprehension works by looping or iterating over items and assigning them into a container, a Tuple is unable to receive assignments."]}, {"question": "I have a function in python that can either return a bool or a list. Is there a way to specify the return types using type hints?", "answers": ["From the documentation", "In case anyone landed here in search of \"how to specify types of multiple return values?\", use Tuple[type_value1, ..., type_valueN]", "The statement def foo(client_id: str) -> list or bool: when evaluated is equivalent to\ndef foo(client_id: str) -> list: and will therefore not do what you want.", "Python 3.10 (use |): Example for a function which takes a single argument that is either an int or str and returns either an int or str:", "In base Python simply do:"]}, {"question": "Simple question here:  I'm trying to get the size of my legend using matplotlib.pyplot to be smaller (i.e., the text to be smaller). The code I'm using goes something like this:", "answers": ["You can set an individual font size for the legend by adjusting the prop keyword. ", "using import matplotlib.pyplot as plt", "This should do", "There are also a few named fontsizes, apart from the size in points:", "Now in 2021, with matplotlib 3.4.2 you can set your legend fonts with"]}, {"question": "In the tensorflow API docs they use a keyword called logits. What is it? A lot of methods are written like:", "answers": ["The softmax+logits simply means that the function operates on the unscaled output of earlier layers and that the relative scale to understand the units is linear.  It means, in particular, the sum of the inputs may not equal 1, that the values are not probabilities (you might have an input of 5). Internally, it first applies softmax to the unscaled output, and then and then computes the cross entropy of those values vs. what they \"should\" be as defined by the labels.", "Short version:", "tf.nn.softmax computes the forward propagation through a softmax layer. You use it during evaluation of the model when you compute the probabilities that the model outputs.", "When we wish to constrain an output between 0 and 1, but our model architecture outputs unconstrained values, we can add a normalisation layer to enforce this.", "Above answers have enough description for the asked question."]}, {"question": "", "answers": ["Use:", "In case you want to store it to a file, you solve it using bbox_inches=\"tight\" argument:", "An easy option is to configure matplotlib to automatically adjust the plot size. It works perfectly for me and I'm not sure why it's not activated by default.", "plt.autoscale() worked for me.", "You can also set custom padding as defaults in your $HOME/.matplotlib/matplotlib_rc as follows.  In the example below I have modified both the bottom and left out-of-the-box padding:"]}, {"question": "I'm running Mountain Lion and the basic default Python version is 2.7. I downloaded Python 3.3 and want to set it as default.", "answers": ["Changing the default python executable's version system-wide could break some applications that depend on python2.", "You can solve it by symbolic link.", "Open ~/.bash_profile file.", "I encountered this issue as well, so I thought I should post an updated answer. Please note that this will only apply to a Mac-based setup (I haven't tried it with Windows or any flavor of Linux). The simplest way to get this working is to install Python via Brew. If you don't have brew installed, you will need to do that first. Once installed, do the following in at the terminal:", "Go to terminal type:"]}, {"question": "It's well known that comparing floats for equality is a little fiddly due to rounding and precision issues.", "answers": ["Python 3.5 adds the math.isclose and cmath.isclose functions as described in PEP 485.", "Is something as simple as the following not good enough?", "I would agree that Gareth's answer is probably most appropriate as a lightweight function/solution.", "Use Python's decimal module, which provides the Decimal class.", "I'm not aware of anything in the Python standard library (or elsewhere) that implements Dawson's AlmostEqual2sComplement function. If that's the sort of behaviour you want, you'll have to implement it yourself. (In which case, rather than using Dawson's clever bitwise hacks you'd probably do better to use more conventional tests of the form if abs(a-b) <= eps1*(abs(a)+abs(b)) + eps2 or similar. To get Dawson-like behaviour you might say something like if abs(a-b) <= eps*max(EPS,abs(a),abs(b)) for some small fixed EPS; this isn't exactly the same as Dawson, but it's similar in spirit."]}, {"question": "\nWant to improve this question? Update the question so it's on-topic for Stack Overflow.\r\n                ", "answers": ["If you're looking for something lightweight checkout schedule:", "You could just use normal Python argument passing syntax to specify your crontab.  For example, suppose we define an Event class as below:", "More or less same as above but concurrent using gevent :)", "None of the listed solutions even attempt to parse a complex cron schedule string. So, here is my version, using croniter. Basic gist:", "There isn't a \"pure python\" way to do this because some other process would have to launch python in order to run your solution.  Every platform will have one or twenty different ways to launch processes and monitor their progress.  On unix platforms, cron is the old standard.  On Mac OS X there is also launchd, which combines cron-like launching with watchdog functionality that can keep your process alive if that's what you want. Once python is running, then you can use the sched module to schedule tasks."]}, {"question": "I have a dataframe along the lines of the below:", "answers": ["If you only have two choices to select from:", "List comprehension is another way to create another column conditionally. If you are working with object dtypes in columns, like in your example, list comprehensions typically outperform most other methods.", "Another way in which this could be achieved is ", "The following is slower than the approaches timed here, but we can compute the extra column based on the contents of more than one column, and more than two values can be computed for the extra column.", "Here's yet another way to skin this cat, using a dictionary to map new values onto the keys in the list:"]}, {"question": "I would like to include image in a jupyter notebook.", "answers": ["You mustn't use quotation marks around the name of the image files in markdown!", "There are several ways to post an image in Jupyter notebooks:", "Alternatively, you can use a plain HTML <img src>, which allows you to change height and width and is still read by the markdown interpreter:", "Note: You should have a local copy of the image on your computer", "I know this is not fully relevant, but since this answer is ranked first many a times  when you search 'how to display images in Jupyter', please consider this answer as well. "]}, {"question": "I have a directory which hosts all of my Django apps (C:\\My_Projects). I want to add this directory to my PYTHONPATH so I can call the apps directly.", "answers": ["You know what has worked for me really well on windows.", "Windows 7 Professional\nI Modified @mongoose_za's answer to make it easier to change the python version:", "From Windows command line:", "Just append your installation path (ex. C:\\Python27\\) to the PATH variable in System variables. Then close and open your command line and type 'python'.", "These solutions work, but they work for your code ONLY on your machine. I would add a couple of lines to your code that look like this:"]}, {"question": "How do I format a floating number to a fixed width with the following requirements:", "answers": ["prints", "It has been a few years since this was answered, but as of Python 3.6 (PEP498) you could use the new f-strings:", "In python3 the following works:", "See Python 3.x format string syntax:", "You can also left pad with zeros. For example if you want number to have 9 characters length, left padded with zeros use: "]}, {"question": "I query a model:", "answers": ["If you mean to do aggregation you can use the aggregation features of the ORM:", "An easy solution, but not the proper way is to use raw SQL:", "You can also use the regroup template tag to group by attributes. From the docs:", "Django does not support free group by queries. I learned it in the very bad way. ORM is not designed to support stuff like what you want to do, without using custom SQL. You are limited to:", "The following module allows you to group Django models and still work with a QuerySet in the result: https://github.com/kako-nawao/django-group-by"]}, {"question": "I'm using argparse in Python 2.7 for parsing input options. One of my options is a multiple choice. I want to make a list in its help text, e.g.", "answers": ["Try using RawTextHelpFormatter:", "If you just want to override the one option, you should not use RawTextHelpFormatter. Instead subclass the HelpFormatter and provide a special intro for the options that should be handled \"raw\" (I use \"R|rest of help\"):", "Another easy way to do it is to include textwrap.", "I've faced similar issue (Python 2.7.6). I've tried to break down description section into several lines using RawTextHelpFormatter:", "I admit I found this a very frustrating experience as it seems many others have, given the number of solutions I see posted and the number of times I see this asked across the web. But I find most of these solutions far too complicated for my likes and I'd like share the tersest simplest solution I have for it."]}, {"question": "I am not sure why we need finally in try...except...finally statements. In my opinion, this code block", "answers": ["It makes a difference if you return early:", "You can use finally to make sure files or resources are closed or released regardless of whether an exception occurs, even if you don't catch the exception. (Or if you don't catch that specific exception.)", "They are not equivalent. finally code is run no matter what else happens*.\nIt is useful for cleanup code that has to run.", "To add to the other answers above, the finally clause executes no matter what whereas the else clause executes only if an exception was not raised.", "As explained in the documentation, the finally clause is intended to define clean-up actions that must be executed under all circumstances."]}, {"question": "I want to completely remove Python 2.7 from my Mac OS X 10.6.4. I managed to remove the entry from the PATH variable by reverting my .bash_profile. But I also want to remove all directories, files, symlinks, and entries that got installed by the Python 2.7 install package. I've got the install package from http://www.python.org/. What directories/files/configuration file entries do I need to remove? Is there a list somewhere?", "answers": ["NOTE: The steps listed below do not affect the Apple-supplied Python 2.7; they only remove a third-party Python framework, like those installed by python.org installers.", "This one works:", "Create the symlink to latest version ", "If you installed it using the PKG installer, you can do:", "Trying to uninstall Python with "]}, {"question": "I need to produce a screencast of an ipython session, and to avoid confusing viewers, I want to disable all warnings emitted by warnings.warn calls from different packages. Is there a way to configure the ipythonrc file to automatically disable all such warnings?", "answers": ["I eventually figured it out. Place:", "I hide the warnings in the pink boxes by running the following code in a cell:", "The accepted answer does not work in Jupyter (at least when using some libraries). ", "For jupyter lab this should work (@Alasja)"]}, {"question": "How would you say does not equal?", "answers": ["Use !=. See comparison operators. For comparing object identities, you can use the keyword is and its negation is not.", "Not equal  !=  (vs equal ==)", "There's the != (not equal) operator that returns True when two values differ, though be careful with the types because \"1\" != 1. This will always return True and \"1\" == 1 will always return False, since the types differ. Python is dynamically, but strongly typed, and other statically typed languages would complain about comparing different types.", "You can use both != or <>.", "Seeing as everyone else has already listed most of the other ways to say not equal I will just add:"]}, {"question": "When I try to use a print statement in Python, it gives me this error:", "answers": ["This error message means that you are attempting to use Python 3 to follow an example or run a program that uses the Python 2 print statement:", "Unfortunately, the old xkcd comic isn't completely up to date anymore.", "There is a change in syntax from Python 2 to Python 3.\nIn Python 2,", "Basically, since Python 3.x you need to use print with parenthesis.", "If your code should work in both Python 2 and 3, you can achieve this by loading this at the beginning of your program:"]}, {"question": "Like most Python developers, I typically keep a console window open with the Python interpreter running to test commands, dir() stuff, help() stuff, etc.", "answers": ["As you mentioned, you can do a system call:", "here something handy that is a little more cross-platform", "Well, here's a quick hack:", "This is the simplest thing you can do and it doesn't require any additional libraries. It clears the screen and returns >>> to the top left corner.", "You have number of ways doing it on Windows:"]}, {"question": "What does np.random.seed do in the below code from a Scikit-Learn tutorial? I'm not very familiar with NumPy's random state generator stuff, so I'd really appreciate a layman's terms explanation of this.", "answers": ["np.random.seed(0) makes the random numbers predictable", "If you set the np.random.seed(a_fixed_number) every time you call the numpy's other random function, the result will be the same:", "As noted, numpy.random.seed(0) sets the random seed to 0, so the pseudo random numbers you get from random will start from the same point. This can be good for debuging in some cases.  HOWEVER, after some reading, this seems to be the wrong way to go at it, if you have threads because it is not thread safe.", "I have used this very often in neural networks. It is well known that when we start training a neural network we randomly initialise the weights. The model is trained on these weights on a particular dataset. After number of epochs you get trained set of weights. ", "I hope to give a really short answer:"]}, {"question": "I have a dataset", "answers": ["Use groupby and count:", "If you want to apply to all columns you can use:", "This short little line of code will give you the output you want.", "value_counts - Returns object containing counts of unique values", "In 0.18.1 groupby together with count does not give the frequency of unique values:"]}, {"question": "What is the way to update a package using pip?\nthose do not work:", "answers": ["The way is", "For a non-specific package and a more general solution, you can check out pip-review. A tool that checks what packages could/should be updated.", "use this code in teminal :", "tl;dr script to update all installed packages", "Save as xx.py\nThen run Python3 xx.py\nEnvironment: python3.5+ pip10.0+"]}, {"question": "I've heard it said that multiline lambdas can't be added in Python because they would clash syntactically with the other syntax constructs in Python.  I was thinking about this on the bus today and realized I couldn't think of a single Python construct that multiline lambdas clash with.  Given that I know the language pretty well, this surprised me.", "answers": ["Guido van Rossum (the inventor of Python) answers this exact question himself in an old blog post.\nBasically, he admits that it's theoretically possible, but that any proposed solution would be un-Pythonic:", "Look at the following:", "This is generally very ugly (but sometimes the alternatives are even more ugly), so a workaround is to make a braces expression:", "A couple of relevant links:", "[Edit Edit] Since this question is somehow still active 12 years after being asked. I will continue the tradition of amending my answer every 4 years or so."]}, {"question": "Do you know if there is a built-in function to build a dictionary from an arbitrary object? I'd like to do something like this:", "answers": ["Note that best practice in Python 2.7 is to use new-style classes (not needed with Python 3), i.e.", "Instead of x.__dict__, it's actually more pythonic to use vars(x).", "The dir builtin will give you all the object's attributes, including special methods like __str__, __dict__ and a whole bunch of others which you probably don't want. But you can do something like:", "I've settled with a combination of both answers:", "I thought I'd take some time to show you how you can translate an object to dict via dict(obj)."]}, {"question": "If I have a class...", "answers": ["In Python, this:", "In simple words.", "Something else to consider when this type of error is encountered:", "Newcomer to Python, I had this issue when I was using the Python's ** feature in a wrong way. Trying to call this definition from somewhere:", "As mentioned in other answers - when you use an instance method you need to pass self as the first argument - this is the source of the error."]}, {"question": "In Python, how do I read in a binary file and loop over each byte of that file?", "answers": ["Python 2.4 and Earlier", "This generator yields bytes from a file, reading the file in chunks:", "If the file is not too big that holding it in memory is a problem:", "To read a file \u2014 one byte at a time (ignoring the buffering)  \u2014 you could use the two-argument iter(callable, sentinel) built-in function:", "New in Python 3.5 is the pathlib module, which has a convenience method specifically to read in a file as bytes, allowing us to iterate over the bytes. I consider this a decent (if quick and dirty) answer:"]}, {"question": "Is there a way to find all Python PyPI packages that were installed with easy_install or pip?  I mean, excluding everything that was/is installed with the distributions tools (in this case apt-get on Debian).", "answers": ["pip freeze will output a list of installed packages and their versions. It also allows you to write those packages to a file that can later be used to set up a new environment.", "As of version 1.3 of pip you can now use pip list", "If anyone is wondering you can use the 'pip show' command.", "Start with:", "If Debian behaves like recent Ubuntu versions regarding pip install default target, it's dead easy: it installs to /usr/local/lib/ instead of /usr/lib (apt default target). Check https://askubuntu.com/questions/173323/how-do-i-detect-and-remove-python-packages-installed-via-pip/259747#259747"]}, {"question": "I'd like to call a function in python using a dictionary.", "answers": ["Figured it out for myself in the end. It is simple, I was just missing the ** operator to unpack the dictionary", "A few extra details that might be helpful to know (questions I had after reading this and went and tested):", "In python, this is called \"unpacking\", and you can find a bit about it in the tutorial. The documentation of it sucks, I agree, especially because of how fantasically useful it is.", "Here ya go - works just any other iterable:"]}, {"question": "I used to use perl -c programfile to check the syntax of a Perl program and then exit without executing it. Is there an equivalent way to do this for a Python script?", "answers": ["You can check the syntax by compiling it:", "You can use these tools:", "Save this as checker.py and run python checker.py yourpyfile.py.", "Here's another solution, using the ast module:", "Pyflakes does what you ask, it just checks the syntax. From the docs: "]}, {"question": "Given a DataFrame with a column \"BoolCol\", we want to find the indexes of the DataFrame in which the values for \"BoolCol\" == True", "answers": ["df.iloc[i] returns the ith row of df. i does not refer to the index label, i is a 0-based index.", "Can be done using numpy where() function:", "If you want to use your dataframe object only once, use:", "Simple way is to reset the index of the DataFrame prior to filtering:", "First you may check query when the target column is type bool  (PS: about how to use it please check link )"]}, {"question": "I have a Python program that uses YAML.  I attempted to install it on a new server using pip install yaml and it returns the following:", "answers": ["You could try the search feature in pip, ", "pip install pyyaml", "Update: Nowadays installing is done with pip, and for many users a wheel may be available (depending on your Mac and required version of PyYaml). In some cases libyaml is still required to build the C extension (on mac); this can be done with:", "If libyaml is not found or compiled PyYAML can do without it on Mavericks.", "There are three YAML capable packages. Syck (pip install syck) which implements the YAML 1.0 specification from 2002; PyYAML (pip install pyyaml) which follows the YAML 1.1 specification from 2004; and ruamel.yaml which follows the latest (YAML 1.2, from 2009) specification."]}, {"question": "If you are creating a 1d array, you can implement it as a List, or else use the 'array' module in the standard library.  I have always used Lists for 1d arrays.", "answers": ["Basically, Python lists are very flexible and can hold completely heterogeneous, arbitrary data, and they can be appended to very efficiently, in amortized constant time.  If you need to shrink and grow your list time-efficiently and without hassle, they are the way to go.  But they use a lot more space than C arrays, in part because each item in the list requires the construction of an individual Python object, even for data that could be represented with simple C types (e.g. float or uint64_t).", "For almost all cases the normal list is the right choice. The arrays module is more like a thin wrapper over C arrays, which give you kind of strongly typed containers (see docs), with access to more C-like types such as signed/unsigned short or double, which are not part of the built-in types. I'd say use the arrays module only if you really need it, in all other cases stick with lists.", "The array module is kind of one of those things that you probably don't have a need for if you don't know why you would use it (and take note that I'm not trying to say that in a condescending manner!).  Most of the time, the array module is used to interface with C code.  To give you a more direct answer to your question about performance:", "It's a trade off !", "My understanding is that arrays are stored more efficiently (i.e. as contiguous blocks of memory vs. pointers to Python objects), but I am not aware of any performance benefit.  Additionally, with arrays you must store primitives of the same type, whereas lists can store anything."]}, {"question": "I have this string:", "answers": ["A simple possibility (if you'd rather avoid REs) is", "A regular expression can be used to offer more control over the whitespace characters that are combined.", "For completeness, you can also use:"]}, {"question": "\nWant to improve this question? Update the question so it focuses on one problem only by editing this post.\r\n                ", "answers": ["You can have a regular Python module, say config.py, like this:", "The sample config you provided is actually valid YAML.  In fact, YAML meets all of your demands, is implemented in a large number of languages, and is extremely human friendly.  I would highly recommend you use it.  The PyYAML project provides a nice python module, that implements YAML.  ", "I Found this the most useful and easy to use\nhttps://wiki.python.org/moin/ConfigParserExamples", "Yaml and Json are the simplest and most commonly used file formats to store settings/config. PyYaml can be used to parse yaml. Json is already part of python from 2.5. Yaml is a superset of Json. Json will solve most uses cases except multi line strings where escaping is required. Yaml takes care of these cases too."]}, {"question": "I am trying to implement a \"Digit Recognition OCR\" in OpenCV-Python (cv2). It is just for learning purposes. I would like to learn both KNearest and SVM features in OpenCV. ", "answers": ["Well, I decided to workout myself on my question to solve above problem. What I wanted is to implement a simpl OCR using KNearest or SVM features in OpenCV. And below is what I did and how. ( it is just for learning how to use KNearest for simple OCR purposes).", "For those who interested in C++ code can refer below code. \nThanks Abid Rahman for the nice explanation.", "I had some problems to generate the training data, because it was hard sometimes to identify the last selected letter, so I rotated the image 1.5 degrees. Now each character is selected in order and the test still shows a 100% accuracy rate after training. Here is the code:"]}, {"question": "I need to install a package from PyPi straight within my script.\nMaybe there's some module or distutils (distribute, pip etc.) feature which allows me to just execute something like pypi.install('requests') and requests will be installed into my virtualenv.", "answers": ["The officially recommended way to install packages from a script is by calling pip's command-line interface via a subprocess. Most other answers presented here are not supported by pip. Furthermore since pip v10, all code has been moved to pip._internal precisely in order to make it clear to users that programmatic use of pip is not allowed.", "You can also use something like:", "If you want to use pip to install required package and import it after installation, you can use this code:", "This should work:", "i added some exception handling to @Aaron's answer."]}, {"question": "Is there a simple way to flatten a list of iterables with a list comprehension, or failing that, what would you all consider to be the best way to flatten a shallow list like this, balancing performance and readability?", "answers": ["If you're just looking to iterate over a flattened version of the data structure and don't need an indexable sequence, consider itertools.chain and company.", "You almost have it! The way to do nested list comprehensions is to put the for statements in the same order as they would go in regular nested for statements.", "@S.Lott: You inspired me to write a timeit app.", "sum(list_of_lists, []) would flatten it.", "This solution works for arbitrary nesting depths - not just the \"list of lists\" depth that some (all?) of the other solutions are limited to:"]}, {"question": "I have a dataframe with over 200 columns. The issue is as they were generated the order is", "answers": ["This assumes that sorting the column names will give the order you want.  If your column names won't sort lexicographically (e.g., if you want column Q10.3 to appear after Q9.1), you'll need to sort differently, but that has nothing to do with pandas.", "You can also do more succinctly:", "You can just do:", "Tweet's answer can be passed to BrenBarn's answer above with ", "For several columns, You can put columns order what you want:"]}, {"question": "I want to iterate through the methods in a class, or handle class or instance objects differently based on the methods present. How do I get a list of class methods?", "answers": ["An example (listing the methods of the optparse.OptionParser class):", "There is the dir(theobject) method to list all the fields and methods of your object (as a tuple) and the inspect module (as codeape write) to list the fields and methods with their doc (in \"\"\").", "Python 3.x answer without external libraries", "Say you want to know all methods associated with list class\nJust Type The following ", "Try the property __dict__."]}, {"question": "I am in the process of learning Python and I have reached the section about the pass statement. The guide I'm using defines it as being a null statement that is commonly used as a placeholder.", "answers": ["Suppose you are designing a new class with some methods that you don't want to implement, yet.", "Python has the syntactical requirement that code blocks (after if, except, def, class etc.) cannot be empty. Empty code blocks are however useful in a variety of different contexts, such as in examples below, which are the most frequent use cases I have seen.", "Besides its use as a placeholder for unimplemented functions, pass can be useful in filling out an if-else statement (\"Explicit is better than implicit.\")", "The best and most accurate way to think of pass is as a way to explicitly tell the interpreter to do nothing. In the same way the following code:", "A common use case where it can be used 'as is' is to override a class just to create a type (which is otherwise the same as the superclass), e.g."]}, {"question": "How do I get the number of elements in a list in jinja2 template?", "answers": ["You can also use this syntax in expressions like", "Alex' comment looks good but I was still confused with using range.\nThe following worked for me while working on a for condition using length within range.", "I've experienced a problem with length of None, which leads to Internal Server Error: TypeError: object of type 'NoneType' has no len()", "If for loop with array is used then you can use the following"]}, {"question": "Since Python's string can't be changed, I was wondering how to concatenate a string more efficiently?", "answers": ["The best way of appending a string to a string variable is to use + or +=. This is because it's readable and fast. They are also just as fast, which one you choose is a matter of taste, the latter one is the most common. Here are timings with the timeit module:", "If you are concatenating a lot of values, then neither. Appending a list is expensive. You can use StringIO for that. Especially if you are building it up over a lot of operations.", "In Python >= 3.6, the new f-string is an efficient way to concatenate a string.", "Using in place string concatenation by '+' is THE WORST method of concatenation in terms of stability and cross implementation as it does not support all values. PEP8 standard discourages this and encourages the use of format(), join() and append() for long term use. ", "You write this function"]}, {"question": "In Django doc,", "answers": ["Your understanding is mostly correct. You use select_related when the object that you're going to be selecting is a single object, so OneToOneField or a ForeignKey. You use prefetch_related when you're going to get a \"set\" of things, so ManyToManyFields as you stated or reverse ForeignKeys. Just to clarify what I mean by \"reverse ForeignKeys\" here's an example:", "Both methods achieve the same purpose, to forego unnecessary db queries. But they use different approaches for efficiency.", "Gone through the already posted answers. Just thought it would be better if I add an answer with actual example."]}, {"question": "It seems they canceled in Python 3 all the easy way to quickly load a script by removing execfile() ", "answers": ["According to the documentation, instead of ", "You are just supposed to read the file and exec the code yourself. 2to3 current replaces", "While exec(open(\"filename\").read()) is often given as an alternative to execfile(\"filename\"), it misses important details that execfile supported.", "As suggested on the python-dev mailinglist recently, the runpy module might be a viable alternative. Quoting from that message:", "This one is better, since it takes the globals and locals from the caller:"]}, {"question": "I am trying to subtract one date value from the value of datetime.datetime.today() to calculate how long ago something was. But it complains:", "answers": ["In the standard library, there is no cross-platform way to create aware timezones without creating your own timezone class. (Edit: Python 3.9 introduces zoneinfo in the standard library which does provide this functionality.)", "Get the current time, in a specific timezone:", "The standard library makes it much easier to specify UTC as the time zone:", "A one-liner using only the standard library works starting with Python 3.3. You can get a local timezone aware datetime object using astimezone (as suggested by johnchen902):", "Here's a stdlib solution that works on both Python 2 and 3:"]}, {"question": "Does Python support short-circuiting in boolean expressions?", "answers": ["Yep, both and and or operators short-circuit -- see the docs.", "Let's first define a useful function to determine if something is executed or not. A simple function that accepts an argument, prints a message and returns the input, unchanged.", "Yes. Try the following in your python interpreter:", "Yes, Python does support Short-circuit evaluation, minimal evaluation, or McCarthy evaluation for Boolean operators. It is used to reduce the number of evaluations for computing the output of boolean expression. Example -"]}, {"question": "I'm new to Python and Matplotlib, I would like to simply apply colormap to an image and write the resulting image, without using axes, labels, titles or anything usually automatically added by matplotlib. Here is what I did:", "answers": ["I think that the command axis('off') takes care of one of the problems more succinctly than changing each axis and the border separately. It still leaves the white space around the border however. Adding bbox_inches='tight' to the savefig command almost gets you there, you can see in the example below that the white space left is much smaller, but still present.", "I learned this trick from matehat, here:", "Possible simplest solution:", "No one mentioned imsave yet, which makes this a one-liner:", "This should remove all padding and borders:"]}, {"question": "I have a script named test1.py which is not in a module. It just has code that should execute when the script itself is run. There are no functions, classes, methods, etc. I have another script which runs as a service. I want to call test1.py from the script running as a service.", "answers": ["The usual way to do this is something like the following.", "This is possible in Python 2 using", "Another way:", "Using os you can make calls directly to your terminal. If you want to be even more specific you can concatenate your input string with local variables, ie.", "If you want test1.py to remain executable with the same functionality as when it's called inside service.py, then do something like:"]}, {"question": "I want to build a query for sunburnt(solr interface) using class inheritance and therefore adding key - value pairs together. The sunburnt interface takes keyword arguments. How can I transform a dict ({'type':'Event'}) into keyword arguments (type='Event')?", "answers": ["Use the double-star (aka double-splat?) operator:", "** operator would be helpful here. ", "Here is a complete example showing how to use the ** operator to pass values from a dictionary as keyword arguments."]}, {"question": "I have a directory that contains my Python unit tests. Each unit test module is of the form test_*.py. I am attempting to make a file called all_test.py that will, you guessed it, run all files in the aforementioned test form and return the result. I have tried two methods so far; both have failed. I will show the two methods, and I hope someone out there knows how to actually do this correctly.", "answers": ["With Python 2.7 and higher you don't have to write new code or use third-party tools to do this; recursive test execution via the command line is built-in.  Put an __init__.py in your test directory and:", "In python 3, if you're using unittest.TestCase:", "You could use a test runner that would do this for you.  nose is very good for example.  When run, it will find tests in the current tree and run them.", "This is now possible directly from unittest: unittest.TestLoader.discover.", "Well by studying the code above a bit (specifically using TextTestRunner and defaultTestLoader), I was able to get pretty close. Eventually I fixed my code by also just passing all test suites to a single suites constructor, rather than adding them \"manually\", which fixed my other problems. So here is my solution."]}, {"question": "In a program I'm writing I have Python use the re.search() function to find matches in a block of text and print the results. However, the program exits once it finds the first match in the block of text.", "answers": ["Use re.findall or re.finditer instead."]}, {"question": "What are the advantages and disadvantages of each?", "answers": ["Numpy matrices are strictly 2-dimensional, while numpy arrays (ndarrays) are\nN-dimensional.  Matrix objects are a subclass of ndarray, so they inherit all\nthe attributes and methods of ndarrays.", "Scipy.org recommends that you use arrays:", "Just to add one case to unutbu's list. ", "As per the official documents, it's not anymore advisable to use matrix class since it will be removed in the future.", "As others have mentioned, perhaps the main advantage of matrix was that it provided a convenient notation for matrix multiplication."]}, {"question": "I've been making Python scripts for simple tasks at work and never really bothered packaging them for others to use. Now I have been assigned to make a Python wrapper for a REST API. I have absolutely no idea on how to start and I need help.", "answers": ["A module is a file containing Python definitions and statements. The file name is the module name with the suffix .py", "Python 3 - UPDATED 18th November 2015", "Since nobody did cover this question of the OP yet:", "Once you have defined your chosen commands, you can simply drag and drop the saved file into the Lib folder in your python program files. ", "Make a file named \"hello.py\""]}, {"question": "I have a Python file which might have to support Python versions < 3.x and >= 3.x. Is there a way to introspect the Python runtime to know the version which it is running (for example, 2.6 or 3.2.x)?", "answers": ["Sure, take a look at sys.version and sys.version_info.", "Try this code, this should work:", "Per sys.hexversion and API and ABI Versioning:", "Just in case you want to see all of the gory details in human readable form, you can use:", "The best solution depends on how much code is incompatible. If there are a lot of places you need to support Python 2 and 3, six is the compatibility module. six.PY2 and six.PY3 are two booleans if you want to check the version."]}, {"question": "What's the easiest way to add an empty column to a pandas DataFrame object?  The best I've stumbled upon is something like", "answers": ["If I understand correctly, assignment should fill:", "To add to DSM's answer and building on this associated question, I'd split the approach into two cases:", "an even simpler solution is: ", "I like:", "Starting with v0.16.0, DF.assign() could be used to assign new columns (single/multiple) to a DF. These columns get inserted in alphabetical order at the end of the DF."]}, {"question": "\nWant to improve this question? Update the question so it's on-topic for Stack Overflow.\r\n                ", "answers": ["Try PDFMiner. It can extract text from PDF files as HTML, SGML or \"Tagged PDF\" format.", "The PDFMiner package has changed since codeape posted.  ", "Since none for these solutions support the latest version of PDFMiner I wrote a simple solution that will return text of a pdf using PDFMiner. This will work for those who are getting import errors with process_pdf ", "Pdftotext An open source program (part of Xpdf) which you could call from python (not what you asked for but might be useful). I've used it with no problems. I think google use it in google desktop.", "pyPDF works fine (assuming that you're working with well-formed PDFs).  If all you want is the text (with spaces), you can just do:"]}, {"question": "On my local machine, I run a python script which contains this line", "answers": ["Don't use os.system. It has been deprecated in favor of subprocess. From the docs: \"This module intends to replace several older modules and functions: os.system, os.spawn\".", "To somewhat expand on the earlier answers here, there are a number of details which are commonly overlooked.", "Call it with subprocess", "You can use subprocess, but I always felt that it was not a 'Pythonic' way of doing it. So I created Sultan (shameless plug) that makes it easy to run command line functions.", "It is possible you use the bash program, with the parameter -c for execute the commands:"]}, {"question": "How can I convert a DataFrame column of strings (in dd/mm/yyyy format) to datetimes?", "answers": ["The easiest way is to use to_datetime:", "If your date column is a string of the format '2017-01-01'\nyou can use pandas astype to convert it to datetime.", "You can use the following if you want to specify tricky formats:", "If you have a mixture of formats in your date, don't forget to set infer_datetime_format=True to make life easier."]}, {"question": "Right now I'm importing a fairly large CSV as a dataframe every time I run the script. Is there a good solution for keeping that dataframe constantly available in between runs so I don't have to spend all that time waiting for the script to run?", "answers": ["The easiest way is to pickle it using to_pickle:", "Although there are already some answers I found a nice comparison in which they tried several ways to serialize Pandas DataFrames: Efficiently Store Pandas DataFrames. ", "If I understand correctly, you're already using pandas.read_csv() but would like to speed up the development process so that you don't have to load the file in every time you edit your script, is that right? I have a few recommendations:", "Pickle works good!", "You can use feather format file. It is extremely fast."]}, {"question": "Is there a way to have a defaultdict(defaultdict(int)) in order to make the following code work?", "answers": ["Yes like this:", "The parameter to the defaultdict constructor is the function which will be called for building new elements. So let's use a lambda !", "I find it slightly more elegant to use partial:", "Previous answers have addressed how to make a two-levels or n-levels defaultdict.  In some cases you want an infinite one:", "For reference, it's possible to implement a generic nested defaultdict factory method through:"]}, {"question": "I'm curious, whether there is any way to print formatted numpy.arrays, e.g., in a way similar to this:", "answers": ["You can use set_printoptions to set the precision of the output:", "You can get a subset of the np.set_printoptions functionality from the np.array_str command, which applies only to a single print statement.", "Unutbu gave a really complete answer (they got a +1 from me too), but here is a lo-tech alternative:", "FYI Numpy 1.15 (release date pending) will include a context manager for setting print options locally. This means that the following will work the same as the corresponding example in the accepted answer (by unutbu and Neil G) without having to write your own context manager. E.g., using their example:", "The gem that makes it all too easy to obtain the result as a string (in today's numpy versions) is hidden in denis answer:\nnp.array2string"]}, {"question": "I am getting a ValueError: cannot reindex from a duplicate axis when I am trying to set an index to a certain value. I tried to reproduce this with a simple example, but I could not do it.", "answers": ["This error usually rises when you join / assign to a column when the index has duplicate values. Since you are assigning to a row, I suspect that there is a duplicate value in affinity_matrix.columns, perhaps not shown in your question.", "As others have said, you've probably got duplicate values in your original index. To find them do this:", "Indices with duplicate values often arise if you create a DataFrame by concatenating other DataFrames. IF you don't care about preserving the values of your index, and you want them to be unique values, when you concatenate the the data, set ignore_index=True.", "For people who are still struggling with this error, it can also happen if you accidentally create a duplicate column with the same name.  Remove duplicate columns like so:", "Simply skip the error using .values at the end."]}, {"question": "In C# there's a null-coalescing operator (written as ??) that allows for easy (short) null checking during assignment:", "answers": ["Ok, it must be clarified how the or operator works. It is a boolean operator, so it works in a boolean context. If the values are not boolean, they are converted to boolean for the purposes of the operator.", "Strictly,", "Here's a function that will return the first argument that isn't None:", "In case you need to nest more than one null coalescing operation such as:", "I realize this is answered, but there is another option when you're dealing with dict-like objects."]}, {"question": "I'm using Python's logging module to log some debug strings to a file which works pretty well. Now in addition, I'd like to use this module to also print the strings out to stdout. How do I do this? In order to log my strings to a file I use following code:", "answers": ["Just get a handle to the root logger and add the StreamHandler. The StreamHandler writes to stderr. Not sure if you really need stdout over stderr, but this is what I use when I setup the Python logger and I also add the FileHandler as well. Then all my logs go to both places (which is what it sounds like you want).", "logging.basicConfig() can take a keyword argument handlers since Python 3.3, which simplifies logging setup a lot, especially when setting up multiple handlers with the same formatter:", "Adding a StreamHandler without arguments goes to stderr instead of stdout. If some other process has a dependency on the stdout dump (i.e. when writing an NRPE plugin), then make sure to specify stdout explicitly or you might run into some unexpected troubles.", "Here is a complete, nicely wrapped solution based on Waterboy's answer and various other sources. It supports logging to both console and log file, allows for different log level settings, provides colorized output and is easily configurable (also available as Gist):", "Either run basicConfig with stream=sys.stdout as the argument prior to setting up any other handlers or logging any messages, or manually add a StreamHandler that pushes messages to stdout to the root logger (or any other logger you want, for that matter)."]}, {"question": "Is there a way to expand a Python tuple into a function - as actual parameters?", "answers": ["myfun(*some_tuple) does exactly what you request. The * operator simply unpacks the tuple (or any iterable) and passes them as the positional arguments to the function. Read more about unpacking arguments.", "Note that you can also expand part of argument list:", "Take a look at the Python tutorial section 4.7.3 and 4.7.4.\nIt talks about passing tuples as arguments.", "This is the functional programming method. It lifts the tuple expansion feature out of syntax sugar:", "Similar to @Dominykas's answer, this is a decorator that converts multiargument-accepting functions into tuple-accepting functions:"]}, {"question": "How to fix it?", "answers": ["Without seeing the source it's difficult to know the root cause, so I'll have to speak generally.", "Finally I got it:", "This is the classic \"unicode issue\".   I believe that explaining this is beyond the scope of a StackOverflow answer to completely explain what is happening.  ", "In some cases, when you check your default encoding (print sys.getdefaultencoding()), it returns that you are using ASCII. If you change to UTF-8, it doesn't work, depending on the content of your variable.\nI found another way:    ", "I was searching to solve the following error message:"]}, {"question": "I have a parameter file of the form:", "answers": ["str.replace() v2|v3 does not recognize regular expressions. ", "You are looking for the re.sub function.", "As a summary ", "re.sub is definitely what you are looking for.  And so you know, you don't need the anchors and the wildcards."]}, {"question": "This \"underscoring\" seems to occur a lot, and I was wondering if this was a requirement in the Python language, or merely a matter of convention?", "answers": ["From the Python PEP 8 -- Style Guide for Python Code:", "The other respondents are correct in describing the double leading and trailing underscores as a naming convention for \"special\" or \"magic\" methods.", "Names surrounded by double underscores are \"special\" to Python. They're listed in the Python Language Reference, section 3, \"Data model\".", "Actually I use _ method names when I need to differ between parent and child class names. I've read some codes that used this way of creating parent-child classes. As an example I can provide this code: ", "Added an example to understand the use of __ in python. Here is the list of All __"]}, {"question": "I need to print some stuff only when a boolean variable is set to True. So, after looking at this, I tried with a simple example:", "answers": ["Python does not have a trailing if statement.", "Inline if-else EXPRESSION must always contain else clause, e.g:", "The 'else' statement is mandatory. You can do stuff like this :", "If you don't want to from __future__ import print_function you can do the following:", "Since 2.5 you can use equivalent of C\u2019s \u201d?:\u201d ternary conditional operator and the syntax is:"]}, {"question": "I want to plot a graph with one logarithmic axis using matplotlib. ", "answers": ["You can use the Axes.set_yscale method. That allows you to change the scale after the Axes object is created. That would also allow you to build a control to let the user pick the scale if you needed to.", "First of all, it's not very tidy to mix pylab and pyplot code. What's more, pyplot style is preferred over using pylab.", "You simply need to use semilogy instead of plot:", "if you want to change the base of logarithm, just add:", "I know this is slightly off-topic, since some comments mentioned the ax.set_yscale('log') to be \"nicest\" solution I thought a rebuttal could be due. I would not recommend using ax.set_yscale('log') for histograms and bar plots. In my version (0.99.1.1) i run into some rendering problems - not sure how general this issue is. However both bar and hist has optional arguments to set the y-scale to log, which work fine."]}, {"question": "When writing custom classes it is often important to allow equivalence by means of the == and != operators. In Python, this is made possible by implementing the __eq__ and __ne__ special methods, respectively. The easiest way I've found to do this is the following method:", "answers": ["Consider this simple problem:", "You need to be careful with inheritance:", "The way you describe is the way I've always done it. Since it's totally generic, you can always break that functionality out into a mixin class and inherit it in classes where you want that functionality.", "Not a direct answer but seemed relevant enough to be tacked on as it saves a bit of verbose tedium on occasion. Cut straight from the docs...", "You don't have to override both __eq__ and __ne__ you can override only __cmp__ but this will make an implication on the result of ==, !==, < , > and so on."]}, {"question": "Let's say I have two lists, l1 and l2.  I want to perform l1 - l2, which returns all elements of l1 not in l2.", "answers": ["Python has a language feature called List Comprehensions that is perfectly suited to making this sort of thing extremely easy. The following statement does exactly what you want and stores the result in l3:", "One way is to use sets:", "Comparing the performance of all the answers mentioned here on Python 3.9.1 and Python 2.7.16.", "Expanding on Donut's answer and the other answers here, you can get even better results by using a generator comprehension instead of a list comprehension, and by using a set data structure (since the in operator is O(n) on a list but O(1) on a set).", "Use the Python set type.   That would be the most Pythonic.  :)"]}, {"question": "I have a set like this:", "answers": ["e.g, keep.update(xrange(11)) for your specific example.  Or, if you have to produce the values in a loop for some other reason,", "Define set", "You can also use the | operator to concatenate two sets (union in set theory):", "Use update like this:", "This question is the first one that shows up on Google when one looks up \"Python how to add elements to set\", so it's worth noting explicitly that, if you want to add a whole string to a set, it should be added with .add(), not .update()."]}, {"question": "Is it possible to read binary MATLAB .mat files in Python?", "answers": ["An import is required, import scipy.io...", "Neither scipy.io.savemat, nor scipy.io.loadmat work for MATLAB arrays version 7.3. But the good part is that MATLAB version 7.3 files are hdf5 datasets. So they can be read using a number of tools, including NumPy.", "First save the .mat file as:", "There is a nice package called mat4py which can easily be installed using", "Reading the file"]}, {"question": "Why are there no ++ and -- operators in Python?", "answers": ["It's not because it doesn't make sense; it makes perfect sense to define \"x++\" as \"x += 1, evaluating to the previous binding of x\".", "This original answer I wrote is a myth from the folklore of computing: debunked by Dennis Ritchie as \"historically impossible\" as noted in the letters to the editors of Communications of the ACM July 2012 doi:10.1145/2209249.2209251", "I always assumed it had to do with this line of the zen of python:", "Of course, we could say \"Guido just decided that way\", but I think the question is really about the reasons for that decision. I think there are several reasons:", "Because, in Python, integers are immutable (int's += actually returns a different object)."]}, {"question": "How to make pytest print traceback, so I would see where in the whatever function an exception was raised?", "answers": ["pytest.raises(Exception) is what you need.", "Do you mean something like this:", "There are two ways to handle these kind of cases in pytest:", "pytest constantly evolves and with one of the nice changes in the recent past it is now possible to simultaneously test for", "you can try"]}, {"question": "Consider three functions:", "answers": ["On the actual behavior, there is no difference. They all return None and that's it. However, there is a time and  place for all of these.\nThe following instructions are basically how the different methods should be used (or at least how I was taught they should be used), but they are not absolute rules so you can mix them up if you feel necessary to.", "Yes, they are all the same. ", "They each return the same singleton None -- There is no functional difference. ", "As other have answered, the result is exactly the same, None is returned in all cases.", "In terms of functionality these are all the same, the difference between them is in code readability and style (which is important to consider)"]}, {"question": "It seems there are already quite some questions here about relative import in python 3, but after going through many of them I still didn't find the answer for my issue. \nso here is the question. ", "answers": ["EDIT: There are better/more coherent answers to this question in other questions: ", "Try this.\nWorked for me.", "Assumption:\nIf you are in the package directory, A and test_A are separate packages. ", "None of these solutions worked for me in 3.6, with a folder structure like:", "This is very tricky in Python."]}, {"question": "How do I tell the time difference in minutes between two datetime objects?", "answers": ["Subtracting the later time from the first time difference = later_time - first_time creates a datetime object that only holds the difference.\nIn the example above it is 0 minutes, 8 seconds and 562000 microseconds.", "Using datetime example", "New at Python 2.7 is the timedelta instance method .total_seconds(). From the Python docs, this is equivalent to (td.microseconds + (td.seconds + td.days * 24 * 3600) * 10**6) / 10**6.", "Just subtract one from the other. You get a timedelta object with the difference.", "If a, b are datetime objects then to find the time difference between them in Python 3:"]}, {"question": "If I do this:", "answers": ["Operator precedence 2.x, 3.x. The precedence of not is lower than that of in. So it is equivalent to:", "not x in y is evaluated as x not in y", "Operator precedence. in binds more tightly than not, so your expression is equivalent to not((True) in [False, True]).", "It's all about operator precedence (in is stronger than not). But it can be easily corrected by adding parentheses at the right place:", "It is evaluating as not True in [False, True], which returns False because True is in [False, True] "]}, {"question": "I use python to create my project settings setup, but I need help getting the command line arguments.", "answers": ["Python tutorial explains it:", "(not including the name of the Python file)", "I highly recommend argparse which comes with Python 2.7 and later.", "Python code:", "You can use sys.argv to get the arguments as a list."]}, {"question": "How to check whether a pandas DataFrame is empty? In my case I want to print some message in terminal if the DataFrame is empty. ", "answers": ["You can use the attribute df.empty to check whether it's empty or not:", "I use the len function. It's much faster than empty. len(df.index) is even faster.", "To see if a dataframe is empty, I argue that one should test for the length of a dataframe's columns index:", "I prefer going the long route. These are the checks I follow to avoid using a try-except clause - ", "and the function:"]}, {"question": "I saw this in someone's code:", "answers": ["In Python 3, they made the / operator do a floating-point division, and added the // operator to do integer division (i.e., quotient without remainder); whereas in Python 2, the / operator was simply integer division, unless one of the operands was already a floating point number.", "// is unconditionally \"flooring division\", e.g:", "To complement these other answers, the // operator also offers significant (3x) performance benefits over /, presuming you want integer division.", "To complement Alex's response, I would add that starting from Python 2.2.0a2, from __future__ import division is a convenient alternative to using lots of float(\u2026)/\u2026.  All divisions  perform float divisions, except those with //.  This works with all versions from 2.2.0a2 on.", "// can be considered an alias to math.floor() for divisions with return value of type float. It operates as no-op for divisions with return value of type int."]}, {"question": "PEP 8 states:", "answers": ["Module importing is quite fast, but not instant. This means that:", "Putting the import statement inside of a function can prevent circular dependencies.\nFor example, if you have 2 modules, X.py and Y.py, and they both need to import each other, this will cause a circular dependency when you import one of the modules causing an infinite loop. If you move the import statement in one of the modules then it won't try to import the other module till the function is called, and that module will already be imported, so no infinite loop. Read here for more - effbot.org/zone/import-confusion.htm", "I have adopted the practice of putting all imports in the functions that use them, rather than at the top of the module.", "Most of the time this would be useful for clarity and sensible to do but it's not always the case.  Below are a couple of examples of circumstances where module imports might live elsewhere.", "The first variant is indeed more efficient than the second when the function is called either zero or one times.  With the second and subsequent invocations, however, the \"import every call\" approach is actually less efficient.  See this link for a lazy-loading technique that combines the best of both approaches by doing a \"lazy import\"."]}, {"question": "How do I accomplish variable variables in Python?", "answers": ["You can use dictionaries to accomplish this. Dictionaries are stores of keys and values. ", "Use the built-in getattr function to get an attribute on an object by name.  Modify the name as needed.", "It's not a good idea. If you are accessing a global variable you can use globals().", "New coders sometimes write code like this:", "Whenever you want to use variable variables, it's probably better to use a dictionary. So instead of writing"]}, {"question": "I came across the Python with statement for the first time today.  I've been using Python lightly for several months and didn't even know of its existence!  Given its somewhat obscure status, I thought it would be worth asking:", "answers": ["I believe this has already been answered by other users before me, so I only add it for the sake of completeness: the with statement simplifies exception handling by encapsulating common preparation and cleanup tasks in so-called context managers. More details can be found in PEP 343. For instance, the open statement is a context manager in itself, which lets you open a file, keep it open as long as the execution is in the context of the with statement where you used it, and close it as soon as you leave the context, no matter whether you have left it because of an exception or during regular control flow. The with statement can thus be used in ways similar to the RAII pattern in C++: some resource is acquired by the with statement and released when you leave the with context.", "I would suggest two interesting lectures:", "The Python with statement is built-in language support of the Resource Acquisition Is Initialization idiom commonly used in C++. It is intended to allow safe acquisition and release of operating system resources.", "An example of an antipattern might be to use the with inside a loop when it would be more efficient to have the with outside the loop", "Again for completeness I'll add my most useful use-case for with statements."]}, {"question": "I have the following string: \"aaaabbbb\"", "answers": ["Like this:", "See : http://codepad.org/S3zjnKoD"]}, {"question": "What will happen if two modules import each other?", "answers": ["If you do import foo (inside bar.py) and import bar (inside foo.py), it will work fine. By the time anything actually runs, both modules will be fully loaded and will have references to each other.", "There was a really good discussion on this over at comp.lang.python last year. It answers your question pretty thoroughly.", "Cyclic imports terminate, but you need to be careful not to use the cyclically-imported modules during module initialization.", "As other answers describe this pattern is acceptable in python:", "Module a.py :"]}, {"question": "In Python, there are two similarly-named functions, exit() and sys.exit(). What's the difference and when should I use one over the other?", "answers": ["exit is a helper for the interactive shell - sys.exit is intended for use in programs.", "If I use exit() in a code and run it in the shell, it shows a message asking whether I want to kill the program or not. It's really disturbing.\nSee here", "Usually, the code runs through the lines until the end and the program exists automatically.\nOccasionally, we would like to ask the program to close before the full cycle run.\nAn example case is when you implement authentication and a user fails to authenticate, in some cases you would like to exit the program."]}, {"question": "When should you use generator expressions and when should you use list comprehensions in Python?", "answers": ["John's answer is good (that list comprehensions are better when you want to iterate over something multiple times).  However, it's also worth noting that you should use a list if you want to use any of the list methods.  For example, the following code won't work:", "Iterating over the generator expression or the list comprehension will do the same thing. However, the list comprehension will create the entire list in memory first while the generator expression will create the items on the fly, so you are able to use it for very large (and also infinite!) sequences.", "Use list comprehensions when the result needs to be iterated over multiple times, or where speed is paramount. Use generator expressions where the range is large or infinite.", "The important point is that the list comprehension creates a new list. The generator creates a an iterable object that will \"filter\" the source material on-the-fly as you consume the bits.", "The benefit of a generator expression is that it uses less memory since it doesn't build the whole list at once.  Generator expressions are best used when the list is an intermediary, such as summing the results, or creating a dict out of the results."]}, {"question": "I saw this in someone's code. What does it mean?", "answers": ["Using these magic methods (__enter__, __exit__) allows you to implement objects which can be used easily with the with statement. ", "If you know what context managers are then you need nothing more to understand __enter__ and __exit__ magic methods. Lets see a very simple example.", "I found it strangely difficult to locate the python docs for __enter__ and __exit__ methods by Googling, so to help others here is the link:", "In addition to the above answers to exemplify invocation order, a simple run example\n", "This is called context manager and I just want to add that similar approaches exist for other programming languages. Comparing them could be helpful in understanding the context manager in python.\nBasically, a context manager is used when we are dealing with some resources (file, network, database) that need to be initialized and at some point, tear downed (disposed). In Java 7 and above we have automatic resource management that takes the form of:"]}, {"question": "I'm running into a weird error when trying to install Django on my computer.", "answers": ["You need to add the path of your pip installation to your PATH system variable. By default, pip is installed to C:\\Python34\\Scripts\\pip (pip now comes bundled with new versions of python), so the path \"C:\\Python34\\Scripts\" needs to be added to your PATH variable.", "For Windows, when you install a package, you type:", "As of now, version 3.7.3 I had a little bit of an issue with getting the right system variable.", "For me the command:", "Alternate way."]}, {"question": "I'm trying to plot a figure without tickmarks or numbers on either of the axes (I use axes in the traditional sense, not the matplotlib nomenclature!). An issue I have come across is where matplotlib adjusts the x(y)ticklabels by subtracting a value N, then adds N at the end of the axis.", "answers": ["Instead of hiding each element, you can hide the whole axis:", "If you want to hide just the axis text keeping the grid lines:", "If you are like me and don't always retrieve the axes, ax, when plotting the figure, then a simple solution would be to do ", "I've colour coded this figure to ease the process.", "I was not actually able to render an image without borders or axis data based on any of the code snippets here (even the one accepted at the answer). After digging through some API documentation, I landed on this code to render my image"]}, {"question": "I have this code:", "answers": ["With the -c (command) argument (assuming your file is named foo.py):", "Just put hello() somewhere below the function and it will execute when you do python your_file.py", "python -c 'from myfile import hello; hello()' where myfile must be replaced with the basename of your Python script. (E.g., myfile.py becomes myfile).", "add this snippet to the bottom of your script", "I wrote a quick little Python script that is callable from a bash command line. It takes the name of the module, class and method you want to call and the parameters you want to pass. I call it PyRun and left off the .py extension and made it executable with chmod +x PyRun so that I can just call it quickly as follow:"]}, {"question": "I would like to make a deep copy of a dict in python. Unfortunately the .deepcopy() method doesn't exist for the dict. How do I do that?", "answers": ["How about:", "dict.copy() is a shallow copy function for dictionary \n\nid is built-in function that gives you the address of variable", "Python 3.x"]}, {"question": "If I have a function like this:", "answers": ["Your second way is correct. ", "If you're using typing (introduced in Python 3.5) you can use typing.Optional, where Optional[X] is equivalent to Union[X, None]. It is used to signal that the explicit value of None is allowed . From typing.Optional:", "I recently saw this one-liner:"]}, {"question": "Is there a way to check if a column exists in a Pandas DataFrame?", "answers": ["This will work:", "To check if one or more columns all exist, you can use set.issubset, as in:", "Just to suggest another way without using if statements, you can use the get() method for DataFrames. For performing the sum based on the question:", "You can use the set's method issuperset:"]}, {"question": "I want to remove a certain environment created with conda. How can I achieve that? Let's say I have an active testenv environment. I tried, by following documentation, with:", "answers": ["You probably didn't fully deactivate the Conda environment - remember, the command you need to use with Conda is conda deactivate (for older versions, use source deactivate). So it may be wise to start a new shell and activate the environment in that before you try. Then deactivate it.", "After making sure your environment is not active, type:", "Official documentation way worked for me:", "In my windows 10 Enterprise edition os this code works fine:\n(suppose for environment namely testenv)", "if you are in base:"]}, {"question": "What do these python file extensions mean?", "answers": ["Also for some further discussion on .pyc vs .pyo, take a look at: http://www.network-theory.co.uk/docs/pytut/CompiledPythonfiles.html (I've copied the important part below)", "A larger list of additional Python file-extensions (mostly rare and unofficial) can be found at http://dcjtech.info/topic/python-file-extensions/"]}, {"question": "I would like to increase the width of the ipython notebook in my browser. I have a high-resolution screen, and I would like to expand the cell width/size to make use of this extra space.", "answers": ["If you don't want to change your default settings, and you only want to change the width of the current notebook you're working on, you can enter the following into a cell:", "That div.cell solution didn't actually work on my IPython, however luckily someone suggested a working solution for new IPythons:", "To get this to work with jupyter (version 4.0.6) I created ~/.jupyter/custom/custom.css containing:", "It's time to use jupyterlab", "What I do usually after new installation is to modify the main css file where all visual styles are stored. I use Miniconda but location is similar with others C:\\Miniconda3\\Lib\\site-packages\\notebook\\static\\style\\style.min.css"]}, {"question": "How can I check if a Python object is a string (either regular or Unicode)?", "answers": ["Use isinstance(obj, basestring) for an object-to-test obj.", "In Python 3.x basestring is not available anymore, as str is the sole string type (with the semantics of Python 2.x's unicode).", "To check if an object o is a string type of a subclass of a string type:", "If you want to check with no regard for Python version (2.x vs 3.x), use six (PyPI) and its string_types attribute:", "I found this ans more pythonic:"]}, {"question": "I have two existing dictionaries, and I wish to 'append' one of them to the other. By that I mean that the key,values of the other dictionary should be made into the first dictionary. For example:", "answers": ["You can do", "There are two ways to add one dictionary to another.", "dict.update() looks like it will do what you want...", "Assuming that you do not want to change orig, you can either do a copy and update like the other answers, or you can create a new dictionary in one step by passing all items from both  dictionaries into the dict constructor:", "A three-liner to combine or merge two dictionaries:"]}, {"question": "When debugging in PHP, I frequently find it useful to simply stick a var_dump() in my code to show me what a variable is, what its value is, and the same for anything that it contains.", "answers": ["I think the best equivalent to PHP's var_dump($foo, $bar) is combine print with vars:", "To display a value nicely, you can use the pprint module. The easiest way to dump all variables with it is to do", "The closest thing to PHP's var_dump() is pprint() with the getmembers() function in the built-in inspect module:", "PHP's var_export() usually shows a serialized version of the object that can be exec()'d to re-create the object.    The closest thing to that in Python is repr()", "I wrote a very light-weight alternative to PHP's var_dump for using in Python and made it open source later."]}, {"question": "Given a datetime.time value in Python, is there a standard way to add an integer number of seconds to it, so that 11:34:59 + 3 = 11:35:02, for example?", "answers": ["You can use full datetime variables with timedelta, and by providing a dummy date then using time to just get the time value.", "As others here have stated, you can just use full datetime objects throughout:", "One little thing, might add clarity to override the default value for seconds", "Thanks to @Pax Diablo, @bvmou and @Arachnid for the suggestion of using full datetimes throughout.  If I have to accept datetime.time objects from an external source, then this seems to be an alternative add_secs_to_time() function:", "You cannot simply add number to datetime because it's unclear what unit is used: seconds, hours, weeks..."]}, {"question": "I'm a little bit confused with JSON in Python.\nTo me, it seems like a dictionary, and for that reason\nI'm trying to do that:", "answers": ["json.loads()", "When I started using json, I was confused and unable to figure it out for some time, but finally I got what I wanted\nHere is the simple solution    ", "If you trust the data source, you can use eval to convert your string into a dictionary:", "use simplejson or cjson for speedups"]}, {"question": "In all other languages I've worked with the super constructor is invoked implicitly. How does one invoke it in Python? I would expect super(self) but this doesn't work.", "answers": ["In line with the other answers, there are multiple ways to call super class methods (including the constructor), however in Python-3.x the process has been simplified:", "super() returns a parent-like object in new-style classes:", "With Python 2.x old-style classes it would be this:", "One way is to call A's constructor and pass self as an argument, like so:", "Short Answer"]}, {"question": "Are there situations in which sys.stdout.write() is preferable to print? ", "answers": ["print is just a thin wrapper that formats the inputs (modifiable, but by default with a space between args and newline at the end) and calls the write function of a given object. By default this object is sys.stdout, but you can pass a file using the \"chevron\" form. For example:", "print first converts the object to a string (if it is not already a string). It will also put a space before the object if it is not the start of a line and a newline character at the end.", "Here's some sample code based on the book Learning Python by Mark Lutz that addresses your question:", "My question is whether or not there\n  are situations in which\n  sys.stdout.write() is preferable to\n  print", "There's at least one situation in which you want sys.stdout instead of print."]}, {"question": "I'm trying to download and save an image from the web using python's requests module.", "answers": ["You can either use the response.raw file object, or iterate over the response.", "Get a file-like object from the request and copy it to a file. This will also avoid reading the whole thing into memory at once.", "How about this, a quick solution.", "I have the same need for downloading images using requests. I first tried the answer of Martijn Pieters, and it works well. But when I did a profile on this simple function, I found that it uses so many function calls compared to urllib and urllib2.", "This might be easier than using requests. This is the only time I'll ever suggest not using requests to do HTTP stuff."]}, {"question": "I am trying to install a Python package from a private GitHub repository. For a public repository, I can issue the following command which works fine:", "answers": ["You can use the git+ssh URI scheme, but you must set a username. Notice the git@ part in the URI:", "As an additional technique, if you have the private repository cloned locally, you can do:", "You can do it directly with the HTTPS URL like this:", "It also works with Bitbucket:", "I found it much easier to use tokens than SSH keys. I couldn't find much good documentation on this, so I came across this solution mainly through trial and error. Further, installing from pip and setuptools have some subtle differences; but this way should work for both."]}, {"question": "Why or why not?", "answers": ["For performance, especially when you're iterating over a large range, xrange() is usually better.  However, there are still a few cases why you might prefer range():", "No, they both have their uses:", "You should favour range() over xrange() only when you need an actual list. For instance, when you want to modify the list returned by range(), or when you wish to slice it. For iteration or even just normal indexing, xrange() will work fine (and usually much more efficiently). There is a point where range() is a bit faster than xrange() for very small lists, but depending on your hardware and various other details, the break-even can be at a result of length 1 or 2; not something to worry about. Prefer xrange().", "One other difference is that Python 2 implementation of xrange() can't support numbers bigger than C ints, so if you want to have a range using Python's built in large number support, you have to use range().", "xrange() is more efficient because instead of generating a list of objects, it just generates one object at a time. Instead of 100 integers, and all of their overhead, and the list to put them in, you just have one integer at a time. Faster generation, better memory use, more efficient code."]}, {"question": "In Python remove() will remove the first occurrence of value in a list.", "answers": ["Functional approach:", "You can use a list comprehension:", "You can use slice assignment if the original list must be modified, while still using an efficient list comprehension (or generator expression).", "Repeating the solution of the first post in a more abstract way:", "See the simple solution"]}, {"question": "Here's the Python code to run an arbitrary command returning its stdout data, or raise an exception on non-zero exit codes:", "answers": ["I don't know much about the low level details; but, given that in\npython 2.6 the API offers the ability to wait for threads and\nterminate processes, what about running the process in a separate\nthread?", "In Python 3.3+:", "jcollado's answer can be simplified using the threading.Timer class:", "If you're on Unix,", "Here is Alex Martelli's solution as a module with proper process killing. The other approaches do not work because they do not use proc.communicate(). So if you have a process that produces lots of output, it will fill its output buffer and then block until you read something from it."]}, {"question": "For example, I have a string like this(return value of subprocess.check_output):", "answers": ["Decode it.", "If the answer from falsetru didn't work you could also try:", "Please, see oficial encode() and decode() documentation from codecs library. utf-8 is the default encoding for the functions, but there are severals standard encodings in Python 3, like latin_1 or utf_32."]}, {"question": "\nWant to improve this question? Update the question so it's on-topic for Stack Overflow.\r\n                ", "answers": ["I use decorators mainly for timing purposes", "I've used them for synchronization.", "I use decorators for type checking parameters which are passed to my Python methods via some RMI. So instead of repeating the same parameter counting, exception-raising mumbo-jumbo again and again. ", "Decorators are used for anything that you want to transparently \"wrap\" with additional functionality.", "For nosetests, you can write a decorator that supplies a unit test function or method with several sets of parameters:"]}, {"question": "I'm trying to port a shell script to the much more readable python version. The original shell script starts several processes (utilities, monitors, etc.) in the background with \"&\". How can I achieve the same effect in python? I'd like these processes not to die when the python scripts complete. I am sure it's related to the concept of a daemon somehow, but I couldn't find how to do this easily.", "answers": ["While jkp's solution works, the newer way of doing things (and the way the documentation recommends) is to use the subprocess module. For simple commands its equivalent, but it offers more options if you want to do something complicated.", "Note: This answer is less current than it was when posted in 2009. Using the subprocess module shown in other answers is now recommended in the docs", "You probably want the answer to \"How to call an external command in Python\".", "I found this here:", "Use subprocess.Popen() with the close_fds=True parameter, which will allow the spawned subprocess to be detached from the Python process itself and continue running even after Python exits."]}, {"question": "What's the \"Bad magic number\" ImportError in python, and how do I fix it?", "answers": ["The magic number comes from UNIX-type systems where the first few bytes of a file held a marker indicating the file type.", "Deleting all .pyc files will fix \"Bad Magic Number\" error.", "Loading a python3 generated *.pyc file with python2 also causes this error.", "Take the pyc file to a windows machine. Use any Hex editor to open this pyc file. I used freeware 'HexEdit'. Now read hex value of first two bytes. In my case, these were 03 f3.", "\"Bad magic number\" error also happens if you have manually named your file with an extension .pyc "]}, {"question": "I'm thinking about putting the virtualenv for a Django web app I am making inside my git repository for the app. It seems like an easy way to keep deploy's simple and easy. Is there any reason why I shouldn't do this?", "answers": ["I use pip freeze to get the packages I need into a requirements.txt file and add that to my repository.  I tried to think of a way of why you would want to store the entire virtualenv, but I could not.", "Storing the virtualenv directory inside git will, as you noted, allow you to deploy the whole app by just doing a git clone (plus installing and configuring Apache/mod_wsgi).  One potentially significant issue with this approach is that on Linux the full path gets hard-coded in the venv's activate, django-admin.py, easy_install, and pip scripts.  This means your virtualenv won't entirely work if you want to use a different path, perhaps to run multiple virtual hosts on the same server.  I think the website may actually work with the paths wrong in those files, but you would have problems the next time you tried to run pip.", "I used to do the same until I started using libraries that are compiled differently depending on the environment such as PyCrypto. My PyCrypto mac wouldn't work on Cygwin wouldn't work on Ubuntu.", "I think one of the main problems which occur is that the virtualenv might not be usable by other people. Reason is that it always uses absolute paths. So if you virtualenv was for example in /home/lyle/myenv/ it will assume the same for all other people using this repository (it must be exactly the same absolute path). You can't presume people using the same directory structure as you.", "It's not a good idea to include any environment-dependent component or setting in your repos as one of the key aspects of using a repo, is perhaps, sharing it with other developers.  Here is how I would setup my development environment on a Windows PC (say, Win10). "]}, {"question": "Why is cls sometimes used instead of self as an argument in Python classes?", "answers": ["The distinction between \"self\" and \"cls\" is defined in PEP 8 . As Adrien said, this is not mandatory. It's a coding style. PEP 8 says:", "cls implies that method belongs to the class while self implies that the  method is related to instance of the class,therefore member with cls is accessed by class name where as the one with self is accessed by instance of the class...it is the same concept as static member and non-static members in java if you are from java background.", "It's used in case of a class method. Check this reference for further details.", "This is very good question but not as wanting as question.\nThere is difference between 'self' and 'cls' used method though analogically they are at same place ", "Instead of accepting a self parameter, class methods take a cls parameter that points to the class\u2014and not the object instance\u2014when\n  the method is called.\n  Since the class method only has access to this cls argument, it can\u2019t\n  modify object instance state. That would require access to self . However, class methods can still modify class state that applies across all\n  instances of the class."]}, {"question": "I'm using the python requests module to send a RESTful GET to a server, for which I get a response in JSON. The JSON response is basically just a list of lists.", "answers": ["Since you're using requests, you should use the response's json method.", "You can use json.loads:", "You can use the json response as dictionary directly:"]}, {"question": "I need to join a list of items.  Many  of the items in the list are integer values returned  from a function;  i.e.,", "answers": ["Calling str(...) is the Pythonic way to convert something to a string.", "There's nothing wrong with passing integers to str. One reason you might not do this is that myList is really supposed to be a list of integers e.g. it would be reasonable to sum the values in the list. In that case, do not pass your ints to str before appending them to myList. If you end up not converting to strings before appending, you can construct one big string by doing something like", "The map function in python can be used. It takes two arguments. The first argument is the function which has to be used for each element of the list. The second argument is the iterable.", "above method is the easiest and most general way to convert list into string. another short method is-", "There are three ways of doing this."]}, {"question": "I'm building a simple helper script for work that will copy a couple of template files in our code base to the current directory. I don't, however, have the absolute path to the directory where the templates are stored. I do have a relative path from the script but when I call the script it treats that as a path relative to the current working directory. Is there a way to specify that this relative url is from the location of the script instead?", "answers": ["In the file that has the script, you want to do something like this:", "you need os.path.realpath (sample below adds the parent directory to your path)", "As mentioned in the accepted answer ", "It's 2018 now, and Python have already evolve to the __future__ long time ago. So how about using the amazing pathlib coming with Python 3.4 to accomplish the task instead of struggling with os, os.path, glob, shutil, etc.", "Consider my code:"]}, {"question": "I have not seen clear examples with use-cases for Pool.apply, Pool.apply_async and Pool.map. I am mainly using Pool.map; what are the advantages of others?", "answers": ["Back in the old days of Python, to call a function with arbitrary arguments, you would use apply:", "Here is an overview in a table format in order to show the differences between Pool.apply, Pool.apply_async, Pool.map and Pool.map_async. When choosing one, you have to take multi-args, concurrency, blocking, and ordering into account:", "Regarding apply vs map:"]}, {"question": "The above outputs on my Terminal. I am on Mac OS 10.7.x. I have Python 2.7.1, and followed this tutorial to get Beautiful Soup and lxml, which both installed successfully and work with a separate test file located here. In the Python script that causes this error, I have included this line:\n    from pageCrawler import comparePages\nAnd in the pageCrawler file I have included the following two lines:\n    from bs4 import BeautifulSoup\nfrom urllib2 import urlopen", "answers": ["I have a suspicion that this is related to the parser that BS will use to read the HTML.  They document is here, but if you're like me (on OSX) you might be stuck with something that requires a bit of work:", "I'd prefer the built in python html parser, no install no dependencies", "For basic out of the box python with bs4 installed then you can process your xml with", "Run these three commands to make sure that you have all the relevant packages installed:", "Actually 3 of the options mentioned by other work."]}, {"question": "I am using", "answers": ["From the documentation:", "Use requests.packages.urllib3.disable_warnings() and verify=False on requests methods.", "To add to Blender's answer, you can disable SSL certificate validation for all requests using Session.verify = False", "Also can be done from the environment variable:", "If you want to send exactly post request with verify=False option, fastest way is to use this code:"]}, {"question": "I know that I can use something like string[3:4] to get a substring in Python, but what does the 3 mean in somesequence[::3]?", "answers": ["it means 'nothing for the first argument, nothing for the second, and jump by three'. It gets every third item of the sequence sliced.\nExtended slices is what you want. New in Python 2.3", "Python sequence slice addresses can be written as a[start:end:step] and any of start, stop or end can be dropped.  a[::3] is every third element of the sequence.", "seq[::n] is a sequence of each n-th item in the entire sequence.", "s[i:j:k] is, according to the documentation, \"slice of s from i to j with step k\".  When i and j are absent, the whole sequence is assumed and thus s[::k] means \"every k-th item\".", "This visual example will show you how to a neatly select elements in a NumPy Matrix (2 dimensional array) in a pretty entertaining way (I promise). Step 2 below illustrate the usage of that \"double colons\" :: in question."]}, {"question": "Is there any other way to delete an item in a dictionary only if the given key exists, other than:", "answers": ["You can use  dict.pop:", "There is also:", "Let's call keys the list/iterator of keys that you are given to remove. I'd do this:"]}, {"question": "How do I get the index column name in python pandas?  Here's an example dataframe:", "answers": ["You can just get/set the index via its name property", "You can use rename_axis, for removing set to None:", "df.index.name should do the trick.", "Use df.index.rename('foo', inplace=True) to set the index name. ", "If you do not want to create a new row but simply put it in the empty cell then use:"]}, {"question": "What's the cleanest way to test if a dictionary contains a key?", "answers": ["and a quick search reveals some nice information about it: http://docs.python.org/3/tutorial/datastructures.html#dictionaries"]}, {"question": "I have a scatter plot graph with a bunch of random x, y coordinates. Currently the Y-Axis starts at 0 and goes up to the max value. I would like the Y-Axis to start at the max value and go up to 0.", "answers": ["There is a new API that makes this even simpler.", "DisplacedAussie's answer is correct, but usually a shorter method is just to reverse the single axis in question:", "You could also use function exposed by the axes object of the scatter  plot", "Use matplotlib.pyplot.axis()", "If you're in ipython in pylab mode, then"]}, {"question": "I have a small python project that has the following structure - ", "answers": ["Best practice is, in each module, to have a logger defined like this:", "Actually every logger is a child of the parent's package logger (i.e. package.subpackage.module inherits configuration from package.subpackage), so all you need to do is just to configure the root logger. This can be achieved by logging.config.fileConfig (your own config for loggers) or logging.basicConfig (sets the root logger). Setup logging in your entry module (__main__.py or whatever you want to run, for example main_script.py. __init__.py works as well)", "A simple way of using one instance of logging library in multiple modules for me was following solution:", "I always do it as below.", "Throwing in another solution. "]}, {"question": "Does * have a special meaning in Python as it does in C? I saw a function like this in the Python Cookbook:", "answers": ["See Function Definitions in the Language Reference.", "I only have one thing to add that wasn't clear from the other answers (for completeness's sake).", "All of the above answers were perfectly clear and complete, but just for the record I'd like to confirm that the meaning of * and ** in python has absolutely no similarity with the meaning of similar-looking operators in C. ", "A single star means that the variable 'a' will be a tuple of extra parameters that were supplied to the function.  The double star means the variable 'kw' will be a variable-size dictionary of extra parameters that were supplied with keywords.", "I find * useful when writing a function that takes another callback function as a parameter:"]}, {"question": "filter, map, and reduce work perfectly in Python 2. Here is an example:", "answers": ["You can read about the changes in What's New In Python 3.0. You should read it thoroughly when you move from 2.x to 3.x since a lot has been changed.", "The functionality of map and filter was intentionally changed to return iterators, and reduce was removed from being a built-in and placed in functools.reduce.", "As an addendum to the other answers, this sounds like a fine use-case for a context manager that will re-map the names of these functions to ones which return a list and introduce reduce in the global namespace.", "Since the reduce method has been removed from the built in function from Python3, don't forget to import the functools in your code. Please look at the code snippet below.", "One of the advantages of map, filter and reduce is how legible they become when you \"chain\" them together to do something complex. However, the built-in syntax isn't legible and is all \"backwards\". So, I suggest using the PyFunctional package (https://pypi.org/project/PyFunctional/). \nHere's a comparison of the two:"]}, {"question": "How do I get user's IP in django?", "answers": ["Make sure you have reverse proxy (if any) configured correctly (e.g. mod_rpaf installed for Apache).", "You can use django-ipware which supports Python 2 & 3 and handles IPv4 & IPv6.", "Alexander's answer is great, but lacks the handling of proxies that sometimes return multiple IP's in the HTTP_X_FORWARDED_FOR header.", "No More confusion In the recent versions of Django it is mentioned clearly that\nthe Ip address of the client is available at ", "I would like to suggest an improvement to yanchenko's answer."]}, {"question": "I want to append a newline to my string every time I call file.write(). What's the easiest way to do this in Python?", "answers": ["Use \"\\n\":", "You can do this in two ways:", "You can use: ", "If you use it extensively (a lot of written lines), you can subclass 'file':", "you could do:"]}, {"question": "I have two simple one-dimensional arrays in NumPy. I should be able to concatenate them using numpy.concatenate. But I get this error for the code below:", "answers": ["The line should be:", "There are several possibilities for concatenating 1D arrays, e.g.,", "The first parameter to concatenate should itself be a sequence of arrays to concatenate: ", "An alternative ist to use the short form of \"concatenate\" which is either \"r_[...]\" or \"c_[...]\" as shown in the example code beneath (see http://wiki.scipy.org/NumPy_for_Matlab_Users for additional information):", "Here are more approaches for doing this by using numpy.ravel(), numpy.array(), utilizing the fact that 1D arrays can be unpacked into plain elements:"]}, {"question": "I'm currently working on a computation in python shell. What I want to have is Matlab style listout where you can see all the variables that have been defined up to a point (so I know which names I've used, their values and such).", "answers": ["A few things you could use:", "If possible, you may want to use IPython.", "To get the names:", "As RedBlueThing and analog said:", "print locals()"]}, {"question": "I am trying to get my program to print out \"banana\" from the dictionary. What would be the simplest way to do this?", "answers": ["On a Python version where dicts actually are ordered, you can do", "A dictionary is not indexed, but it is in some way, ordered. The following would give you the first existing key:", "Update: as of Python 3.7, insertion order is maintained, so you don't need an OrderedDict here. You can use the below approaches with a normal dict", "If you just want the first key from a dictionary you should use what many have suggested before", "The dict type is an unordered mapping, so there is no such thing as a \"first\" element."]}, {"question": "actual output: [1,3,5,6]\nexpected output: [1,3,5]", "answers": ["If order is not important and you don't need to worry about duplicates then you can use set intersection:", "Using list comprehensions is a pretty obvious one for me. Not sure about performance, but at least things stay lists.", "If you convert the larger of the two lists into a set, you can get the intersection of that set with any iterable using intersection():", "Make a set out of the larger one:", "Here's some Python 2 / Python 3 code that generates timing information for both list-based and set-based methods of finding the intersection of two lists. "]}, {"question": "I have two Series s1 and s2 with the same (non-consecutive) indices. How do I combine s1 and s2 to being two columns in a DataFrame and keep one of the indices as a third column?", "answers": ["I think concat is a nice way to do this. If they are present it uses the name attributes of the Series as the columns (otherwise it simply numbers them):", "Why don't you just use .to_frame if both have the same indexes?", "Pandas will automatically align these passed in series and create the joint index\nThey happen to be the same here. reset_index moves the index to a column.", "If I may answer this.", "Example code:"]}, {"question": "I am learning Python and creating a database connection.\nWhile trying to add to the DB, I am thinking of creating tuples out of information and then add them to the DB. ", "answers": ["Tuples are immutable; you can't change which variables they contain after construction. However, you can concatenate or slice them to form new tuples:", "You can start with a blank tuple with something like t = (). You can add with +, but you have to add another tuple. If you want to add a single element, make it a singleton: t = t + (element,). You can add a tuple of multiple elements with or without that trailing comma.", "In Python 3, you can use * to create a new tuple of elements from the original tuple along with the new element.", "Another tactic not yet mentioned is using appending to a list, and then converting the list to a tuple at the end:", "\" once the info is added to the DB, should I delete the tuple? i mean i dont need the tuple anymore.\""]}, {"question": "I am dealing with dates in Python and I need to convert them to UTC timestamps to be used\ninside Javascript. The following code does not work:", "answers": ["If d = date(2011, 1, 1) is in UTC:", "For unix systems only:", "Assumption 1: You're attempting to convert a date to a timestamp, however since a date covers a 24 hour period, there isn't a single timestamp that represents that date. I'll assume that you want to represent the timestamp of that date at midnight (00:00:00.000).", "I defined my own two functions", "follow the python2.7 document, you have to use calendar.timegm() instead of time.mktime()"]}, {"question": "I have a loop starting with for i in range(0, 100). Normally it runs correctly, but sometimes it fails due to network conditions. Currently I have it set so that on failure, it will continue in the except clause (continue on to the next number for i).", "answers": ["Do a while True inside your for loop, put your try code inside, and break from that while loop only when your code succeeds.", "I prefer to limit the number of retries, so that if there's a problem with that specific item you will eventually continue onto the next one, thus:", "UPDATE 2021-12-01:", "Here is a solution similar to others, but it will raise the exception if it doesn't succeed in the prescribed number or retries.", "The retrying library was previously the way to go, but sadly it has some bugs and it hasn't got any updates since 2016. Other alternatives seem to be backoff and tenacity. During the time of writing this, the tenacity had more GItHub stars (2.3k vs 1.2k) and was updated more recently, hence I chose to use it. Here is an example:"]}, {"question": "I'm trying to read a .csv file into Python (Spyder) but I keep getting an error. My code:", "answers": ["This error occurs because you are using a normal string as a path. You can use one of the three following solutions to fix your problem:", "The first backslash in your string is being interpreted as a special character, in fact because it's followed by a \"U\" it's being interpreted as the start of a unicode code point.", "You can just put r in front of the string with your actual path, which denotes a raw string. For example:", "consider it as a raw string. Just simple answer, add r before your windows path.", "Try writing the file path as \"C:\\\\Users\\miche\\Documents\\school\\jaar2\\MIK\\2.6\\vektis_agb_zorgverlener\" i.e with double backslash after the drive as opposed to \"C:\\Users\\miche\\Documents\\school\\jaar2\\MIK\\2.6\\vektis_agb_zorgverlener\" "]}, {"question": "I am opening a file which has 100,000 URL's.  I need to send an HTTP request to each URL and print the status code. I am using Python 2.6, and so far looked at the many confusing ways Python implements threading/concurrency.  I have even looked at the python concurrence library, but cannot figure out how to write this program correctly.  Has anyone come across a similar problem?  I guess generally I need to know how to perform thousands of tasks in Python as fast as possible - I suppose that means 'concurrently'.", "answers": ["Twistedless solution:", "Things have changed quite a bit since 2010 when this was posted and I haven't tried all the other answers but I have tried a few, and I found this to work the best for me using python3.6.", "A solution using tornado asynchronous networking library", "I know this is an old question, but in Python 3.7 you can do this using asyncio and aiohttp.", "Threads are absolutely not the answer here. They will provide both process and kernel bottlenecks, as well as throughput limits that are not acceptable if the overall goal is \"the fastest way\"."]}, {"question": "To my shame, I can't figure out how to handle exception for python 'with' statement. If I have a code:", "answers": ["If you want different handling for errors from the open call vs the working code you could do:", "The best \"Pythonic\" way to do this, exploiting the with statement, is listed as Example #6 in PEP 343, which gives the background of the statement.", "The with statement has been available without the __future__ import since Python 2.6. You can get it as early as Python 2.5 (but at this point it's time to upgrade!) with:", "Differentiating between exceptions that occur in a with statement is tricky because they can originate in different places. Exceptions can be raised from either of the following places (or functions called therein):"]}, {"question": "I have a Python function which takes several arguments. Some of these arguments could be omitted in some scenarios.", "answers": ["Just use the *args parameter, which allows you to pass as many arguments as you want after your a,b,c. You would have to add some logic to map args->c,d,e,f but its a \"way\" of overloading.", "Try calling it like: obj.some_function( '1', 2, '3', g=\"foo\", h=\"bar\" ). After the required positional arguments, you can specify specific optional arguments by name.", "It is very easy just do this", "as in more proper way:", "Required parameters first, optional parameters after. Optional parameters always with a =None."]}, {"question": "What are the differences between shell languages like bash, zsh, fish and the scripting languages above that makes them more suitable for the shell?", "answers": ["There are a couple of differences that I can think of; just thoughtstreaming here, in no particular order:", "It's cultural.  The Bourne shell is almost 25 years old; it was one of the first scripting languages, and it was the first good solution to the central need of Unix admins.  (I.e., a 'glue' to tie all the other utilities together and to do typical Unix tasks without having to compile a damn C program every time.)  ", "A shell language has to be easy to use. You want to type one-time throw away commands, not small programs. I.e. you want to type", "If you know of such a language, please post it as well.", "Who says they aren't?  Take a look at Zoidberg.  REPLs (Read Eval Print Loops) make crappy shells because every command must be syntactically correct, and running a program goes from being:"]}, {"question": "Now that it's clear what a metaclass is, there is an associated concept that I use all the time without knowing what it really means. ", "answers": ["A callable is anything that can be called. ", "From Python's sources object.c:", "A callable is an object allows you to use round parenthesis ( ) and eventually pass some parameters, just like functions.", "Let me explain backwards:", "A Callable is an object that has the __call__ method.  This means you can fake callable functions or do neat things like Partial Function Application where you take a function and add something that enhances it or fills in some of the parameters, returning something that can be called in turn (known as Currying in functional programming circles)."]}, {"question": "Why doesn't list have a safe \"get\" method like dictionary?", "answers": ["Ultimately it probably doesn't have a safe .get method because a dict is an associative collection (values are associated with names) where it is inefficient to check if a key is present (and return its value) without throwing an exception, while it is super trivial to avoid exceptions accessing list elements (as the len method is very fast).  The .get method allows you to query the value associated with a name, not directly access the 37th item in the dictionary (which would be more like what you're asking of your list).", "This works if you want the first element, like my_list.get(0)", "Probably because it just didn't make much sense for list semantics. However, you can easily create your own by subclassing.", "Instead of using .get, using like this should be ok for lists. Just a usage difference.", "Credits to jose.angel.jimenez and Gus Bus."]}, {"question": "Say I have a Python function that returns multiple values in a tuple:", "answers": ["You can use x = func()[0] to return the first value, x = func()[1] to return the second, and so on.", "One common convention is to use a \"_\" as a variable name for the elements of the tuple you wish to ignore. For instance:", "If you're using Python 3, you can you use the star before a variable (on the left side of an assignment) to have it be a list in unpacking.", "The common practice is to use the dummy variable _ (single underscore), as many have indicated here before.", "Remember, when you return more than one item, you're really returning a tuple. So you can do things like this:"]}, {"question": "I want to loop over the contents of a text file and do a search and replace on some lines and write the result back to the file. I could first load the whole file in memory and then write it back, but that probably is not the best way to do it.", "answers": ["The shortest way would probably be to use the fileinput module. For example, the following adds line numbers to a file, in-place:", "I guess something like this should do it. It basically writes the content to a new file and replaces the old file with the new file:", "Here's another example that was tested, and will match search & replace patterns:", "This should work: (inplace editing)", "Based on the answer by Thomas Watnedal. \nHowever, this does not answer the line-to-line part of the original question exactly. The function can still replace on a line-to-line basis "]}, {"question": "What is the Pythonic approach to achieve the following?", "answers": ["In Python 2:", "In python 3.0 zip returns a zip object. You can get a list out of it by calling list(zip(a, b)).", "You can use map lambda", "Youre looking for the builtin function zip.", "I am not sure if this a pythonic way or not but this seems simple if both lists have the same number of elements : "]}, {"question": "I have a very big file 4GB and when I try to read it my computer hangs.\nSo I want to read it piece by piece and after processing each piece store the processed piece into another file and read next piece.", "answers": ["To write a lazy function, just use yield:", "file.readlines() takes in an optional size argument which approximates the number of lines read in the lines returned.", "If your computer, OS and python are 64-bit, then you can use the mmap module to map the contents of the file into memory and access it with indices and slices. Here an example from the documentation:", "There are already many good answers, but if your entire file is on a single line and you still want to process \"rows\" (as opposed to fixed-size blocks), these answers will not help you.", "UPDATE: The approach is best explained in https://stackoverflow.com/a/4566523/38592"]}, {"question": "I'm new to Python, so this is probably a simple scoping question. The following code in a Python file (module) is confusing me slightly:", "answers": ["Python variables are scoped to the innermost function, class, or module in which they're assigned. Control blocks like if and while blocks don't count, so a variable assigned inside an if is still scoped to a function, class, or module.", "Yes, they're in the same \"local scope\", and actually code like this is common in Python:", "Scope in python follows this order:", "As Eli said, Python doesn't require variable declaration. In C you would say:", "Unlike languages such as C, a Python variable is in scope for the whole of the function (or class, or module) where it appears, not just in the innermost \"block\".  It is as though you declared int x at the top of the function (or class, or module), except that in Python you don't have to declare variables."]}, {"question": "I have a list of sets:", "answers": ["From Python version 2.6 on you can use multiple arguments to set.intersection(), like", "As of 2.6, set.intersection takes arbitrarily many iterables. ", "Clearly set.intersection is what you want here, but in case you ever need a generalisation of \"take the sum of all these\", \"take the product of all these\", \"take the xor of all these\", what you are looking for is the reduce function:", "If you don't have Python 2.6 or higher, the alternative is to write an explicit for loop:", "Here I'm offering a generic function for multiple set intersection trying to take advantage of the best method available:"]}, {"question": "I've never used SOAP before and I'm sort of new to Python.  I'm doing this to get myself acquainted with both technologies.  I've installed SOAPlib and I've tried to read their Client documentation, but I don't understand it too well.  Is there anything else I can look into which is more suited for being a SOAP Client library for Python?", "answers": ["Update (2016):", "I followed the advice of other answers to this question and gave SUDS a try. After using it \"in anger\" I must agree: SUDS is very nice! Highly recommended!", "I had good experience with SUDS\nhttps://fedorahosted.org/suds", "SUDS is the way to go, no question about it.", "Just an FYI warning for people looking at SUDS, until this ticket is resolved, SUDS does not support the \"choice\" tag in WSDL:"]}, {"question": "A colleague is looking to generate UML class diagrams from heaps of Python source code. \nHe's primarily interested in the inheritance relationships, and mildly interested in compositional relationships, and doesn't care much about class attributes that are just Python primitives.", "answers": ["You may have heard of Pylint that helps statically checking Python code. Few people know that it comes with a tool named Pyreverse that draws UML diagrams from the Python code it reads. Pyreverse uses Graphviz as a backend.", "Epydoc is a tool to generate API documentation from Python source code. It also generates UML class diagrams, using Graphviz in fancy ways. Here is an example of diagram generated from the source code of Epydoc itself.", "Check this list of seven uml tools for python", "Certain classes of well-behaved programs may be diagrammable, but in the general case, it can't be done.  Python objects can be extended at run time, and objects of any type can be assigned to any instance variable.  Figuring out what classes an object can contain pointers to (composition) would require a full understanding of the runtime behavior of the program.", "It is worth mentioning Gaphor. A Python modelling/UML tool."]}, {"question": "I have this code which calculates the distance between two coordinates. The two functions are both within the same class.", "answers": ["Since these are member functions, call it as a member function on the instance, self.", "That doesn't work because distToPoint is inside your class, so you need to prefix it with the classname if you want to refer to it, like this: classname.distToPoint(self, p). You shouldn't do it like that, though. A better way to do it is to refer to the method directly through the class instance (which is the first argument of a class method), like so: self.distToPoint(p)."]}, {"question": "The following use of super() raises a TypeError: why?", "answers": ["Alright, it's the usual \"super() cannot be used with an old-style class\".", "super() can be used only in the new-style classes, which means the root class needs to inherit from the 'object' class.", "You can also use class TextParser(HTMLParser, object):. This makes TextParser a new-style class, and super() can be used.", "The problem is that super needs an object as an ancestor:", "If you look at the inheritance tree (in version 2.6), HTMLParser inherits from SGMLParser which inherits from ParserBase which doesn't inherits from object. I.e. HTMLParser is an old-style class."]}, {"question": "I am calling different processes with the subprocess module. However, I have a question.", "answers": ["The benefit of not calling via the shell is that you are not invoking a 'mystery program.'  On POSIX, the environment variable SHELL controls which binary is invoked as the \"shell.\"  On Windows, there is no bourne shell descendent, only cmd.exe.", "Setting the shell argument to a true value causes subprocess to spawn an intermediate shell process, and tell it to run the command. In other words, using an intermediate shell means that variables, glob patterns, and other special shell features in the command string are processed before the command is run. Here, in the example, $HOME was processed before the echo command. Actually, this is the case of command with shell expansion while the command ls -l considered as a simple command.", "An example where things could go wrong with Shell=True is shown here", "Executing programs through the shell means that all user input passed to the program is interpreted according to the syntax and semantic rules of the invoked shell.  At best, this only causes inconvenience to the user, because the user has to obey these rules.  For instance, paths containing special shell characters like quotation marks or blanks must be escaped.  At worst, it causes security leaks, because the user can execute arbitrary programs.", "The other answers here adequately explain the security caveats which are also mentioned in the subprocess documentation.  But in addition to that, the overhead of starting a shell to start the program you want to run is often unnecessary and definitely silly for situations where you don't actually use any of the shell's functionality.  Moreover, the additional hidden complexity should scare you, especially if you are not very familiar with the shell or the services it provides."]}, {"question": "I'm wondering if there's any difference between the code fragment", "answers": ["It depends on how you want to access the import when you refer to it.", "Many people have already explained about import vs from, so I want to try to explain a bit more under the hood, where the actual difference lies.", "There is a difference. In some cases, one of those will work and the other won't. Here is an example: say we have the following structure:", "You are using Python3 were urllib in the package. Both forms are acceptable and no one form of import is preferred over the other. Sometimes when there are multiple package directories involved you may to use the former from x.y.z.a import s", "In python 2.x at least you cannot do import urllib2.urlopen"]}, {"question": "I need to know if a variable in Python is a string or a dict.  Is there anything wrong with the following code?", "answers": ["What happens if somebody passes a unicode string to your function? Or a class derived from dict? Or a class implementing a dict-like interface? Following code covers first two cases. If you are using Python 2.6 you might want to use collections.Mapping instead of dict as per the ABC PEP.", "type(dict()) says \"make a new dict, and then find out what its type is\".  It's quicker to say just dict.\nBut if you want to just check type, a more idiomatic way is isinstance(x, dict).", "built-in types in Python have built in names:", "isinstance is preferrable over type because it also evaluates as True when you compare an object instance with it's superclass, which basically means you won't ever have to special-case your old code for using it with dict or str subclasses.", "I think I will go for the duck typing approach - \"if it walks like a duck, it quacks like a duck, its a duck\". This way you will need not worry about if the string is a unicode or ascii. "]}, {"question": "I have the below db model:", "answers": ["it looks like datetime.now() is being evaluated when the model is defined, and not each time you add a record.", "Instead of using datetime.now you should be really using from django.utils.timezone import now", "From the documentation on the django model default field:", "David had the right answer. The parenthesis () makes it so that the callable timezone.now() is called every time the model is evaluated. If you remove the () from timezone.now() (or datetime.now(), if using the naive datetime object) to make it just this:", "The datetime.now() is evaluated when the class is created, not when new record is being added to the database."]}, {"question": "What does for row_number, row in enumerate(cursor): do in Python?", "answers": ["The enumerate() function adds a counter to an iterable.", "It's a builtin function that returns an object that can be iterated over. See the documentation.", "I am reading a book (Effective Python) by Brett Slatkin and he shows another way to iterate over a list and also know the index of the current item in the list but he suggests that it is better not to use it and to use enumerate instead. \nI know you asked what enumerate means, but when I understood the following, I also understood how enumerate makes iterating over a list while knowing the index of the current item easier (and more readable). ", "As other users have mentioned, enumerate is a generator that adds an incremental index next to each item of an iterable.", "The enumerate function works as follows:"]}, {"question": "Is there any significant difference between the two python keywords continue and pass like in the examples", "answers": ["Yes, they do completely different things.  pass simply does nothing, while continue goes on with the next loop iteration.  In your example, the difference would become apparent if you added another statement after the if:  After executing pass, this further statement would be executed.  After continue, it wouldn't.", "Yes, there is a difference. continue forces the loop to start at the next iteration while pass means \"there is no code to execute here\" and will continue through the remainder of the loop body.", "continue will jump back to the top of the loop. pass will continue processing.", "Difference between pass and continue in a for loop:", "In your example, there will be no difference, since both statements appear at the end of the loop. pass is simply a placeholder, in that it does nothing (it passes execution to the next statement). continue, on the other hand, has a definite purpose: it tells the loop to continue as if it had just restarted."]}, {"question": "I can't get past the error:", "answers": ["You need to instantiate a class instance here.", "You need to initialize it first:", "Works and is simpler than every other solution I see here :", "The self keyword in Python is analogous to this keyword in C++ / Java / C#.", "You can also get this error by prematurely taking PyCharm's advice to annotate a method @staticmethod.  Remove the annotation."]}, {"question": "Just opened a file with Sublime Text (with Sublime Linter) and noticed a PEP8 formatting error that I'd never seen before. Here's the text:", "answers": ["PEP-8 recommends you indent lines to the opening parentheses if you put anything on the first line, so it should either be indenting to the opening bracket:", "This goes also for statements like this (auto-formatted by PyCharm):"]}, {"question": "I'm trying to disable warning C0321 (\"more than one statement on a single line\" -- I often put if statements with short single-line results on the same line), in Pylint 0.21.1 (if it matters: astng 0.20.1, common 0.50.3, and Python 2.6.6 (r266:84292, Sep 15 2010, 16:22:56)).", "answers": ["pylint --generate-rcfile shows it like this:", "I had this problem using Eclipse and solved it as follows:", "Starting from Pylint v. 0.25.3, you can use the symbolic names for disabling warnings instead of having to remember all those code numbers. E.g.:", "To disable a warning locally in a block, add", "There are several ways to disable warnings & errors from Pylint.  Which one to use has to do with how globally or locally you want to apply the disablement -- an important design decision."]}, {"question": "How can I install the MySQLdb module for Python using pip?", "answers": ["It's easy to do, but hard to remember the correct spelling:", "Starting from a fresh Ubuntu 14.04.2 system, these two commands were needed:", "First    ", "I had problems installing the 64-bit version of MySQLdb on Windows via Pip (problem compiling sources)  [32bit version installed ok]. Managed to install the compiled MySQLdb from the .whl file available from http://www.lfd.uci.edu/~gohlke/pythonlibs/ ", "well this worked for me:"]}, {"question": "I'm trying to do this query in sqlalchemy", "answers": ["How about ", "Assuming you use the declarative style (i.e. ORM classes), it is pretty easy:", "An alternative way is using raw SQL mode with SQLAlchemy, I use SQLAlchemy 0.9.8, python 2.7, MySQL 5.X, and MySQL-Python as connector, in this case, a tuple is needed. My code listed below:", "Just wanted to share my solution using sqlalchemy and pandas in python 3. Perhaps, one would find it useful.", "With the expression API, which based on the comments is what this question is asking for, you can use the in_ method of the relevant column."]}, {"question": "What is the recommended way of handling settings for local development and the production server? Some of them (like constants, etc) can be changed/accessed in both, but some of them (like paths to static files) need to remain different, and hence should not be overwritten every time the new code is deployed.", "answers": ["Two Scoops of Django: Best Practices for Django 1.5 suggests using version control for your settings files and storing the files in a separate directory:", "In settings.py:", "Instead of settings.py, use this layout:", "I use a slightly modified version of the \"if DEBUG\" style of settings that Harper Shelby posted.  Obviously depending on the environment (win/linux/etc.) the code might need to be tweaked a bit.", "I use a settings_local.py and a settings_production.py. After trying several options I've found that it's easy to waste time with complex solutions when simply having two settings files feels easy and fast."]}, {"question": "In my case, I'm using the requests library to call PayPal's API over HTTPS. Unfortunately, I'm getting an error from PayPal, and PayPal support cannot figure out what the error is or what's causing it. They want me to \"Please provide the entire request, headers included\".", "answers": ["A simple method: enable logging in recent versions of Requests (1.x and higher.)  ", "r is a response.  It has a request attribute which has the information you need.", "You can use HTTP Toolkit to do exactly this.", "If you're using Python 2.x, try installing a urllib2 opener. That should print out your headers, although you may have to combine that with other openers you're using to hit the HTTPS.", "A much simpler way to debug HTTP local requests is to use netcat. If you run"]}, {"question": "I would like to know how to simply reverse the color order of a given colormap in order to use it with plot_surface.", "answers": ["The standard colormaps also all have reversed versions. They have the same names with _r tacked on to the end. (Documentation here.)", "The solution is pretty straightforward. Suppose you want to use the \"autumn\" colormap scheme. The standard version:", "In matplotlib a color map isn't a list, but it contains the list of its colors as colormap.colors. And the module matplotlib.colors provides a function ListedColormap() to generate a color map from a list. So you can reverse any color map by doing ", "As of Matplotlib 2.0, there is a reversed() method for ListedColormap and LinearSegmentedColorMap objects, so you can just do", "As a LinearSegmentedColormaps is based on a dictionary of red, green and blue, it's necessary to reverse each item:"]}, {"question": "If I've got a multi-level column index:", "answers": ["You can use MultiIndex.droplevel:", "Another way to drop the index is to use a list comprehension: ", "As of Pandas 0.24.0, we can now use DataFrame.droplevel():", "Another way to do this is to reassign df based on a cross section of df, using the .xs method.", "You could also achieve that by renaming the columns:"]}, {"question": "In R when you need to retrieve a column index based on the name of the column you could do", "answers": ["Sure, you can use .get_loc():", "Here is a solution through list comprehension. cols is the list of columns to get index for:", "DSM's solution works, but if you wanted a direct equivalent to which you could do (df.columns == name).nonzero()", "When you might be looking to find multiple column matches, a vectorized solution using searchsorted method could be used. Thus, with df as the dataframe and query_cols as the column names to be searched for, an implementation would be -", "In case you want the column name from the column location (the other way around to the OP question), you can use:"]}, {"question": "I am using PyCharm on Windows and want to change the settings to limit the maximum line length to 79 characters, as opposed to the default limit of 120 characters.", "answers": ["Here is screenshot of my Pycharm. Required settings is in following path: File -> Settings -> Editor -> Code Style -> General: Right margin (columns)", "For PyCharm 2018.1 on Mac:", "For PyCharm 4", "You can even set a separate right margin for HTML. Under the specified path:", "For anyone, or myself if I reload my machine, who this is not working for when you do a code reformat there is an additional option to check under editor->code style->python : ensure right margin is not exceeded.  Once this was selected the reformat would work."]}, {"question": "Believe it or not, after profiling my current code, the repetitive operation of numpy array reversion ate a giant chunk of the running time. What I have right now is the common view-based method:", "answers": ["When you create reversed_arr you are creating a view into the original array.  You can then change the original array, and the view will update to reflect the changes.", "As mentioned above,", "Because this seems to not be marked as answered yet... The Answer of Thomas Arildsen should be the proper one: just use", "np.fliplr() flips the array left to right. ", "I will expand on the earlier answer about np.fliplr(). Here is some code that demonstrates constructing a 1d array, transforming it into a 2d array, flipping it, then converting back into a 1d array. time.clock() will be used to keep time, which is presented in terms of seconds."]}, {"question": "I have a Dataframe, df, with the following column:", "answers": ["If you want new columns showing year and month separately you can do this:", "The df['date_column'] has to be in date time format.", "You can directly access the year and month attributes, or request a datetime.datetime:", "If you want the month year unique pair, using apply is pretty sleek.", "Extracting the Year say from ['2018-03-04']  "]}, {"question": "I am using this data frame:", "answers": ["Use GroupBy.sum:", "Also you can use agg function,", "If you want to keep the original columns Fruit and Name, use reset_index(). Otherwise Fruit and Name will become part of the index. ", "Both the other answers accomplish what you want.  ", "You can select different columns to sum numbers. "]}, {"question": "Tried to perform REST GET through python requests with the following code and I got error.", "answers": ["The docs give a fair indicator of what's required., however requests allow us to skip a few steps:", "If you are not able to upgrade your Python version to 2.7.9, and want to suppress warnings, "]}, {"question": "In Python, is there a portable and simple way to test if an executable program exists?", "answers": ["I know this is an ancient question, but you can use distutils.spawn.find_executable.  This has  been documented since python 2.4 and has existed since python 1.6.", "Easiest way I can think of: ", "Use shutil.which() from Python's wonderful standard library.\nBatteries included!", "As a one-liner of Jan-Philip Gehrcke Answer:", "Just remember to specify the file extension on windows. Otherwise, you have to write a much complicated is_exe for windows using PATHEXT environment variable. You may just want to use FindPath."]}, {"question": "The docs show how to apply multiple functions on a groupby object at a time using a dict with the output column names as the keys:", "answers": ["The second half of the currently accepted answer is outdated and has two deprecations. First and most important, you can no longer pass a dictionary of dictionaries to the agg groupby method. Second, never use .ix.", "For the first part you can pass a dict of column names for keys and a list of functions for the values:", "Since pandas version 0.25.0 or higher, we are moving away from the dictionary based aggregation and renaming, and moving towards named aggregations which accepts a tuple. Now we can simultaneously aggregate + rename to a more informative column name:", "As an alternative (mostly on aesthetics) to Ted Petrou's answer, I found I preferred a slightly more compact listing. Please don't consider accepting it, it's just a much-more-detailed comment on Ted's answer, plus code/data. Python/pandas is not my first/best, but I found this to read well:", "New in version 0.25.0."]}, {"question": "In our team, we define most test cases like this:", "answers": ["This works as you suggest - you just have to specify the class name as well:", "If you organize your test cases, that is, follow the same organization like the actual code and also use relative imports for modules in the same package, you can also use the following command format:", "It can work well as you guess", "If you check out the help of the unittest module it tells you about several combinations that allow you to run test case classes from a module and test methods from a test case class.", "In case you want to run only tests from a specific class:"]}, {"question": "I've got list of objects. I want to find one (first or whatever) object in this list that has attribute (or method result - whatever) equal to value.", "answers": ["This gets the first item from the list that matches the condition, and returns None if no item matches. It's my preferred single-expression form.", "Since it has not been mentioned just for completion.\nThe good ol' filter to filter your to be filtered elements.", "A simple example:\nWe have the following array", "Old question but I use this quite frequently (for version 3.8). It's a bit of syntactic salt, but it has the advantage over the top answer in that you could retrieve a list of results (if there are multiple) by simply removing the [0] and it still defaults to None if nothing is found. For any other condition, simply change the x.value==value to what ever you're looking for.", "You could also implement rich comparison via __eq__ method for your Test class and use in operator.\nNot sure if this is the best stand-alone way, but in case if you need to compare Test instances based on value somewhere else, this could be useful."]}, {"question": "How can I read in a .csv file (with no headers) and when I only want a subset of the columns (say 4th and 7th out of a total of 20 columns), using pandas? I cannot seem to be able to do usecols", "answers": ["In order to read a csv in that doesn't have a header and for only certain columns you need to pass params header=None and usecols=[3,6] for the 4th and 7th columns:", "Previous answers were good and correct, but in my opinion, an extra names parameter will make it perfect, and it should be the recommended way, especially when the csv has no headers.", "Make sure you specify pass header=None and add usecols=[3,6] for the 4th and 7th columns.", "As per documentation https://pandas.pydata.org/docs/reference/api/pandas.read_csv.html :\nheaderint, list of int, default \u2018infer\u2019\nRow number(s) to use as the column names, and the start of the data. Default behavior is to infer the column names: if no names are passed the behavior is identical to header=0 and column names are inferred from the first line of the file, if column names are passed explicitly then the behavior is identical to header=None. Explicitly pass header=0 to be able to replace existing names. The header can be a list of integers that specify row locations for a multi-index on the columns e.g. [0,1,3]. Intervening rows that are not specified will be skipped (e.g. 2 in this example is skipped). Note that this parameter ignores commented lines and empty lines if skip_blank_lines=True, so header=0 denotes the first line of data rather than the first line of the file."]}, {"question": "I use pandas.to_datetime to parse the dates in my data. Pandas by default represents the dates with datetime64[ns] even though the dates are all daily only.\nI wonder whether there is an elegant/clever way to convert the dates to datetime.date or datetime64[D] so that, when I write the data to CSV, the dates are not appended with 00:00:00. I know I can convert the type manually element-by-element:", "answers": ["Since version 0.15.0 this can now be easily done using .dt to access just the date component:", "Simple Solution:", "While I upvoted EdChum's answer, which is the most direct answer to the question the OP posed, it does not really solve the performance problem (it still relies on python datetime objects, and hence any operation on them will be not vectorized - that is, it will be slow).", "Avoid, where possible, converting your datetime64[ns] series to an object dtype series of datetime.date objects. The latter, often constructed using pd.Series.dt.date, is stored as an array of pointers and is inefficient relative to a pure NumPy-based series.", "Pandas DatetimeIndex and Series have a method called normalize that does exactly what you want."]}, {"question": "What is the difference between ndarray and array in Numpy? And where can I find the implementations in the numpy source code?", "answers": ["numpy.array is just a convenience function to create an ndarray; it is not a class itself.  ", "numpy.array is a function that returns a numpy.ndarray.  There is no object type numpy.array.", "Just a few lines of example code to show the difference between numpy.array and numpy.ndarray", "numpy.ndarray() is a class, while numpy.array() is a method / function to create ndarray. ", "I think with np.array() you can only create C like though you mention the order, when you check using np.isfortran() it says false. but with np.ndarrray() when you specify the order it creates based on the order provided. "]}, {"question": "I am trying to use networkx with Python. When I run this program it get this error. Is there anything missing?", "answers": ["The main problem is that (on your system) matplotlib chooses an x-using backend by default. I just had the same problem on one of my servers.  The solution for me was to add the following code in a place that gets read before any other pylab/matplotlib/pyplot import:", "Just as a complement of Reinout's answer.", "The clean answer is to take a little bit of time correctly prepare your execution environment.", "I got the error while using matplotlib through Spark. matplotlib.use('Agg') doesn't work for me. In the end, the following code works for me. More here", "I will just repeat what @Ivo Bosticky said which can be overlooked. Put these lines at the VERY start of the py file."]}, {"question": "I'm parsing some HTML with Beautiful Soup 3, but it contains HTML entities which Beautiful Soup 3 doesn't automatically decode for me:", "answers": ["Use html.unescape():", "Beautiful Soup handles entity conversion. In Beautiful Soup 3, you'll need to specify the convertEntities argument to the BeautifulSoup constructor (see the 'Entity Conversion' section of the archived docs). In Beautiful Soup 4, entities get decoded automatically.", "You can use replace_entities from w3lib.html library", "Beautiful Soup 4 allows you to set a formatter to your output", "I had a similar encoding issue. I used the normalize() method. I was getting a Unicode error using the pandas .to_html() method when exporting my data frame to an .html file in another directory. I ended up doing this and it worked..."]}, {"question": "I know I should avoid using global variables in the first place due to confusion like this, but if I were to use them, is the following a valid way to go about using them? (I am trying to call the global copy of a variable created in a separate function.)", "answers": ["If you want to simply access a global variable you just use its name. However to change its value you need to use the global keyword.", "Within a Python scope, any assignment to a variable not already declared within that scope creates a new local variable unless that variable is declared earlier in the function as referring to a globally scoped variable with the keyword global.", "As others have noted, you need to declare a variable global in a function when you want that function to be able to modify the global variable. If you only want to access it, then you don't need global.", "You can directly access a global variable inside a function. If you want to change the value of that global variable, use \"global variable_name\". See the following example:", "Here is one case that caught me out, using a global as a default value of a parameter."]}, {"question": "Apply function to every item of iterable and return a list of the results. If additional iterable arguments are passed, function must take that many arguments and is applied to the items from all iterables in parallel. ", "answers": ["map isn't particularly pythonic. I would recommend using list comprehensions instead:", "map doesn't relate to a Cartesian product at all, although I imagine someone well versed in functional programming could come up with some impossible to understand way of generating a one using map. ", "map creates a new list by applying a function to every element of the source:", "Simplifying a bit, you can imagine map() doing something like this:", "The map() function is there to apply the same procedure to every item in an iterable data structure, like lists, generators, strings, and other stuff."]}, {"question": "I'm basically looking for a python version of Combination of List<List<int>>", "answers": ["you need itertools.product:", "The most elegant solution is to use itertools.product in python 2.6.", "I hope you find that as elegant as I did when I first encountered it.", "Nothing wrong with straight up recursion for this task, and if you need a version that works with strings, this might fit your needs:", "Numpy can do it:"]}, {"question": "Is it possible? When installing pip, install the python packages inside my $HOME folder. (for example, I want to install mercurial, using pip, but inside $HOME instead of /usr/local)", "answers": ["While you can use a virtualenv, you don't need to.  The trick is passing the PEP370 --user argument to the setup.py script.  With the latest version of pip, one way to do it is:", "I would use virtualenv at your HOME directory.", "You can specify the -t option (--target) to specify the destination directory. See pip install --help for detailed information. This is the command you need: ", "Yes"]}, {"question": "I'm building a web application that will is going to manipulate (pad, mix, merge etc) sound files and I've found that sox does exactly what I want. Sox is a linux command line program and I'm feeling a little uncomfortable with having the python web app starting new sox processes on my server on a per request basis. ", "answers": ["The subprocess module is the preferred way of running other programs from Python -- much more flexible and nicer to use than os.system. ", "This whole setup seems a little unstable to me.", "If you're concerned about server performance then look at capping the number of running sox processes. If the cap has been hit you can always cache the request and inform the user when it's finished in whichever way suits your application.", "I am not familiar with sox, but instead of making repeated calls to the program as a command line, is it possible to set it up as a service and connect to it for requests?  You can take a look at the connection interface such as sqlite for inspiration.  "]}, {"question": "I need to add two subplots to a figure. One subplot needs to be about three times as wide as the second (same height). I accomplished this using GridSpec and the colspan argument but I would like to do this using figure so I can save to PDF. I can adjust the first figure using the figsize argument in the constructor, but how do I change the size of the second plot?", "answers": ["", "You can use gridspec and figure:", "I used pyplot's axes object to manually adjust the sizes without using GridSpec:", "Probably the simplest way is using subplot2grid, described in Customizing Location of Subplot Using GridSpec.", "In a simple way, different size sub plotting can also be done without gridspec:"]}, {"question": "My project is currently receiving a JSON message in python which I need to get bits of information out of. For the purposes of this, let's set it to some simple JSON in a string:", "answers": ["Very simple:", "Sometimes your json is not a string. For example if you are getting a json from a url like this:", "For URL or file, use json.load(). For string with .json content, use json.loads().", "Following is simple example that may help you:"]}, {"question": "I have spent plenty of time as far as I am newbie in Python.\nHow could I ever decode such a URL:", "answers": ["The data is UTF-8 encoded bytes escaped with URL quoting, so you want to decode, with urllib.parse.unquote(), which handles decoding from percent-encoded data to UTF-8 bytes and then to text, transparently:", "If you are using Python 3, you can use urllib.parse", "You can achieve an expected result with requests library as well:", "In HTML the URLs can contain html entities.\nThis replaces them, too."]}, {"question": "In the book that I am reading on Python, it keeps using the code eval(input('blah')) ", "answers": ["The eval function lets a Python program run Python code within itself.", "eval() interprets a string as code. The reason why so many people have warned you about using this is because a user can use this as an option to run code on the computer. If you have eval(input()) and os imported, a person could type into input() os.system('rm -R *') which would delete all your files in your home directory. (Assuming you have a unix system). Using eval() is a security hole. If you need to convert strings to other formats, try to use things that do that, like int().", "Lots of good answers here, but none describe the use of eval() in the context of its globals and locals kwargs, i.e. eval(expression, globals=None, locals=None) (see docs for eval here).", "In Python 2.x input(...) is equivalent to eval(raw_input(...)), in Python 3.x raw_input was renamed input, which I suspect lead to your confusion (you were probably looking at the documentation for input in Python 2.x). Additionally, eval(input(...)) would work fine in Python 3.x, but would raise a TypeError in Python 2.", "Maybe a misleading example of reading a line and interpreting it."]}, {"question": "I'm trying out Python's type annotations with abstract base classes to write some interfaces. Is there a way to annotate the possible types of *args and **kwargs?", "answers": ["For variable positional arguments (*args) and variable keyword arguments (**kw) you only need to specify the expected value for one such argument.", "The proper way to do this is using @overload", "As a short addition to the previous answer, if you're trying to use mypy on Python 2 files and need to use comments to add types instead of annotations, you need to prefix the types for args and kwargs with * and ** respectively:", "While you can annotate variadic arguments with a type, I don't find it very useful because it assumes that all arguments are of the same type.", "In some cases the content of **kwargs can be a variety of types."]}, {"question": "I am trying to import Tkinter. However, I get an error stating that Tkinter has not been installed:", "answers": ["It is not very easy to install Tkinter locally to use with system-provided Python. You may build it from sources, but this is usually not the best idea with a binary package-based distro you're apparently running.", "Actually, you just need to use the following to install the tkinter for python3:", "If, like me, you don't have root privileges on your network because of your wonderful friends in I.S., and you are working in a local install you may have some problems with the above approaches.", "If you are using Python 3 it might be because you are typing Tkinter not tkinter", "For Arch Linux users, it goes a bit like"]}, {"question": "I know how to generate a random number within a range in Python.", "answers": ["If you just need sampling without replacement:", "Generate the range of data first and then shuffle it like this", "You could add to a set until you reach n:", "You could use the random.sample function from the standard library to select k elements from a population:"]}, {"question": "I'm using python3.3 and I'm having a cryptic error when trying to pickle a simple dictionary. ", "answers": ["The output file needs to be opened in binary mode:", "Just had same issue.  In Python 3, Binary modes 'wb', 'rb' must be specified whereas in Python 2x,  they are not needed.  When you follow tutorials that are based on Python 2x,  that's why you are here. ", "pickle uses a binary protocol, hence only accepts binary files. As the document said in the first sentence, \"The pickle module implements binary protocols for serializing and de-serializing\"."]}, {"question": "I want to display:", "answers": ["You should use the new format specifications to define how your value should be represented:", "The String Formatting Operations section of the Python documentation contains the answer you're looking for.  In short:", "I suppose you're probably using the Decimal() objects from the decimal module? (If you need exactly two digits of precision beyond the decimal point with arbitrarily large numbers, you definitely should be, and that's what your question's title suggests...)", "You can change 2 in 2f to any number of decimal points you want to show.", "You can use the string formatting operator as so:"]}, {"question": "Is there a way in python to programmatically determine the width of the console? I mean the number of characters that fits in one line without wrapping, not the pixel width of the window.", "answers": ["Not sure why it is in the module shutil, but it landed there in Python 3.3, Querying the size of the output terminal:", "uses the 'stty size' command which according to a thread on the python mailing list is reasonably universal on linux. It opens the 'stty size' command as a file, 'reads' from it, and uses a simple string split to separate the coordinates.", "use", "Code above didn't return correct result on my linux because winsize-struct has 4 unsigned shorts, not 2 signed shorts:", "It's either:"]}, {"question": "I have been searching and tried various alternatives without success and spent several days on it now - driving me mad.", "answers": ["Here is my workflow after creating a folder and cd'ing into it:", "You forgot to do source bin/activate where source is a executable name.\nStruck me first few times as well, easy to think that manual is telling \"execute this from root of the environment folder\". ", "You can do ", "Go to the project directory. In my case microblog is the flask project directory and under microblog directory there should be app and venv folders. then run the below command, This is one worked for me in Ubuntu.", "Cd to the environment path, go to the bin folder.\nAt this point when you use ls command, you should see the \"activate\" file."]}, {"question": "I load some machine learning data from a CSV file. The first 2 columns are observations and the remaining columns are features.", "answers": ["See the deprecation in the docs", "Note: .ix has been deprecated since Pandas v0.20. You should instead use .loc or .iloc, as appropriate.", "Lets use the titanic dataset from the seaborn package as an example", "Also, Given a DataFrame ", "You can slice along the columns of a DataFrame by referring to the names of each column in a list, like so:"]}, {"question": "I want to find out my Python installation path on Windows. For example:", "answers": ["In your Python interpreter, type the following commands:", "If you have Python in your environment variable then you can use the following command in cmd or powershell:", "It would be either of", "If you need to know the installed path under Windows without starting the python interpreter, have a look in the Windows registry.", "Simple way is"]}, {"question": "I am working with a library which returns a byte string and I need to convert this to a string. ", "answers": ["The only thing that a computer can store is bytes.", "Assuming Python 3 (in Python 2, this difference is a little less well-defined) - a string is a sequence of characters, ie unicode codepoints; these are an abstract concept, and can't be directly stored on disk. A byte string is a sequence of, unsurprisingly, bytes - things that can be stored on disk. The mapping between them is an encoding - there are quite a lot of these (and infinitely many are possible) - and you need to know which applies in the particular case in order to do the conversion, since a different encoding may map the same bytes to a different string: ", "Note: I will elaborate more my answer for Python 3 since the end of life of Python 2 is very close.", "From What is Unicode:", "Let's have a simple one-character string '\u0161' and encode it into a sequence of bytes:"]}, {"question": "Run the following code from a directory that contains a directory named bar (containing one or more files) and a directory named baz (also containing one or more files).  Make sure there is not a directory named foo.", "answers": ["Here's a solution that's part of the standard library:", "This limitation of the standard shutil.copytree seems arbitrary and annoying. Workaround:", "Python 3.8 introduced the dirs_exist_ok argument to shutil.copytree:", "In slight improvement on atzz's answer to the function where the above function always tries to copy the files from source to destination. ", "A merge one inspired by atzz and Mital Vora:"]}, {"question": "I have a series of images that I want to create a video from.  Ideally I could specify a frame duration for each frame but a fixed frame rate would be fine too.  I'm doing this in wxPython, so I can render to a wxDC or I can save the images to files, like PNG.  Is there a Python library that will allow me to create either a video (AVI, MPG, etc) or an animated GIF from these frames?", "answers": ["I'd recommend not using images2gif from visvis because it has problems with PIL/Pillow and is not actively maintained (I should know, because I am the author).", "Here's how you do it using only PIL (install with: pip install Pillow):", "Well, now I'm using ImageMagick.  I save my frames as PNG files and then invoke ImageMagick's convert.exe from Python to create an animated GIF.  The nice thing about this approach is I can specify a frame duration for each frame individually.  Unfortunately this depends on ImageMagick being installed on the machine.  They have a Python wrapper but it looks pretty crappy and unsupported.  Still open to other suggestions.", "As of June 2009 the originally cited blog post has a method to create animated GIFs in the comments.  Download the script images2gif.py (formerly images2gif.py, update courtesy of @geographika).", "I used images2gif.py which was easy to use. It did seem to double the file size though.."]}, {"question": "I'm new to Python and Flask and I'm trying to do the equivalent of Response.redirect as in C# - ie: redirect to a specific URL - how do I go about this?", "answers": ["You have to return a redirect:", "Take a look at the example in the documentation.", "From the Flask API Documentation (v. 2.0.x):", "I believe that this question deserves an updated. Just compare with other approaches.", "Flask includes the redirect function for redirecting to any url. Futhermore, you can abort a request early with an error code with abort:"]}, {"question": "Can I insert a column at a specific column index in pandas? ", "answers": ["see docs: http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.insert.html", "If you want a single value for all rows:", "You could try to extract columns as list, massage this as you want, and reindex your dataframe:", "This will work if there is no other column with the same name. If a column, with your provided name already exists in the dataframe, it will raise a ValueError.", "You can do that after you added the 'n' column into your df as follows. "]}, {"question": "For example I have simple DF:", "answers": ["Sure!  Setup:", "Another solution is to use the query method:", "And remember to use parenthesis!", "You can use pandas it has some built in functions for comparison. So if you want to select values of \"A\" that are met by the conditions of \"B\" and \"C\" (assuming you want back a DataFrame pandas object)"]}, {"question": "I'd like to create a file with path x using python. I've been using os.system(y) where y = 'touch %s' % (x). I've looked for a non-directory version of os.mkdir, but I haven't been able to find anything. Is there a tool like this to create a file without opening it, or using system or popen/subprocess?", "answers": ["There is no way to create a file without opening it There is os.mknod(\"newfile.txt\") (but it requires root privileges on OSX). The system call to create a file is actually open() with the O_CREAT flag. So no matter how, you'll always open the file.", "Of course there IS a way to create files without opening. It's as easy as calling os.mknod(\"newfile.txt\").  The only drawback is that this call requires root privileges on OSX."]}, {"question": "I can't understand why Python doesn't have a sign function. It has an abs builtin (which I consider sign's sister), but no sign.", "answers": ["EDIT:", "\"copysign\" is defined by IEEE 754, and part of the C99 specification. That's why it's in Python. The function cannot be implemented in full by abs(x) * sign(y) because of how it's supposed to handle NaN values.", "Another one liner for sign()", "Since cmp has been removed, you can get the same functionality with", "The definition on Wikipedia reads:"]}, {"question": "How can I see what's inside a bucket in S3 with boto3? (i.e. do an \"ls\")?", "answers": ["One way to see the contents would be:", "This is similar to an 'ls' but it does not take into account the prefix folder convention and will list the objects in the bucket.  It's left up to the reader to filter out prefixes which are part of the Key name. ", "I'm assuming you have configured authentication separately. ", "My s3 keys utility function is essentially an optimized version of @Hephaestus's answer:", "In order to handle large key listings (i.e. when the directory list is greater than 1000 items), I used the following code to accumulate key values (i.e. filenames) with multiple listings (thanks to Amelio above for the first lines).  Code is for python3:"]}, {"question": "PIL does support JPEG in my system.", "answers": ["libjpeg-dev is required to be able to process jpegs with pillow (or PIL), so you need to install it and then recompile pillow. It also seems that libjpeg8-dev is needed on Ubuntu 14.04", "For those on OSX, I used the following binary to get libpng and libjpeg installed systemwide:", "This is the only way that worked for me. Installing packages and reinstalling PIL didn't work.", "The followed works on ubuntu 12.04:", "On Fedora 17 I had to install libjpeg-devel and afterwards reinstall PIL:"]}, {"question": "When I try", "answers": ["Simply put, numpy.newaxis is used to increase the dimension of the existing array by one more dimension, when used once. Thus,", "The np.newaxis is just an alias for the Python constant None, which means that wherever you use np.newaxis you could also use None:", "You started with a one-dimensional list of numbers.  Once you used numpy.newaxis, you turned it into a two-dimensional matrix, consisting of four rows of one column each.", "newaxis object in the selection tuple serves to expand the dimensions of the resulting selection by one unit-length dimension."]}, {"question": "I've spent entirely too long researching how to get two subplots to share the same y-axis with a single colorbar shared between the two in Matplotlib. ", "answers": ["Just place the colorbar in its own axis and use subplots_adjust to make room for it.", "You can simplify Joe Kington's code using the axparameter of figure.colorbar() with a list of axes.\nFrom the documentation:", "This solution does not require manual tweaking of axes locations or colorbar size, works with multi-row and single-row layouts, and works with tight_layout().  It is adapted from a gallery example, using ImageGrid from matplotlib's AxesGrid Toolbox.", "Using make_axes is even easier and gives a better result. It also provides possibilities to customise the positioning of the colorbar.\nAlso note the option of subplots to share x and y axes.", "As a beginner who stumbled across this thread, I'd like to add a python-for-dummies adaptation of abevieiramota's very neat answer (because I'm at the level that I had to look up 'ravel' to work out what their code was doing):"]}, {"question": "The above code generates a file, test.csv, with an extra \\r at each row, like so:", "answers": ["The official csv documentation recommends opening the file with newline='' on all platforms to disable universal newlines translation:", "While @john-machin gives a good answer, it's not always the best approach. For example, it doesn't work on Python 3 unless you encode all of your inputs to the CSV writer. Also, it doesn't address the issue if the script wants to use sys.stdout as the stream.", "In Python 3 (I haven't tried this in Python 2), you can also simply do", "You can introduce the  lineterminator='\\n' parameter in the csv writer command.", "You have to add attribute newline=\"\\n\" to open function like this:"]}, {"question": "I have a function called by the main program:", "answers": ["The other answers all point out that you should not catch generic exceptions, but no one seems to want to tell you why, which is essential to understanding when you can break the \"rule\". Here is an explanation. Basically, it's so that you don't hide:", "Get the name of the class that exception object belongs:", "You usually should not catch all possible exceptions with try: ... except as this is overly broad. Just catch those that are expected to happen for whatever reason. If you really must, for example if you want to find out more about some problem while debugging, you should do", "Most answers point to except (\u2026) as (\u2026): syntax (rightly so) but at the same time nobody wants to talk about an elephant in the room, where the elephant is sys.exc_info() function.\nFrom the documentation of sys module (emphasis mine):", "Unless somefunction is a very bad coded legacy function, you shouldn't need what you're asking."]}, {"question": "I've recently become interested in algorithms and have begun exploring them by writing a naive implementation and then optimizing it in various ways.", "answers": ["This one has been answered already here: Python memory profiler", "Python 3.4 includes a new module: tracemalloc. It provides detailed statistics about which code is allocating the most memory. Here's an example that displays the top three lines allocating memory.", "If you only want to look at the memory usage of an object, (answer to other question)", "Disclosure:", "Below is a simple function decorator which allows to track how much memory the process consumed before the function call, after the function call, and what is the difference:"]}, {"question": "Say I have a function:", "answers": ["I'd recommend reading that PEP the error gives you.  The problem is that your code is trying to use the ASCII encoding, but the pound symbol is not an ASCII character.  Try using UTF-8 encoding.  You can start by putting # -*- coding: utf-8 -*- at the top of your .py file.  To get more advanced, you can also define encodings on a string by string basis in your code.  However, if you are trying to put the pound sign literal in to your code, you'll need an encoding that supports it for the entire file.", "Adding the following two lines at the top of my .py script worked for me (first line was necessary):", "First add the # -*- coding: utf-8 -*- line to the beginning of the file and then use u'foo' for all your non-ASCII unicode data:", "The error message tells you exactly what's wrong. The Python interpreter needs to know the encoding of the non-ASCII character.", "Adding the following two lines in the script solved the issue for me."]}, {"question": "I have a DataFrame with four columns. I want to convert this DataFrame to a python dictionary. I want the elements of first column be keys and the elements of other columns in same row be values. ", "answers": ["The to_dict() method sets the column names as dictionary keys so you'll need to reshape your DataFrame slightly. Setting the 'ID' column as the index and then transposing the DataFrame is one way to achieve this.", "Should a dictionary like:", "Suppose your dataframe is as follows:", "Try to use Zip", "If you don't mind the dictionary values being tuples, you can use itertuples:"]}, {"question": "I would like to know how can I set a variable with another variable in jinja. I will explain, I have got a submenu and I would like show which link is active. I tried this:", "answers": ["{{ }} tells the template to print the value, this won't work in expressions like you're trying to do.  Instead, use the {% set %} template tag and then assign the value the same way you would in normal python code.", "Nice shorthand for Multiple variable assignments", "Just Set it up like this"]}, {"question": "I have a pandas dataframe in which one column of text strings contains comma-separated values. I want to split each CSV field and create a new row per entry (assume that CSV are clean and need only be split on ','). For example, a should become b:", "answers": ["UPDATE 3: it makes more sense to use Series.explode() / DataFrame.explode() methods (implemented in Pandas 0.25.0 and extended in Pandas 1.3.0 to support multi-column explode) as is shown in the usage example:", "After painful experimentation to find something faster than the accepted answer, I got this to work. It ran around 100x faster on the dataset I tried it on.", "Series and DataFrame methods define a .explode() method that explodes lists into separate rows. See the docs section on Exploding a list-like column.", "How about something like this:", "Here's a function I wrote for this common task. It's more efficient than the Series/stack methods. Column order and names are retained."]}, {"question": "I have a script reading in a csv file with very huge fields:", "answers": ["The csv file might contain very huge fields, therefore increase the field_size_limit:", "This could be because your CSV file has embedded single or double quotes. If your CSV file is tab-delimited try opening it as:", ".csv field sizes are controlled via [Python.Docs]: csv.field_size_limit([new_limit]) (emphasis is mine):", "Below is to check the current limit", "I just had this happen to me on a 'plain' CSV file. Some people might call it an invalid formatted file. No escape characters, no double quotes and delimiter was a semicolon."]}, {"question": "Given a dictionary { k1: v1, k2: v2 ... } I want to get { k1: f(v1), k2: f(v2) ... } provided I pass a function f.", "answers": ["There is no such function; the easiest way to do this is to use a dict comprehension:", "These toolz are great for this kind of simple yet repetitive logic.", "You can do this in-place, rather than create a new dict, which may be preferable for large dictionaries (if you do not need a copy).", "Due to PEP-0469 which renamed iteritems() to items() and PEP-3113 which removed Tuple parameter unpacking, in Python 3.x you should write Martijn Pieters\u2666 answer like this:", "While my original answer missed the point (by trying to solve this problem with the solution to Accessing key in factory of defaultdict), I have reworked it to propose an actual solution to the present question."]}, {"question": "In the Anaconda repository, there are two types of installers:", "answers": ["Per the original docs:", "The difference is that miniconda is just shipping the repository management system. So when you install it there is just the management system without packages. Whereas with Anaconda, it is like a distribution with some built in packages. ", "conda is both a command line tool, and a python package.", "Miniconda gives you the Python interpreter itself, along with a command-line tool called conda which operates as a cross-platform package manager geared toward Python packages, similar in spirit to the apt or yum tools that Linux users might be familiar with.", "The 2 in Anaconda2 means that the main version of Python will be 2.x rather than the 3.x installed in Anaconda3. The current release has Python 2.7.13."]}, {"question": "\nWant to improve this question? Update the question so it focuses on one problem only by editing this post.\r\n                ", "answers": ["argparse is the way to go. Here is a short summary of how to use it:", "This answer suggests optparse which is appropriate for older Python versions. For Python 2.7 and above, argparse replaces optparse. See this answer for more information.", "Since 2012 there is a very easy, powerful and really cool module for argument parsing called docopt. Here is an example taken from its documentation: ", "The new hip way is argparse for these reasons.  argparse > optparse > getopt", "I prefer Click. It abstracts managing options and allows \"(...) creating beautiful command line interfaces in a composable way with as little code as necessary\"."]}, {"question": "I am sketching the architecture for a set of programs that share various interrelated objects stored in a database. I want one of the programs to act as a service which provides a higher level interface for operations on these objects, and the other programs to access the objects through that service.", "answers": ["Yes you can. I do it using the pythoncom libraries that come included with ActivePython or can be installed with pywin32 (Python for Windows extensions).", "The simplest way is to use the: NSSM - the Non-Sucking Service Manager. Just download and unzip to a location of your choosing. It's a self-contained utility, around 300KB (much less than installing the entire pywin32 suite just for this purpose) and no \"installation\" is needed. The zip contains a 64-bit and a 32-bit version of the utility. Either should work well on current systems (you can use the 32-bit version to manage services on 64-bit systems).", "Although I upvoted the chosen answer a couple of weeks back, in the meantime I struggled a lot more with this topic. It feels like having a special Python installation and using special modules to run a script as a service is simply the wrong way. What about portability and such?", "The simplest way to achieve this is to use native command sc.exe:", "There are a couple alternatives for installing as a service virtually any Windows executable."]}, {"question": "I need to choose some elements from the given list, knowing their index. Let say I would like to create a new list, which contains element with index 1, 2, 5, from given list [-2, 1, 5, 3, 8, 5, 6]. What I did is:", "answers": ["You can use operator.itemgetter:", "Alternatives:", "Another solution could be via pandas Series:", "Basic and not very extensive testing comparing the execution time of the five supplied answers:", "Here's a simpler way:"]}, {"question": "Recently I started using Python3 and it's lack of xrange hurts.", "answers": ["Some performance measurements, using timeit instead of trying to do it manually with time.", "Python3's range is Python2's xrange. There's no need to wrap an iter around it. To get an actual list in Python3, you need to use list(range(...))", "Python 3's range type works just like Python 2's xrange. I'm not sure why you're seeing a slowdown, since the iterator returned by your xrange function is exactly what you'd get if you iterated over range directly.", "One way to fix up your python2 code is:", "xrange from Python 2 is a generator and implements iterator while range is just a function.\nIn Python3 I don't know why was dropped off the xrange."]}, {"question": "I have a Decimal('3.9') as part of an object, and wish to encode this to a JSON string which should look like {'x': 3.9}. I don't care about precision on the client side, so a float is fine.", "answers": ["Simplejson 2.1 and higher has native support for Decimal type:", "I would like to let everyone know that I tried Micha\u0142 Marczyk's answer on my web server that was running Python 2.6.5 and it worked fine. However, I upgraded to Python 2.7 and it stopped working. I tried to think of some sort of way to encode Decimal objects and this is what I came up with:", "How about subclassing json.JSONEncoder?", "The native Django option is missing so I'll add it for the next guy/gall that looks for it.", "In my Flask app, Which uses python 2.7.11, flask alchemy(with 'db.decimal' types), and Flask Marshmallow ( for 'instant' serializer and deserializer), i had this error, every time i did a GET or POST. The serializer and deserializer, failed to convert  Decimal types into any JSON identifiable format. "]}, {"question": "Here is my code,", "answers": ["As suggested by Mark Ransom, I found the right encoding for that problem. The encoding was \"ISO-8859-1\", so replacing open(\"u.item\", encoding=\"utf-8\") with open('u.item', encoding = \"ISO-8859-1\") will solve the problem.", "The following also worked for me. ISO\u00a08859-1 is going to save a lot, mainly if using Speech Recognition APIs.", "Your file doesn't actually contain UTF-8 encoded data; it contains some other encoding. Figure out what that encoding is and use it in the open call.", "Try this to read using Pandas:", "This works:"]}, {"question": "Is there a way to open a file for both reading and writing?", "answers": ["Here's how you read a file, and then write to it (overwriting any existing data), without closing and reopening:", "Summarize the I/O behaviors", "r+ is the canonical mode for reading and writing at the same time. This is not different from using the fopen() system call since file() / open() is just a tiny wrapper around this operating system call.", "I have tried something like this and it works as expected:"]}, {"question": "What do I have to do in Python to figure out which encoding a string has?", "answers": ["In Python 3, all strings are sequences of Unicode characters. There is a bytes type that holds raw bytes.", "You can use type or isinstance.", "In python 3.x all strings are sequences of Unicode characters. and doing the isinstance check for str (which means unicode string by default) should suffice.", "Unicode is not an encoding - to quote Kumar McMillan:", "If your code needs to be compatible with both Python 2 and Python 3, you can't directly use things like isinstance(s,bytes) or isinstance(s,unicode) without wrapping them in either try/except or a python version test, because bytes is undefined in Python 2 and unicode is undefined in Python 3."]}, {"question": "I want to call a C library from a Python application. I don't want to wrap the whole API, only the functions and datatypes that are relevant to my case. As I see it, I have three choices:", "answers": ["Warning: a Cython core developer's opinion ahead.", "ctypes is your best bet for getting it done quickly, and it's a pleasure to work with as you're still writing Python!", "Cython is a pretty cool tool in itself, well worth learning, and is surprisingly close to the Python syntax. If you do any scientific computing with Numpy, then Cython is the way to go because it integrates with Numpy for fast matrix operations.", "For calling a C library from a Python application there is also cffi which is a new alternative for ctypes. It brings a fresh look for FFI: ", "I'll throw another one out there: SWIG"]}, {"question": "I have an integer value x, and I need to check if it is between a start and end values, so I write the following statements:", "answers": ["In Python you can \"chain\" comparison operations which just means they are \"and\"ed together.  In your case, it'd be like this:", "It can be rewritten as:"]}, {"question": "I am new to Jupyter Notebook, what is the key difference between the Jupyter Notebook and JupyterLab, suggest me to choose the best one, which should be used in future.", "answers": ["Jupyter Notebook is a web-based interactive computational environment for creating Jupyter notebook documents. It supports several languages like Python (IPython), Julia, R etc. and is largely used for data analysis, data visualization and further interactive, exploratory computing.", "At this time (mid 2019), with JupyterLab 1.0 release, as a user, I think we should adopt JupyterLab for daily use. And from the JupyterLab official documentation:", "The single most important difference between the two is that you should start using JupyterLab straight away, and that you should not worry about Jupyter Notebook at all. Because:", "(I am using JupyterLab with Julia)", "This answer shows the python perspective. Jupyter supports various languages besides python."]}, {"question": "I have a Flask server running through port 5000, and it's fine. I can access it at http://example.com:5000", "answers": ["1- Stop other applications that are using port 80.\n2- run application with port 80 :", "For externally visible server, where you don't use apache or other web server you just type ", "So it's throwing up that error message because you have apache2 running on port 80.", "If you use the following to change the port or host:", "A convinient way is using the package python-dotenv:\nIt reads out a .flaskenv file where you can store environment variables for flask."]}, {"question": "I have a large spreadsheet file (.xlsx) that I'm processing using python pandas. It happens that I need data from two tabs (sheets) in that large file. One of the tabs has a ton of data and the other is just a few square cells.", "answers": ["Try pd.ExcelFile:", "There are a few options:", "You can also use the index for the sheet:", "You could also specify the sheet name as a parameter:", "Option 1"]}, {"question": "I am looking over this website but just can't seem to figure out how to do this as it's not working. I need to check if the current site user is logged in (authenticated), and am trying:", "answers": ["Update for Django 1.10+:", "Django 1.10+", "Following block should work: ", "In your view:", "If you want to check for authenticated users in your template then:"]}, {"question": "The following code gives the error UnboundLocalError: local variable 'Var1' referenced before assignment:", "answers": ["This is because, even though Var1 exists, you're also using an assignment statement on the name Var1 inside of the function (Var1 -= 1 at the bottom line). Naturally, this creates a variable inside the function's scope called Var1 (truthfully, a -= or += will only update (reassign) an existing variable, but for reasons unknown (likely consistency in this context), Python treats it as an assignment). The Python interpreter sees this at module load time and decides (correctly so) that the global scope's Var1 should not be used inside the local scope, which leads to a problem when you try to reference the variable before it is locally assigned.", "If you set the value of a variable inside the function, python understands it as creating a local variable with that name. This local variable masks the global variable.", "You can fix this by passing parameters rather than relying on Globals", "I don't like this behavior, but this is how Python works. The question has already been answered by others, but for completeness, let me point out that Python 2 has more such quirks.", "Why not simply return your calculated value and let the caller modify the global variable. It's not a good idea to manipulate a global variable within a function, as below:"]}, {"question": "When I try to install the Cryptography package for Python through either pip install cryptography or by downloading the package from their site and running python setup.py, I get the following error:", "answers": ["I had a similar issue, and found I was simply missing a dependency (libssl-dev, for me). As referenced in https://cryptography.io/en/latest/installation/, ensure that all dependencies are met:", "This is a condensed version of the information found on cryptography's installation docs page. Consult that page for the latest details.", "For those of you running OS X, here is what worked for me:", "This worked for me in El Capitan", "This solved the problem for me (Ubuntu 16.04):"]}, {"question": "I have an existing dataframe which I need to add an additional column to which will contain the same value for every row.", "answers": ["df['Name']='abc' will add the new column and set all rows to that value:", "You can use insert to specify where you want to new column to be.  In this case, I use 0 to place the new column at the left.", "Summing up what the others have suggested, and adding a third way", "Single liner works", "One Line did the job for me."]}, {"question": "Given the Python function:", "answers": ["Take a look at the inspect module - this will do the inspection of the various code object properties for you.", "In CPython, the number of arguments is", "The Python 3 version is:", "In a decorator method, you can list arguments of the original method in this way:", "I think what you're looking for is the locals method - "]}, {"question": "I am using pyplot. I have 4 subplots. How to set a single, main title above all the subplots? title() sets it above the last subplot.", "answers": ["Use pyplot.suptitle or Figure.suptitle:", "A few points I find useful when applying this to my own plots:", "If your subplots also have titles, you may need to adjust the main title size:"]}, {"question": "Is there a way of reading one single character from the user input? For instance, they press one key at the terminal and it is returned (sort of like getch()). I know there's a function in Windows for it, but I'd like something that is cross-platform.", "answers": ["Here's a link to the ActiveState Recipes site that says how you can read a single character in Windows, Linux and OSX:", "will basically read 1 byte from STDIN.", "The ActiveState recipe quoted verbatim in two answers is over-engineered. It can be boiled down to this:", "Also worth trying is the readchar library, which is in part based on the ActiveState recipe mentioned in other answers.", "An alternative method:"]}, {"question": "Suppose I have a function:", "answers": ["You're looking for Optional.", "You could just use simillar to OR operator ( the vertical line | ):"]}, {"question": "I am new to Django and pretty new to Ajax. I am working on a project where I need to integrate the two. I believe that I understand the principles behind them both, but have not found a good explanation of the two together. ", "answers": ["Even though this isn't entirely in the SO spirit, I love this question, because I had the same trouble when I started, so I'll give you a quick guide. Obviously you don't understand the principles behind them (don't take it as an offense, but if you did you wouldn't be asking). ", "Further from yuvi's excellent answer, I would like to add a small specific example on how to deal with this within Django (beyond any js that will be used). The example uses AjaxableResponseMixin and assumes an Author model.", "I am writing this because the accepted answer is pretty old, it needs a refresher. ", "Simple and Nice. You don't have to change your views. Bjax handles all your links. Check this out:\nBjax", "AJAX is the best way to do asynchronous tasks. Making asynchronous calls is something common in use in any website building. We will take a short example to learn how we can implement AJAX in Django. We need to use jQuery so as to write less javascript."]}, {"question": "I've come across links that say Python is a strongly typed language.", "answers": ["Python is strongly, dynamically typed.", "There are some important issues that I think all of the existing answers have missed.", "Python typing is Dynamic so you can change a string variable to an int (in a Static language you can't)", "You are confusing 'strongly typed' with 'dynamically typed'.", "According to this wiki Python article Python is both dynamically and strongly typed (provides a good explanation too)."]}, {"question": "\nWant to improve this question? Update the question so it can be answered with facts and citations by editing this post.\r\n                ", "answers": ["Found this page on their github repo, I'll just copy-paste the content here.", "It depends on what you want to do.", "The pickle Python library implements binary protocols for serializing and de-serializing a Python object.", "A common PyTorch convention is to save models using either a .pt or .pth file extension.", "If you want to save the model and wants to resume the training later:"]}, {"question": "I have a dataframe with ~300K rows and ~40 columns.\nI want to find out if any rows contain null values - and put these 'null'-rows into a separate dataframe so that I could explore them easily.", "answers": ["[Updated to adapt to modern pandas, which has isnull as a method of DataFrames..]", "then when ever you need it  you can type:", "If you want to filter rows by a certain number of columns with null values, you may use this:", "Four fewer characters, but 2 more ms", ".any() and .all() are great for the extreme cases, but not when you're looking for a specific number of null values. Here's an extremely simple way to do what I believe you're asking. It's pretty verbose, but functional."]}, {"question": "I've seen there are actually two (maybe more) ways to concatenate lists in Python:\nOne way is to use the extend() method:", "answers": ["The only difference on a bytecode level is that the .extend way involves a function call, which is slightly more expensive in Python than the INPLACE_ADD.", "You can't use += for non-local variable (variable which is not local for function and also not global)", "You can chain function calls, but you can't += a function call directly:", "I would say that there is some difference when it comes with numpy (I just saw that the question ask about concatenating two lists, not numpy array, but since it might be a issue for beginner, such as me, I hope this can help someone who seek the solution to this post), for ex.", "extend() works with any iterable*, += works with some but can get funky. "]}, {"question": "From pip install --help:", "answers": ["pip defaults to installing Python packages to a system directory (such as /usr/local/lib/python3.4). This requires root access.", "--user installs in site.USER_SITE.", "Just a warning: ", "Other answers mention site.USER_SITE as where Python packages get placed. If you're looking for binaries, these go in {site.USER_BASE}/bin.", "pip <command> --user changes the scope of the current pip command to work on the current user account's local python package install location, rather than the system-wide package install location, which is the default."]}, {"question": "I have a pandas Series object containing boolean values. How can I get a series containing the logical NOT of each value?", "answers": ["To invert a boolean Series, use ~s:", "@unutbu's answer is spot on, just wanted to add a warning that your mask needs to be dtype bool, not 'object'.  Ie your mask can't have ever had any nan's. See here - even if your mask is nan-free now, it will remain 'object' type.", "I just give it a shot:", "You can also use numpy.invert:", "In support to the excellent answers here, and for future convenience, there may be a case where you want to flip the truth values in the columns and have other values remain the same (nan values for instance)"]}, {"question": "Python works on multiple platforms and can be used for desktop and web applications, thus I conclude that there is some way to compile it into an executable for Mac, Windows and Linux.", "answers": ["First you will need some GUI library with Python bindings and then (if you want) some program that will convert your python scripts into standalone executables.", "Another system (not mentioned in the accepted answer yet) is PyInstaller, which worked for a PyQt project of mine when py2exe would not. I found it easier to use.", "An alternative tool to py2exe is bbfreeze which generates executables for windows and linux. It's newer than py2exe and handles eggs quite well. I've found it magically works better without configuration for a wide variety of applications.", "There's also PyGTK, which is basically a Python wrapper for the Gnome Toolkit.  I've found it easier to wrap my mind around than Tkinter, coming from pretty much no knowledge of GUI programming previously.  It works pretty well and has some good tutorials.  Unfortunately there isn't an installer for Python 2.6 for Windows yet, and may not be for a while.", "Since python is installed on nearly every non-Windows OS by default now, the only thing you really need to make sure of is that all of the non-standard libraries you use are installed."]}, {"question": "I am trying to find a simple way of getting a count of the number of elements in a list:", "answers": ["len()", "just do len(MyList)", "len(myList) should do it.", "it will count the element in the list, tuple and string and dictionary,\neg.", "To find count of unique elements of list use the combination of len() and set()."]}, {"question": "I am having trouble with some of pandas functionalities. How do I check what is my installation version?", "answers": ["Check pandas.__version__:", "Run:", "Simplest Solution", "Run ", "Windows "]}, {"question": "I want to use input from a user as a regex pattern for a search over some text.  It works, but how I can handle cases where user puts characters that have meaning in regex?", "answers": ["Use the re.escape() function for this:", "You can use re.escape():", "Unfortunately, re.escape() is not suited for the replacement string:", "Please give a try:"]}, {"question": "I am using Python-2.6 CGI scripts but found this error in server log while doing json.dumps(),", "answers": ["I switched this simply by defining a different codec package in the read_csv() command:", "Try the below code snippet:", "The error is because there is some non-ascii character in the dictionary and it can't be encoded/decoded. One simple way to avoid this error is to encode such strings with encode() function as follows (if a is the string with non-ascii character):", "Your string has a non ascii character encoded in it.", "On read csv, I added an encoding method:"]}, {"question": "I am using selenium with python and have downloaded the chromedriver for my windows computer from this site: http://chromedriver.storage.googleapis.com/index.html?path=2.15/ ", "answers": ["I see the discussions still talk about the old way of setting up chromedriver by downloading the binary and configuring the path manually.", "You can test if it actually is in the PATH, if you open a cmd and type in chromedriver (assuming your chromedriver executable is still named like this) and hit Enter. If Starting ChromeDriver 2.15.322448 is appearing, the PATH is set appropriately and there is something else going wrong.", "On Ubuntu:", "For Linux and OSX", "Same situation with pycharm community edition, so, as for cmd, you must restart your ide in order to reload path variables. Restart your ide and it should be fine."]}, {"question": "By debugging information I mean what TensorFlow shows in my terminal about loaded libraries and found devices etc. not Python errors.", "answers": ["You can disable all debugging logs using os.environ :", "2.0 Update (10/8/19)\nSetting TF_CPP_MIN_LOG_LEVEL should still work (see below in v0.12+ update), but there was a reported issue for version 2.0 until 2.3.z fixed in 2.4 and later. If setting TF_CPP_MIN_LOG_LEVEL does not work for you (again, see below), try doing the following to set the log level:", "For compatibility with Tensorflow 2.0, you can use tf.get_logger ", "I have had this problem as well (on tensorflow-0.10.0rc0), but could not fix the excessive nose tests logging problem via the suggested answers.", "As TF_CPP_MIN_LOG_LEVEL didn't work for me you can try:"]}, {"question": "I'm using Python 2 to parse JSON from ASCII encoded text files. ", "answers": ["While there are some good answers here, I ended up using PyYAML to parse my JSON files, since it gives the keys and values as str type strings instead of unicode type. Because JSON is a subset of YAML it works nicely:", "There's no built-in option to make the json module functions return byte strings instead of unicode strings. However, this short and simple recursive function will convert any decoded JSON object from using unicode strings to UTF-8-encoded byte strings:", "[edit]: Updated for Python 2.7 and 3.x compatibility.", "You can use the object_hook parameter for json.loads to pass in a converter. You don't have to do the conversion after the fact. The json module will always pass the object_hook dicts only, and it will recursively pass in nested dicts, so you don't have to recurse into nested dicts yourself. I don't think I would convert unicode strings to numbers like Wells shows. If it's a unicode string, it was quoted as a string in the JSON file, so it is supposed to be a string (or the file is bad).", "That's because json has no difference between string objects and unicode objects. They're all strings in javascript."]}, {"question": "I need to replace all non-ASCII (\\x00-\\x7F) characters with a space. I'm surprised that this is not dead-easy in Python, unless I'm missing something. The following function simply removes all non-ASCII characters:", "answers": ["Your ''.join() expression is filtering, removing anything non-ASCII; you could use a conditional expression instead:", "For you the get the most alike representation of your original string I recommend the unidecode module:", "For character processing, use Unicode strings:", "If the replacement character can be '?' instead of a space, then I'd suggest result = text.encode('ascii', 'replace').decode():", "What about this one?"]}, {"question": "According to http://www.faqs.org/docs/diveintopython/fileinfo_private.html:", "answers": ["In Python, \"privacy\" depends on \"consenting adults'\" levels of agreement - you can't force it (any more than you can in real life;-).  A single leading underscore means you're not supposed to access it \"from the outside\" -- two leading underscores (w/o trailing underscores) carry the message even more forcefully... but, in the end, it still depends on social convention and consensus: Python's introspection is forceful enough that you can't handcuff every other programmer in the world to respect your wishes.", "There may be confusion between class privates and module privates.", "This question was not fully answered, since module privacy is not purely conventional, and since using import may or may not recognize module privacy, depending on how it is used.", "Python allows for private class members with the double underscore prefix.  This technique doesn't work at a module level so I am thinking this is a mistake in Dive Into Python.", "You can add an inner function:"]}, {"question": "I have a pandas DataFrame with 4 columns and I want to create a new DataFrame that only has three of the columns.  This question is similar to: Extracting specific columns from a data frame but for pandas not R.  The following code does not work, raises an error, and is certainly not the pandasnic way to do it. ", "answers": ["There is a way of doing this and it actually looks similar to R", "The easiest way is", "Another simpler way seems to be: ", "columns by index:", "Generic functional form"]}, {"question": "I want to use a new feature of httpie. This feature is in the github repo https://github.com/jkbr/httpie but not in the release on the python package index https://pypi.python.org/pypi/httpie ", "answers": ["You need to use the proper git URL:", "To install Python package from github, you need to clone that repository."]}, {"question": "I'm using the Requests: HTTP for Humans library and I got this weird error and I don't know what is mean.", "answers": ["You need to include the protocol scheme:", "One more reason, maybe your url include some hiden characters, such as '\\n'.", "Fix connection adapter matching to be most-specific first,Miscellaneous small Python 3 text encoding bugs.,.netrc no longer overrides explicit auth.,Mountable Connection Adapters"]}, {"question": "How can I remove some specific elements from a numpy array? Say I have", "answers": ["Use numpy.delete() - returns a new array with sub-arrays along an axis deleted", "There is a numpy built-in function to help with that.", "A Numpy array is immutable, meaning you technically cannot delete an item from it. However, you can construct a new array without the values you don't want, like this:", "To delete by value : ", "Using np.delete is the fastest way to do it, if we know the indices of the elements that we want to remove. However, for completeness, let me add another way of \"removing\" array elements using a boolean mask created with the help of np.isin. This method allows us to remove the elements by specifying them directly or by their indices:"]}, {"question": "I installed the latest version of Python (3.6.4 64-bit) and the latest version of PyCharm (2017.3.3 64-bit). Then I installed some modules in PyCharm (Numpy, Pandas, etc), but when I tried installing Tensorflow it didn't install, and I got the error message: ", "answers": ["As of October 2020:", "There are a few important rules to install Tensorflow:", "I installed it successfully by pip install https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-1.8.0-py3-none-any.whl", "if you are using anaconda, python 3.7 is installed by default, so you have to downgrade it to 3.6:", "I am giving  it for Windows"]}, {"question": "Consider this - a base class A, class B inheriting from A, class C inheriting from B. What is a generic way to call a parent class initialiser in an initialiser? If this still sounds too vague, here's some code.", "answers": ["Python 3 includes an improved super() which allows use like this:", "The way you are doing it is indeed the recommended one (for Python 2.x). ", "You can simply write :  "]}, {"question": "Does anyone know why Python's list.append function is not called list.push given that there's already a list.pop that removes and returns the last element (that indexed at -1) and list.append semantic is consistent with that use?", "answers": ["Because \"append\" existed long before \"pop\" was thought of. Python 0.9.1 supported list.append in early 1991. By comparison, here's part of a discussion on comp.lang.python about adding pop in 1997. Guido wrote:", "Because it appends; it doesn't push. \"Appending\" adds to the end of a list, \"pushing\" adds to the front.", "Because it appends an element to a list? Push is usually used when referring to stacks.", "Because \"append\" intuitively means \"add at the end of the list\". If it was called \"push\", then it would be unclear whether we're adding stuff at the tail or at head of the list.", "Not an official answer by any means (just a guess based on using the language), but Python allows you to use lists as stacks (e.g., section 5.1.1 of the tutorial). However, a list is still first of all a list, so the operations that are common to both use list terms (i.e., append) rather than stack terms (i.e., push). Since a pop operation isn't that common in lists (though 'removeLast' could have been used), they defined a pop() but not a push()."]}, {"question": "How do I implement Python equivalent of this C# code ?", "answers": ["As mentioned by other here:", "Using the abc module for abstract base classes seems to do the trick.", "Implementing interfaces with abstract base classes is much simpler in modern Python 3 and they serve a purpose as an interface contract for plug-in extensions.", "interface supports Python 2.7 and Python 3.4+.", "There are third-party implementations of interfaces for Python (most popular is Zope's, also used in Twisted), but more commonly Python coders prefer to use the richer concept known as an \"Abstract Base Class\" (ABC), which combines an interface with the possibility of having some implementation aspects there too.  ABCs are particularly well supported in Python 2.6 and later, see the PEP, but even in earlier versions of Python they're normally seen as \"the way to go\" -- just define a class some of whose methods raise NotImplementedError so that subclasses will be on notice that they'd better override those methods!-)"]}, {"question": "\nWant to improve this question? Update the question so it can be answered with facts and citations by editing this post.\r\n                ", "answers": ["A Python file is called a \"module\" and it's one way to organize your software so that it makes \"sense\".  Another is a directory, called a \"package\".", "Since there is no artificial limit, it really depends on what's comprehensible.  If you have a bunch of fairly short, simple classes that are logically grouped together, toss in a bunch of 'em.  If you have big, complex classes or classes that don't make sense as a group, go one file per class.  Or pick something in between.  Refactor as things change.", "I happen to like the Java model for the following reason. Placing each class in an individual file promotes reuse by making classes easier to see when browsing the source code. If you have a bunch of classes grouped into a single file, it may not be obvious to other developers that there are classes there that can be reused simply by browsing the project's directory structure. Thus, if you think that your class can possibly be reused, I would put it in its own file.", "It entirely depends on how big the project is, how long the classes are, if they will be used from other files and so on.", "I find myself splitting things up when I get annoyed with the bigness of files and when the desirable structure of relatedness starts to emerge naturally.  Often these two stages seem to coincide."]}, {"question": "How to do this in pandas:", "answers": ["I usually do this using zip:", "Building off of user1827356 's answer, you can do the assignment in one pass using df.merge:", "In 2020, I use apply() with argument result_type='expand'", "This is what I've done in the past", "This is the correct and easiest way to accomplish this for 95% of use cases:"]}, {"question": "I am trying to use pip behind a proxy at work.", "answers": ["With Ubuntu I could not get the proxy option to work as advertised \u2013 so following command did not work:", "Under Windows dont forget to set", "To setup CNTLM for windows, follow this article. For Ubuntu, read my blog post. ", "It was not working for me. I had to use https at work:", "You can continue to use pip over HTTPS by adding your corporation's root certificate to the cacert.pem file in your site-packages/pip folder. Then configure pip to use your proxy by adding the following lines to ~/pip/pip.conf (or ~\\pip\\pip.ini if you're on Windows):"]}, {"question": "Assume I have a program that uses argparse to process command line arguments/options. The following will print the 'help' message:", "answers": ["This answer comes from Steven Bethard on Google groups. I'm reposting it here to make it easier for people without a Google account to access.", "Instead of writing a class, a try/except can be used instead", "With argparse you could use ArgumentParser.print_usage():", "If you associate default functions for (sub)parsers, as is mentioned under add_subparsers, you can simply add it as the default action:", "If you have arguments that must be specified for the script to run - use the required parameter for ArgumentParser as shown below:-"]}, {"question": "I need to read a large file, line by line. Lets say that file has more than 5GB and I need to read each line, but obviously I do not want to use readlines() because it will create a very large list in the memory.", "answers": ["I provided this answer because Keith's, while succinct, doesn't close the file explicitly", "All you need to do is use the file object as an iterator.", "An old school approach:", "You are better off using an iterator instead.\nRelevant:  fileinput \u2014 Iterate over lines from multiple input streams.", "Please try this:"]}, {"question": "I have some Python code that have inconsistent indentation. There is a lot of mixture of tabs and spaces to make the matter even worse, and even space indentation is not preserved.", "answers": ["Use the reindent.py script that you find in the Tools/scripts/ directory of your Python installation:", "I would reach for autopep8 to do this:", "If you're using Vim, see :h retab.", "Use autopep8", "Using Vim, it shouldn't be more involved than hitting Esc, and then typing..."]}, {"question": "I have the following soup:", "answers": ["You can use find_all in the following way to find every a element that has an href attribute, and print each one:"]}, {"question": "I would like to create a copy of an object. I want the new object to possess all properties of the old object (values of the fields). But I want to have independent objects. So, if I change values of the fields of the new object, the old object should not be affected by that.", "answers": ["To get a fully independent copy of an object you can use the copy.deepcopy() function.", "So, if I change values of the fields of the new object, the old object should not be affected by that.", "Shallow copy with copy.copy()", "I believe the following should work with many well-behaved classed in Python:"]}, {"question": "I have the following DataFrame from a SQL query:", "answers": ["One way to convert to string is to use astype:", "If you need to convert ALL columns to strings, you can simply use:", "Prior to pandas 1.0 (well, 0.25 actually) this was the defacto way of declaring a Series/column as as string:", "Here's the other one, particularly useful to convert the multiple columns to string instead of just single column:", "There are four ways to convert columns to string"]}, {"question": "I'm bit confused about how the global variables work. I have a large project, with around 50 files, and I need to define global variables for all those files.", "answers": ["The problem is you defined myList from main.py, but subfile.py needs to use it. Here is a clean way to solve this problem: move all globals to a file, I call this file settings.py. This file is responsible for defining globals and initializing them:", "See Python's document on sharing global variables across modules:", "You can think of Python global variables as \"module\" variables - and as such they are much more useful than the traditional \"global variables\" from C.", "Using from your_file import * should fix your problems. It defines everything so that it is globally available (with the exception of local variables in the imports of course).", "Hai Vu answer works great, just one comment: "]}, {"question": "I've been trying to round long float numbers like:", "answers": ["TL;DR:", "Use round(x, y). It will round up your number up to your desired decimal place.", "round(value,significantDigit) is the ordinary solution, however this does not operate as one would expect from a math perspective when round values ending in 5.  If the 5 is in the digit just after the one you're rounded to, these values are only sometimes rounded up as expected (i.e. 8.005 rounding to two decimal digits gives 8.01).  For certain values due to the quirks of floating point math, they are rounded down instead!", "For positives, try", "Isn't just Python doing round half to even, as prescribed by IEEE 754?"]}, {"question": "Here is my code:", "answers": ["You are trying to decode an object that is already decoded. You have a str, there is no need to decode from UTF-8 anymore.", "If you land here using jwt authentication after the PyJWT v2.0.0 release (22/12/2020), you might want to freeze your version of PyJWT to the previous release in your requirements.txt file.", "Begining with Python 3, all strings are unicode objects.", "Use it by this Method:", "I'm not familiar with the library, but if your problem is that you don't want a byte array, one easy way is to specify an encoding type straight in a cast:"]}, {"question": "What is the name of the method to override the [] operator (subscript notation) for a class in Python?", "answers": ["You need to use the __getitem__ method.", "To fully overload it you also need to implement the __setitem__and __delitem__ methods.", "You are looking for the __getitem__ method. See http://docs.python.org/reference/datamodel.html, section 3.4.6"]}, {"question": "I have a a dictionary mapping keywords to the repetition of the keyword, but I only want a list of distinct words so I wanted to count the number of keywords. Is there a way to count the number of keywords or is there another way I should look for distinct words?", "answers": ["or just", "The number of distinct words (i.e. count of entries in the dictionary) can be found using the len() function.", "Calling len() directly on your dictionary works, and is faster than building an iterator, d.keys(), and calling len() on it, but the speed of either will negligible in comparison to whatever else your program is doing.", "If the question is about counting the number of keywords then would recommend something like", "Some modifications were made on posted answer UnderWaterKremlin to make it python3 proof. A surprising result below as answer."]}, {"question": "In Python, is it possible to have multiple except statements for one try statement? Such as :", "answers": ["Yes, it is possible."]}, {"question": "Right now I have a central module in a framework that spawns multiple processes using the Python 2.6 multiprocessing module. Because it uses multiprocessing, there is module-level multiprocessing-aware log, LOG = multiprocessing.get_logger(). Per the docs, this logger has process-shared locks so that you don't garble things up in sys.stderr (or whatever filehandle) by having multiple processes writing to it simultaneously.", "answers": ["I just now wrote a log handler of my own that just feeds everything to the parent process via a pipe.  I've only been testing it for ten minutes but it seems to work pretty well. ", "The only way to deal with this non-intrusively is to:", "QueueHandler is native in Python 3.2+, and does exactly this. It is easily replicated in previous versions.", "Below is another solution with a focus on simplicity for anyone else (like me) who get here from Google.  Logging should be easy!  Only for 3.2 or higher.", "Yet another alternative might be the various non-file-based logging handlers in the logging package: "]}, {"question": "When comparing floats to integers, some pairs of values take much longer to be evaluated than other values of a similar magnitude.", "answers": ["A comment in the Python source code for float objects acknowledges that:", "Using gmpy2 with arbitrary precision floats and integers it is possible to get more uniform comparison performance:"]}, {"question": "I want to loop through a Python list and process 2 list items at a time. Something like this in another language:", "answers": ["You can use for in range with a step size of 2:", "You can also use this syntax (L[start:stop:step]):", "The simplest in my opinion is just this:", "If you're using Python 2.6 or newer you can use the grouper recipe from the itertools module:", "Kinda dirty but it works."]}, {"question": "In C#, I can say x ?? \"\", which will give me x if x is not null, and the empty string if x is null. I've found it useful for working with databases. ", "answers": ["You could use the or operator:", "try the above.", "You can use a conditional expression:", "You've got the ternary syntax x if x else '' - is that what you're after?"]}, {"question": "I am new to django-1.6. When I run the django server with DEBUG = True, it's running perfectly. But when I change DEBUG to False in the settings file, then the server stopped and it gives the following error on the command prompt:", "answers": ["The ALLOWED_HOSTS list should contain fully qualified host names, not urls. Leave out the port and the protocol. If you are using 127.0.0.1, I would add localhost to the list too:", "I had the same problem and none of the answers resolved my problem. For resolving situations like this, it's best to enable logging by adding the following config to settings.py temporarily.", "For me, I got this error by not setting USE_X_FORWARDED_HOST to true.  From the docs: ", "I had the same problem and I fixed it by setting ALLOWED_HOSTS = ['*'] and to solve the problem with the static images you have to change the virtual paths in the environment configuration like this:", "in the settings.py of your project, check line 28, where is the Allows Host"]}, {"question": "When selecting a sub dataframe from a parent dataframe, I noticed that some programmers make a copy of the data frame using the .copy() method. For example,", "answers": ["This expands on Paul's answer. In Pandas, indexing a DataFrame returns a reference to the initial DataFrame. Thus, changing the subset will change the initial DataFrame. Thus, you'd want to use the copy if you want to make sure the initial DataFrame shouldn't change. Consider the following code:", "Because if you don't make a copy then the indices can still be manipulated elsewhere even if you assign the dataFrame to a different name.", "It's necessary to mention that returning copy or view depends on kind of indexing.", "The primary purpose is to avoid chained indexing and eliminate the SettingWithCopyWarning.", "Assumed you have data frame as below"]}, {"question": "Like in:", "answers": ["You're right, see 3.1.3. Unicode Strings.", "The u in u'Some String' means that your string is a Unicode string.", "My guess is that it indicates \"Unicode\", is it correct?", "I came here because I had funny-char-syndrome on my requests output. I thought response.text would give me a properly decoded string, but in the output I found funny double-chars where German umlauts should have been.", "All strings meant for humans should use u\"\"."]}, {"question": "I'm making a website where users can log on and download files, using the Flask micro-framework (based on Werkzeug) which uses Python (2.6 in my case).", "answers": ["See the documentation on how to access the Request object and then get from this same Request object, the attribute remote_addr.", "Proxies can make this a little tricky, make sure to check out ProxyFix (Flask docs) if you are using one. Take a look at request.environ in your particular environment. With nginx I will sometimes do something like this:", "Actually, what you will find is that when simply getting the following will get you the server's address: ", "The user's IP address can be retrieved using the following snippet:", "The below code always gives the public IP of the client (and not a private IP behind a proxy)."]}, {"question": "I have an Express Node.js application, but I also have a machine learning algorithm to use in Python. Is there a way I can call Python functions from my Node.js application to make use of the power of machine learning libraries?", "answers": ["Easiest way I know of is to use \"child_process\" package which comes packaged with node.", "Example for people who are from Python background and want to integrate their machine learning model in the Node.js application:", "The python-shell module by extrabacon is a simple way to run Python scripts from Node.js with basic, but efficient inter-process communication and better error handling.", "You can now use RPC libraries that support Python and Javascript such as zerorpc", "Most of previous answers call the success of the promise in the on(\"data\"), it is not the proper way to do it because if you receive a lot of data you will only get the first part. Instead you have to do it on the end event."]}, {"question": "The community reviewed whether to reopen this question 6 months ago and left it closed:", "answers": ["To get a NumPy array, you should use the values attribute:", "You can use df.index to access the index object and then get the values in a list using df.index.tolist(). Similarly, you can use df['col'].tolist() for Series.", "From v0.24.0 onwards, we will have two brand spanking new, preferred methods for obtaining NumPy arrays from Index, Series, and DataFrame objects: they are to_numpy(), and .array. Regarding usage, the docs mention:", "If you are dealing with a multi-index dataframe, you may be interested in extracting only the column of one name of the multi-index. You can do this as", "Since pandas v0.13 you can also use get_values:"]}, {"question": "How can I find the row for which the value of a specific column is maximal?", "answers": ["Use the pandas idxmax function. It's straightforward:", "You might also try idxmax:", "Both above answers would only return one index if there are multiple rows that take the maximum value. If you want all the rows, there does not seem to have a function.\nBut it is not hard to do. Below is an example for Series; the same can be done for DataFrame:", "argmax() would provide the index corresponding to the max value for the columnX. iloc can be used to get the row of the DataFrame df for this index.", "Very simple: we have df as below and we want to print a row with max value in C:"]}, {"question": "I tried searching internet but could not find the meaning of hashable.", "answers": ["From the Python glossary:", "All the answers here have good working explanation of hashable objects in python, but I believe one needs to understand the term Hashing first.", "Anything that is not mutable (mutable means, likely to change) can be hashed. Besides the hash function to look for, if a class has it, by eg. dir(tuple) and looking for the __hash__ method, here are some examples", "In my understanding according to Python glossary, when you create an instance of objects that are hashable, an unchangeable value is also calculated according to the members or values of the instance.\nFor example, that value could then be used as a key in a dictionary as below:", "Hashable = capable of being hashed."]}, {"question": "I'm trying to use scikit-learn's LabelEncoder to encode a pandas DataFrame of string labels. As the dataframe has many (50+) columns, I want to avoid creating a LabelEncoder object for each column; I'd rather just have one big LabelEncoder objects that works across all my columns of data.  ", "answers": ["You can easily do this though,", "As mentioned by larsmans, LabelEncoder() only takes a 1-d array as an argument. That said, it is quite easy to roll your own label encoder that operates on multiple columns of your choosing, and returns a transformed dataframe. My code here is based in part on Zac Stewart's excellent blog post found here.", "Since scikit-learn 0.20 you can use sklearn.compose.ColumnTransformer and sklearn.preprocessing.OneHotEncoder:", "We don't need a LabelEncoder.", "this does not directly answer your question (for which Naputipulu Jon and PriceHardman have fantastic replies)"]}, {"question": "I have a C++/Obj-C background and I am just discovering Python (been writing it for about an hour).\nI am writing a script to recursively read the contents of text files in a folder structure.", "answers": ["Make sure you understand the three return values of os.walk:", "If you are using Python 3.5 or above, you can get this done in 1 line.", "Agree with Dave Webb, os.walk will yield an item for each directory in the tree. Fact is, you just don't have to care about subFolders.", "TL;DR: This is the equivalent to find -type f to go over all files in all folders below and including the current one:", "The pathlib library is really great for working with files.  You can do a recursive glob on a Path object like so."]}, {"question": "I am trying to run a Django management command from cron. I am using virtualenv to keep my project sandboxed.", "answers": ["You should be able to do this by using the python in your virtual environment:", "Running source from a cronfile won't work as cron uses /bin/sh as its default shell, which doesn't support source.  You need to set the SHELL environment variable to be /bin/bash:", "Don't look any further:", "The only correct way to run python cron jobs when using a virtualenv is to activate the environment and then execute the environment's python to run your code.", "Rather than mucking around with virtualenv-specific shebangs, just prepend PATH onto the crontab. "]}, {"question": "I want to send a value for \"User-agent\" while requesting a webpage using Python Requests.  I am not sure is if it is okay to send this as a part of the header, as in the code below:", "answers": ["The user-agent should be specified as a field in the header.", "It's more convenient to use a session, this way you don't have to remember to set headers each time:", "simply you can do it like below:"]}, {"question": "How do you execute raw SQL in SQLAlchemy?", "answers": ["Have you tried:", "SQL Alchemy session objects have their own execute method:", "docs: SQL Expression Language Tutorial - Using Text", "You can get the results of SELECT SQL queries using from_statement() and text() as shown here. You don't have to deal with tuples this way. As an example for a class User having the table name users you can try,", "executes the <sql here> but doesn't commit it unless you're on autocommit mode. So, inserts and updates wouldn't reflect in the database."]}, {"question": "Possible Duplicate: \nWhat is a clean, pythonic way to have multiple constructors in Python?", "answers": ["Unlike Java, you cannot define multiple constructors.  However, you can define a default value if one is not passed.", "If your signatures differ only in the number of arguments, using default arguments is the right way to do it. If you want to be able to pass in different kinds of argument, I would try to avoid the isinstance-based approach mentioned in another answer, and instead use keyword arguments.", "For the example you gave, use default values:", "The easiest way is through keyword arguments:", "The answer by Jack M. is correct. Do it this way:"]}, {"question": "I'm having a problem with deleting empty directories. Here is my code:", "answers": ["Try shutil.rmtree:", "The default behavior of os.walk() is to walk from root to leaf. Set topdown=False in os.walk() to walk from leaf to root.", "Here's my pure pathlib recursive directory unlinker:", "Try rmtree() in shutil from the Python standard library", "better to use absolute path and import only the rmtree function\nfrom shutil import rmtree \nas this is a large package the above line will only import the required function."]}, {"question": "What is the pythonic way of writing the following code?", "answers": ["Though not widely known, str.endswith also accepts a tuple. You don't need to loop.", "Just use:", "There is two ways: regular expressions and string (str) methods. ", "another way which can return the list of matching strings is ", "I just came across this, while looking for something else. "]}, {"question": "I am confused about the method view() in the following code snippet.", "answers": ["The view function is meant to reshape the tensor. ", "Let's do some examples, from simpler to more difficult.", "view() reshapes a tensor by 'stretching' or 'squeezing' its elements into the shape you specify:", "Simply put, torch.Tensor.view() which is inspired by numpy.ndarray.reshape() or numpy.reshape(), creates a new view of the tensor, as long as the new shape is compatible with the shape of the original tensor. ", "I figured it out that x.view(-1, 16 * 5 * 5) is equivalent to x.flatten(1), where the parameter 1 indicates the flatten process starts from the 1st dimension(not flattening the 'sample' dimension)\nAs you can see, the latter usage is semantically more clear and easier to use, so I prefer flatten()."]}, {"question": "What is the best way to represent and solve a maze given an image?", "answers": ["Here is a solution.", "This solution is written in Python. Thanks Mikhail for the pointers on the image preparation.", "I tried myself implementing A-Star search for this problem. Followed closely the implementation by Joseph Kern for the framework and the algorithm pseudocode given here:", "Tree search is too much. The maze is inherently separable along the solution path(s).", "Uses a queue for a threshold continuous fill. Pushes the pixel left of the entrance onto the queue and then starts the loop. If a queued pixel is dark enough, it's colored light gray (above threshold), and all the neighbors are pushed onto the queue."]}, {"question": "I'm trying to display a grayscale image using matplotlib.pyplot.imshow().  My problem is that the grayscale image is displayed as a colormap.  I need the grayscale because I want to draw on top of the image with color.", "answers": ["The following code will load an image from a file image.png and will display it as grayscale.", "Try to use a grayscale colormap?", "import matplotlib.pyplot as plt", "I would use the get_cmap method. Ex.:", "@unutbu's answer is quite close to the right answer."]}, {"question": "I have a generator that generates a series, for example:", "answers": ["g.next() has been renamed to g.__next__(). The reason for this is consistency: special methods like __init__() and __del__() all have double underscores (or \"dunder\" in the current vernacular), and .next() was one of the few exceptions to that rule. This was fixed in Python 3.0. [*]", "Try:", "If your code must run under Python2 and Python3, use the 2to3 six library like this:"]}, {"question": "I'd like to extract the text from an HTML file using Python.  I want essentially the same output I would get if I copied the text from a browser and pasted it into notepad.  ", "answers": ["The best piece of code I found for extracting text without getting javascript or not wanted things :", "html2text is a Python program that does a pretty good job at this.", "NOTE: NTLK no longer supports clean_html function", "Found myself facing just the same problem today. I wrote a very simple HTML parser to strip incoming content of all markups, returning the remaining text with only a minimum of formatting.", "I know there are a lot of answers already, but the most elegent and pythonic solution I have found is described, in part, here."]}, {"question": "I need a working approach of getting all classes that are inherited from a base class in Python.", "answers": ["New-style classes (i.e. subclassed from object, which is the default in Python 3) have a __subclasses__ method which returns the subclasses:", "If you just want direct subclasses then .__subclasses__() works fine. If you want all subclasses, subclasses of subclasses, and so on, you'll need a function to do that for you.", "The simplest solution in general form:", "As other answer mentioned you can check the __subclasses__ attribute to get the list of subclasses, since python 3.6 you can modify this attribute creation by overriding the __init_subclass__ method.", "Note: I see that someone (not @unutbu) changed the referenced answer so that it no longer uses vars()['Foo'] \u2014 so the primary point of my post no longer applies."]}, {"question": "https://github.com/affinelayer/pix2pix-tensorflow/tree/master/tools", "answers": ["Python tries to convert a byte-array (a bytes which it assumes to be a utf-8-encoded string) to a unicode string (str).  This process of course is a decoding according to utf-8 rules.  When it tries this, it encounters a byte sequence which is not allowed in utf-8-encoded strings (namely this 0xff at position 0).", "Use this solution it will strip out (ignore) the characters and return the string without them. Only use this if your need is to strip them not convert them.", "Use encoding format ISO-8859-1 to solve the issue.", "Had an issue similar to this, Ended up using UTF-16 to decode. my code is below.", "I've come across this thread when suffering the same error, after doing some research I can confirm, this is an error that happens when you try to decode a UTF-16 file with UTF-8."]}, {"question": "\nWant to improve this question? Update the question so it's on-topic for Stack Overflow.\r\n                ", "answers": ["There is PyCharm from JetBrains which supports Django and Google Apps. It looks promising.", "I use Eclipse and a plain vanilla PyDev. There isn't any specific Django functionality. The best I came up with was setting up a run profile to run the development web server.", "I use Vim:", "I use Komodo Edit.  Check out the Open Komodo Edit.", "Sublime"]}, {"question": "I have a generator function like the following:", "answers": ["Create a generator using", "For picking just one element of a generator use break in a for statement, or list(itertools.islice(gen, 1))", "Generator is a function that produces an iterator. Therefore, once you have iterator instance, use next() to fetch the next item from the iterator.\nAs an example, use next() function to fetch the first item, and later use for in to process remaining items:", "You can pick specific items using destructuring, e.g.:", "I don't believe there's a convenient way to retrieve an arbitrary value from a generator.  The generator will provide a next() method to traverse itself, but the full sequence is not produced immediately to save memory.  That's the functional difference between a generator and a list."]}, {"question": "Is it possible to append to an empty data frame that doesn't contain any indices or columns?", "answers": ["That should work:", "And if you want to add a row, you can use a dictionary:", "You can concat the data in this way:", "I tried this way and it works"]}, {"question": "I recently upgrade Django from v1.3.1 to v1.4.", "answers": ["As far as where the templates folder should go, I don't know since Django 1.4 just came out and I haven't looked at it yet. You should probably ask another question on SE to solve that issue.", "To get the folder of a file just use:", "If you are using Python 3.4 or newer, a convenient way to move up multiple directories is pathlib:", "You want exactly this:", "Personally, I'd go for the function approach"]}, {"question": "While using the requests module, is there any way to print the raw HTTP request? ", "answers": ["Since v1.2.3 Requests added the PreparedRequest object. As per the documentation \"it contains the exact bytes that will be sent to the server\".", "Response objects have a .request property which is the original PreparedRequest object that was sent.", "An even better idea is to use the requests_toolbelt library, which can dump out both requests and responses as strings for you to print to the console. It handles all the tricky cases with files and encodings which the above solution does not handle well.", "Note: this answer is outdated. Newer versions of requests  support getting the request content directly, as AntonioHerraizS's answer documents.", "requests supports so called event hooks (as of 2.23 there's actually only response hook). The hook can be used on a request to print full request-response pair's data, including effective URL, headers and bodies, like:"]}, {"question": "What exactly do *args and **kwargs mean?", "answers": ["Putting *args and/or **kwargs as the last items in your function definition\u2019s argument list allows that function to accept an arbitrary number of arguments and/or keyword arguments.", "Also, we use them for managing inheritance.", "Notice the cool thing in S.Lott's comment - you can also call functions with *mylist and **mydict to unpack positional and keyword arguments:", "Another good use for *args and **kwargs: you can define generic \"catch all\" functions, which is great for decorators where you return such a wrapper instead of the original function.", "Just to clarify how to unpack the arguments, and take care of missing arguments etc."]}, {"question": "Python provides different packages (datetime, time, calendar) as can be seen here in order to deal with time. I made a big mistake by using the following to get current GMT time time.mktime(datetime.datetime.utcnow().timetuple())", "answers": ["I would use time.time() to get a timestamp in seconds since the epoch.", "Output:", "Does this help?", "python2 and python3", "Python 3 seconds with microsecond decimal resolution:"]}, {"question": "I'm struggling to understand exactly how einsum works. I've looked at the documentation and a few examples, but it's not seeming to stick.", "answers": ["(Note: this answer is based on a short blog post about einsum I wrote a while ago.)", "Grasping the idea of numpy.einsum() is very easy if you understand it intuitively. As an example, let's start with a simple description involving matrix multiplication.", "When reading einsum equations, I've found it the most helpful to just be able to\nmentally boil them down to their imperative versions.", "I found NumPy: The tricks of the trade (Part II) instructive", "Lets make 2 arrays, with different, but compatible dimensions to highlight their interplay"]}, {"question": "I am trying to save plots I make using matplotlib; however, the images are saving blank.", "answers": ["First, what happens when T0 is not None? I would test that, then I would adjust the values I pass to plt.subplot(); maybe try values 131, 132, and 133, or values that depend whether or not T0 exists.", "plt.show() should come after plt.savefig()", "change the order of the functions fixed the problem for me:", "Calling savefig before show() worked for me.", "let's me give a more detail example:"]}, {"question": "\nWant to improve this question? Update the question so it can be answered with facts and citations by editing this post.\r\n                ", "answers": ["Github has a great boilerplate .gitignore", "When using buildout I have following in .gitignore (along with *.pyo and *.pyc):", "Covers most of the general stuff -", "local_settings.py, for django projects.", "One question is if you also want to use git for the deploment of your projects. If so you probably would like to exclude your local sqlite file from the repository, same probably applies to file uploads (mostly in your media folder). (I'm talking about django now, since your question is also tagged with django)"]}, {"question": "If I add a subtitle to my matplotlib figure it gets overlaid by the subplot's titles. Does anybody know how to easily take care of that? I tried the tight_layout() function, but it only makes things worse.", "answers": ["You can adjust the subplot geometry in the very tight_layout call as follows:", "You could manually adjust the spacing using plt.subplots_adjust(top=0.85):", "One thing you could change in your code very easily is the fontsize you are using for the titles. However, I am going to assume that you don't just want to do that!", "An alternative and simple to use solution is to adjust the coordinates of the suptitle text in the figure using the y argument in the call of suptitle (see the docs):", "Tight layout doesn't work with suptitle, but constrained_layout does. See this question Improve subplot size/spacing with many subplots in matplotlib"]}, {"question": "While searching through a Python project, I found a few lines commented with # noqa.", "answers": ["Adding # noqa to a line indicates that the linter (a program that automatically checks code quality) should not check this line. Any warnings that code may have generated will be ignored.", "It's generally referred in Python Programming to ignore the PEP8 warnings.", "You know what? Even Guido van Rossum (the creator of Python) asked this question before :D", "Came here after finding a # noqa directive in a library that I was working with. Having never heard of it, I naturally arrived here after searching on Google. The answers provided here are adequate but I wanted to provide some further elaboration for those that may be curious (I certainly was)"]}, {"question": "How can I set the y axis range of the second subplot to e.g. [0,1000] ?\nThe FFT plot of my data (a column in a text file) results in a (inf.?) spike so that the actual data is not visible.", "answers": ["You have pylab.ylim:", "Using axes objects is a great approach for this. It helps if you want to interact with multiple figures and sub-plots. To add and manipulate the axes objects directly:", "Sometimes you really want to set the axes limits before you plot the data.  In that case, you can set the \"autoscaling\" feature of the Axes or AxesSubplot object.  The functions of interest are set_autoscale_on, set_autoscalex_on, and set_autoscaley_on.", "If you know the exact axis you want, then", "If you have multiple subplots, i.e."]}, {"question": "I have been programming in python for about two years; mostly data stuff (pandas, mpl, numpy), but also automation scripts and small web apps.  I'm trying to become a better programmer and increase my python knowledge and one of the things that bothers me is that I have never used a class (outside of copying random flask code for small web apps).  I generally understand what they are, but I can't seem to wrap my head around why I would need them over a simple function.  ", "answers": ["Classes are the pillar of Object Oriented Programming. OOP is highly concerned with code organization, reusability, and encapsulation.", "Whenever you need to maintain a state of your functions and it cannot be accomplished with generators (functions which yield rather than return).  Generators maintain their own state.", "I think you do it right. Classes are reasonable when you need to simulate some business logic or difficult real-life processes with difficult relations.\nAs example:", "A class defines a real world entity. If you are working on something that exists individually and has its own logic that is separate from others, you should create a class for it. For example, a class that encapsulates database connectivity.", "dantiston gives a great answer on why OOP can be useful. However, it is worth noting that OOP is not necessary a better choice most cases it is used. OOP has the advantage of combining data and methods together. In terms of application, I would say that use OOP only if all the functions/methods are dealing and only dealing with a particular set of data and nothing else."]}, {"question": "I have a directory that contains my Python unit tests. Each unit test module is of the form test_*.py. I am attempting to make a file called all_test.py that will, you guessed it, run all files in the aforementioned test form and return the result. I have tried two methods so far; both have failed. I will show the two methods, and I hope someone out there knows how to actually do this correctly.", "answers": ["With Python 2.7 and higher you don't have to write new code or use third-party tools to do this; recursive test execution via the command line is built-in.  Put an __init__.py in your test directory and:", "In python 3, if you're using unittest.TestCase:", "You could use a test runner that would do this for you.  nose is very good for example.  When run, it will find tests in the current tree and run them.", "This is now possible directly from unittest: unittest.TestLoader.discover.", "Well by studying the code above a bit (specifically using TextTestRunner and defaultTestLoader), I was able to get pretty close. Eventually I fixed my code by also just passing all test suites to a single suites constructor, rather than adding them \"manually\", which fixed my other problems. So here is my solution."]}, {"question": "In a program I'm writing I have Python use the re.search() function to find matches in a block of text and print the results. However, the program exits once it finds the first match in the block of text.", "answers": ["Use re.findall or re.finditer instead."]}, {"question": "What are the advantages and disadvantages of each?", "answers": ["Numpy matrices are strictly 2-dimensional, while numpy arrays (ndarrays) are\nN-dimensional.  Matrix objects are a subclass of ndarray, so they inherit all\nthe attributes and methods of ndarrays.", "Scipy.org recommends that you use arrays:", "Just to add one case to unutbu's list. ", "As per the official documents, it's not anymore advisable to use matrix class since it will be removed in the future.", "As others have mentioned, perhaps the main advantage of matrix was that it provided a convenient notation for matrix multiplication."]}, {"question": "I've been making Python scripts for simple tasks at work and never really bothered packaging them for others to use. Now I have been assigned to make a Python wrapper for a REST API. I have absolutely no idea on how to start and I need help.", "answers": ["A module is a file containing Python definitions and statements. The file name is the module name with the suffix .py", "Python 3 - UPDATED 18th November 2015", "Since nobody did cover this question of the OP yet:", "Once you have defined your chosen commands, you can simply drag and drop the saved file into the Lib folder in your python program files. ", "Make a file named \"hello.py\""]}, {"question": "I have a Python file which might have to support Python versions < 3.x and >= 3.x. Is there a way to introspect the Python runtime to know the version which it is running (for example, 2.6 or 3.2.x)?", "answers": ["Sure, take a look at sys.version and sys.version_info.", "Try this code, this should work:", "Per sys.hexversion and API and ABI Versioning:", "Just in case you want to see all of the gory details in human readable form, you can use:", "The best solution depends on how much code is incompatible. If there are a lot of places you need to support Python 2 and 3, six is the compatibility module. six.PY2 and six.PY3 are two booleans if you want to check the version."]}, {"question": "What's the easiest way to add an empty column to a pandas DataFrame object?  The best I've stumbled upon is something like", "answers": ["If I understand correctly, assignment should fill:", "To add to DSM's answer and building on this associated question, I'd split the approach into two cases:", "an even simpler solution is: ", "I like:", "Starting with v0.16.0, DF.assign() could be used to assign new columns (single/multiple) to a DF. These columns get inserted in alphabetical order at the end of the DF."]}, {"question": "\nWant to improve this question? Update the question so it's on-topic for Stack Overflow.\r\n                ", "answers": ["Try PDFMiner. It can extract text from PDF files as HTML, SGML or \"Tagged PDF\" format.", "The PDFMiner package has changed since codeape posted.  ", "Since none for these solutions support the latest version of PDFMiner I wrote a simple solution that will return text of a pdf using PDFMiner. This will work for those who are getting import errors with process_pdf ", "Pdftotext An open source program (part of Xpdf) which you could call from python (not what you asked for but might be useful). I've used it with no problems. I think google use it in google desktop.", "pyPDF works fine (assuming that you're working with well-formed PDFs).  If all you want is the text (with spaces), you can just do:"]}, {"question": "On my local machine, I run a python script which contains this line", "answers": ["Don't use os.system. It has been deprecated in favor of subprocess. From the docs: \"This module intends to replace several older modules and functions: os.system, os.spawn\".", "To somewhat expand on the earlier answers here, there are a number of details which are commonly overlooked.", "Call it with subprocess", "You can use subprocess, but I always felt that it was not a 'Pythonic' way of doing it. So I created Sultan (shameless plug) that makes it easy to run command line functions.", "It is possible you use the bash program, with the parameter -c for execute the commands:"]}, {"question": "How can I convert a DataFrame column of strings (in dd/mm/yyyy format) to datetimes?", "answers": ["The easiest way is to use to_datetime:", "If your date column is a string of the format '2017-01-01'\nyou can use pandas astype to convert it to datetime.", "You can use the following if you want to specify tricky formats:", "If you have a mixture of formats in your date, don't forget to set infer_datetime_format=True to make life easier."]}, {"question": "Right now I'm importing a fairly large CSV as a dataframe every time I run the script. Is there a good solution for keeping that dataframe constantly available in between runs so I don't have to spend all that time waiting for the script to run?", "answers": ["The easiest way is to pickle it using to_pickle:", "Although there are already some answers I found a nice comparison in which they tried several ways to serialize Pandas DataFrames: Efficiently Store Pandas DataFrames. ", "If I understand correctly, you're already using pandas.read_csv() but would like to speed up the development process so that you don't have to load the file in every time you edit your script, is that right? I have a few recommendations:", "Pickle works good!", "You can use feather format file. It is extremely fast."]}, {"question": "Is there a way to have a defaultdict(defaultdict(int)) in order to make the following code work?", "answers": ["Yes like this:", "The parameter to the defaultdict constructor is the function which will be called for building new elements. So let's use a lambda !", "I find it slightly more elegant to use partial:", "Previous answers have addressed how to make a two-levels or n-levels defaultdict.  In some cases you want an infinite one:", "For reference, it's possible to implement a generic nested defaultdict factory method through:"]}, {"question": "I'm curious, whether there is any way to print formatted numpy.arrays, e.g., in a way similar to this:", "answers": ["You can use set_printoptions to set the precision of the output:", "You can get a subset of the np.set_printoptions functionality from the np.array_str command, which applies only to a single print statement.", "Unutbu gave a really complete answer (they got a +1 from me too), but here is a lo-tech alternative:", "FYI Numpy 1.15 (release date pending) will include a context manager for setting print options locally. This means that the following will work the same as the corresponding example in the accepted answer (by unutbu and Neil G) without having to write your own context manager. E.g., using their example:", "The gem that makes it all too easy to obtain the result as a string (in today's numpy versions) is hidden in denis answer:\nnp.array2string"]}, {"question": "I am getting a ValueError: cannot reindex from a duplicate axis when I am trying to set an index to a certain value. I tried to reproduce this with a simple example, but I could not do it.", "answers": ["This error usually rises when you join / assign to a column when the index has duplicate values. Since you are assigning to a row, I suspect that there is a duplicate value in affinity_matrix.columns, perhaps not shown in your question.", "As others have said, you've probably got duplicate values in your original index. To find them do this:", "Indices with duplicate values often arise if you create a DataFrame by concatenating other DataFrames. IF you don't care about preserving the values of your index, and you want them to be unique values, when you concatenate the the data, set ignore_index=True.", "For people who are still struggling with this error, it can also happen if you accidentally create a duplicate column with the same name.  Remove duplicate columns like so:", "Simply skip the error using .values at the end."]}, {"question": "In C# there's a null-coalescing operator (written as ??) that allows for easy (short) null checking during assignment:", "answers": ["Ok, it must be clarified how the or operator works. It is a boolean operator, so it works in a boolean context. If the values are not boolean, they are converted to boolean for the purposes of the operator.", "Strictly,", "Here's a function that will return the first argument that isn't None:", "In case you need to nest more than one null coalescing operation such as:", "I realize this is answered, but there is another option when you're dealing with dict-like objects."]}, {"question": "I have a list of tuples in Python, and I have a conditional where I want to take the branch ONLY if the tuple is not in the list (if it is in the list, then I don't want to take the if branch)", "answers": ["The bug is probably somewhere else in your code, because it should work fine:", "The cheapest and most readable solution is using the in operator (or in your specific case, not in). As mentioned in the documentation,"]}, {"question": "In comparison to Java (in a string), you would do something like \"First Line\\r\\nSecond Line\".", "answers": ["It depends on how correct you want to be. \\n will usually do the job. If you really want to get it right, you look up the newline character in the os package. (It's actually called linesep.)", "The new line character is \\n. It is used inside a string.", "You can either write in the new lines separately or within a single string, which is easier.", "Platform independent line breaker: Linux,windows & IOS", "EDIT: I am older and wiser now. Here is a more readable solution that will work correctly even if you aren't at top level indentation (e.g. in a function definition)."]}, {"question": "I want to send a datetime.datetime object in serialized form from Python using JSON and de-serialize in JavaScript using JSON. What is the best way to do this?", "answers": ["You can add the 'default' parameter to json.dumps to handle this:", "For cross-language projects, I found out that strings containing RfC 3339 dates are the best way to go. An RfC 3339 date looks like this:", "I've worked it out.", "Using json, you can subclass JSONEncoder and override the default() method to provide your own custom serializers:", "Here's a fairly complete solution for recursively encoding and decoding datetime.datetime and datetime.date objects using the standard library json module. This needs Python >= 2.6 since the %f format code in the datetime.datetime.strptime() format string is only supported in since then. For Python 2.5 support, drop the %f and strip the microseconds from the ISO date string before trying to convert it, but you'll loose microseconds precision, of course. For interoperability with ISO date strings from other sources, which may include a time zone name or UTC offset, you may also need to strip some parts of the date string before the conversion. For a complete parser for ISO date strings (and many other date formats) see the third-party dateutil module."]}, {"question": "I would like to get some feedback on these tools on:", "answers": ["Well, I am a bit curious, so I just tested the three myself right after asking the question ;-)", "pep8 was recently added to PyPi."]}, {"question": "How can I order by descending my query set in django by date?", "answers": ["Notice the - before check_in.", "A hyphen \"-\" in front of \"check_in\" indicates descending order. Ascending order is implied.", "Adding the - will order it in descending order.\nYou can also set this by adding a default ordering to the meta of your model. This will mean that when you do a query you just do MyModel.objects.all() and it will come out in the correct order.", "You can also use the following instruction:", "for ascending order:"]}, {"question": "I want to delete a particular record. Such as", "answers": ["There are a couple of ways:", "this will raise exception if the object with specified primary key doesn't exist because at first it tries to retrieve the specified object.", "if you want to delete one instance then write the code", "If you want to delete one item    ", "The delete() method is used to delete model instances from a database.This method immediately deletes the object. this method returns the number of object deleted."]}, {"question": "In order to test some functionality I would like to create a DataFrame from a string. Let's say my test data looks like:", "answers": ["A simple way to do this is to use StringIO.StringIO (python2) or io.StringIO (python3) and pass that to the pandas.read_csv function. E.g:", "Split Method", "In one line, but first import IO", "A quick and easy solution for interactive work is to copy-and-paste the text by loading the data from the clipboard.", "This answer applies when a string is manually entered, not when it's read from somewhere."]}, {"question": "In Python, I've seen two variable values swapped using this syntax:", "answers": ["Python evaluates expressions from left to right. Notice that while\nevaluating an assignment, the right-hand side is evaluated before the\nleft-hand side.", "That is the standard way to swap two variables, yes.", "I know three ways to swap variables, but a, b = b, a is the simplest. There is", "I would not say it is a standard way to swap because it will cause some unexpected errors.", "Does not work for multidimensional arrays, because references are used here."]}, {"question": "I have seen many projects using simplejson module instead of json module from the Standard Library. Also, there are many different simplejson modules. Why would use these alternatives, instead of the one in the Standard Library?", "answers": ["json is simplejson, added to the stdlib. But since json was added in 2.6, simplejson has the advantage of working on more Python versions (2.4+). ", "I have to disagree with the other answers: the built in json library (in Python 2.7) is not necessarily slower than simplejson. It also doesn't have this annoying unicode bug.", "All of these answers aren't very helpful because they are time sensitive.", "I've been benchmarking json, simplejson and cjson.", "Some values are serialized differently between simplejson and json."]}, {"question": "Most operations in pandas can be accomplished with operator chaining (groupby, aggregate, apply, etc), but the only way I've found to filter rows is via normal bracket indexing", "answers": ["I'm not entirely sure what you want, and your last line of code does not help either, but anyway:", "Filters can be chained using a Pandas query:", "The answer from @lodagro is great. I would extend it by generalizing the mask function as:", "Since version 0.18.1 the .loc method accepts a callable for selection. Together with lambda functions you can create very flexible chainable filters:", "pandas provides two alternatives to Wouter Overmeire's answer which do not require any overriding. One is .loc[.] with a callable, as in"]}, {"question": "In Python for *nix, does time.sleep() block the thread or the process?", "answers": ["It blocks the thread.  If you look in Modules/timemodule.c in the Python source, you'll see that in the call to floatsleep(), the substantive part of the sleep operation is wrapped in a Py_BEGIN_ALLOW_THREADS and Py_END_ALLOW_THREADS block, allowing other threads to continue to execute while the current one sleeps.  You can also test this with a simple python program:", "It will just sleep the thread except in the case where your application has only a single thread, in which case it will sleep the thread and effectively the process as well.", "Just the thread.", "The thread will block, but the process is still alive.", "Only the thread unless your process has a single thread."]}, {"question": "What is the difference between 'SAME' and 'VALID' padding in tf.nn.max_pool of tensorflow?", "answers": ["If you like ascii art:", "When stride is 1 (more typical with convolution than pooling), we can think of the following distinction:", "I'll give an example to make it clearer:", "The TensorFlow Convolution example gives an overview about the difference between SAME and VALID :", "Padding is an operation to increase the size of the input data. In case of 1-dimensional data you just append/prepend the array with a constant, in 2-dim you surround matrix with these constants. In n-dim you surround your n-dim hypercube with the constant. In most of the cases this constant is zero and it is called zero-padding."]}, {"question": "Is there a Pool class for worker threads, similar to the multiprocessing module's Pool class?", "answers": ["I just found out that there actually  is a thread-based Pool interface in the multiprocessing module, however it is hidden somewhat and not properly documented.", "In Python 3 you can use concurrent.futures.ThreadPoolExecutor, i.e.:", "Yes, and it seems to have (more or less) the same API. ", "For something very simple and lightweight (slightly modified from here):", "Hi to use the thread pool in Python you can use this library :"]}, {"question": "I have a timezone aware timestamptz field in PostgreSQL. When I pull data from the table, I then want to subtract the time right now so I can get it's age.", "answers": ["have you tried to remove the timezone awareness?", "The correct solution is to add the timezone info e.g., to get the current time as an aware datetime object in Python 3:", "I know some people use Django specifically as an interface to abstract this type of database interaction.  Django provides utilities that can be used for this:", "Conclusion: You must mange your datetime variables with the same time info", "You don't need anything outside the std libs"]}, {"question": "I can't figure out how to use an array or matrix in the way that I would normally use a list. I want to create an empty array (or matrix) and then add one column (or row) to it at a time.", "answers": ["You have the wrong mental model for using NumPy efficiently. NumPy arrays are stored in contiguous blocks of memory. If you want to add rows or columns to an existing array, the entire array needs to be copied to a new block of memory, creating gaps for the new elements to be stored. This is very inefficient if done repeatedly to build an array.", "A NumPy array is a very different data structure from a list and is designed to be used in different ways.  Your use of hstack is potentially very inefficient... every time you call it, all the data in the existing array is copied into a new one. (The append function will have the same issue.)  If you want to build up your matrix one column at a time, you might be best off to keep it in a list until it is finished, and only then convert it into an array.", "To create an empty multidimensional array in NumPy (e.g. a 2D array m*n to store your matrix), in case you don't know m how many rows you will append and don't care about the computational cost Stephen Simmons mentioned (namely re-buildinging the array at each append), you can squeeze to 0 the dimension to which you want to append to: X = np.empty(shape=[0, n]).", "I looked into this a lot because I needed to use a numpy.array as a set in one of my school projects and I needed to be initialized empty... I didn't found any relevant answer here on Stack Overflow, so I started doodling something. ", "You can use the append function.  For rows:"]}, {"question": "Unless I'm mistaken, creating a function in Python works like this:", "answers": ["The other answers have done a good job at explaining duck typing and the simple answer by tzot:", "Python is strongly typed because every object has a type, every object knows its type, it's impossible to accidentally or deliberately use an object of a type \"as if\" it was an object of a different type, and all elementary operations on the object are delegated to its type.", "You don't specify a type.  The method will only fail (at runtime) if it tries to access attributes that are not defined on the parameters that are passed in.", "Many languages have variables, which are of a specific type and have a value. Python does not have variables; it has objects, and you use names to refer to these objects.", "I have implemented a wrapper if anyone would like to specify variable types."]}, {"question": "How can I sort this list in descending order?", "answers": ["This will give you a sorted version of the array.", "In one line, using a lambda:", "You can simply do this:", "you simple type:", "Since your list is already in ascending order, we can simply reverse the list."]}, {"question": "Two options in setup.py develop and install are confusing me. According to this site, using develop creates a special link to site-packages directory.", "answers": ["python setup.py install is used to install (typically third party) packages that you're not going to develop/modify/debug yourself.", "From the documentation. The develop will not install the package but it will create a .egg-link in the deployment directory back to the project source code directory.", "Another thing that people may find useful when using the develop method is the --user option to install without sudo. Ex:"]}, {"question": "This is probably a trivial question, but how do I parallelize the following loop in python?", "answers": ["Using multiple threads on CPython won't give you better performance for pure-Python code due to the global interpreter lock (GIL).  I suggest using the multiprocessing module instead:", "The above works beautifully on my machine (Ubuntu, package joblib was pre-installed, but can be installed via pip install joblib).", "To parallelize a simple for loop, joblib brings a lot of value to raw use of multiprocessing. Not only the short syntax, but also things like transparent bunching of iterations when they are very fast (to remove the overhead) or capturing of the traceback of the child process, to have better error reporting.", "Use a PoolExecutor from concurrent.futures. Compare the original code with this, side by side. First, the most concise way to approach this is with executor.map:", "You can use asyncio. (Documentation can be found here). It is used as a foundation for multiple Python asynchronous frameworks that provide high-performance network and web-servers, database connection libraries, distributed task queues, etc. Plus it has both high-level and low-level APIs to accomodate any kind of problem."]}, {"question": "I recently discovered pytest. It seems great. However, I feel the documentation could be better.", "answers": ["Is this the correct use of conftest.py?", "In a wide meaning conftest.py is a local per-directory plugin. Here you define directory-specific hooks and fixtures. In my case a have a root directory containing project specific tests directories. Some common magic is stationed in 'root' conftest.py. Project specific - in their own ones. Can't see anything bad in storing fixtures in conftest.py unless they are not used widely (In that case I prefer to define them in test files directly)", "I use the conftest.py file to define the fixtures that I inject into my tests, is this the correct use of conftest.py?", "Here are the official docs about using conftest.py to share fixtures:"]}, {"question": "I'm sure this is a trivial operation, but I can't figure out how it's done.", "answers": ["From the Django documentation:", "When you have list of items and you want to check the possible values from the list then you can't use =.", "From the Django documentation:"]}, {"question": "I would like to install scipy-0.15.1-cp33-none-win_amd64.whl that I have saved to the local drive. I am using:", "answers": ["cp33 means CPython 3.3.", "This can also be caused by using an out-of-date pip with a recent wheel file.", "I had the same problem while installing scipy-0.17.0-cp35-none-win_amd64.whl and my Python version was 3.5. It returned the same error message:", "I come across this problem because of a wrong name of my package (scipy-0.17.0-cp27-none-win_amd64 (1)).", "Change the filename to scipy-0.15.1-cp33-none-any.whl and then run this command:"]}, {"question": "If you read an entire file with content = open('Path/to/file', 'r').read() is the file handle left open until the script exits?  Is there a more concise method to read a whole file? ", "answers": ["The answer to that question depends somewhat on the particular Python implementation.  ", "You can use pathlib.", "Well, if you have to read file line by line to work with each line, you can use", "Instead of retrieving the file content as a single string,\nit can be handy to store the content as a list of all lines the file comprises:"]}, {"question": "In numpy, some of the operations return in shape (R, 1) but some return (R,). This will make matrix multiplication more tedious since explicit reshape is required. For example, given a matrix M, if we want to do numpy.dot(M[:,0], numpy.ones((1, R))) where R is the number of rows (of course, the same issue also occurs column-wise). We will get matrices are not aligned error since M[:,0] is in shape (R,) but numpy.ones((1, R)) is in shape (1, R).", "answers": ["You write, \"I know literally it's list of numbers and list of lists where all list contains only a number\" but that's a bit of an unhelpful way to think about it.", "The difference between (R,) and (1,R) is literally the number of indices that you need to use.  ones((1,R)) is a 2-D array that happens to have only one row.  ones(R) is a vector.  Generally if it doesn't make sense for the variable to have more than one row/column, you should be using a vector, not a matrix with a singleton dimension.", "The shape is a tuple. If there is only 1 dimension the shape will be one number and just blank after a comma. For 2+ dimensions, there will be a number after all the commas.", "For its base array class, 2d arrays are no more special than 1d or 3d ones.  There are some operations that preserve the dimensions, some that reduce them, other combine or even expand them.", "There are a lot of good answers here already. But for me it was hard to find some example, where the shape or array can break all the program."]}, {"question": "Both function return the same list.\nThen what is the need of two different functions performing same job.", "answers": ["The current API is that:", "As explained here a key difference is that:", "Here is the correct namespace for the functions:"]}, {"question": "I am trying to install PIL (the Python Imaging Library) using the command:", "answers": ["https://pypi.org/project/Pillow/", "This works for me:", "It is very simple using apt install use this command to get it done", "Install ", "You should install as described here:"]}, {"question": "This is the first time I've really sat down and tried python 3, and seem to be failing miserably. I have the following two files:", "answers": ["TL;DR: You can't do relative imports from the file you execute since __main__ module is not a part of a package.", "I figured it out. Very frustrating, especially coming from python2.", "You have to append your project's path to PYTHONPATH and make sure to use absolute imports.", "Setting PYTHONPATH can also help with this problem. ", "You can simply add following file to your tests directory, and then python will run it before the tests"]}, {"question": "How are \"keyword arguments\" different from regular arguments? Can't all arguments be passed as name=value instead of using positional syntax?", "answers": ["There are two related concepts, both called \"keyword arguments\".", "There is one last language feature where the distinction is important. Consider the following function:", "Using keyword arguments is the same thing as normal arguments except order doesn't matter. For example the two functions calls below are the same:", "They have no keywords before them. The order is important!", "There are two ways to assign argument values to function parameters, both are used."]}, {"question": "I am currently using Beautiful Soup to parse an HTML file and calling get_text(), but it seems like I'm being left with a lot of \\xa0 Unicode representing spaces. Is there an efficient way to remove all of them in Python 2.7, and change them into spaces? I guess the more generalized question would be, is there a way to remove Unicode formatting?", "answers": ["\\xa0 is actually non-breaking space in Latin1 (ISO 8859-1), also chr(160). You should replace it with a space.", "There's many useful things in Python's unicodedata library. One of them is the .normalize() function.", "After trying several methods, to summarize it, this is how I did it. Following are two ways of avoiding/removing \\xa0 characters from parsed HTML string.", "Try using .strip() at the end of your line\nline.strip() worked well for me", "try this:"]}, {"question": "I noticed that in Python, people initialize their class attributes in two different ways.", "answers": ["Neither way is necessarily correct or incorrect, they are just two different kinds of class elements:", "I think this sample explains the difference between the styles:"]}, {"question": "I've created an object like this:", "answers": ["You could use the pickle module in the standard library.\nHere's an elementary application of it to your example:", "I think it's a pretty strong assumption to assume that the object is a class. What if it's not a class?  There's also the assumption that the object was not defined in the interpreter.  What if it was defined in the interpreter?  Also, what if the attributes were added dynamically? When some python objects have attributes added to their __dict__ after creation, pickle doesn't respect the addition of those attributes (i.e. it 'forgets' they were added -- because pickle serializes by reference to the object definition).", "Quick example using company1 from your question, with python3. ", "You can use anycache to do the job for you. It considers all the details:", "Newer versions of pandas has also a functionality to save pickles."]}, {"question": "If I have a numpy dtype, how do I automatically convert it to its closest python data type?  For example,", "answers": ["Use val.item() to convert most NumPy values to a native Python type:", "found myself having mixed set of numpy types and standard python. as all numpy types derive from numpy.generic, here's how you can convert everything to python standard types:", "If you want to convert (numpy.array OR numpy scalar OR native type OR numpy.darray) TO native type you can simply do :", "tolist() is a more general approach to accomplish this. It works in any primitive dtype and also in arrays or matrices.", "How about:"]}, {"question": "I'm looking for an easy (and quick) way to determine if two unordered lists contain the same elements:", "answers": ["Python has a built-in datatype for an unordered collection of (hashable) things, called a set. If you convert both lists to sets, the comparison will be unordered.", "If elements are always nearly sorted as in your example then builtin .sort() (timsort) should be fast:", "Copying from here: Check if two unordered lists are equal", "You want to see if they contain the same elements, but don't care about the order.", "Assuming you already know lists are of equal size, the following will guarantee True if and only if two vectors are exactly the same (including order)"]}, {"question": "How can I get a string after a specific substring?", "answers": ["The easiest way is probably just to split on your target word", "If you want to deal with the case where s2 is not present in s1, then use s1.find(s2) as opposed to index. If the return value of that call is -1, then s2 is not in s1.", "I'm surprised nobody mentioned partition.", "You want to use str.partition():", "If you want to do this using regex, you could simply use a non-capturing group, to get the word \"world\" and then grab everything after, like so"]}, {"question": "What is the quickest/simplest way to drop nan and inf/-inf values from a pandas.DataFrame without resetting mode.use_inf_as_null?", "answers": ["The simplest way would be to first replace() infs to NaN:", "With option context, this is possible without permanently setting use_inf_as_na. For example:", "Use (fast and simple):", "Here is another method using .loc to replace inf with nan on a Series:", "The above solution will modify the infs that are not in the target columns. To remedy that,"]}, {"question": "With PEP 557 data classes are introduced into python standard library. ", "answers": ["Data classes are just regular classes that are geared towards storing state, rather than containing a lot of logic. Every time you create a class that mostly consists of attributes, you make a data class.", "The question has been addressed.  However, this answer adds some practical examples to aid in the basic understanding of dataclasses.", "From the PEP specification:", "Consider this simple class Foo"]}, {"question": "I used easy_install to install pytest on a mac and started writing tests for a project with a file structure likes so:", "answers": ["I'm not sure why py.test does not add the current directory in the PYTHONPATH itself, but here's a workaround (to be executed from the root of your repository):", "The least invasive solution is adding an empty file named conftest.py in the repo/ directory:", "I had the same problem. I fixed it by adding an empty __init__.py file to my tests directory.", "Yes, the source folder is not in Python's path if you cd to the tests directory. ", "Run pytest itself as a module with:\npython -m pytest tests"]}, {"question": "Python will not run in git bash (Windows). When I type python in the command line, it takes me to a blank line without saying that it has entered python 2.7.10 like its does in Powershell. It doesn't give me an error message, but python just doesn't run.", "answers": ["Just enter this in your git shell on windows - > alias python='winpty python.exe', that is all and you are going to have alias to the python executable.  This alias will be valid for the duration of the shell session.", "I don't see next option in a list of answers, but I can get interactive prompt with \"-i\" key:", "This is a known bug in MSys2, which provides the terminal used by Git Bash. You can work around it by running a Python build without ncurses support, or by using WinPTY, used as follows:", "I am windows 10 user and I have installed GIT in my system by just accepting the defaults.", "Try python -i instead of python, it's a cursor thing."]}, {"question": "If I want to use the results of argparse.ArgumentParser(), which is a Namespace object, with a method that expects a dictionary or mapping-like object (see collections.Mapping), what is the right way to do it?", "answers": ["You can access the namespace's dictionary with vars():", "Straight from the horse's mouth:", "Is it proper to \"reach into\" an object and use its dict property?", "Note that if you're trying to treat args as a dict to find out if it has an attribute, you can just do the following instead:"]}, {"question": "I got a lot of errors with the message :", "answers": ["This is what postgres does when a query produces an error and you try to run another query without first rolling back the transaction.  (You might think of it as a safety feature, to keep you from corrupting your data.)", "To get rid of the error, roll back the last (erroneous) transaction after you've fixed your code:", "In Flask you just need to write:", "So, I ran into this same issue. The problem I was having here was that my database wasn't properly synced. Simple problems always seem to cause the most angst...", "In my experience, these errors happen this way:"]}, {"question": "What's the difference between raise and raise from in Python?", "answers": ["The difference is that when you use from, the __cause__ attribute is set and the message states that the exception was directly caused by. If you omit the from then no __cause__ is set, but the __context__ attribute may be set as well, and the traceback then shows the context as during handling something else happened."]}, {"question": "What named colors are available in matplotlib for use in plots?  I can find a list on the matplotlib documentation that claims that these are the only names:", "answers": ["I constantly forget the names of the colors I want to use and keep coming back to this question =)", "Matplotlib uses a dictionary from its colors.py module. ", "In addition to BoshWash's answer, here is the picture generated by his code:", "To get a full list of colors to use in plots:"]}, {"question": "I have a string which is like this:", "answers": ["You want split, from the built-in shlex module.", "Have a look at the shlex module, particularly shlex.split.", "I see regex approaches here that look complex and/or wrong.  This surprises me, because regex syntax can easily describe \"whitespace or thing-surrounded-by-quotes\", and most regex engines (including Python's) can split on a regex.  So if you're going to use regexes, why not just say exactly what you mean?:", "Depending on your use case, you may also want to check out the csv module:", "I use shlex.split to process 70,000,000 lines of squid log, it's so slow. So I switched to re."]}, {"question": "I am trying to plot a simple graph using pyplot, e.g.:", "answers": ["I found a solution to my problem (thanks to the help of ImportanceOfBeingErnest).", "In my case, the error message was implying that I was working in a headless console. So plt.show() could not work. What worked was calling plt.savefig:", "If you use Arch Linux (distributions like Manjaro or Antegros) simply type:", "Simple install", "Try import tkinter because pycharm already installed tkinter for you, I looked Install tkinter for Python"]}, {"question": "In a comment on this question, I saw a statement that recommended using", "answers": ["== is an equality test. It checks whether the right hand side and the left hand side are equal objects (according to their __eq__ or __cmp__ methods.)", "First, let me go over a few terms. If you just want your question answered, scroll down to \"Answering your question\".", "Consider the following:", "None is a singleton, therefore identity comparison will always work, whereas an object can fake the equality comparison via .__eq__().", "Some objects are singletons, and thus is with them is equivalent to ==.  Most are not."]}, {"question": "I've tried reading through questions about sibling imports and even the\npackage documentation, but I've yet to find an answer.", "answers": ["There are plenty of sys.path.append -hacks available, but I found an alternative way of solving the problem in hand.", "Since I wrote the answer below, modifying sys.path is still a quick-and-dirty trick that works well for private scripts, but there has been several improvements", "Here is another alternative that I insert at top of the Python files in tests folder:", "You don't need and shouldn't hack sys.path unless it is necessary and in this case it is not. Use:", "I don't yet have the comprehension of Pythonology necessary to see the intended way of sharing code amongst unrelated projects without a sibling/relative import hack.  Until that day, this is my solution.  For examples or tests to import stuff from ..\\api, it would look like: "]}, {"question": "I noticed that the Python 2.7 documentation includes yet another command-line parsing module.  In addition to getopt and optparse we now have argparse.", "answers": ["As of python 2.7, optparse is deprecated, and will hopefully go away in the future.", "Why should I use it instead of\n  optparse? Are their new features I\n  should know about?", "The best source for rationale for a Python addition would be its PEP: PEP 389: argparse - New Command Line Parsing Module, in particular, the section entitled, Why aren't getopt and optparse enough?", "There are also new kids on the block!", "At first I was as reluctant as @fmark to switch from optparse to argparse, because: "]}, {"question": "Possible Duplicate:\nPython: What OS am I running on? ", "answers": ["If you want user readable data but still detailed, you can use platform.platform()", "I usually use sys.platform to get the platform. sys.platform will distinguish between linux, other unixes, and OS X, while os.name is \"posix\" for all of them.", "This gives you the essential information you will usually need. To distinguish between, say, different editions of Windows, you will have to use a platform-specific method.", "https://docs.python.org/library/os.html", "Something along the lines:"]}, {"question": "If I have that code:", "answers": ["use str", "Use repr() and The difference between using repr and str", "Even though I realise this is an old question, I'd like to suggest using the traceback module to handle output of the exceptions.", "Another way hasn't been given yet:", "To inspect the error message and do something with it (with Python 3)..."]}, {"question": "You know how in Linux when you try some Sudo stuff it tells you to enter the password and, as you type, nothing is shown in the terminal window (the password is not shown)?", "answers": ["Use getpass.getpass():", "getpass works on Linux, Windows, and Mac.", "Use getpass for this purpose.", "This code will print an asterisk instead of every letter.", "Updating on the answer of @Ahmed ALaa"]}, {"question": "models.py:", "answers": ["It looks like you were on the right track - get_FOO_display() is most certainly what you want:", "For every field that has choices set, the object will have a get_FOO_display() method, where FOO is the name of the field. This method returns the \u201chuman-readable\u201d value of the field.", "Others have pointed out that a get_FOO_display method is what you need.\nI'm using this:"]}, {"question": "I want to figure out how to remove nan values from my array. My array looks something like this: ", "answers": ["If you're using numpy for your arrays, you can also use", "works both for lists and numpy array\nsince v!=v only for NaN", "Try this:", "For me the answer by @jmetz didn't work, however using pandas isnull() did.", "As shown by others "]}, {"question": "I use the following simple code to parse some arguments; note that one of them is required. Unfortunately, when the user runs the script without providing the argument, the displayed usage/help text does not indicate that there is a non-optional argument, which I find very confusing. How can I get python to indicate that an argument is not optional?", "answers": ["Parameters starting with - or -- are usually considered optional. All other parameters are positional parameters and as such required by design (like positional function arguments). It is possible to require optional arguments, but this is a bit against their design. Since they are still part of the non-positional arguments, they will still be listed under the confusing header \u201coptional arguments\u201d even if they are required. The missing square brackets in the usage part however show that they are indeed required.", "Since I prefer to list required arguments before optional, I hack around it via:", "Building off of @Karl Rosaen", "One more time, building off of @RalphyZ", "by default there're 2 argument groups in parser._action_groups: positional arguments and named arguments (titled 'optional arguments').\nyou can add your named optional arguments to the existing 'optional arguments' group, and required named arguments to a new 'required arguments' group. After that you can re-order groups:"]}, {"question": "I'm trying to install a new Python environment on my shared hosting. I follow the steps written in this post:", "answers": ["The gcc compiler is not in your $PATH.\nIt means either you dont have gcc installed or it's not in your $PATH variable.", "You need to run", "For Ubuntu / Debian :", "Assuming you're on a debain/ubuntu system, you will need to run the following first:", "sudo apt install build-essential is the command."]}, {"question": "I am trying to use Pythons mock package to mock Pythons requests module. What are the basic calls to get me working in below scenario?", "answers": ["This is how you can do it (you can run this file as-is):", "Try using the responses library. Here is an example from their documentation:", "Here is what worked for me:", "I used requests-mock for writing tests for separate module:", "this is how you mock requests.post, change it to your http method"]}, {"question": "I'm trying to get a better understanding of the difference. I've found a lot of explanations online, but they tend towards the abstract differences rather than the practical implications.", "answers": ["A compiled language is one where the program, once compiled, is expressed in the instructions of the target machine. For example, an addition \"+\" operation in your source code could be translated directly to the \"ADD\" instruction in machine code.", "A language itself is neither compiled nor interpreted, only a specific implementation of a language is.  Java is a perfect example.  There is a bytecode-based platform (the JVM), a native compiler (gcj) and an interpeter for a superset of Java (bsh).  So what is Java now? Bytecode-compiled, native-compiled or interpreted?  ", "Start thinking in terms of a: blast from the past ", "The extreme and simple cases:", "From http://www.quora.com/What-is-the-difference-between-compiled-and-interpreted-programming-languages"]}, {"question": "How can I get the output of a process run using subprocess.call()?", "answers": ["If you have Python version >= 2.7, you can use subprocess.check_output which basically does exactly what you want (it returns standard output as string).", "Output from subprocess.call() should only be redirected to files.", "For python 3.5+ it is recommended that you use the run function from the subprocess module. This returns a CompletedProcess object, from which you can easily obtain the output as well as return code.", "I have the following solution. It captures the exit code, the stdout, and the stderr too of the executed external command:", "I recently just figured out how to do this, and here's some example code from a current project of mine:"]}, {"question": "I am trying to plot some data from a camera in real time using OpenCV. However, the real-time plotting (using matplotlib) doesn't seem to be working.", "answers": ["Here's the working version of the code in question (requires at least version Matplotlib 1.1.0 from 2011-11-14):", "If you're interested in realtime plotting, I'd recommend looking into matplotlib's animation API. In particular, using blit to avoid redrawing the background on every frame can give you substantial speed gains (~10x):", "I know I'm a bit late to answer this question. Nevertheless, I've made some code a while ago to plot live graphs, that I would like to share:", "None of the methods worked for me.\nBut I have found this\nReal time matplotlib plot is not working while still in a loop", "The top (and many other) answers were built upon plt.pause(), but that was an old way of animating the plot in matplotlib. It is not only slow, but also causes focus to be grabbed upon each update (I had a hard time stopping the plotting python process)."]}, {"question": "Following this python example, I encode a string as Base64 with:", "answers": ["base64 encoding takes 8-bit binary byte data and encodes it uses only the characters A-Z, a-z, 0-9, +, /* so it can be transmitted over channels that do not preserve all 8-bits of data, such as email.", "You need to push a bytes-like object (bytes, bytearray, etc) to the base64.b64encode() method. Here are two ways:", "If the data to be encoded contains \"exotic\" characters, I think you have to encode in \"UTF-8\"", "If the string is Unicode the easiest way is:", "There is all you need:"]}, {"question": "The time module can be initialized using seconds since epoch:", "answers": ["datetime.datetime.fromtimestamp will do, if you know the time zone, you could produce the same output as with time.gmtime", "Seconds since epoch to datetime to strftime:", "From the docs, the recommended way of getting a timezone aware datetime object from seconds since epoch is:", "Note that datetime.datetime.fromtimestamp(timestamp) and .utcfromtimestamp(timestamp) fail on windows for dates before Jan. 1, 1970 while negative unix timestamps seem to work on unix-based platforms. The docs say this:", "For those that want it ISO 8601 compliant, since the other solutions do not have the T separator nor the time offset (except Meistro's answer):"]}, {"question": "I'm investigating how to develop a decent web app with Python. Since I don't want some high-order structures to get in my way, my choice fell on the lightweight Flask framework. Time will tell if this was the right choice.", "answers": ["The current recommended way is with the flask command line utility.", "If you are talking about test/dev environments, then just use the debug option. It will auto-reload the flask app when a code change happens.", "The werkzeug debugger already has an 'auto reload' function available that can be enabled by doing one of the following:", "If you're running using uwsgi look at the python auto reload option:", "A few updates for Flask 1.0 and above"]}, {"question": "I have read the official definition of \"raise\", but I still don't quite understand what it does. ", "answers": ["It has 2 purposes.", "raise without any arguments is a special use of python syntax. It means get the exception and re-raise it. If this usage it could have been called reraise.", "It's used for raising errors.", "Besides raise Exception(\"message\") and raise Python 3 introduced a new form, raise Exception(\"message\") from e. It's called exception chaining, it allows you to preserve the original exception (the root cause) with its traceback.", "You can use it to raise errors as part of error-checking:"]}, {"question": "I want to use type hints in my current Python 3.5 project. My function should receive a function as parameter. ", "answers": ["As @jonrsharpe noted in a comment, this can be done with typing.Callable:", "Another interesting point to note is that you can use the built in function type() to get the type of a built in function and use that.\nSo you could have", "An easiest and fancy solution is:", "My specific use case for wanting this functionality was to enable rich code completion in PyCharm. Using Callable didn't cause PyCharm to suggest that the object had a .__code__ attribute, which is what I wanted, in this case."]}, {"question": "Imagine a python script that will take a long time to run, what will happen if I modify it while it's running? Will the result be different?", "answers": ["Nothing, because Python precompiles your script into a PYC file and launches that.", "When you run a python program and the interpreter is started up, the first thing that happens is the following:", "This is a fun question. The answer is that \"it depends\".", "No, the result will not reflect the changes once saved. The result will not change when running regular python files. You will have to save your changes and re-run your program.", "It happens nothing. Once the script is loaded in memory and running it will keep like this."]}, {"question": "Inspired by the question series 'Hidden features of ...', I am curious to hear about your favorite Django tips or lesser known but useful features you know of.", "answers": ["I'm just going to start with a tip from myself :)", "Install Django Command Extensions and pygraphviz and then issue the following command to get a really nice looking Django model visualization:", "Use django-annoying's render_to decorator instead of render_to_response.", "There's a set of custom tags I use all over my site's templates. Looking for a way to autoload it (DRY, remember?), I found the following:", "Virtualenv + Python = life saver if you are working on multiple Django projects and there is a possibility that they all don't depend on the same version of Django/an application."]}, {"question": "I created a histogram plot using data from a file and no problem. Now I wanted to superpose data from another file in the same histogram, so I do something like this", "answers": ["Here you have a working example:", "The accepted answers gives the code for a histogram with overlapping bars, but in case you want each bar to be side-by-side (as I did), try the variation below:", "In the case you have different sample sizes, it may be difficult to compare the distributions with a single y-axis. For example:", "As a completion to Gustavo Bezerra's answer:", "You should use bins from the values returned by hist:"]}, {"question": "How can I send the HTML content in an email using Python? I can send simple text.", "answers": ["From Python v2.7.14 documentation - 18.1.11. email: Examples:", "Here is a Gmail implementation of the accepted answer:", "You might try using my mailer module.", "Here is a simple way to send an HTML email, just by specifying the Content-Type header as 'text/html':", "for python3, improve @taltman 's answer:"]}, {"question": "I know how to generate a random number within a range in Python.", "answers": ["If you just need sampling without replacement:", "Generate the range of data first and then shuffle it like this", "You could add to a set until you reach n:", "You could use the random.sample function from the standard library to select k elements from a population:"]}, {"question": "I'm using python3.3 and I'm having a cryptic error when trying to pickle a simple dictionary. ", "answers": ["The output file needs to be opened in binary mode:", "Just had same issue.  In Python 3, Binary modes 'wb', 'rb' must be specified whereas in Python 2x,  they are not needed.  When you follow tutorials that are based on Python 2x,  that's why you are here. ", "pickle uses a binary protocol, hence only accepts binary files. As the document said in the first sentence, \"The pickle module implements binary protocols for serializing and de-serializing\"."]}, {"question": "I want to display:", "answers": ["You should use the new format specifications to define how your value should be represented:", "The String Formatting Operations section of the Python documentation contains the answer you're looking for.  In short:", "I suppose you're probably using the Decimal() objects from the decimal module? (If you need exactly two digits of precision beyond the decimal point with arbitrarily large numbers, you definitely should be, and that's what your question's title suggests...)", "You can change 2 in 2f to any number of decimal points you want to show.", "You can use the string formatting operator as so:"]}, {"question": "Is there a way in python to programmatically determine the width of the console? I mean the number of characters that fits in one line without wrapping, not the pixel width of the window.", "answers": ["Not sure why it is in the module shutil, but it landed there in Python 3.3, Querying the size of the output terminal:", "uses the 'stty size' command which according to a thread on the python mailing list is reasonably universal on linux. It opens the 'stty size' command as a file, 'reads' from it, and uses a simple string split to separate the coordinates.", "use", "Code above didn't return correct result on my linux because winsize-struct has 4 unsigned shorts, not 2 signed shorts:", "It's either:"]}, {"question": "I have been searching and tried various alternatives without success and spent several days on it now - driving me mad.", "answers": ["Here is my workflow after creating a folder and cd'ing into it:", "You forgot to do source bin/activate where source is a executable name.\nStruck me first few times as well, easy to think that manual is telling \"execute this from root of the environment folder\". ", "You can do ", "Go to the project directory. In my case microblog is the flask project directory and under microblog directory there should be app and venv folders. then run the below command, This is one worked for me in Ubuntu.", "Cd to the environment path, go to the bin folder.\nAt this point when you use ls command, you should see the \"activate\" file."]}, {"question": "I load some machine learning data from a CSV file. The first 2 columns are observations and the remaining columns are features.", "answers": ["See the deprecation in the docs", "Note: .ix has been deprecated since Pandas v0.20. You should instead use .loc or .iloc, as appropriate.", "Lets use the titanic dataset from the seaborn package as an example", "Also, Given a DataFrame ", "You can slice along the columns of a DataFrame by referring to the names of each column in a list, like so:"]}, {"question": "I want to find out my Python installation path on Windows. For example:", "answers": ["In your Python interpreter, type the following commands:", "If you have Python in your environment variable then you can use the following command in cmd or powershell:", "It would be either of", "If you need to know the installed path under Windows without starting the python interpreter, have a look in the Windows registry.", "Simple way is"]}, {"question": "I am working with a library which returns a byte string and I need to convert this to a string. ", "answers": ["The only thing that a computer can store is bytes.", "Assuming Python 3 (in Python 2, this difference is a little less well-defined) - a string is a sequence of characters, ie unicode codepoints; these are an abstract concept, and can't be directly stored on disk. A byte string is a sequence of, unsurprisingly, bytes - things that can be stored on disk. The mapping between them is an encoding - there are quite a lot of these (and infinitely many are possible) - and you need to know which applies in the particular case in order to do the conversion, since a different encoding may map the same bytes to a different string: ", "Note: I will elaborate more my answer for Python 3 since the end of life of Python 2 is very close.", "From What is Unicode:", "Let's have a simple one-character string '\u0161' and encode it into a sequence of bytes:"]}, {"question": "Run the following code from a directory that contains a directory named bar (containing one or more files) and a directory named baz (also containing one or more files).  Make sure there is not a directory named foo.", "answers": ["Here's a solution that's part of the standard library:", "This limitation of the standard shutil.copytree seems arbitrary and annoying. Workaround:", "Python 3.8 introduced the dirs_exist_ok argument to shutil.copytree:", "In slight improvement on atzz's answer to the function where the above function always tries to copy the files from source to destination. ", "A merge one inspired by atzz and Mital Vora:"]}, {"question": "I have a series of images that I want to create a video from.  Ideally I could specify a frame duration for each frame but a fixed frame rate would be fine too.  I'm doing this in wxPython, so I can render to a wxDC or I can save the images to files, like PNG.  Is there a Python library that will allow me to create either a video (AVI, MPG, etc) or an animated GIF from these frames?", "answers": ["I'd recommend not using images2gif from visvis because it has problems with PIL/Pillow and is not actively maintained (I should know, because I am the author).", "Here's how you do it using only PIL (install with: pip install Pillow):", "Well, now I'm using ImageMagick.  I save my frames as PNG files and then invoke ImageMagick's convert.exe from Python to create an animated GIF.  The nice thing about this approach is I can specify a frame duration for each frame individually.  Unfortunately this depends on ImageMagick being installed on the machine.  They have a Python wrapper but it looks pretty crappy and unsupported.  Still open to other suggestions.", "As of June 2009 the originally cited blog post has a method to create animated GIFs in the comments.  Download the script images2gif.py (formerly images2gif.py, update courtesy of @geographika).", "I used images2gif.py which was easy to use. It did seem to double the file size though.."]}, {"question": "I'm new to Python and Flask and I'm trying to do the equivalent of Response.redirect as in C# - ie: redirect to a specific URL - how do I go about this?", "answers": ["You have to return a redirect:", "Take a look at the example in the documentation.", "From the Flask API Documentation (v. 2.0.x):", "I believe that this question deserves an updated. Just compare with other approaches.", "Flask includes the redirect function for redirecting to any url. Futhermore, you can abort a request early with an error code with abort:"]}, {"question": "Can I insert a column at a specific column index in pandas? ", "answers": ["see docs: http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.insert.html", "If you want a single value for all rows:", "You could try to extract columns as list, massage this as you want, and reindex your dataframe:", "This will work if there is no other column with the same name. If a column, with your provided name already exists in the dataframe, it will raise a ValueError.", "You can do that after you added the 'n' column into your df as follows. "]}, {"question": "For example I have simple DF:", "answers": ["Sure!  Setup:", "Another solution is to use the query method:", "And remember to use parenthesis!", "You can use pandas it has some built in functions for comparison. So if you want to select values of \"A\" that are met by the conditions of \"B\" and \"C\" (assuming you want back a DataFrame pandas object)"]}, {"question": "I'd like to create a file with path x using python. I've been using os.system(y) where y = 'touch %s' % (x). I've looked for a non-directory version of os.mkdir, but I haven't been able to find anything. Is there a tool like this to create a file without opening it, or using system or popen/subprocess?", "answers": ["There is no way to create a file without opening it There is os.mknod(\"newfile.txt\") (but it requires root privileges on OSX). The system call to create a file is actually open() with the O_CREAT flag. So no matter how, you'll always open the file.", "Of course there IS a way to create files without opening. It's as easy as calling os.mknod(\"newfile.txt\").  The only drawback is that this call requires root privileges on OSX."]}, {"question": "I can't understand why Python doesn't have a sign function. It has an abs builtin (which I consider sign's sister), but no sign.", "answers": ["EDIT:", "\"copysign\" is defined by IEEE 754, and part of the C99 specification. That's why it's in Python. The function cannot be implemented in full by abs(x) * sign(y) because of how it's supposed to handle NaN values.", "Another one liner for sign()", "Since cmp has been removed, you can get the same functionality with", "The definition on Wikipedia reads:"]}, {"question": "How can I see what's inside a bucket in S3 with boto3? (i.e. do an \"ls\")?", "answers": ["One way to see the contents would be:", "This is similar to an 'ls' but it does not take into account the prefix folder convention and will list the objects in the bucket.  It's left up to the reader to filter out prefixes which are part of the Key name. ", "I'm assuming you have configured authentication separately. ", "My s3 keys utility function is essentially an optimized version of @Hephaestus's answer:", "In order to handle large key listings (i.e. when the directory list is greater than 1000 items), I used the following code to accumulate key values (i.e. filenames) with multiple listings (thanks to Amelio above for the first lines).  Code is for python3:"]}, {"question": "PIL does support JPEG in my system.", "answers": ["libjpeg-dev is required to be able to process jpegs with pillow (or PIL), so you need to install it and then recompile pillow. It also seems that libjpeg8-dev is needed on Ubuntu 14.04", "For those on OSX, I used the following binary to get libpng and libjpeg installed systemwide:", "This is the only way that worked for me. Installing packages and reinstalling PIL didn't work.", "The followed works on ubuntu 12.04:", "On Fedora 17 I had to install libjpeg-devel and afterwards reinstall PIL:"]}, {"question": "When I try", "answers": ["Simply put, numpy.newaxis is used to increase the dimension of the existing array by one more dimension, when used once. Thus,", "The np.newaxis is just an alias for the Python constant None, which means that wherever you use np.newaxis you could also use None:", "You started with a one-dimensional list of numbers.  Once you used numpy.newaxis, you turned it into a two-dimensional matrix, consisting of four rows of one column each.", "newaxis object in the selection tuple serves to expand the dimensions of the resulting selection by one unit-length dimension."]}, {"question": "I've spent entirely too long researching how to get two subplots to share the same y-axis with a single colorbar shared between the two in Matplotlib. ", "answers": ["Just place the colorbar in its own axis and use subplots_adjust to make room for it.", "You can simplify Joe Kington's code using the axparameter of figure.colorbar() with a list of axes.\nFrom the documentation:", "This solution does not require manual tweaking of axes locations or colorbar size, works with multi-row and single-row layouts, and works with tight_layout().  It is adapted from a gallery example, using ImageGrid from matplotlib's AxesGrid Toolbox.", "Using make_axes is even easier and gives a better result. It also provides possibilities to customise the positioning of the colorbar.\nAlso note the option of subplots to share x and y axes.", "As a beginner who stumbled across this thread, I'd like to add a python-for-dummies adaptation of abevieiramota's very neat answer (because I'm at the level that I had to look up 'ravel' to work out what their code was doing):"]}, {"question": "The above code generates a file, test.csv, with an extra \\r at each row, like so:", "answers": ["The official csv documentation recommends opening the file with newline='' on all platforms to disable universal newlines translation:", "While @john-machin gives a good answer, it's not always the best approach. For example, it doesn't work on Python 3 unless you encode all of your inputs to the CSV writer. Also, it doesn't address the issue if the script wants to use sys.stdout as the stream.", "In Python 3 (I haven't tried this in Python 2), you can also simply do", "You can introduce the  lineterminator='\\n' parameter in the csv writer command.", "You have to add attribute newline=\"\\n\" to open function like this:"]}, {"question": "I have a function called by the main program:", "answers": ["The other answers all point out that you should not catch generic exceptions, but no one seems to want to tell you why, which is essential to understanding when you can break the \"rule\". Here is an explanation. Basically, it's so that you don't hide:", "Get the name of the class that exception object belongs:", "You usually should not catch all possible exceptions with try: ... except as this is overly broad. Just catch those that are expected to happen for whatever reason. If you really must, for example if you want to find out more about some problem while debugging, you should do", "Most answers point to except (\u2026) as (\u2026): syntax (rightly so) but at the same time nobody wants to talk about an elephant in the room, where the elephant is sys.exc_info() function.\nFrom the documentation of sys module (emphasis mine):", "Unless somefunction is a very bad coded legacy function, you shouldn't need what you're asking."]}, {"question": "I've recently become interested in algorithms and have begun exploring them by writing a naive implementation and then optimizing it in various ways.", "answers": ["This one has been answered already here: Python memory profiler", "Python 3.4 includes a new module: tracemalloc. It provides detailed statistics about which code is allocating the most memory. Here's an example that displays the top three lines allocating memory.", "If you only want to look at the memory usage of an object, (answer to other question)", "Disclosure:", "Below is a simple function decorator which allows to track how much memory the process consumed before the function call, after the function call, and what is the difference:"]}, {"question": "Say I have a function:", "answers": ["I'd recommend reading that PEP the error gives you.  The problem is that your code is trying to use the ASCII encoding, but the pound symbol is not an ASCII character.  Try using UTF-8 encoding.  You can start by putting # -*- coding: utf-8 -*- at the top of your .py file.  To get more advanced, you can also define encodings on a string by string basis in your code.  However, if you are trying to put the pound sign literal in to your code, you'll need an encoding that supports it for the entire file.", "Adding the following two lines at the top of my .py script worked for me (first line was necessary):", "First add the # -*- coding: utf-8 -*- line to the beginning of the file and then use u'foo' for all your non-ASCII unicode data:", "The error message tells you exactly what's wrong. The Python interpreter needs to know the encoding of the non-ASCII character.", "Adding the following two lines in the script solved the issue for me."]}, {"question": "I have a DataFrame with four columns. I want to convert this DataFrame to a python dictionary. I want the elements of first column be keys and the elements of other columns in same row be values. ", "answers": ["The to_dict() method sets the column names as dictionary keys so you'll need to reshape your DataFrame slightly. Setting the 'ID' column as the index and then transposing the DataFrame is one way to achieve this.", "Should a dictionary like:", "Suppose your dataframe is as follows:", "Try to use Zip", "If you don't mind the dictionary values being tuples, you can use itertuples:"]}, {"question": "I would like to know how can I set a variable with another variable in jinja. I will explain, I have got a submenu and I would like show which link is active. I tried this:", "answers": ["{{ }} tells the template to print the value, this won't work in expressions like you're trying to do.  Instead, use the {% set %} template tag and then assign the value the same way you would in normal python code.", "Nice shorthand for Multiple variable assignments", "Just Set it up like this"]}, {"question": "I have a pandas dataframe in which one column of text strings contains comma-separated values. I want to split each CSV field and create a new row per entry (assume that CSV are clean and need only be split on ','). For example, a should become b:", "answers": ["UPDATE 3: it makes more sense to use Series.explode() / DataFrame.explode() methods (implemented in Pandas 0.25.0 and extended in Pandas 1.3.0 to support multi-column explode) as is shown in the usage example:", "After painful experimentation to find something faster than the accepted answer, I got this to work. It ran around 100x faster on the dataset I tried it on.", "Series and DataFrame methods define a .explode() method that explodes lists into separate rows. See the docs section on Exploding a list-like column.", "How about something like this:", "Here's a function I wrote for this common task. It's more efficient than the Series/stack methods. Column order and names are retained."]}, {"question": "I have a script reading in a csv file with very huge fields:", "answers": ["The csv file might contain very huge fields, therefore increase the field_size_limit:", "This could be because your CSV file has embedded single or double quotes. If your CSV file is tab-delimited try opening it as:", ".csv field sizes are controlled via [Python.Docs]: csv.field_size_limit([new_limit]) (emphasis is mine):", "Below is to check the current limit", "I just had this happen to me on a 'plain' CSV file. Some people might call it an invalid formatted file. No escape characters, no double quotes and delimiter was a semicolon."]}, {"question": "Given a dictionary { k1: v1, k2: v2 ... } I want to get { k1: f(v1), k2: f(v2) ... } provided I pass a function f.", "answers": ["There is no such function; the easiest way to do this is to use a dict comprehension:", "These toolz are great for this kind of simple yet repetitive logic.", "You can do this in-place, rather than create a new dict, which may be preferable for large dictionaries (if you do not need a copy).", "Due to PEP-0469 which renamed iteritems() to items() and PEP-3113 which removed Tuple parameter unpacking, in Python 3.x you should write Martijn Pieters\u2666 answer like this:", "While my original answer missed the point (by trying to solve this problem with the solution to Accessing key in factory of defaultdict), I have reworked it to propose an actual solution to the present question."]}, {"question": "In the Anaconda repository, there are two types of installers:", "answers": ["Per the original docs:", "The difference is that miniconda is just shipping the repository management system. So when you install it there is just the management system without packages. Whereas with Anaconda, it is like a distribution with some built in packages. ", "conda is both a command line tool, and a python package.", "Miniconda gives you the Python interpreter itself, along with a command-line tool called conda which operates as a cross-platform package manager geared toward Python packages, similar in spirit to the apt or yum tools that Linux users might be familiar with.", "The 2 in Anaconda2 means that the main version of Python will be 2.x rather than the 3.x installed in Anaconda3. The current release has Python 2.7.13."]}, {"question": "\nWant to improve this question? Update the question so it focuses on one problem only by editing this post.\r\n                ", "answers": ["argparse is the way to go. Here is a short summary of how to use it:", "This answer suggests optparse which is appropriate for older Python versions. For Python 2.7 and above, argparse replaces optparse. See this answer for more information.", "Since 2012 there is a very easy, powerful and really cool module for argument parsing called docopt. Here is an example taken from its documentation: ", "The new hip way is argparse for these reasons.  argparse > optparse > getopt", "I prefer Click. It abstracts managing options and allows \"(...) creating beautiful command line interfaces in a composable way with as little code as necessary\"."]}, {"question": "I am sketching the architecture for a set of programs that share various interrelated objects stored in a database. I want one of the programs to act as a service which provides a higher level interface for operations on these objects, and the other programs to access the objects through that service.", "answers": ["Yes you can. I do it using the pythoncom libraries that come included with ActivePython or can be installed with pywin32 (Python for Windows extensions).", "The simplest way is to use the: NSSM - the Non-Sucking Service Manager. Just download and unzip to a location of your choosing. It's a self-contained utility, around 300KB (much less than installing the entire pywin32 suite just for this purpose) and no \"installation\" is needed. The zip contains a 64-bit and a 32-bit version of the utility. Either should work well on current systems (you can use the 32-bit version to manage services on 64-bit systems).", "Although I upvoted the chosen answer a couple of weeks back, in the meantime I struggled a lot more with this topic. It feels like having a special Python installation and using special modules to run a script as a service is simply the wrong way. What about portability and such?", "The simplest way to achieve this is to use native command sc.exe:", "There are a couple alternatives for installing as a service virtually any Windows executable."]}, {"question": "I need to choose some elements from the given list, knowing their index. Let say I would like to create a new list, which contains element with index 1, 2, 5, from given list [-2, 1, 5, 3, 8, 5, 6]. What I did is:", "answers": ["You can use operator.itemgetter:", "Alternatives:", "Another solution could be via pandas Series:", "Basic and not very extensive testing comparing the execution time of the five supplied answers:", "Here's a simpler way:"]}, {"question": "Recently I started using Python3 and it's lack of xrange hurts.", "answers": ["Some performance measurements, using timeit instead of trying to do it manually with time.", "Python3's range is Python2's xrange. There's no need to wrap an iter around it. To get an actual list in Python3, you need to use list(range(...))", "Python 3's range type works just like Python 2's xrange. I'm not sure why you're seeing a slowdown, since the iterator returned by your xrange function is exactly what you'd get if you iterated over range directly.", "One way to fix up your python2 code is:", "xrange from Python 2 is a generator and implements iterator while range is just a function.\nIn Python3 I don't know why was dropped off the xrange."]}, {"question": "I have a Decimal('3.9') as part of an object, and wish to encode this to a JSON string which should look like {'x': 3.9}. I don't care about precision on the client side, so a float is fine.", "answers": ["Simplejson 2.1 and higher has native support for Decimal type:", "I would like to let everyone know that I tried Micha\u0142 Marczyk's answer on my web server that was running Python 2.6.5 and it worked fine. However, I upgraded to Python 2.7 and it stopped working. I tried to think of some sort of way to encode Decimal objects and this is what I came up with:", "How about subclassing json.JSONEncoder?", "The native Django option is missing so I'll add it for the next guy/gall that looks for it.", "In my Flask app, Which uses python 2.7.11, flask alchemy(with 'db.decimal' types), and Flask Marshmallow ( for 'instant' serializer and deserializer), i had this error, every time i did a GET or POST. The serializer and deserializer, failed to convert  Decimal types into any JSON identifiable format. "]}, {"question": "Here is my code,", "answers": ["As suggested by Mark Ransom, I found the right encoding for that problem. The encoding was \"ISO-8859-1\", so replacing open(\"u.item\", encoding=\"utf-8\") with open('u.item', encoding = \"ISO-8859-1\") will solve the problem.", "The following also worked for me. ISO\u00a08859-1 is going to save a lot, mainly if using Speech Recognition APIs.", "Your file doesn't actually contain UTF-8 encoded data; it contains some other encoding. Figure out what that encoding is and use it in the open call.", "Try this to read using Pandas:", "This works:"]}, {"question": "Is there a way to open a file for both reading and writing?", "answers": ["Here's how you read a file, and then write to it (overwriting any existing data), without closing and reopening:", "Summarize the I/O behaviors", "r+ is the canonical mode for reading and writing at the same time. This is not different from using the fopen() system call since file() / open() is just a tiny wrapper around this operating system call.", "I have tried something like this and it works as expected:"]}, {"question": "What do I have to do in Python to figure out which encoding a string has?", "answers": ["In Python 3, all strings are sequences of Unicode characters. There is a bytes type that holds raw bytes.", "You can use type or isinstance.", "In python 3.x all strings are sequences of Unicode characters. and doing the isinstance check for str (which means unicode string by default) should suffice.", "Unicode is not an encoding - to quote Kumar McMillan:", "If your code needs to be compatible with both Python 2 and Python 3, you can't directly use things like isinstance(s,bytes) or isinstance(s,unicode) without wrapping them in either try/except or a python version test, because bytes is undefined in Python 2 and unicode is undefined in Python 3."]}, {"question": "I want to call a C library from a Python application. I don't want to wrap the whole API, only the functions and datatypes that are relevant to my case. As I see it, I have three choices:", "answers": ["Warning: a Cython core developer's opinion ahead.", "ctypes is your best bet for getting it done quickly, and it's a pleasure to work with as you're still writing Python!", "Cython is a pretty cool tool in itself, well worth learning, and is surprisingly close to the Python syntax. If you do any scientific computing with Numpy, then Cython is the way to go because it integrates with Numpy for fast matrix operations.", "For calling a C library from a Python application there is also cffi which is a new alternative for ctypes. It brings a fresh look for FFI: ", "I'll throw another one out there: SWIG"]}]